
<!-- Action Buttons -->

<div class="flex flex-col gap-2 {% if links|length > 0 %} p-4 {% endif %} bg-gray-100 " 
     x-data="{ 
         contactModalOpen: false,
         subscriptionModalOpen: false,
         closeContactModal() { this.contactModalOpen = false; document.body.style.overflow = ''; },
         openContactModal() { this.contactModalOpen = true; this.subscriptionModalOpen = false; document.body.style.overflow = 'hidden'; },
         closeSubscriptionModal() { this.subscriptionModalOpen = false; document.body.style.overflow = ''; },
         openSubscriptionModal() { this.subscriptionModalOpen = true; this.contactModalOpen = false; document.body.style.overflow = 'hidden'; }
     }"
     @keydown.escape.window="closeContactModal(); closeSubscriptionModal()">
 
        <div class="flex flex-wrap gap-2 lg:gap-4"> 
        {% for link in links %}
            {% if link.type == 'cta'  %}
                {% if data_get(link, 'slug') == 'whatsapp' and link.active %}
                    <a href="https://wa.me/{{data_get(link, 'link')}}?text=السلام عليكم {{tenant('name')}}" target="_blank" class="flex-grow shrink bg-white border-2 border-{{ option('primaryColor', 'blue') }}-700 text-{{ option('primaryColor', 'blue') }}-900 flex items-center gap-x-2 justify-center py-3 px-4 rounded-lg font-medium hover:bg-{{ option('primaryColor', 'blue') }}-700 hover:text-white transition-colors duration-200">
                        {{icon('brand-whatsapp', 6)}}
                        ابدأ المحادثة    
                        {{icon('arrow-up-left', 6)}}
                    </a>
                {% endif %}
                {% if data_get(link, 'slug') == 'contact' and link.active %}
                    <button type="button" @click="openContactModal()" class="shrink flex-grow  bg-{{ option('primaryColor', 'blue') }}-700 hover:bg-{{ option('primaryColor', 'blue') }}-800 flex items-center justify-center gap-x-2 border-2 border-transparent text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200">
                        {{icon('phone-call', 6)}}
                        اتصل بنا
                    </button>
                {% endif %}
                {% if data_get(link, 'slug') == 'subscription' and link.active %}
                    <button type="button" @click="openSubscriptionModal()" class="shrink flex-grow  bg-{{ option('primaryColor', 'blue') }}-700 hover:bg-{{ option('primaryColor', 'blue') }}-800 flex items-center justify-center gap-x-2 border-2 border-transparent text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200">
                        {{icon('mail', 6)}}
                        اشترك الآن
                    </button>
                {% endif %}
            {% endif %}
        {% endfor %}
        {# </div> #}
  
 
        {# <div class="flex flex-wrap gap-2 lg:gap-4">  #}
        {% for link in links %}             
            {% if data_get(link, 'slug') starts with 'custom-' and link.active %}
                <a href="{{link.link}}" target="_blank" class="shrink flex-grow  bg-white border-2 border-{{ option('primaryColor', 'blue') }}-700 text-{{ option('primaryColor', 'blue') }}-900 flex items-center gap-x-2 justify-center py-3 px-4 rounded-lg font-medium hover:bg-{{ option('primaryColor', 'blue') }}-700 hover:text-white transition-colors duration-200">
                    {{icon('link', 6)}}
                    {% if data_get(link, 'meta.label') %}
                        {{data_get(link, 'meta.label')}}
                    {% else %}
                        رابط
                    {% endif %}
                    {{icon('arrow-up-left', 6)}}

                </a>
            {% endif %}
        {% endfor %}
        </div>
  
 
    <!-- Modal Overlay -->
    <div 
        x-show="contactModalOpen" 
        x-cloak
        @click="closeContactModal()"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900 bg-opacity-75 backdrop-blur-sm"
        style="display: none;"
    >
        <!-- Modal Content -->
        <div 
            @click.stop
            x-show="contactModalOpen"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95 translate-y-4"
            x-transition:enter-end="opacity-100 scale-100 translate-y-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 scale-100 translate-y-0"
            x-transition:leave-end="opacity-0 scale-95 translate-y-4"
            class="relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden"
            style="display: none;"
        >
            <!-- Close Button -->
            <button 
                @click="closeContactModal()"
                type="button"
                class="absolute top-4 left-4 z-10 rounded-full bg-gray-100 p-2 text-gray-500 hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-{{ option('primaryColor', 'blue') }}-500 focus:ring-offset-2 transition-colors duration-200"
                aria-label="إغلاق"
            >
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            
            <!-- Modal Body -->
            <div class="overflow-y-auto max-h-[90vh]">
                {{render('contact-form-modal')}}
            </div>
        </div>
    </div>

    <!-- Subscription Modal Overlay -->
    <div 
        x-show="subscriptionModalOpen" 
        x-cloak
        @click="closeSubscriptionModal()"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900 bg-opacity-75 backdrop-blur-sm"
        style="display: none;"
    >
        <!-- Subscription Modal Content -->
        <div 
            @click.stop
            x-show="subscriptionModalOpen"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95 translate-y-4"
            x-transition:enter-end="opacity-100 scale-100 translate-y-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 scale-100 translate-y-0"
            x-transition:leave-end="opacity-0 scale-95 translate-y-4"
            class="relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden"
            style="display: none;"
        >
            <!-- Close Button -->
            <button 
                @click="closeSubscriptionModal()"
                type="button"
                class="absolute top-4 left-4 z-10 rounded-full bg-gray-100 p-2 text-gray-500 hover:bg-gray-200 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-{{ option('primaryColor', 'blue') }}-500 focus:ring-offset-2 transition-colors duration-200"
                aria-label="إغلاق"
            >
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            
            <!-- Modal Body -->
            <div class="overflow-y-auto max-h-[90vh]">
                {{render('subscription-form-modal')}}
            </div>
        </div>
    </div>
</div>
 