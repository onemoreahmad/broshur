var IP=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);import{a as He}from"./index-ngrFHoWO.js";var lme=IP((fi,pi)=>{function AP(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ln(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const De={},ur=[],rn=()=>{},or=()=>!1,jo=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Bh=n=>n.startsWith("onUpdate:"),Ve=Object.assign,Lh=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},PP=Object.prototype.hasOwnProperty,Ge=(n,e)=>PP.call(n,e),le=Array.isArray,dr=n=>Or(n)==="[object Map]",zo=n=>Or(n)==="[object Set]",Im=n=>Or(n)==="[object Date]",zC=n=>Or(n)==="[object RegExp]",ye=n=>typeof n=="function",Ee=n=>typeof n=="string",Hn=n=>typeof n=="symbol",Xe=n=>n!==null&&typeof n=="object",Nh=n=>(Xe(n)||ye(n))&&ye(n.then)&&ye(n.catch),n1=Object.prototype.toString,Or=n=>n1.call(n),WC=n=>Or(n).slice(8,-1),Gc=n=>Or(n)==="[object Object]",Vh=n=>Ee(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,$s=ln(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qC=ln("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Dh=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},OP=/-\w/g,ft=Dh(n=>n.replace(OP,e=>e.slice(1).toUpperCase())),MP=/\B([A-Z])/g,xn=Dh(n=>n.replace(MP,"-$1").toLowerCase()),Wo=Dh(n=>n.charAt(0).toUpperCase()+n.slice(1)),hr=Dh(n=>n?`on${Wo(n)}`:""),Cn=(n,e)=>!Object.is(n,e),fr=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},i1=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},rc=n=>{const e=parseFloat(n);return isNaN(e)?n:e},ac=n=>{const e=Ee(n)?Number(n):NaN;return isNaN(e)?n:e};let ow;const Kc=()=>ow||(ow=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),RP=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function BP(n){return RP.test(n)?`__props.${n}`:`__props[${JSON.stringify(n)}]`}function LP(n,e){return n+JSON.stringify(e,(t,i)=>typeof i=="function"?i.toString():i)}const NP={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},VP={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"CACHED",[-2]:"BAIL"},DP={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},FP={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},$P={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},UP="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",s1=ln(UP),HP=s1,rw=2;function GC(n,e=0,t=n.length){if(e=Math.max(0,Math.min(e,n.length)),t=Math.max(0,Math.min(t,n.length)),e>t)return"";let i=n.split(/(\r?\n)/);const s=i.filter((a,l)=>l%2===1);i=i.filter((a,l)=>l%2===0);let o=0;const r=[];for(let a=0;a<i.length;a++)if(o+=i[a].length+(s[a]&&s[a].length||0),o>=e){for(let l=a-rw;l<=a+rw||t>o;l++){if(l<0||l>=i.length)continue;const c=l+1;r.push(`${c}${" ".repeat(Math.max(3-String(c).length,0))}|  ${i[l]}`);const u=i[l].length,d=s[l]&&s[l].length||0;if(l===a){const h=e-(o-(u+d)),f=Math.max(1,t>o?u-h:t-e);r.push("   |  "+" ".repeat(h)+"^".repeat(f))}else if(l>a){if(t>o){const h=Math.max(Math.min(t-o,u),1);r.push("   |  "+"^".repeat(h))}o+=u+d}}break}return r.join(`
`)}function Xa(n){if(le(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=Ee(i)?o1(i):Xa(i);if(s)for(const o in s)e[o]=s[o]}return e}else if(Ee(n)||Xe(n))return n}const jP=/;(?![^(]*\))/g,zP=/:([^]+)/,WP=/\/\*[^]*?\*\//g;function o1(n){const e={};return n.replace(WP,"").split(jP).forEach(t=>{if(t){const i=t.split(zP);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function qP(n){if(!n)return"";if(Ee(n))return n;let e="";for(const t in n){const i=n[t];if(Ee(i)||typeof i=="number"){const s=t.startsWith("--")?t:xn(t);e+=`${s}:${i};`}}return e}function rt(n){let e="";if(Ee(n))e=n;else if(le(n))for(let t=0;t<n.length;t++){const i=rt(n[t]);i&&(e+=i+" ")}else if(Xe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function KC(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Ee(e)&&(n.class=rt(e)),t&&(n.style=Xa(t)),n}const GP="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",KP="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",XP="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",ZP="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",XC=ln(GP),ZC=ln(KP),JC=ln(XP),YC=ln(ZP),QC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eE=ln(QC),JP=ln(QC+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function r1(n){return!!n||n===""}const YP=/[>/="'\u0009\u000a\u000c\u0020]/,ap={};function QP(n){if(ap.hasOwnProperty(n))return ap[n];const e=YP.test(n);return e&&console.error(`unsafe attribute name: ${n}`),ap[n]=!e}const e7={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},t7=ln("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),n7=ln("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),i7=ln("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function s7(n){if(n==null)return!1;const e=typeof n;return e==="string"||e==="number"||e==="boolean"}const o7=/["'&<>]/;function r7(n){const e=""+n,t=o7.exec(e);if(!t)return e;let i="",s,o,r=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==o&&(i+=e.slice(r,o)),r=o+1,i+=s}return r!==o?i+e.slice(r,o):i}const a7=/^-?>|<!--|-->|--!>|<!-$/g;function l7(n){return n.replace(a7,"")}const tE=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function c7(n,e){return n.replace(tE,t=>e?t==='"'?'\\\\\\"':`\\\\${t}`:`\\${t}`)}function u7(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=Ws(n[i],e[i]);return t}function Ws(n,e){if(n===e)return!0;let t=Im(n),i=Im(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=Hn(n),i=Hn(e),t||i)return n===e;if(t=le(n),i=le(e),t||i)return t&&i?u7(n,e):!1;if(t=Xe(n),i=Xe(e),t||i){if(!t||!i)return!1;const s=Object.keys(n).length,o=Object.keys(e).length;if(s!==o)return!1;for(const r in n){const a=n.hasOwnProperty(r),l=e.hasOwnProperty(r);if(a&&!l||!a&&l||!Ws(n[r],e[r]))return!1}}return String(n)===String(e)}function Xc(n,e){return n.findIndex(t=>Ws(t,e))}const nE=n=>!!(n&&n.__v_isRef===!0),te=n=>Ee(n)?n:n==null?"":le(n)||Xe(n)&&(n.toString===n1||!ye(n.toString))?nE(n)?te(n.value):JSON.stringify(n,iE,2):String(n),iE=(n,e)=>nE(e)?iE(n,e.value):dr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],o)=>(t[lp(i,o)+" =>"]=s,t),{})}:zo(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>lp(t))}:Hn(e)?lp(e):Xe(e)&&!le(e)&&!Gc(e)?String(e):e,lp=(n,e="")=>{var t;return Hn(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};function sE(n){return n==null?"initial":typeof n=="string"?n===""?" ":n:String(n)}const d7=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:ur,EMPTY_OBJ:De,NO:or,NOOP:rn,PatchFlagNames:VP,PatchFlags:NP,ShapeFlags:DP,SlotFlags:FP,camelize:ft,capitalize:Wo,cssVarNameEscapeSymbolsRE:tE,def:i1,escapeHtml:r7,escapeHtmlComment:l7,extend:Ve,genCacheKey:LP,genPropsAccessExp:BP,generateCodeFrame:GC,getEscapedCssVarName:c7,getGlobalThis:Kc,hasChanged:Cn,hasOwn:Ge,hyphenate:xn,includeBooleanAttr:r1,invokeArrayFns:fr,isArray:le,isBooleanAttr:JP,isBuiltInDirective:qC,isDate:Im,isFunction:ye,isGloballyAllowed:s1,isGloballyWhitelisted:HP,isHTMLTag:XC,isIntegerKey:Vh,isKnownHtmlAttr:t7,isKnownMathMLAttr:i7,isKnownSvgAttr:n7,isMap:dr,isMathMLTag:JC,isModelListener:Bh,isObject:Xe,isOn:jo,isPlainObject:Gc,isPromise:Nh,isRegExp:zC,isRenderableAttrValue:s7,isReservedProp:$s,isSSRSafeAttrName:QP,isSVGTag:ZC,isSet:zo,isSpecialBooleanAttr:eE,isString:Ee,isSymbol:Hn,isVoidTag:YC,looseEqual:Ws,looseIndexOf:Xc,looseToNumber:rc,makeMap:ln,normalizeClass:rt,normalizeCssVarValue:sE,normalizeProps:KC,normalizeStyle:Xa,objectToString:n1,parseStringStyle:o1,propsToAttrMap:e7,remove:Lh,slotFlagsText:$P,stringifyStyle:qP,toDisplayString:te,toHandlerKey:hr,toNumber:ac,toRawType:WC,toTypeString:Or},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _n;class a1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_n,!e&&_n&&(this.index=(_n.scopes||(_n.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=_n;try{return _n=this,e()}finally{_n=t}}}on(){++this._on===1&&(this.prevScope=_n,_n=this)}off(){this._on>0&&--this._on===0&&(_n=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function l1(n){return new a1(n)}function c1(){return _n}function oE(n,e=!1){_n&&_n.cleanups.push(n)}let dt;const cp=new WeakSet;class lc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_n&&_n.active&&_n.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cp.has(this)&&(cp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||aE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,aw(this),lE(this);const e=dt,t=ji;dt=this,ji=!0;try{return this.fn()}finally{cE(this),dt=e,ji=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)h1(e);this.deps=this.depsTail=void 0,aw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Am(this)&&this.run()}get dirty(){return Am(this)}}let rE=0,Ul,Hl;function aE(n,e=!1){if(n.flags|=8,e){n.next=Hl,Hl=n;return}n.next=Ul,Ul=n}function u1(){rE++}function d1(){if(--rE>0)return;if(Hl){let e=Hl;for(Hl=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ul;){let e=Ul;for(Ul=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function lE(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cE(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),h1(i),h7(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function Am(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(uE(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function uE(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===cc)||(n.globalVersion=cc,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Am(n))))return;n.flags|=2;const e=n.dep,t=dt,i=ji;dt=n,ji=!0;try{lE(n);const s=n.fn(n._value);(e.version===0||Cn(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{dt=t,ji=i,cE(n),n.flags&=-3}}function h1(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)h1(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function h7(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function f7(n,e){n.effect instanceof lc&&(n=n.effect.fn);const t=new lc(n);e&&Ve(t,e);try{t.run()}catch(s){throw t.stop(),s}const i=t.run.bind(t);return i.effect=t,i}function p7(n){n.effect.stop()}let ji=!0;const dE=[];function qs(){dE.push(ji),ji=!1}function Gs(){const n=dE.pop();ji=n===void 0?!0:n}function aw(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=dt;dt=void 0;try{e()}finally{dt=t}}}let cc=0,m7=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Fh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!dt||!ji||dt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==dt)t=this.activeLink=new m7(dt,this),dt.deps?(t.prevDep=dt.depsTail,dt.depsTail.nextDep=t,dt.depsTail=t):dt.deps=dt.depsTail=t,hE(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=dt.depsTail,t.nextDep=void 0,dt.depsTail.nextDep=t,dt.depsTail=t,dt.deps===t&&(dt.deps=i)}return t}trigger(e){this.version++,cc++,this.notify(e)}notify(e){u1();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{d1()}}}function hE(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)hE(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Ld=new WeakMap,pr=Symbol(""),Pm=Symbol(""),uc=Symbol("");function En(n,e,t){if(ji&&dt){let i=Ld.get(n);i||Ld.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new Fh),s.map=i,s.key=t),s.track()}}function Ls(n,e,t,i,s,o){const r=Ld.get(n);if(!r){cc++;return}const a=l=>{l&&l.trigger()};if(u1(),e==="clear")r.forEach(a);else{const l=le(n),c=l&&Vh(t);if(l&&t==="length"){const u=Number(i);r.forEach((d,h)=>{(h==="length"||h===uc||!Hn(h)&&h>=u)&&a(d)})}else switch((t!==void 0||r.has(void 0))&&a(r.get(t)),c&&a(r.get(uc)),e){case"add":l?c&&a(r.get("length")):(a(r.get(pr)),dr(n)&&a(r.get(Pm)));break;case"delete":l||(a(r.get(pr)),dr(n)&&a(r.get(Pm)));break;case"set":dr(n)&&a(r.get(pr));break}}d1()}function g7(n,e){const t=Ld.get(n);return t&&t.get(e)}function zr(n){const e=$e(n);return e===n?e:(En(e,"iterate",uc),mi(n)?e:e.map(dn))}function $h(n){return En(n=$e(n),"iterate",uc),n}const b7={__proto__:null,[Symbol.iterator](){return up(this,Symbol.iterator,dn)},concat(...n){return zr(this).concat(...n.map(e=>le(e)?zr(e):e))},entries(){return up(this,"entries",n=>(n[1]=dn(n[1]),n))},every(n,e){return ys(this,"every",n,e,void 0,arguments)},filter(n,e){return ys(this,"filter",n,e,t=>t.map(dn),arguments)},find(n,e){return ys(this,"find",n,e,dn,arguments)},findIndex(n,e){return ys(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return ys(this,"findLast",n,e,dn,arguments)},findLastIndex(n,e){return ys(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return ys(this,"forEach",n,e,void 0,arguments)},includes(...n){return dp(this,"includes",n)},indexOf(...n){return dp(this,"indexOf",n)},join(n){return zr(this).join(n)},lastIndexOf(...n){return dp(this,"lastIndexOf",n)},map(n,e){return ys(this,"map",n,e,void 0,arguments)},pop(){return gl(this,"pop")},push(...n){return gl(this,"push",n)},reduce(n,...e){return lw(this,"reduce",n,e)},reduceRight(n,...e){return lw(this,"reduceRight",n,e)},shift(){return gl(this,"shift")},some(n,e){return ys(this,"some",n,e,void 0,arguments)},splice(...n){return gl(this,"splice",n)},toReversed(){return zr(this).toReversed()},toSorted(n){return zr(this).toSorted(n)},toSpliced(...n){return zr(this).toSpliced(...n)},unshift(...n){return gl(this,"unshift",n)},values(){return up(this,"values",dn)}};function up(n,e,t){const i=$h(n),s=i[e]();return i!==n&&!mi(n)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.done||(o.value=t(o.value)),o}),s}const v7=Array.prototype;function ys(n,e,t,i,s,o){const r=$h(n),a=r!==n&&!mi(n),l=r[e];if(l!==v7[e]){const d=l.apply(n,o);return a?dn(d):d}let c=t;r!==n&&(a?c=function(d,h){return t.call(this,dn(d),h,n)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,n)}));const u=l.call(r,c,i);return a&&s?s(u):u}function lw(n,e,t,i){const s=$h(n);let o=t;return s!==n&&(mi(n)?t.length>3&&(o=function(r,a,l){return t.call(this,r,a,l,n)}):o=function(r,a,l){return t.call(this,r,dn(a),l,n)}),s[e](o,...i)}function dp(n,e,t){const i=$e(n);En(i,"iterate",uc);const s=i[e](...t);return(s===-1||s===!1)&&jh(t[0])?(t[0]=$e(t[0]),i[e](...t)):s}function gl(n,e,t=[]){qs(),u1();const i=$e(n)[e].apply(n,t);return d1(),Gs(),i}const w7=ln("__proto__,__v_isRef,__isVue"),fE=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Hn));function _7(n){Hn(n)||(n=String(n));const e=$e(this);return En(e,"has",n),e.hasOwnProperty(n)}class pE{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return o;if(t==="__v_raw")return i===(s?o?_E:wE:o?vE:bE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=le(e);if(!s){let l;if(r&&(l=b7[t]))return l;if(t==="hasOwnProperty")return _7}const a=Reflect.get(e,t,kt(e)?e:i);if((Hn(t)?fE.has(t):w7(t))||(s||En(e,"get",t),o))return a;if(kt(a)){const l=r&&Vh(t)?a:a.value;return s&&Xe(l)?Nd(l):l}return Xe(a)?s?Nd(a):Za(a):a}}class mE extends pE{constructor(e=!1){super(!1,e)}set(e,t,i,s){let o=e[t];if(!this._isShallow){const l=Ks(o);if(!mi(i)&&!Ks(i)&&(o=$e(o),i=$e(i)),!le(e)&&kt(o)&&!kt(i))return l||(o.value=i),!0}const r=le(e)&&Vh(t)?Number(t)<e.length:Ge(e,t),a=Reflect.set(e,t,i,kt(e)?e:s);return e===$e(s)&&(r?Cn(i,o)&&Ls(e,"set",t,i):Ls(e,"add",t,i)),a}deleteProperty(e,t){const i=Ge(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Ls(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!Hn(t)||!fE.has(t))&&En(e,"has",t),i}ownKeys(e){return En(e,"iterate",le(e)?"length":pr),Reflect.ownKeys(e)}}class gE extends pE{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const y7=new mE,k7=new gE,C7=new mE(!0),E7=new gE(!0),Om=n=>n,xu=n=>Reflect.getPrototypeOf(n);function x7(n,e,t){return function(...i){const s=this.__v_raw,o=$e(s),r=dr(o),a=n==="entries"||n===Symbol.iterator&&r,l=n==="keys"&&r,c=s[n](...i),u=t?Om:e?Vd:dn;return!e&&En(o,"iterate",l?Pm:pr),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Tu(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function T7(n,e){const t={get(s){const o=this.__v_raw,r=$e(o),a=$e(s);n||(Cn(s,a)&&En(r,"get",s),En(r,"get",a));const{has:l}=xu(r),c=e?Om:n?Vd:dn;if(l.call(r,s))return c(o.get(s));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(s)},get size(){const s=this.__v_raw;return!n&&En($e(s),"iterate",pr),s.size},has(s){const o=this.__v_raw,r=$e(o),a=$e(s);return n||(Cn(s,a)&&En(r,"has",s),En(r,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){const r=this,a=r.__v_raw,l=$e(a),c=e?Om:n?Vd:dn;return!n&&En(l,"iterate",pr),a.forEach((u,d)=>s.call(o,c(u),c(d),r))}};return Ve(t,n?{add:Tu("add"),set:Tu("set"),delete:Tu("delete"),clear:Tu("clear")}:{add(s){!e&&!mi(s)&&!Ks(s)&&(s=$e(s));const o=$e(this);return xu(o).has.call(o,s)||(o.add(s),Ls(o,"add",s,s)),this},set(s,o){!e&&!mi(o)&&!Ks(o)&&(o=$e(o));const r=$e(this),{has:a,get:l}=xu(r);let c=a.call(r,s);c||(s=$e(s),c=a.call(r,s));const u=l.call(r,s);return r.set(s,o),c?Cn(o,u)&&Ls(r,"set",s,o):Ls(r,"add",s,o),this},delete(s){const o=$e(this),{has:r,get:a}=xu(o);let l=r.call(o,s);l||(s=$e(s),l=r.call(o,s)),a&&a.call(o,s);const c=o.delete(s);return l&&Ls(o,"delete",s,void 0),c},clear(){const s=$e(this),o=s.size!==0,r=s.clear();return o&&Ls(s,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=x7(s,n,e)}),t}function Uh(n,e){const t=T7(n,e);return(i,s,o)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Ge(t,s)&&s in i?t:i,s,o)}const S7={get:Uh(!1,!1)},I7={get:Uh(!1,!0)},A7={get:Uh(!0,!1)},P7={get:Uh(!0,!0)},bE=new WeakMap,vE=new WeakMap,wE=new WeakMap,_E=new WeakMap;function O7(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function M7(n){return n.__v_skip||!Object.isExtensible(n)?0:O7(WC(n))}function Za(n){return Ks(n)?n:Hh(n,!1,y7,S7,bE)}function f1(n){return Hh(n,!1,C7,I7,vE)}function Nd(n){return Hh(n,!0,k7,A7,wE)}function R7(n){return Hh(n,!0,E7,P7,_E)}function Hh(n,e,t,i,s){if(!Xe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const o=M7(n);if(o===0)return n;const r=s.get(n);if(r)return r;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function zi(n){return Ks(n)?zi(n.__v_raw):!!(n&&n.__v_isReactive)}function Ks(n){return!!(n&&n.__v_isReadonly)}function mi(n){return!!(n&&n.__v_isShallow)}function jh(n){return n?!!n.__v_raw:!1}function $e(n){const e=n&&n.__v_raw;return e?$e(e):n}function zh(n){return!Ge(n,"__v_skip")&&Object.isExtensible(n)&&i1(n,"__v_skip",!0),n}const dn=n=>Xe(n)?Za(n):n,Vd=n=>Xe(n)?Nd(n):n;function kt(n){return n?n.__v_isRef===!0:!1}function X(n){return yE(n,!1)}function p1(n){return yE(n,!0)}function yE(n,e){return kt(n)?n:new B7(n,e)}class B7{constructor(e,t){this.dep=new Fh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:$e(e),this._value=t?e:dn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||mi(e)||Ks(e);e=i?e:$e(e),Cn(e,t)&&(this._rawValue=e,this._value=i?e:dn(e),this.dep.trigger())}}function L7(n){n.dep&&n.dep.trigger()}function pe(n){return kt(n)?n.value:n}function kE(n){return ye(n)?n():pe(n)}const N7={get:(n,e,t)=>e==="__v_raw"?n:pe(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return kt(s)&&!kt(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function m1(n){return zi(n)?n:new Proxy(n,N7)}class V7{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Fh,{get:i,set:s}=e(t.track.bind(t),t.trigger.bind(t));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function CE(n){return new V7(n)}function EE(n){const e=le(n)?new Array(n.length):{};for(const t in n)e[t]=TE(n,t);return e}class D7{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return g7($e(this._object),this._key)}}class F7{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function xE(n,e,t){return kt(n)?n:ye(n)?new F7(n):Xe(n)&&arguments.length>1?TE(n,e,t):X(n)}function TE(n,e,t){const i=n[e];return kt(i)?i:new D7(n,e,t)}class $7{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Fh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&dt!==this)return aE(this,!0),!0}get value(){const e=this.dep.track();return uE(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function U7(n,e,t=!1){let i,s;return ye(n)?i=n:(i=n.get,s=n.set),new $7(i,s,t)}const H7={GET:"get",HAS:"has",ITERATE:"iterate"},j7={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Su={},Dd=new WeakMap;let _o;function z7(){return _o}function SE(n,e=!1,t=_o){if(t){let i=Dd.get(t);i||Dd.set(t,i=[]),i.push(n)}}function W7(n,e,t=De){const{immediate:i,deep:s,once:o,scheduler:r,augmentJob:a,call:l}=t,c=w=>s?w:mi(w)||s===!1||s===0?Ns(w,1):Ns(w);let u,d,h,f,p=!1,g=!1;if(kt(n)?(d=()=>n.value,p=mi(n)):zi(n)?(d=()=>c(n),p=!0):le(n)?(g=!0,p=n.some(w=>zi(w)||mi(w)),d=()=>n.map(w=>{if(kt(w))return w.value;if(zi(w))return c(w);if(ye(w))return l?l(w,2):w()})):ye(n)?e?d=l?()=>l(n,2):n:d=()=>{if(h){qs();try{h()}finally{Gs()}}const w=_o;_o=u;try{return l?l(n,3,[f]):n(f)}finally{_o=w}}:d=rn,e&&s){const w=d,C=s===!0?1/0:s;d=()=>Ns(w(),C)}const y=c1(),k=()=>{u.stop(),y&&y.active&&Lh(y.effects,u)};if(o&&e){const w=e;e=(...C)=>{w(...C),k()}}let v=g?new Array(n.length).fill(Su):Su;const b=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(e){const C=u.run();if(s||p||(g?C.some((E,I)=>Cn(E,v[I])):Cn(C,v))){h&&h();const E=_o;_o=u;try{const I=[C,v===Su?void 0:g&&v[0]===Su?[]:v,f];v=C,l?l(e,3,I):e(...I)}finally{_o=E}}}else u.run()};return a&&a(b),u=new lc(d),u.scheduler=r?()=>r(b,!1):b,f=w=>SE(w,!1,u),h=u.onStop=()=>{const w=Dd.get(u);if(w){if(l)l(w,4);else for(const C of w)C();Dd.delete(u)}},e?i?b(!0):v=u.run():r?r(b.bind(null,!0),!0):u.run(),k.pause=u.pause.bind(u),k.resume=u.resume.bind(u),k.stop=k,k}function Ns(n,e=1/0,t){if(e<=0||!Xe(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,kt(n))Ns(n.value,e,t);else if(le(n))for(let i=0;i<n.length;i++)Ns(n[i],e,t);else if(zo(n)||dr(n))n.forEach(i=>{Ns(i,e,t)});else if(Gc(n)){for(const i in n)Ns(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&Ns(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const IE=[];function q7(n){IE.push(n)}function G7(){IE.pop()}function K7(n,e){}const X7={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},Z7={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Ja(n,e,t,i){try{return i?n(...i):n()}catch(s){Mr(s,e,t)}}function Ti(n,e,t,i){if(ye(n)){const s=Ja(n,e,t,i);return s&&Nh(s)&&s.catch(o=>{Mr(o,e,t)}),s}if(le(n)){const s=[];for(let o=0;o<n.length;o++)s.push(Ti(n[o],e,t,i));return s}}function Mr(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||De;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}a=a.parent}if(o){qs(),Ja(o,null,10,[n,l,c]),Gs();return}}J7(n,t,s,i,r)}function J7(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const Ln=[];let rs=-1;const _a=[];let yo=null,aa=0;const AE=Promise.resolve();let Fd=null;function Ya(n){const e=Fd||AE;return n?e.then(this?n.bind(this):n):e}function Y7(n){let e=rs+1,t=Ln.length;for(;e<t;){const i=e+t>>>1,s=Ln[i],o=hc(s);o<n||o===n&&s.flags&2?e=i+1:t=i}return e}function g1(n){if(!(n.flags&1)){const e=hc(n),t=Ln[Ln.length-1];!t||!(n.flags&2)&&e>=hc(t)?Ln.push(n):Ln.splice(Y7(e),0,n),n.flags|=1,PE()}}function PE(){Fd||(Fd=AE.then(OE))}function dc(n){le(n)?_a.push(...n):yo&&n.id===-1?yo.splice(aa+1,0,n):n.flags&1||(_a.push(n),n.flags|=1),PE()}function cw(n,e,t=rs+1){for(;t<Ln.length;t++){const i=Ln[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Ln.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function $d(n){if(_a.length){const e=[...new Set(_a)].sort((t,i)=>hc(t)-hc(i));if(_a.length=0,yo){yo.push(...e);return}for(yo=e,aa=0;aa<yo.length;aa++){const t=yo[aa];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}yo=null,aa=0}}const hc=n=>n.id==null?n.flags&2?-1:1/0:n.id;function OE(n){try{for(rs=0;rs<Ln.length;rs++){const e=Ln[rs];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ja(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rs<Ln.length;rs++){const e=Ln[rs];e&&(e.flags&=-2)}rs=-1,Ln.length=0,$d(),Fd=null,(Ln.length||_a.length)&&OE()}}let la,Iu=[];function ME(n,e){var t,i;la=n,la?(la.enabled=!0,Iu.forEach(({event:s,args:o})=>la.emit(s,...o)),Iu=[]):typeof window<"u"&&window.HTMLElement&&!((i=(t=window.navigator)==null?void 0:t.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{ME(o,e)}),setTimeout(()=>{la||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Iu=[])},3e3)):Iu=[]}let fn=null,Wh=null;function fc(n){const e=fn;return fn=n,Wh=n&&n.type.__scopeId||null,e}function Q7(n){Wh=n}function e6(){Wh=null}const t6=n=>Le;function Le(n,e=fn,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&gc(-1);const o=fc(e);let r;try{r=n(...s)}finally{fc(o),i._d&&gc(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function vt(n,e){if(fn===null)return n;const t=Qc(fn),i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[o,r,a,l=De]=e[s];o&&(ye(o)&&(o={mounted:o,updated:o}),o.deep&&Ns(r),i.push({dir:o,instance:t,value:r,oldValue:void 0,arg:a,modifiers:l}))}return n}function ls(n,e,t,i){const s=n.dirs,o=e&&e.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(qs(),Ti(l,t,8,[n.el,a,n,e]),Gs())}}const RE=Symbol("_vte"),BE=n=>n.__isTeleport,jl=n=>n&&(n.disabled||n.disabled===""),uw=n=>n&&(n.defer||n.defer===""),dw=n=>typeof SVGElement<"u"&&n instanceof SVGElement,hw=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Mm=(n,e)=>{const t=n&&n.to;return Ee(t)?e?e(t):null:t},LE={name:"Teleport",__isTeleport:!0,process(n,e,t,i,s,o,r,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:g,createComment:y}}=c,k=jl(e.props);let{shapeFlag:v,children:b,dynamicChildren:w}=e;if(n==null){const C=e.el=g(""),E=e.anchor=g("");f(C,t,i),f(E,t,i);const I=(_,S)=>{v&16&&u(b,_,S,s,o,r,a,l)},x=()=>{const _=e.target=Mm(e.props,p),S=NE(_,e,g,f);_&&(r!=="svg"&&dw(_)?r="svg":r!=="mathml"&&hw(_)&&(r="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(_),k||(I(_,S),ld(e,!1)))};k&&(I(t,E),ld(e,!0)),uw(e.props)?(e.el.__isMounted=!1,Zt(()=>{x(),delete e.el.__isMounted},o)):x()}else{if(uw(e.props)&&n.el.__isMounted===!1){Zt(()=>{LE.process(n,e,t,i,s,o,r,a,l,c)},o);return}e.el=n.el,e.targetStart=n.targetStart;const C=e.anchor=n.anchor,E=e.target=n.target,I=e.targetAnchor=n.targetAnchor,x=jl(n.props),_=x?t:E,S=x?C:I;if(r==="svg"||dw(E)?r="svg":(r==="mathml"||hw(E))&&(r="mathml"),w?(h(n.dynamicChildren,w,_,s,o,r,a),O1(n,e,!0)):l||d(n,e,_,S,s,o,r,a,!1),k)x?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Au(e,t,C,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const R=e.target=Mm(e.props,p);R&&Au(e,R,null,c,0)}else x&&Au(e,E,I,c,1);ld(e,k)}},remove(n,e,t,{um:i,o:{remove:s}},o){const{shapeFlag:r,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=n;if(d&&(s(c),s(u)),o&&s(l),r&16){const f=o||!jl(h);for(let p=0;p<a.length;p++){const g=a[p];i(g,e,t,f,!!g.dynamicChildren)}}},move:Au,hydrate:n6};function Au(n,e,t,{o:{insert:i},m:s},o=2){o===0&&i(n.targetAnchor,e,t);const{el:r,anchor:a,shapeFlag:l,children:c,props:u}=n,d=o===2;if(d&&i(r,e,t),(!d||jl(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,t,2);d&&i(a,e,t)}function n6(n,e,t,i,s,o,{o:{nextSibling:r,parentNode:a,querySelector:l,insert:c,createText:u}},d){function h(g,y,k,v){y.anchor=d(r(g),y,a(g),t,i,s,o),y.targetStart=k,y.targetAnchor=v}const f=e.target=Mm(e.props,l),p=jl(e.props);if(f){const g=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)h(n,e,g,g&&r(g));else{e.anchor=r(n);let y=g;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,f._lpa=e.targetAnchor&&r(e.targetAnchor);break}}y=r(y)}e.targetAnchor||NE(f,e,u,c),d(g&&r(g),e,f,t,i,s,o)}ld(e,p)}else p&&e.shapeFlag&16&&h(n,e,n,r(n));return e.anchor&&r(e.anchor)}const i6=LE;function ld(n,e){const t=n.ctx;if(t&&t.ut){let i,s;for(e?(i=n.el,s=n.anchor):(i=n.targetStart,s=n.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function NE(n,e,t,i){const s=e.targetStart=t(""),o=e.targetAnchor=t("");return s[RE]=o,n&&(i(s,n),i(o,n)),o}const Ms=Symbol("_leaveCb"),Pu=Symbol("_enterCb");function b1(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ct(()=>{n.isMounted=!0}),Jc(()=>{n.isUnmounting=!0}),n}const _i=[Function,Array],v1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_i,onEnter:_i,onAfterEnter:_i,onEnterCancelled:_i,onBeforeLeave:_i,onLeave:_i,onAfterLeave:_i,onLeaveCancelled:_i,onBeforeAppear:_i,onAppear:_i,onAfterAppear:_i,onAppearCancelled:_i},VE=n=>{const e=n.subTree;return e.component?VE(e.component):e},s6={name:"BaseTransition",props:v1,setup(n,{slots:e}){const t=jn(),i=b1();return()=>{const s=e.default&&qh(e.default(),!0);if(!s||!s.length)return;const o=DE(s),r=$e(n),{mode:a}=r;if(i.isLeaving)return hp(o);const l=fw(o);if(!l)return hp(o);let c=Aa(l,r,i,t,d=>c=d);l.type!==$t&&Xs(l,c);let u=t.subTree&&fw(t.subTree);if(u&&u.type!==$t&&!$i(u,l)&&VE(t).type!==$t){let d=Aa(u,r,i,t);if(Xs(u,d),a==="out-in"&&l.type!==$t)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},hp(o);a==="in-out"&&l.type!==$t?d.delayLeave=(h,f,p)=>{const g=$E(i,u);g[String(u.key)]=u,h[Ms]=()=>{f(),h[Ms]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function DE(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==$t){e=t;break}}return e}const FE=s6;function $E(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function Aa(n,e,t,i,s){const{appear:o,mode:r,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:y,onAppear:k,onAfterAppear:v,onAppearCancelled:b}=e,w=String(n.key),C=$E(t,n),E=(_,S)=>{_&&Ti(_,i,9,S)},I=(_,S)=>{const R=S[1];E(_,S),le(_)?_.every(B=>B.length<=1)&&R():_.length<=1&&R()},x={mode:r,persisted:a,beforeEnter(_){let S=l;if(!t.isMounted)if(o)S=y||l;else return;_[Ms]&&_[Ms](!0);const R=C[w];R&&$i(n,R)&&R.el[Ms]&&R.el[Ms](),E(S,[_])},enter(_){let S=c,R=u,B=d;if(!t.isMounted)if(o)S=k||c,R=v||u,B=b||d;else return;let F=!1;const ee=_[Pu]=K=>{F||(F=!0,K?E(B,[_]):E(R,[_]),x.delayedLeave&&x.delayedLeave(),_[Pu]=void 0)};S?I(S,[_,ee]):ee()},leave(_,S){const R=String(n.key);if(_[Pu]&&_[Pu](!0),t.isUnmounting)return S();E(h,[_]);let B=!1;const F=_[Ms]=ee=>{B||(B=!0,S(),ee?E(g,[_]):E(p,[_]),_[Ms]=void 0,C[R]===n&&delete C[R])};C[R]=n,f?I(f,[_,F]):F()},clone(_){const S=Aa(_,e,t,i,s);return s&&s(S),S}};return x}function hp(n){if(Zc(n))return n=gs(n),n.children=null,n}function fw(n){if(!Zc(n))return BE(n.type)&&n.children?DE(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&ye(t.default))return t.default()}}function Xs(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Xs(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function qh(n,e=!1,t){let i=[],s=0;for(let o=0;o<n.length;o++){let r=n[o];const a=t==null?r.key:String(t)+String(r.key!=null?r.key:o);r.type===Me?(r.patchFlag&128&&s++,i=i.concat(qh(r.children,e,a))):(e||r.type!==$t)&&i.push(a!=null?gs(r,{key:a}):r)}if(s>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function Qa(n,e){return ye(n)?Ve({name:n.name},e,{setup:n}):n}function o6(){const n=jn();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function w1(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function UE(n){const e=jn(),t=p1(null);if(e){const s=e.refs===De?e.refs={}:e.refs;Object.defineProperty(s,n,{enumerable:!0,get:()=>t.value,set:o=>t.value=o})}return t}const Ud=new WeakMap;function ya(n,e,t,i,s=!1){if(le(n)){n.forEach((p,g)=>ya(p,e&&(le(e)?e[g]:e),t,i,s));return}if(Io(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ya(n,e,t,i.component.subTree);return}const o=i.shapeFlag&4?Qc(i.component):i.el,r=s?null:o,{i:a,r:l}=n,c=e&&e.r,u=a.refs===De?a.refs={}:a.refs,d=a.setupState,h=$e(d),f=d===De?or:p=>Ge(h,p);if(c!=null&&c!==l){if(pw(e),Ee(c))u[c]=null,f(c)&&(d[c]=null);else if(kt(c)){c.value=null;const p=e;p.k&&(u[p.k]=null)}}if(ye(l))Ja(l,a,12,[r,u]);else{const p=Ee(l),g=kt(l);if(p||g){const y=()=>{if(n.f){const k=p?f(l)?d[l]:u[l]:l.value;if(s)le(k)&&Lh(k,o);else if(le(k))k.includes(o)||k.push(o);else if(p)u[l]=[o],f(l)&&(d[l]=u[l]);else{const v=[o];l.value=v,n.k&&(u[n.k]=v)}}else p?(u[l]=r,f(l)&&(d[l]=r)):g&&(l.value=r,n.k&&(u[n.k]=r))};if(r){const k=()=>{y(),Ud.delete(n)};k.id=-1,Ud.set(n,k),Zt(k,t)}else pw(n),y()}}}function pw(n){const e=Ud.get(n);e&&(e.flags|=8,Ud.delete(n))}let mw=!1;const Wr=()=>{mw||(console.error("Hydration completed but contains mismatches."),mw=!0)},r6=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",a6=n=>n.namespaceURI.includes("MathML"),Ou=n=>{if(n.nodeType===1){if(r6(n))return"svg";if(a6(n))return"mathml"}},ga=n=>n.nodeType===8;function l6(n){const{mt:e,p:t,o:{patchProp:i,createText:s,nextSibling:o,parentNode:r,remove:a,insert:l,createComment:c}}=n,u=(b,w)=>{if(!w.hasChildNodes()){t(null,b,w),$d(),w._vnode=b;return}d(w.firstChild,b,null,null,null),$d(),w._vnode=b},d=(b,w,C,E,I,x=!1)=>{x=x||!!w.dynamicChildren;const _=ga(b)&&b.data==="[",S=()=>g(b,w,C,E,I,_),{type:R,ref:B,shapeFlag:F,patchFlag:ee}=w;let K=b.nodeType;w.el=b,ee===-2&&(x=!1,w.dynamicChildren=null);let G=null;switch(R){case Ao:K!==3?w.children===""?(l(w.el=s(""),r(b),b),G=b):G=S():(b.data!==w.children&&(Wr(),b.data=w.children),G=o(b));break;case $t:v(b)?(G=o(b),k(w.el=b.content.firstChild,b,C)):K!==8||_?G=S():G=o(b);break;case gr:if(_&&(b=o(b),K=b.nodeType),K===1||K===3){G=b;const oe=!w.children.length;for(let Y=0;Y<w.staticCount;Y++)oe&&(w.children+=G.nodeType===1?G.outerHTML:G.data),Y===w.staticCount-1&&(w.anchor=G),G=o(G);return _?o(G):G}else S();break;case Me:_?G=p(b,w,C,E,I,x):G=S();break;default:if(F&1)(K!==1||w.type.toLowerCase()!==b.tagName.toLowerCase())&&!v(b)?G=S():G=h(b,w,C,E,I,x);else if(F&6){w.slotScopeIds=I;const oe=r(b);if(_?G=y(b):ga(b)&&b.data==="teleport start"?G=y(b,b.data,"teleport end"):G=o(b),e(w,oe,null,C,E,Ou(oe),x),Io(w)&&!w.type.__asyncResolved){let Y;_?(Y=V(Me),Y.anchor=G?G.previousSibling:oe.lastChild):Y=b.nodeType===3?be(""):V("div"),Y.el=b,w.component.subTree=Y}}else F&64?K!==8?G=S():G=w.type.hydrate(b,w,C,E,I,x,n,f):F&128&&(G=w.type.hydrate(b,w,C,E,Ou(r(b)),I,x,n,d))}return B!=null&&ya(B,null,E,w),G},h=(b,w,C,E,I,x)=>{x=x||!!w.dynamicChildren;const{type:_,props:S,patchFlag:R,shapeFlag:B,dirs:F,transition:ee}=w,K=_==="input"||_==="option";if(K||R!==-1){F&&ls(w,null,C,"created");let G=!1;if(v(b)){G=cx(null,ee)&&C&&C.vnode.props&&C.vnode.props.appear;const Y=b.content.firstChild;if(G){const je=Y.getAttribute("class");je&&(Y.$cls=je),ee.beforeEnter(Y)}k(Y,b,C),w.el=b=Y}if(B&16&&!(S&&(S.innerHTML||S.textContent))){let Y=f(b.firstChild,w,b,C,E,I,x);for(;Y;){Mu(b,1)||Wr();const je=Y;Y=Y.nextSibling,a(je)}}else if(B&8){let Y=w.children;Y[0]===`
`&&(b.tagName==="PRE"||b.tagName==="TEXTAREA")&&(Y=Y.slice(1)),b.textContent!==Y&&(Mu(b,0)||Wr(),b.textContent=w.children)}if(S){if(K||!x||R&48){const Y=b.tagName.includes("-");for(const je in S)(K&&(je.endsWith("value")||je==="indeterminate")||jo(je)&&!$s(je)||je[0]==="."||Y)&&i(b,je,null,S[je],void 0,C)}else if(S.onClick)i(b,"onClick",null,S.onClick,void 0,C);else if(R&4&&zi(S.style))for(const Y in S.style)S.style[Y]}let oe;(oe=S&&S.onVnodeBeforeMount)&&Gn(oe,C,w),F&&ls(w,null,C,"beforeMount"),((oe=S&&S.onVnodeMounted)||F||G)&&wx(()=>{oe&&Gn(oe,C,w),G&&ee.enter(b),F&&ls(w,null,C,"mounted")},E)}return b.nextSibling},f=(b,w,C,E,I,x,_)=>{_=_||!!w.dynamicChildren;const S=w.children,R=S.length;for(let B=0;B<R;B++){const F=_?S[B]:S[B]=Zn(S[B]),ee=F.type===Ao;b?(ee&&!_&&B+1<R&&Zn(S[B+1]).type===Ao&&(l(s(b.data.slice(F.children.length)),C,o(b)),b.data=F.children),b=d(b,F,E,I,x,_)):ee&&!F.children?l(F.el=s(""),C):(Mu(C,1)||Wr(),t(null,F,C,null,E,I,Ou(C),x))}return b},p=(b,w,C,E,I,x)=>{const{slotScopeIds:_}=w;_&&(I=I?I.concat(_):_);const S=r(b),R=f(o(b),w,S,C,E,I,x);return R&&ga(R)&&R.data==="]"?o(w.anchor=R):(Wr(),l(w.anchor=c("]"),S,R),R)},g=(b,w,C,E,I,x)=>{if(Mu(b.parentElement,1)||Wr(),w.el=null,x){const R=y(b);for(;;){const B=o(b);if(B&&B!==R)a(B);else break}}const _=o(b),S=r(b);return a(b),t(null,w,S,_,C,E,Ou(S),I),C&&(C.vnode.el=w.el,Zh(C,w.el)),_},y=(b,w="[",C="]")=>{let E=0;for(;b;)if(b=o(b),b&&ga(b)&&(b.data===w&&E++,b.data===C)){if(E===0)return o(b);E--}return b},k=(b,w,C)=>{const E=w.parentNode;E&&E.replaceChild(b,w);let I=C;for(;I;)I.vnode.el===w&&(I.vnode.el=I.subTree.el=b),I=I.parent},v=b=>b.nodeType===1&&b.tagName==="TEMPLATE";return[u,d]}const gw="data-allow-mismatch",c6={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Mu(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(gw);)n=n.parentElement;const t=n&&n.getAttribute(gw);if(t==null)return!1;if(t==="")return!0;{const i=t.split(",");return e===0&&i.includes("children")?!0:i.includes(c6[e])}}const u6=Kc().requestIdleCallback||(n=>setTimeout(n,1)),d6=Kc().cancelIdleCallback||(n=>clearTimeout(n)),h6=(n=1e4)=>e=>{const t=u6(e,{timeout:n});return()=>d6(t)};function f6(n){const{top:e,left:t,bottom:i,right:s}=n.getBoundingClientRect(),{innerHeight:o,innerWidth:r}=window;return(e>0&&e<o||i>0&&i<o)&&(t>0&&t<r||s>0&&s<r)}const p6=n=>(e,t)=>{const i=new IntersectionObserver(s=>{for(const o of s)if(o.isIntersecting){i.disconnect(),e();break}},n);return t(s=>{if(s instanceof Element){if(f6(s))return e(),i.disconnect(),!1;i.observe(s)}}),()=>i.disconnect()},m6=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},g6=(n=[])=>(e,t)=>{Ee(n)&&(n=[n]);let i=!1;const s=r=>{i||(i=!0,o(),e(),r.target.dispatchEvent(new r.constructor(r.type,r)))},o=()=>{t(r=>{for(const a of n)r.removeEventListener(a,s)})};return t(r=>{for(const a of n)r.addEventListener(a,s,{once:!0})}),o};function b6(n,e){if(ga(n)&&n.data==="["){let t=1,i=n.nextSibling;for(;i;){if(i.nodeType===1){if(e(i)===!1)break}else if(ga(i))if(i.data==="]"){if(--t===0)break}else i.data==="["&&t++;i=i.nextSibling}}else e(n)}const Io=n=>!!n.type.__asyncLoader;function v6(n){ye(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:i,delay:s=200,hydrate:o,timeout:r,suspensible:a=!0,onError:l}=n;let c=null,u,d=0;const h=()=>(d++,c=null,f()),f=()=>{let p;return c||(p=c=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((y,k)=>{l(g,()=>y(h()),()=>k(g),d+1)});throw g}).then(g=>p!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return Qa({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,g,y){let k=!1;(g.bu||(g.bu=[])).push(()=>k=!0);const v=()=>{k||y()},b=o?()=>{const w=o(v,C=>b6(p,C));w&&(g.bum||(g.bum=[])).push(w)}:v;u?b():f().then(()=>!g.isUnmounted&&b())},get __asyncResolved(){return u},setup(){const p=hn;if(w1(p),u)return()=>fp(u,p);const g=b=>{c=null,Mr(b,p,13,!i)};if(a&&p.suspense||Pa)return f().then(b=>()=>fp(b,p)).catch(b=>(g(b),()=>i?V(i,{error:b}):null));const y=X(!1),k=X(),v=X(!!s);return s&&setTimeout(()=>{v.value=!1},s),r!=null&&setTimeout(()=>{if(!y.value&&!k.value){const b=new Error(`Async component timed out after ${r}ms.`);g(b),k.value=b}},r),f().then(()=>{y.value=!0,p.parent&&Zc(p.parent.vnode)&&p.parent.update()}).catch(b=>{g(b),k.value=b}),()=>{if(y.value&&u)return fp(u,p);if(k.value&&i)return V(i,{error:k.value});if(t&&!v.value)return V(t)}}})}function fp(n,e){const{ref:t,props:i,children:s,ce:o}=e.vnode,r=V(n,i,s);return r.ref=t,r.ce=o,delete e.vnode.ce,r}const Zc=n=>n.type.__isKeepAlive,w6={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=jn(),i=t.ctx;if(!i.renderer)return()=>{const v=e.default&&e.default();return v&&v.length===1?v[0]:v};const s=new Map,o=new Set;let r=null;const a=t.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=i,h=d("div");i.activate=(v,b,w,C,E)=>{const I=v.component;c(v,b,w,0,a),l(I.vnode,v,b,w,I,a,C,v.slotScopeIds,E),Zt(()=>{I.isDeactivated=!1,I.a&&fr(I.a);const x=v.props&&v.props.onVnodeMounted;x&&Gn(x,I.parent,v)},a)},i.deactivate=v=>{const b=v.component;jd(b.m),jd(b.a),c(v,h,null,1,a),Zt(()=>{b.da&&fr(b.da);const w=v.props&&v.props.onVnodeUnmounted;w&&Gn(w,b.parent,v),b.isDeactivated=!0},a)};function f(v){pp(v),u(v,t,a,!0)}function p(v){s.forEach((b,w)=>{const C=jm(b.type);C&&!v(C)&&g(w)})}function g(v){const b=s.get(v);b&&(!r||!$i(b,r))?f(b):r&&pp(r),s.delete(v),o.delete(v)}In(()=>[n.include,n.exclude],([v,b])=>{v&&p(w=>Ll(v,w)),b&&p(w=>!Ll(b,w))},{flush:"post",deep:!0});let y=null;const k=()=>{y!=null&&(zd(t.subTree.type)?Zt(()=>{s.set(y,Ru(t.subTree))},t.subTree.suspense):s.set(y,Ru(t.subTree)))};return Ct(k),Kh(k),Jc(()=>{s.forEach(v=>{const{subTree:b,suspense:w}=t,C=Ru(b);if(v.type===C.type&&v.key===C.key){pp(C);const E=C.component.da;E&&Zt(E,w);return}f(v)})}),()=>{if(y=null,!e.default)return r=null;const v=e.default(),b=v[0];if(v.length>1)return r=null,v;if(!ms(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return r=null,b;let w=Ru(b);if(w.type===$t)return r=null,w;const C=w.type,E=jm(Io(w)?w.type.__asyncResolved||{}:C),{include:I,exclude:x,max:_}=n;if(I&&(!E||!Ll(I,E))||x&&E&&Ll(x,E))return w.shapeFlag&=-257,r=w,b;const S=w.key==null?C:w.key,R=s.get(S);return w.el&&(w=gs(w),b.shapeFlag&128&&(b.ssContent=w)),y=S,R?(w.el=R.el,w.component=R.component,w.transition&&Xs(w,w.transition),w.shapeFlag|=512,o.delete(S),o.add(S)):(o.add(S),_&&o.size>parseInt(_,10)&&g(o.values().next().value)),w.shapeFlag|=256,r=w,zd(b.type)?b:w}}},_6=w6;function Ll(n,e){return le(n)?n.some(t=>Ll(t,e)):Ee(n)?n.split(",").includes(e):zC(n)?(n.lastIndex=0,n.test(e)):!1}function _1(n,e){HE(n,"a",e)}function y1(n,e){HE(n,"da",e)}function HE(n,e,t=hn){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Gh(e,i,t),t){let s=t.parent;for(;s&&s.parent;)Zc(s.parent.vnode)&&y6(i,e,t,s),s=s.parent}}function y6(n,e,t,i){const s=Gh(e,n,i,!0);Rr(()=>{Lh(i[e],s)},t)}function pp(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Ru(n){return n.shapeFlag&128?n.ssContent:n}function Gh(n,e,t=hn,i=!1){if(t){const s=t[n]||(t[n]=[]),o=e.__weh||(e.__weh=(...r)=>{qs();const a=kr(t),l=Ti(e,t,n,r);return a(),Gs(),l});return i?s.unshift(o):s.push(o),o}}const no=n=>(e,t=hn)=>{(!Pa||n==="sp")&&Gh(n,(...i)=>e(...i),t)},jE=no("bm"),Ct=no("m"),k1=no("bu"),Kh=no("u"),Jc=no("bum"),Rr=no("um"),zE=no("sp"),WE=no("rtg"),qE=no("rtc");function GE(n,e=hn){Gh("ec",n,e)}const C1="components",k6="directives";function we(n,e){return E1(C1,n,!0,e)||n}const KE=Symbol.for("v-ndc");function C6(n){return Ee(n)?E1(C1,n,!1)||n:n||KE}function E6(n){return E1(k6,n)}function E1(n,e,t=!0,i=!1){const s=fn||hn;if(s){const o=s.type;if(n===C1){const a=jm(o,!1);if(a&&(a===e||a===ft(e)||a===Wo(ft(e))))return o}const r=bw(s[n]||o[n],e)||bw(s.appContext[n],e);return!r&&i?o:r}}function bw(n,e){return n&&(n[e]||n[ft(e)]||n[Wo(ft(e))])}function jt(n,e,t,i){let s;const o=t&&t[i],r=le(n);if(r||Ee(n)){const a=r&&zi(n);let l=!1,c=!1;a&&(l=!mi(n),c=Ks(n),n=$h(n)),s=new Array(n.length);for(let u=0,d=n.length;u<d;u++)s[u]=e(l?c?Vd(dn(n[u])):dn(n[u]):n[u],u,void 0,o&&o[u])}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,o&&o[a])}else if(Xe(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(n[u],u,l,o&&o[l])}}else s=[];return t&&(t[i]=s),s}function x6(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(le(i))for(let s=0;s<i.length;s++)n[i[s].name]=i[s].fn;else i&&(n[i.name]=i.key?(...s)=>{const o=i.fn(...s);return o&&(o.key=i.key),o}:i.fn)}return n}function x1(n,e,t={},i,s){if(fn.ce||fn.parent&&Io(fn.parent)&&fn.parent.ce){const c=Object.keys(t).length>0;return e!=="default"&&(t.name=e),O(),$n(Me,null,[V("slot",t,i&&i())],c?-2:64)}let o=n[e];o&&o._c&&(o._d=!1),O();const r=o&&T1(o(t)),a=t.key||r&&r.key,l=$n(Me,{key:(a&&!Hn(a)?a:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&n._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function T1(n){return n.some(e=>ms(e)?!(e.type===$t||e.type===Me&&!T1(e.children)):!0)?n:null}function T6(n,e){const t={};for(const i in n)t[e&&/[A-Z]/.test(i)?`on:${i}`:hr(i)]=n[i];return t}const Rm=n=>n?xx(n)?Qc(n):Rm(n.parent):null,zl=Ve(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Rm(n.parent),$root:n=>Rm(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>S1(n),$forceUpdate:n=>n.f||(n.f=()=>{g1(n.update)}),$nextTick:n=>n.n||(n.n=Ya.bind(n.proxy)),$watch:n=>tO.bind(n)}),mp=(n,e)=>n!==De&&!n.__isScriptSetup&&Ge(n,e),Bm={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:o,accessCache:r,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const f=r[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return o[e]}else{if(mp(i,e))return r[e]=1,i[e];if(s!==De&&Ge(s,e))return r[e]=2,s[e];if((c=n.propsOptions[0])&&Ge(c,e))return r[e]=3,o[e];if(t!==De&&Ge(t,e))return r[e]=4,t[e];Lm&&(r[e]=0)}}const u=zl[e];let d,h;if(u)return e==="$attrs"&&En(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==De&&Ge(t,e))return r[e]=4,t[e];if(h=l.config.globalProperties,Ge(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:o}=n;return mp(s,e)?(s[e]=t,!0):i!==De&&Ge(i,e)?(i[e]=t,!0):Ge(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(o[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:o,type:r}},a){let l,c;return!!(t[a]||n!==De&&a[0]!=="$"&&Ge(n,a)||mp(e,a)||(l=o[0])&&Ge(l,a)||Ge(i,a)||Ge(zl,a)||Ge(s.config.globalProperties,a)||(c=r.__cssModules)&&c[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ge(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},S6=Ve({},Bm,{get(n,e){if(e!==Symbol.unscopables)return Bm.get(n,e,n)},has(n,e){return e[0]!=="_"&&!s1(e)}});function I6(){return null}function A6(){return null}function P6(n){}function O6(n){}function M6(){return null}function R6(){}function B6(n,e){return null}function L6(){return XE().slots}function N6(){return XE().attrs}function XE(n){const e=jn();return e.setupContext||(e.setupContext=Ix(e))}function pc(n){return le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function V6(n,e){const t=pc(n);for(const i in e){if(i.startsWith("__skip"))continue;let s=t[i];s?le(s)||ye(s)?s=t[i]={type:s,default:e[i]}:s.default=e[i]:s===null&&(s=t[i]={default:e[i]}),s&&e[`__skip_${i}`]&&(s.skipFactory=!0)}return t}function el(n,e){return!n||!e?n||e:le(n)&&le(e)?n.concat(e):Ve({},pc(n),pc(e))}function D6(n,e){const t={};for(const i in n)e.includes(i)||Object.defineProperty(t,i,{enumerable:!0,get:()=>n[i]});return t}function F6(n){const e=jn();let t=n();return $m(),Nh(t)&&(t=t.catch(i=>{throw kr(e),i})),[t,()=>kr(e)]}let Lm=!0;function $6(n){const e=S1(n),t=n.proxy,i=n.ctx;Lm=!1,e.beforeCreate&&vw(e.beforeCreate,n,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:g,deactivated:y,beforeDestroy:k,beforeUnmount:v,destroyed:b,unmounted:w,render:C,renderTracked:E,renderTriggered:I,errorCaptured:x,serverPrefetch:_,expose:S,inheritAttrs:R,components:B,directives:F,filters:ee}=e;if(c&&U6(c,i,null),r)for(const oe in r){const Y=r[oe];ye(Y)&&(i[oe]=Y.bind(t))}if(s){const oe=s.call(t,t);Xe(oe)&&(n.data=Za(oe))}if(Lm=!0,o)for(const oe in o){const Y=o[oe],je=ye(Y)?Y.bind(t,t):ye(Y.get)?Y.get.bind(t,t):rn,zt=!ye(Y)&&ye(Y.set)?Y.set.bind(t):rn,Et=it({get:je,set:zt});Object.defineProperty(i,oe,{enumerable:!0,configurable:!0,get:()=>Et.value,set:Ot=>Et.value=Ot})}if(a)for(const oe in a)ZE(a[oe],i,t,oe);if(l){const oe=ye(l)?l.call(t):l;Reflect.ownKeys(oe).forEach(Y=>{Wl(Y,oe[Y])})}u&&vw(u,n,"c");function G(oe,Y){le(Y)?Y.forEach(je=>oe(je.bind(t))):Y&&oe(Y.bind(t))}if(G(jE,d),G(Ct,h),G(k1,f),G(Kh,p),G(_1,g),G(y1,y),G(GE,x),G(qE,E),G(WE,I),G(Jc,v),G(Rr,w),G(zE,_),le(S))if(S.length){const oe=n.exposed||(n.exposed={});S.forEach(Y=>{Object.defineProperty(oe,Y,{get:()=>t[Y],set:je=>t[Y]=je,enumerable:!0})})}else n.exposed||(n.exposed={});C&&n.render===rn&&(n.render=C),R!=null&&(n.inheritAttrs=R),B&&(n.components=B),F&&(n.directives=F),_&&w1(n)}function U6(n,e,t=rn){le(n)&&(n=Nm(n));for(const i in n){const s=n[i];let o;Xe(s)?"default"in s?o=Qn(s.from||i,s.default,!0):o=Qn(s.from||i):o=Qn(s),kt(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function vw(n,e,t){Ti(le(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function ZE(n,e,t,i){let s=i.includes(".")?mx(t,i):()=>t[i];if(Ee(n)){const o=e[n];ye(o)&&In(s,o)}else if(ye(n))In(s,n.bind(t));else if(Xe(n))if(le(n))n.forEach(o=>ZE(o,e,t,i));else{const o=ye(n.handler)?n.handler.bind(t):e[n.handler];ye(o)&&In(s,o,n)}}function S1(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=n.appContext,a=o.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>Hd(l,c,r,!0)),Hd(l,e,r)),Xe(e)&&o.set(e,l),l}function Hd(n,e,t,i=!1){const{mixins:s,extends:o}=e;o&&Hd(n,o,t,!0),s&&s.forEach(r=>Hd(n,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const a=H6[r]||t&&t[r];n[r]=a?a(n[r],e[r]):e[r]}return n}const H6={data:ww,props:_w,emits:_w,methods:Nl,computed:Nl,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Nl,directives:Nl,watch:z6,provide:ww,inject:j6};function ww(n,e){return e?n?function(){return Ve(ye(n)?n.call(this,this):n,ye(e)?e.call(this,this):e)}:e:n}function j6(n,e){return Nl(Nm(n),Nm(e))}function Nm(n){if(le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Mn(n,e){return n?[...new Set([].concat(n,e))]:e}function Nl(n,e){return n?Ve(Object.create(null),n,e):e}function _w(n,e){return n?le(n)&&le(e)?[...new Set([...n,...e])]:Ve(Object.create(null),pc(n),pc(e??{})):e}function z6(n,e){if(!n)return e;if(!e)return n;const t=Ve(Object.create(null),n);for(const i in e)t[i]=Mn(n[i],e[i]);return t}function JE(){return{app:null,config:{isNativeTag:or,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let W6=0;function q6(n,e){return function(i,s=null){ye(i)||(i=Ve({},i)),s!=null&&!Xe(s)&&(s=null);const o=JE(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:W6++,_component:i,_props:s,_container:null,_context:o,_instance:null,version:Px,get config(){return o.config},set config(u){},use(u,...d){return r.has(u)||(u&&ye(u.install)?(r.add(u),u.install(c,...d)):ye(u)&&(r.add(u),u(c,...d))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,d){return d?(o.components[u]=d,c):o.components[u]},directive(u,d){return d?(o.directives[u]=d,c):o.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||V(i,s);return f.appContext=o,h===!0?h="svg":h===!1&&(h=void 0),d&&e?e(f,u):n(f,u,h),l=!0,c._container=u,u.__vue_app__=c,Qc(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Ti(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return o.provides[u]=d,c},runWithContext(u){const d=mr;mr=c;try{return u()}finally{mr=d}}};return c}}let mr=null;function Wl(n,e){if(hn){let t=hn.provides;const i=hn.parent&&hn.parent.provides;i===t&&(t=hn.provides=Object.create(i)),t[n]=e}}function Qn(n,e,t=!1){const i=jn();if(i||mr){let s=mr?mr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&ye(e)?e.call(i&&i.proxy):e}}function I1(){return!!(jn()||mr)}const YE={},QE=()=>Object.create(YE),ex=n=>Object.getPrototypeOf(n)===YE;function G6(n,e,t,i=!1){const s={},o=QE();n.propsDefaults=Object.create(null),tx(n,e,s,o);for(const r in n.propsOptions[0])r in s||(s[r]=void 0);t?n.props=i?s:f1(s):n.type.props?n.props=s:n.props=o,n.attrs=o}function K6(n,e,t,i){const{props:s,attrs:o,vnode:{patchFlag:r}}=n,a=$e(s),[l]=n.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Xh(n.emitsOptions,h))continue;const f=e[h];if(l)if(Ge(o,h))f!==o[h]&&(o[h]=f,c=!0);else{const p=ft(h);s[p]=Vm(l,a,p,f,n,!1)}else f!==o[h]&&(o[h]=f,c=!0)}}}else{tx(n,e,s,o)&&(c=!0);let u;for(const d in a)(!e||!Ge(e,d)&&((u=xn(d))===d||!Ge(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(s[d]=Vm(l,a,d,void 0,n,!0)):delete s[d]);if(o!==a)for(const d in o)(!e||!Ge(e,d))&&(delete o[d],c=!0)}c&&Ls(n.attrs,"set","")}function tx(n,e,t,i){const[s,o]=n.propsOptions;let r=!1,a;if(e)for(let l in e){if($s(l))continue;const c=e[l];let u;s&&Ge(s,u=ft(l))?!o||!o.includes(u)?t[u]=c:(a||(a={}))[u]=c:Xh(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(o){const l=$e(t),c=a||De;for(let u=0;u<o.length;u++){const d=o[u];t[d]=Vm(s,l,d,c[d],n,!Ge(c,d))}}return r}function Vm(n,e,t,i,s,o){const r=n[t];if(r!=null){const a=Ge(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&ye(l)){const{propsDefaults:c}=s;if(t in c)i=c[t];else{const u=kr(s);i=c[t]=l.call(null,e),u()}}else i=l;s.ce&&s.ce._setProp(t,i)}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===xn(t))&&(i=!0))}return i}const X6=new WeakMap;function nx(n,e,t=!1){const i=t?X6:e.propsCache,s=i.get(n);if(s)return s;const o=n.props,r={},a=[];let l=!1;if(!ye(n)){const u=d=>{l=!0;const[h,f]=nx(d,e,!0);Ve(r,h),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!o&&!l)return Xe(n)&&i.set(n,ur),ur;if(le(o))for(let u=0;u<o.length;u++){const d=ft(o[u]);yw(d)&&(r[d]=De)}else if(o)for(const u in o){const d=ft(u);if(yw(d)){const h=o[u],f=r[d]=le(h)||ye(h)?{type:h}:Ve({},h),p=f.type;let g=!1,y=!0;if(le(p))for(let k=0;k<p.length;++k){const v=p[k],b=ye(v)&&v.name;if(b==="Boolean"){g=!0;break}else b==="String"&&(y=!1)}else g=ye(p)&&p.name==="Boolean";f[0]=g,f[1]=y,(g||Ge(f,"default"))&&a.push(d)}}const c=[r,a];return Xe(n)&&i.set(n,c),c}function yw(n){return n[0]!=="$"&&!$s(n)}const A1=n=>n==="_"||n==="_ctx"||n==="$stable",P1=n=>le(n)?n.map(Zn):[Zn(n)],Z6=(n,e,t)=>{if(e._n)return e;const i=Le((...s)=>P1(e(...s)),t);return i._c=!1,i},ix=(n,e,t)=>{const i=n._ctx;for(const s in n){if(A1(s))continue;const o=n[s];if(ye(o))e[s]=Z6(s,o,i);else if(o!=null){const r=P1(o);e[s]=()=>r}}},sx=(n,e)=>{const t=P1(e);n.slots.default=()=>t},ox=(n,e,t)=>{for(const i in e)(t||!A1(i))&&(n[i]=e[i])},J6=(n,e,t)=>{const i=n.slots=QE();if(n.vnode.shapeFlag&32){const s=e._;s?(ox(i,e,t),t&&i1(i,"_",s,!0)):ix(e,i)}else e&&sx(n,e)},Y6=(n,e,t)=>{const{vnode:i,slots:s}=n;let o=!0,r=De;if(i.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:ox(s,e,t):(o=!e.$stable,ix(e,s)),r=e}else e&&(sx(n,e),r={default:1});if(o)for(const a in s)!A1(a)&&r[a]==null&&delete s[a]},Zt=wx;function rx(n){return lx(n)}function ax(n){return lx(n,l6)}function lx(n,e){const t=Kc();t.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=rn,insertStaticContent:p}=n,g=(T,A,N,W=null,U=null,q=null,ne=void 0,Q=null,J=!!A.dynamicChildren)=>{if(T===A)return;T&&!$i(T,A)&&(W=$(T),Ot(T,U,q,!0),T=null),A.patchFlag===-2&&(J=!1,A.dynamicChildren=null);const{type:j,ref:ge,shapeFlag:re}=A;switch(j){case Ao:y(T,A,N,W);break;case $t:k(T,A,N,W);break;case gr:T==null&&v(A,N,W,ne);break;case Me:B(T,A,N,W,U,q,ne,Q,J);break;default:re&1?C(T,A,N,W,U,q,ne,Q,J):re&6?F(T,A,N,W,U,q,ne,Q,J):(re&64||re&128)&&j.process(T,A,N,W,U,q,ne,Q,J,de)}ge!=null&&U?ya(ge,T&&T.ref,q,A||T,!A):ge==null&&T&&T.ref!=null&&ya(T.ref,null,q,T,!0)},y=(T,A,N,W)=>{if(T==null)i(A.el=a(A.children),N,W);else{const U=A.el=T.el;A.children!==T.children&&c(U,A.children)}},k=(T,A,N,W)=>{T==null?i(A.el=l(A.children||""),N,W):A.el=T.el},v=(T,A,N,W)=>{[T.el,T.anchor]=p(T.children,A,N,W,T.el,T.anchor)},b=({el:T,anchor:A},N,W)=>{let U;for(;T&&T!==A;)U=h(T),i(T,N,W),T=U;i(A,N,W)},w=({el:T,anchor:A})=>{let N;for(;T&&T!==A;)N=h(T),s(T),T=N;s(A)},C=(T,A,N,W,U,q,ne,Q,J)=>{A.type==="svg"?ne="svg":A.type==="math"&&(ne="mathml"),T==null?E(A,N,W,U,q,ne,Q,J):_(T,A,U,q,ne,Q,J)},E=(T,A,N,W,U,q,ne,Q)=>{let J,j;const{props:ge,shapeFlag:re,transition:ve,dirs:Ie}=T;if(J=T.el=r(T.type,q,ge&&ge.is,ge),re&8?u(J,T.children):re&16&&x(T.children,J,null,W,U,gp(T,q),ne,Q),Ie&&ls(T,null,W,"created"),I(J,T,T.scopeId,ne,W),ge){for(const ct in ge)ct!=="value"&&!$s(ct)&&o(J,ct,null,ge[ct],q,W);"value"in ge&&o(J,"value",null,ge.value,q),(j=ge.onVnodeBeforeMount)&&Gn(j,W,T)}Ie&&ls(T,null,W,"beforeMount");const ze=cx(U,ve);ze&&ve.beforeEnter(J),i(J,A,N),((j=ge&&ge.onVnodeMounted)||ze||Ie)&&Zt(()=>{j&&Gn(j,W,T),ze&&ve.enter(J),Ie&&ls(T,null,W,"mounted")},U)},I=(T,A,N,W,U)=>{if(N&&f(T,N),W)for(let q=0;q<W.length;q++)f(T,W[q]);if(U){let q=U.subTree;if(A===q||zd(q.type)&&(q.ssContent===A||q.ssFallback===A)){const ne=U.vnode;I(T,ne,ne.scopeId,ne.slotScopeIds,U.parent)}}},x=(T,A,N,W,U,q,ne,Q,J=0)=>{for(let j=J;j<T.length;j++){const ge=T[j]=Q?ko(T[j]):Zn(T[j]);g(null,ge,A,N,W,U,q,ne,Q)}},_=(T,A,N,W,U,q,ne)=>{const Q=A.el=T.el;let{patchFlag:J,dynamicChildren:j,dirs:ge}=A;J|=T.patchFlag&16;const re=T.props||De,ve=A.props||De;let Ie;if(N&&Zo(N,!1),(Ie=ve.onVnodeBeforeUpdate)&&Gn(Ie,N,A,T),ge&&ls(A,T,N,"beforeUpdate"),N&&Zo(N,!0),(re.innerHTML&&ve.innerHTML==null||re.textContent&&ve.textContent==null)&&u(Q,""),j?S(T.dynamicChildren,j,Q,N,W,gp(A,U),q):ne||Y(T,A,Q,null,N,W,gp(A,U),q,!1),J>0){if(J&16)R(Q,re,ve,N,U);else if(J&2&&re.class!==ve.class&&o(Q,"class",null,ve.class,U),J&4&&o(Q,"style",re.style,ve.style,U),J&8){const ze=A.dynamicProps;for(let ct=0;ct<ze.length;ct++){const nt=ze[ct],Wn=re[nt],bn=ve[nt];(bn!==Wn||nt==="value")&&o(Q,nt,Wn,bn,U,N)}}J&1&&T.children!==A.children&&u(Q,A.children)}else!ne&&j==null&&R(Q,re,ve,N,U);((Ie=ve.onVnodeUpdated)||ge)&&Zt(()=>{Ie&&Gn(Ie,N,A,T),ge&&ls(A,T,N,"updated")},W)},S=(T,A,N,W,U,q,ne)=>{for(let Q=0;Q<A.length;Q++){const J=T[Q],j=A[Q],ge=J.el&&(J.type===Me||!$i(J,j)||J.shapeFlag&198)?d(J.el):N;g(J,j,ge,null,W,U,q,ne,!0)}},R=(T,A,N,W,U)=>{if(A!==N){if(A!==De)for(const q in A)!$s(q)&&!(q in N)&&o(T,q,A[q],null,U,W);for(const q in N){if($s(q))continue;const ne=N[q],Q=A[q];ne!==Q&&q!=="value"&&o(T,q,Q,ne,U,W)}"value"in N&&o(T,"value",A.value,N.value,U)}},B=(T,A,N,W,U,q,ne,Q,J)=>{const j=A.el=T?T.el:a(""),ge=A.anchor=T?T.anchor:a("");let{patchFlag:re,dynamicChildren:ve,slotScopeIds:Ie}=A;Ie&&(Q=Q?Q.concat(Ie):Ie),T==null?(i(j,N,W),i(ge,N,W),x(A.children||[],N,ge,U,q,ne,Q,J)):re>0&&re&64&&ve&&T.dynamicChildren?(S(T.dynamicChildren,ve,N,U,q,ne,Q),(A.key!=null||U&&A===U.subTree)&&O1(T,A,!0)):Y(T,A,N,ge,U,q,ne,Q,J)},F=(T,A,N,W,U,q,ne,Q,J)=>{A.slotScopeIds=Q,T==null?A.shapeFlag&512?U.ctx.activate(A,N,W,ne,J):ee(A,N,W,U,q,ne,J):K(T,A,J)},ee=(T,A,N,W,U,q,ne)=>{const Q=T.component=Ex(T,W,U);if(Zc(T)&&(Q.ctx.renderer=de),Tx(Q,!1,ne),Q.asyncDep){if(U&&U.registerDep(Q,G,ne),!T.el){const J=Q.subTree=V($t);k(null,J,A,N),T.placeholder=J.el}}else G(Q,T,A,N,U,q,ne)},K=(T,A,N)=>{const W=A.component=T.component;if(aO(T,A,N))if(W.asyncDep&&!W.asyncResolved){oe(W,A,N);return}else W.next=A,W.update();else A.el=T.el,W.vnode=A},G=(T,A,N,W,U,q,ne)=>{const Q=()=>{if(T.isMounted){let{next:re,bu:ve,u:Ie,parent:ze,vnode:ct}=T;{const ii=ux(T);if(ii){re&&(re.el=ct.el,oe(T,re,ne)),ii.asyncDep.then(()=>{T.isUnmounted||Q()});return}}let nt=re,Wn;Zo(T,!1),re?(re.el=ct.el,oe(T,re,ne)):re=ct,ve&&fr(ve),(Wn=re.props&&re.props.onVnodeBeforeUpdate)&&Gn(Wn,ze,re,ct),Zo(T,!0);const bn=cd(T),Ri=T.subTree;T.subTree=bn,g(Ri,bn,d(Ri.el),$(Ri),T,U,q),re.el=bn.el,nt===null&&Zh(T,bn.el),Ie&&Zt(Ie,U),(Wn=re.props&&re.props.onVnodeUpdated)&&Zt(()=>Gn(Wn,ze,re,ct),U)}else{let re;const{el:ve,props:Ie}=A,{bm:ze,m:ct,parent:nt,root:Wn,type:bn}=T,Ri=Io(A);if(Zo(T,!1),ze&&fr(ze),!Ri&&(re=Ie&&Ie.onVnodeBeforeMount)&&Gn(re,nt,A),Zo(T,!0),ve&&Ye){const ii=()=>{T.subTree=cd(T),Ye(ve,T.subTree,T,U,null)};Ri&&bn.__asyncHydrate?bn.__asyncHydrate(ve,T,ii):ii()}else{Wn.ce&&Wn.ce._def.shadowRoot!==!1&&Wn.ce._injectChildStyle(bn);const ii=T.subTree=cd(T);g(null,ii,N,W,T,U,q),A.el=ii.el}if(ct&&Zt(ct,U),!Ri&&(re=Ie&&Ie.onVnodeMounted)){const ii=A;Zt(()=>Gn(re,nt,ii),U)}(A.shapeFlag&256||nt&&Io(nt.vnode)&&nt.vnode.shapeFlag&256)&&T.a&&Zt(T.a,U),T.isMounted=!0,A=N=W=null}};T.scope.on();const J=T.effect=new lc(Q);T.scope.off();const j=T.update=J.run.bind(J),ge=T.job=J.runIfDirty.bind(J);ge.i=T,ge.id=T.uid,J.scheduler=()=>g1(ge),Zo(T,!0),j()},oe=(T,A,N)=>{A.component=T;const W=T.vnode.props;T.vnode=A,T.next=null,K6(T,A.props,W,N),Y6(T,A.children,N),qs(),cw(T),Gs()},Y=(T,A,N,W,U,q,ne,Q,J=!1)=>{const j=T&&T.children,ge=T?T.shapeFlag:0,re=A.children,{patchFlag:ve,shapeFlag:Ie}=A;if(ve>0){if(ve&128){zt(j,re,N,W,U,q,ne,Q,J);return}else if(ve&256){je(j,re,N,W,U,q,ne,Q,J);return}}Ie&8?(ge&16&&xt(j,U,q),re!==j&&u(N,re)):ge&16?Ie&16?zt(j,re,N,W,U,q,ne,Q,J):xt(j,U,q,!0):(ge&8&&u(N,""),Ie&16&&x(re,N,W,U,q,ne,Q,J))},je=(T,A,N,W,U,q,ne,Q,J)=>{T=T||ur,A=A||ur;const j=T.length,ge=A.length,re=Math.min(j,ge);let ve;for(ve=0;ve<re;ve++){const Ie=A[ve]=J?ko(A[ve]):Zn(A[ve]);g(T[ve],Ie,N,null,U,q,ne,Q,J)}j>ge?xt(T,U,q,!0,!1,re):x(A,N,W,U,q,ne,Q,J,re)},zt=(T,A,N,W,U,q,ne,Q,J)=>{let j=0;const ge=A.length;let re=T.length-1,ve=ge-1;for(;j<=re&&j<=ve;){const Ie=T[j],ze=A[j]=J?ko(A[j]):Zn(A[j]);if($i(Ie,ze))g(Ie,ze,N,null,U,q,ne,Q,J);else break;j++}for(;j<=re&&j<=ve;){const Ie=T[re],ze=A[ve]=J?ko(A[ve]):Zn(A[ve]);if($i(Ie,ze))g(Ie,ze,N,null,U,q,ne,Q,J);else break;re--,ve--}if(j>re){if(j<=ve){const Ie=ve+1,ze=Ie<ge?A[Ie].el:W;for(;j<=ve;)g(null,A[j]=J?ko(A[j]):Zn(A[j]),N,ze,U,q,ne,Q,J),j++}}else if(j>ve)for(;j<=re;)Ot(T[j],U,q,!0),j++;else{const Ie=j,ze=j,ct=new Map;for(j=ze;j<=ve;j++){const si=A[j]=J?ko(A[j]):Zn(A[j]);si.key!=null&&ct.set(si.key,j)}let nt,Wn=0;const bn=ve-ze+1;let Ri=!1,ii=0;const ml=new Array(bn);for(j=0;j<bn;j++)ml[j]=0;for(j=Ie;j<=re;j++){const si=T[j];if(Wn>=bn){Ot(si,U,q,!0);continue}let ns;if(si.key!=null)ns=ct.get(si.key);else for(nt=ze;nt<=ve;nt++)if(ml[nt-ze]===0&&$i(si,A[nt])){ns=nt;break}ns===void 0?Ot(si,U,q,!0):(ml[ns-ze]=j+1,ns>=ii?ii=ns:Ri=!0,g(si,A[ns],N,null,U,q,ne,Q,J),Wn++)}const nw=Ri?Q6(ml):ur;for(nt=nw.length-1,j=bn-1;j>=0;j--){const si=ze+j,ns=A[si],iw=A[si+1],sw=si+1<ge?iw.el||iw.placeholder:W;ml[j]===0?g(null,ns,N,sw,U,q,ne,Q,J):Ri&&(nt<0||j!==nw[nt]?Et(ns,N,sw,2):nt--)}}},Et=(T,A,N,W,U=null)=>{const{el:q,type:ne,transition:Q,children:J,shapeFlag:j}=T;if(j&6){Et(T.component.subTree,A,N,W);return}if(j&128){T.suspense.move(A,N,W);return}if(j&64){ne.move(T,A,N,de);return}if(ne===Me){i(q,A,N);for(let re=0;re<J.length;re++)Et(J[re],A,N,W);i(T.anchor,A,N);return}if(ne===gr){b(T,A,N);return}if(W!==2&&j&1&&Q)if(W===0)Q.beforeEnter(q),i(q,A,N),Zt(()=>Q.enter(q),U);else{const{leave:re,delayLeave:ve,afterLeave:Ie}=Q,ze=()=>{T.ctx.isUnmounted?s(q):i(q,A,N)},ct=()=>{q._isLeaving&&q[Ms](!0),re(q,()=>{ze(),Ie&&Ie()})};ve?ve(q,ze,ct):ct()}else i(q,A,N)},Ot=(T,A,N,W=!1,U=!1)=>{const{type:q,props:ne,ref:Q,children:J,dynamicChildren:j,shapeFlag:ge,patchFlag:re,dirs:ve,cacheIndex:Ie}=T;if(re===-2&&(U=!1),Q!=null&&(qs(),ya(Q,null,N,T,!0),Gs()),Ie!=null&&(A.renderCache[Ie]=void 0),ge&256){A.ctx.deactivate(T);return}const ze=ge&1&&ve,ct=!Io(T);let nt;if(ct&&(nt=ne&&ne.onVnodeBeforeUnmount)&&Gn(nt,A,T),ge&6)mt(T.component,N,W);else{if(ge&128){T.suspense.unmount(N,W);return}ze&&ls(T,null,A,"beforeUnmount"),ge&64?T.type.remove(T,A,N,de,W):j&&!j.hasOnce&&(q!==Me||re>0&&re&64)?xt(j,A,N,!1,!0):(q===Me&&re&384||!U&&ge&16)&&xt(J,A,N),W&&Z(T)}(ct&&(nt=ne&&ne.onVnodeUnmounted)||ze)&&Zt(()=>{nt&&Gn(nt,A,T),ze&&ls(T,null,A,"unmounted")},N)},Z=T=>{const{type:A,el:N,anchor:W,transition:U}=T;if(A===Me){Be(N,W);return}if(A===gr){w(T);return}const q=()=>{s(N),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(T.shapeFlag&1&&U&&!U.persisted){const{leave:ne,delayLeave:Q}=U,J=()=>ne(N,q);Q?Q(T.el,q,J):J()}else q()},Be=(T,A)=>{let N;for(;T!==A;)N=h(T),s(T),T=N;s(A)},mt=(T,A,N)=>{const{bum:W,scope:U,job:q,subTree:ne,um:Q,m:J,a:j}=T;jd(J),jd(j),W&&fr(W),U.stop(),q&&(q.flags|=8,Ot(ne,T,A,N)),Q&&Zt(Q,A),Zt(()=>{T.isUnmounted=!0},A)},xt=(T,A,N,W=!1,U=!1,q=0)=>{for(let ne=q;ne<T.length;ne++)Ot(T[ne],A,N,W,U)},$=T=>{if(T.shapeFlag&6)return $(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const A=h(T.anchor||T.el),N=A&&A[RE];return N?h(N):A};let ce=!1;const ie=(T,A,N)=>{T==null?A._vnode&&Ot(A._vnode,null,null,!0):g(A._vnode||null,T,A,null,null,null,N),A._vnode=T,ce||(ce=!0,cw(),$d(),ce=!1)},de={p:g,um:Ot,m:Et,r:Z,mt:ee,mc:x,pc:Y,pbc:S,n:$,o:n};let Se,Ye;return e&&([Se,Ye]=e(de)),{render:ie,hydrate:Se,createApp:q6(ie,Se)}}function gp({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Zo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function cx(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function O1(n,e,t=!1){const i=n.children,s=e.children;if(le(i)&&le(s))for(let o=0;o<i.length;o++){const r=i[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=ko(s[o]),a.el=r.el),!t&&a.patchFlag!==-2&&O1(r,a)),a.type===Ao&&a.patchFlag!==-1&&(a.el=r.el),a.type===$t&&!a.el&&(a.el=r.el)}}function Q6(n){const e=n.slice(),t=[0];let i,s,o,r,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(o=0,r=t.length-1;o<r;)a=o+r>>1,n[t[a]]<c?o=a+1:r=a;c<n[t[o]]&&(o>0&&(e[i]=t[o-1]),t[o]=i)}}for(o=t.length,r=t[o-1];o-- >0;)t[o]=r,r=e[r];return t}function ux(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ux(e)}function jd(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const dx=Symbol.for("v-scx"),hx=()=>Qn(dx);function fx(n,e){return Yc(n,null,e)}function eO(n,e){return Yc(n,null,{flush:"post"})}function px(n,e){return Yc(n,null,{flush:"sync"})}function In(n,e,t){return Yc(n,e,t)}function Yc(n,e,t=De){const{immediate:i,deep:s,flush:o,once:r}=t,a=Ve({},t),l=e&&i||!e&&o!=="post";let c;if(Pa){if(o==="sync"){const f=hx();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=rn,f.resume=rn,f.pause=rn,f}}const u=hn;a.call=(f,p,g)=>Ti(f,u,p,g);let d=!1;o==="post"?a.scheduler=f=>{Zt(f,u&&u.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(f,p)=>{p?f():g1(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=W7(n,e,a);return Pa&&(c?c.push(h):l&&h()),h}function tO(n,e,t){const i=this.proxy,s=Ee(n)?n.includes(".")?mx(i,n):()=>i[n]:n.bind(i,i);let o;ye(e)?o=e:(o=e.handler,t=e);const r=kr(this),a=Yc(s,o.bind(i),t);return r(),a}function mx(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function tl(n,e,t=De){const i=jn(),s=ft(e),o=xn(e),r=gx(n,s),a=CE((l,c)=>{let u,d=De,h;return px(()=>{const f=n[s];Cn(u,f)&&(u=f,c())}),{get(){return l(),t.get?t.get(u):u},set(f){const p=t.set?t.set(f):f;if(!Cn(p,u)&&!(d!==De&&Cn(f,d)))return;const g=i.vnode.props;g&&(e in g||s in g||o in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${o}`in g)||(u=f,c()),i.emit(`update:${e}`,p),Cn(f,p)&&Cn(f,d)&&!Cn(p,h)&&c(),d=f,h=p}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?r||De:a,done:!1}:{done:!0}}}},a}const gx=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${ft(e)}Modifiers`]||n[`${xn(e)}Modifiers`];function nO(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||De;let s=t;const o=e.startsWith("update:"),r=o&&gx(i,e.slice(7));r&&(r.trim&&(s=t.map(u=>Ee(u)?u.trim():u)),r.number&&(s=t.map(rc)));let a,l=i[a=hr(e)]||i[a=hr(ft(e))];!l&&o&&(l=i[a=hr(xn(e))]),l&&Ti(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Ti(c,n,6,s)}}const iO=new WeakMap;function bx(n,e,t=!1){const i=t?iO:e.emitsCache,s=i.get(n);if(s!==void 0)return s;const o=n.emits;let r={},a=!1;if(!ye(n)){const l=c=>{const u=bx(c,e,!0);u&&(a=!0,Ve(r,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!a?(Xe(n)&&i.set(n,null),null):(le(o)?o.forEach(l=>r[l]=null):Ve(r,o),Xe(n)&&i.set(n,r),r)}function Xh(n,e){return!n||!jo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ge(n,e[0].toLowerCase()+e.slice(1))||Ge(n,xn(e))||Ge(n,e))}function cd(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:g}=n,y=fc(n);let k,v;try{if(t.shapeFlag&4){const w=s||i,C=w;k=Zn(c.call(C,w,u,d,f,h,p)),v=a}else{const w=e;k=Zn(w.length>1?w(d,{attrs:a,slots:r,emit:l}):w(d,null)),v=e.props?a:oO(a)}}catch(w){ql.length=0,Mr(w,n,1),k=V($t)}let b=k;if(v&&g!==!1){const w=Object.keys(v),{shapeFlag:C}=b;w.length&&C&7&&(o&&w.some(Bh)&&(v=rO(v,o)),b=gs(b,v,!1,!0))}return t.dirs&&(b=gs(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&Xs(b,t.transition),k=b,fc(y),k}function sO(n,e=!0){let t;for(let i=0;i<n.length;i++){const s=n[i];if(ms(s)){if(s.type!==$t||s.children==="v-if"){if(t)return;t=s}}else return}return t}const oO=n=>{let e;for(const t in n)(t==="class"||t==="style"||jo(t))&&((e||(e={}))[t]=n[t]);return e},rO=(n,e)=>{const t={};for(const i in n)(!Bh(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function aO(n,e,t){const{props:i,children:s,component:o}=n,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?kw(i,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(r[h]!==i[h]&&!Xh(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?kw(i,r,c):!0:!!r;return!1}function kw(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const o=i[s];if(e[o]!==n[o]&&!Xh(t,o))return!0}return!1}function Zh({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const zd=n=>n.__isSuspense;let Dm=0;const lO={name:"Suspense",__isSuspense:!0,process(n,e,t,i,s,o,r,a,l,c){if(n==null)uO(e,t,i,s,o,r,a,l,c);else{if(o&&o.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}dO(n,e,t,i,s,r,a,l,c)}},hydrate:hO,normalize:fO},cO=lO;function mc(n,e){const t=n.props&&n.props[e];ye(t)&&t()}function uO(n,e,t,i,s,o,r,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=n.suspense=vx(n,s,i,e,d,t,o,r,a,l);c(null,h.pendingBranch=n.ssContent,d,null,i,h,o,r),h.deps>0?(mc(n,"onPending"),mc(n,"onFallback"),c(null,n.ssFallback,e,t,i,null,o,r),ka(h,n.ssFallback)):h.resolve(!1,!0)}function dO(n,e,t,i,s,o,r,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=n.suspense;d.vnode=e,e.el=n.el;const h=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:y,isHydrating:k}=d;if(g)d.pendingBranch=h,$i(g,h)?(l(g,h,d.hiddenContainer,null,s,d,o,r,a),d.deps<=0?d.resolve():y&&(k||(l(p,f,t,i,s,null,o,r,a),ka(d,f)))):(d.pendingId=Dm++,k?(d.isHydrating=!1,d.activeBranch=g):c(g,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),y?(l(null,h,d.hiddenContainer,null,s,d,o,r,a),d.deps<=0?d.resolve():(l(p,f,t,i,s,null,o,r,a),ka(d,f))):p&&$i(p,h)?(l(p,h,t,i,s,d,o,r,a),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,s,d,o,r,a),d.deps<=0&&d.resolve()));else if(p&&$i(p,h))l(p,h,t,i,s,d,o,r,a),ka(d,h);else if(mc(e,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=Dm++,l(null,h,d.hiddenContainer,null,s,d,o,r,a),d.deps<=0)d.resolve();else{const{timeout:v,pendingId:b}=d;v>0?setTimeout(()=>{d.pendingId===b&&d.fallback(f)},v):v===0&&d.fallback(f)}}function vx(n,e,t,i,s,o,r,a,l,c,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:g,remove:y}}=c;let k;const v=pO(n);v&&e&&e.pendingBranch&&(k=e.pendingId,e.deps++);const b=n.props?ac(n.props.timeout):void 0,w=o,C={vnode:n,parent:e,parentComponent:t,namespace:r,container:i,hiddenContainer:s,deps:0,pendingId:Dm++,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(E=!1,I=!1){const{vnode:x,activeBranch:_,pendingBranch:S,pendingId:R,effects:B,parentComponent:F,container:ee}=C;let K=!1;C.isHydrating?C.isHydrating=!1:E||(K=_&&S.transition&&S.transition.mode==="out-in",K&&(_.transition.afterLeave=()=>{R===C.pendingId&&(h(S,ee,o===w?p(_):o,0),dc(B))}),_&&(g(_.el)===ee&&(o=p(_)),f(_,F,C,!0)),K||h(S,ee,o,0)),ka(C,S),C.pendingBranch=null,C.isInFallback=!1;let G=C.parent,oe=!1;for(;G;){if(G.pendingBranch){G.effects.push(...B),oe=!0;break}G=G.parent}!oe&&!K&&dc(B),C.effects=[],v&&e&&e.pendingBranch&&k===e.pendingId&&(e.deps--,e.deps===0&&!I&&e.resolve()),mc(x,"onResolve")},fallback(E){if(!C.pendingBranch)return;const{vnode:I,activeBranch:x,parentComponent:_,container:S,namespace:R}=C;mc(I,"onFallback");const B=p(x),F=()=>{C.isInFallback&&(d(null,E,S,B,_,null,R,a,l),ka(C,E))},ee=E.transition&&E.transition.mode==="out-in";ee&&(x.transition.afterLeave=F),C.isInFallback=!0,f(x,_,null,!0),ee||F()},move(E,I,x){C.activeBranch&&h(C.activeBranch,E,I,x),C.container=E},next(){return C.activeBranch&&p(C.activeBranch)},registerDep(E,I,x){const _=!!C.pendingBranch;_&&C.deps++;const S=E.vnode.el;E.asyncDep.catch(R=>{Mr(R,E,0)}).then(R=>{if(E.isUnmounted||C.isUnmounted||C.pendingId!==E.suspenseId)return;E.asyncResolved=!0;const{vnode:B}=E;Um(E,R,!1),S&&(B.el=S);const F=!S&&E.subTree.el;I(E,B,g(S||E.subTree.el),S?null:p(E.subTree),C,r,x),F&&y(F),Zh(E,B.el),_&&--C.deps===0&&C.resolve()})},unmount(E,I){C.isUnmounted=!0,C.activeBranch&&f(C.activeBranch,t,E,I),C.pendingBranch&&f(C.pendingBranch,t,E,I)}};return C}function hO(n,e,t,i,s,o,r,a,l){const c=e.suspense=vx(e,i,t,n.parentNode,document.createElement("div"),null,s,o,r,a,!0),u=l(n,c.pendingBranch=e.ssContent,t,c,o,r);return c.deps===0&&c.resolve(!1,!0),u}function fO(n){const{shapeFlag:e,children:t}=n,i=e&32;n.ssContent=Cw(i?t.default:t),n.ssFallback=i?Cw(t.fallback):V($t)}function Cw(n){let e;if(ye(n)){const t=yr&&n._c;t&&(n._d=!1,O()),n=n(),t&&(n._d=!0,e=Sn,_x())}return le(n)&&(n=sO(n)),n=Zn(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function wx(n,e){e&&e.pendingBranch?le(n)?e.effects.push(...n):e.effects.push(n):dc(n)}function ka(n,e){n.activeBranch=e;const{vnode:t,parentComponent:i}=n;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;t.el=s,i&&i.subTree===t&&(i.vnode.el=s,Zh(i,s))}function pO(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const Me=Symbol.for("v-fgt"),Ao=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),gr=Symbol.for("v-stc"),ql=[];let Sn=null;function O(n=!1){ql.push(Sn=n?null:[])}function _x(){ql.pop(),Sn=ql[ql.length-1]||null}let yr=1;function gc(n,e=!1){yr+=n,n<0&&Sn&&e&&(Sn.hasOnce=!0)}function yx(n){return n.dynamicChildren=yr>0?Sn||ur:null,_x(),yr>0&&Sn&&Sn.push(n),n}function M(n,e,t,i,s,o){return yx(m(n,e,t,i,s,o,!0))}function $n(n,e,t,i,s){return yx(V(n,e,t,i,s,!0))}function ms(n){return n?n.__v_isVNode===!0:!1}function $i(n,e){return n.type===e.type&&n.key===e.key}function mO(n){}const kx=({key:n})=>n??null,ud=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ee(n)||kt(n)||ye(n)?{i:fn,r:n,k:e,f:!!t}:n:null);function m(n,e=null,t=null,i=0,s=null,o=n===Me?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&kx(e),ref:e&&ud(e),scopeId:Wh,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:fn};return a?(M1(l,t),o&128&&n.normalize(l)):t&&(l.shapeFlag|=Ee(t)?8:16),yr>0&&!r&&Sn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Sn.push(l),l}const V=gO;function gO(n,e=null,t=null,i=0,s=null,o=!1){if((!n||n===KE)&&(n=$t),ms(n)){const a=gs(n,e,!0);return t&&M1(a,t),yr>0&&!o&&Sn&&(a.shapeFlag&6?Sn[Sn.indexOf(n)]=a:Sn.push(a)),a.patchFlag=-2,a}if(CO(n)&&(n=n.__vccOpts),e){e=Cx(e);let{class:a,style:l}=e;a&&!Ee(a)&&(e.class=rt(a)),Xe(l)&&(jh(l)&&!le(l)&&(l=Ve({},l)),e.style=Xa(l))}const r=Ee(n)?1:zd(n)?128:BE(n)?64:Xe(n)?4:ye(n)?2:0;return m(n,e,t,i,s,r,o,!0)}function Cx(n){return n?jh(n)||ex(n)?Ve({},n):n:null}function gs(n,e,t=!1,i=!1){const{props:s,ref:o,patchFlag:r,children:a,transition:l}=n,c=e?Jh(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&kx(c),ref:e&&e.ref?t&&o?le(o)?o.concat(ud(e)):[o,ud(e)]:ud(e):o,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Me?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&gs(n.ssContent),ssFallback:n.ssFallback&&gs(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&Xs(u,l.clone(u)),u}function be(n=" ",e=0){return V(Ao,null,n,e)}function Jt(n,e){const t=V(gr,null,n);return t.staticCount=e,t}function ae(n="",e=!1){return e?(O(),$n($t,null,n)):V($t,null,n)}function Zn(n){return n==null||typeof n=="boolean"?V($t):le(n)?V(Me,null,n.slice()):ms(n)?ko(n):V(Ao,null,String(n))}function ko(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:gs(n)}function M1(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(le(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),M1(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!ex(e)?e._ctx=fn:s===3&&fn&&(fn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else ye(e)?(e={default:e,_ctx:fn},t=32):(e=String(e),i&64?(t=16,e=[be(e)]):t=8);n.children=e,n.shapeFlag|=t}function Jh(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=rt([e.class,i.class]));else if(s==="style")e.style=Xa([e.style,i.style]);else if(jo(s)){const o=e[s],r=i[s];r&&o!==r&&!(le(o)&&o.includes(r))&&(e[s]=o?[].concat(o,r):r)}else s!==""&&(e[s]=i[s])}return e}function Gn(n,e,t,i=null){Ti(n,e,7,[t,i])}const bO=JE();let vO=0;function Ex(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||bO,o={uid:vO++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new a1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:nx(i,s),emitsOptions:bx(i,s),emit:null,emitted:null,propsDefaults:De,inheritAttrs:i.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=nO.bind(null,o),n.ce&&n.ce(o),o}let hn=null;const jn=()=>hn||fn;let Wd,Fm;{const n=Kc(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),o=>{s.length>1?s.forEach(r=>r(o)):s[0](o)}};Wd=e("__VUE_INSTANCE_SETTERS__",t=>hn=t),Fm=e("__VUE_SSR_SETTERS__",t=>Pa=t)}const kr=n=>{const e=hn;return Wd(n),n.scope.on(),()=>{n.scope.off(),Wd(e)}},$m=()=>{hn&&hn.scope.off(),Wd(null)};function xx(n){return n.vnode.shapeFlag&4}let Pa=!1;function Tx(n,e=!1,t=!1){e&&Fm(e);const{props:i,children:s}=n.vnode,o=xx(n);G6(n,i,o,e),J6(n,s,t||e);const r=o?wO(n,e):void 0;return e&&Fm(!1),r}function wO(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Bm);const{setup:i}=t;if(i){qs();const s=n.setupContext=i.length>1?Ix(n):null,o=kr(n),r=Ja(i,n,0,[n.props,s]),a=Nh(r);if(Gs(),o(),(a||n.sp)&&!Io(n)&&w1(n),a){if(r.then($m,$m),e)return r.then(l=>{Um(n,l,e)}).catch(l=>{Mr(l,n,0)});n.asyncDep=r}else Um(n,r,e)}else Sx(n,e)}function Um(n,e,t){ye(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Xe(e)&&(n.setupState=m1(e)),Sx(n,t)}let qd,Hm;function _O(n){qd=n,Hm=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,S6))}}const yO=()=>!qd;function Sx(n,e,t){const i=n.type;if(!n.render){if(!e&&qd&&!i.render){const s=i.template||S1(n).template;if(s){const{isCustomElement:o,compilerOptions:r}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ve(Ve({isCustomElement:o,delimiters:a},r),l);i.render=qd(s,c)}}n.render=i.render||rn,Hm&&Hm(n)}{const s=kr(n);qs();try{$6(n)}finally{Gs(),s()}}}const kO={get(n,e){return En(n,"get",""),n[e]}};function Ix(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,kO),slots:n.slots,emit:n.emit,expose:e}}function Qc(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(m1(zh(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in zl)return zl[t](n)},has(e,t){return t in e||t in zl}})):n.proxy}function jm(n,e=!0){return ye(n)?n.displayName||n.name:n.name||e&&n.__name}function CO(n){return ye(n)&&"__vccOpts"in n}const it=(n,e)=>U7(n,e,Pa);function Yh(n,e,t){try{gc(-1);const i=arguments.length;return i===2?Xe(e)&&!le(e)?ms(e)?V(n,null,[e]):V(n,e):V(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&ms(t)&&(t=[t]),V(n,e,t))}finally{gc(1)}}function EO(){}function xO(n,e,t,i){const s=t[i];if(s&&Ax(s,n))return s;const o=e();return o.memo=n.slice(),o.cacheIndex=i,t[i]=o}function Ax(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(Cn(t[i],e[i]))return!1;return yr>0&&Sn&&Sn.push(n),!0}const Px="3.5.22",TO=rn,SO=Z7,IO=la,AO=ME,PO={createComponentInstance:Ex,setupComponent:Tx,renderComponentRoot:cd,setCurrentRenderingInstance:fc,isVNode:ms,normalizeVNode:Zn,getComponentPublicInstance:Qc,ensureValidVNode:T1,pushWarningContext:q7,popWarningContext:G7},OO=PO,MO=null,RO=null,BO=null;/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zm;const Ew=typeof window<"u"&&window.trustedTypes;if(Ew)try{zm=Ew.createPolicy("vue",{createHTML:n=>n})}catch{}const Ox=zm?n=>zm.createHTML(n):n=>n,LO="http://www.w3.org/2000/svg",NO="http://www.w3.org/1998/Math/MathML",Ps=typeof document<"u"?document:null,xw=Ps&&Ps.createElement("template"),VO={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?Ps.createElementNS(LO,n):e==="mathml"?Ps.createElementNS(NO,n):t?Ps.createElement(n,{is:t}):Ps.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>Ps.createTextNode(n),createComment:n=>Ps.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ps.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,o){const r=t?t.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===o||!(s=s.nextSibling)););else{xw.innerHTML=Ox(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=xw.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},oo="transition",bl="animation",Oa=Symbol("_vtc"),Mx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Rx=Ve({},v1,Mx),DO=n=>(n.displayName="Transition",n.props=Rx,n),FO=DO((n,{slots:e})=>Yh(FE,Bx(n),e)),Jo=(n,e=[])=>{le(n)?n.forEach(t=>t(...e)):n&&n(...e)},Tw=n=>n?le(n)?n.some(e=>e.length>1):n.length>1:!1;function Bx(n){const e={};for(const B in n)B in Mx||(e[B]=n[B]);if(n.css===!1)return e;const{name:t="v",type:i,duration:s,enterFromClass:o=`${t}-enter-from`,enterActiveClass:r=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=o,appearActiveClass:c=r,appearToClass:u=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=n,p=$O(s),g=p&&p[0],y=p&&p[1],{onBeforeEnter:k,onEnter:v,onEnterCancelled:b,onLeave:w,onLeaveCancelled:C,onBeforeAppear:E=k,onAppear:I=v,onAppearCancelled:x=b}=e,_=(B,F,ee,K)=>{B._enterCancelled=K,uo(B,F?u:a),uo(B,F?c:r),ee&&ee()},S=(B,F)=>{B._isLeaving=!1,uo(B,d),uo(B,f),uo(B,h),F&&F()},R=B=>(F,ee)=>{const K=B?I:v,G=()=>_(F,B,ee);Jo(K,[F,G]),Sw(()=>{uo(F,B?l:o),os(F,B?u:a),Tw(K)||Iw(F,i,g,G)})};return Ve(e,{onBeforeEnter(B){Jo(k,[B]),os(B,o),os(B,r)},onBeforeAppear(B){Jo(E,[B]),os(B,l),os(B,c)},onEnter:R(!1),onAppear:R(!0),onLeave(B,F){B._isLeaving=!0;const ee=()=>S(B,F);os(B,d),B._enterCancelled?(os(B,h),Wm(B)):(Wm(B),os(B,h)),Sw(()=>{B._isLeaving&&(uo(B,d),os(B,f),Tw(w)||Iw(B,i,y,ee))}),Jo(w,[B,ee])},onEnterCancelled(B){_(B,!1,void 0,!0),Jo(b,[B])},onAppearCancelled(B){_(B,!0,void 0,!0),Jo(x,[B])},onLeaveCancelled(B){S(B),Jo(C,[B])}})}function $O(n){if(n==null)return null;if(Xe(n))return[bp(n.enter),bp(n.leave)];{const e=bp(n);return[e,e]}}function bp(n){return ac(n)}function os(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Oa]||(n[Oa]=new Set)).add(e)}function uo(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[Oa];t&&(t.delete(e),t.size||(n[Oa]=void 0))}function Sw(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let UO=0;function Iw(n,e,t,i){const s=n._endId=++UO,o=()=>{s===n._endId&&i()};if(t!=null)return setTimeout(o,t);const{type:r,timeout:a,propCount:l}=Lx(n,e);if(!r)return i();const c=r+"end";let u=0;const d=()=>{n.removeEventListener(c,h),o()},h=f=>{f.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),n.addEventListener(c,h)}function Lx(n,e){const t=window.getComputedStyle(n),i=p=>(t[p]||"").split(", "),s=i(`${oo}Delay`),o=i(`${oo}Duration`),r=Aw(s,o),a=i(`${bl}Delay`),l=i(`${bl}Duration`),c=Aw(a,l);let u=null,d=0,h=0;e===oo?r>0&&(u=oo,d=r,h=o.length):e===bl?c>0&&(u=bl,d=c,h=l.length):(d=Math.max(r,c),u=d>0?r>c?oo:bl:null,h=u?u===oo?o.length:l.length:0);const f=u===oo&&/\b(?:transform|all)(?:,|$)/.test(i(`${oo}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function Aw(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>Pw(t)+Pw(n[i])))}function Pw(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Wm(n){return(n?n.ownerDocument:document).body.offsetHeight}function HO(n,e,t){const i=n[Oa];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Gd=Symbol("_vod"),Nx=Symbol("_vsh"),R1={name:"show",beforeMount(n,{value:e},{transition:t}){n[Gd]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):vl(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),vl(n,!0),i.enter(n)):i.leave(n,()=>{vl(n,!1)}):vl(n,e))},beforeUnmount(n,{value:e}){vl(n,e)}};function vl(n,e){n.style.display=e?n[Gd]:"none",n[Nx]=!e}function jO(){R1.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const Vx=Symbol("");function zO(n){const e=jn();if(!e)return;const t=e.ut=(s=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>Kd(o,s))},i=()=>{const s=n(e.proxy);e.ce?Kd(e.ce,s):qm(e.subTree,s),t(s)};k1(()=>{dc(i)}),Ct(()=>{In(i,rn,{flush:"post"});const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),Rr(()=>s.disconnect())})}function qm(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{qm(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Kd(n.el,e);else if(n.type===Me)n.children.forEach(t=>qm(t,e));else if(n.type===gr){let{el:t,anchor:i}=n;for(;t&&(Kd(t,e),t!==i);)t=t.nextSibling}}function Kd(n,e){if(n.nodeType===1){const t=n.style;let i="";for(const s in e){const o=sE(e[s]);t.setProperty(`--${s}`,o),i+=`--${s}: ${o};`}t[Vx]=i}}const WO=/(?:^|;)\s*display\s*:/;function qO(n,e,t){const i=n.style,s=Ee(t);let o=!1;if(t&&!s){if(e)if(Ee(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();t[a]==null&&dd(i,a,"")}else for(const r in e)t[r]==null&&dd(i,r,"");for(const r in t)r==="display"&&(o=!0),dd(i,r,t[r])}else if(s){if(e!==t){const r=i[Vx];r&&(t+=";"+r),i.cssText=t,o=WO.test(t)}}else e&&n.removeAttribute("style");Gd in n&&(n[Gd]=o?i.display:"",n[Nx]&&(i.display="none"))}const Ow=/\s*!important$/;function dd(n,e,t){if(le(t))t.forEach(i=>dd(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=GO(n,e);Ow.test(t)?n.setProperty(xn(i),t.replace(Ow,""),"important"):n[i]=t}}const Mw=["Webkit","Moz","ms"],vp={};function GO(n,e){const t=vp[e];if(t)return t;let i=ft(e);if(i!=="filter"&&i in n)return vp[e]=i;i=Wo(i);for(let s=0;s<Mw.length;s++){const o=Mw[s]+i;if(o in n)return vp[e]=o}return e}const Rw="http://www.w3.org/1999/xlink";function Bw(n,e,t,i,s,o=eE(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Rw,e.slice(6,e.length)):n.setAttributeNS(Rw,e,t):t==null||o&&!r1(t)?n.removeAttribute(e):n.setAttribute(e,o?"":Hn(t)?String(t):t)}function Lw(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Ox(t):t);return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let r=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=r1(t):t==null&&a==="string"?(t="",r=!0):a==="number"&&(t=0,r=!0)}try{n[e]=t}catch{}r&&n.removeAttribute(s||e)}function Vs(n,e,t,i){n.addEventListener(e,t,i)}function KO(n,e,t,i){n.removeEventListener(e,t,i)}const Nw=Symbol("_vei");function XO(n,e,t,i,s=null){const o=n[Nw]||(n[Nw]={}),r=o[e];if(i&&r)r.value=i;else{const[a,l]=ZO(e);if(i){const c=o[e]=QO(i,s);Vs(n,a,c,l)}else r&&(KO(n,a,r,l),o[e]=void 0)}}const Vw=/(?:Once|Passive|Capture)$/;function ZO(n){let e;if(Vw.test(n)){e={};let i;for(;i=n.match(Vw);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):xn(n.slice(2)),e]}let wp=0;const JO=Promise.resolve(),YO=()=>wp||(JO.then(()=>wp=0),wp=Date.now());function QO(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Ti(e8(i,t.value),e,5,[i])};return t.value=n,t.attached=YO(),t}function e8(n,e){if(le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Dw=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,t8=(n,e,t,i,s,o)=>{const r=s==="svg";e==="class"?HO(n,i,r):e==="style"?qO(n,t,i):jo(e)?Bh(e)||XO(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):n8(n,e,i,r))?(Lw(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Bw(n,e,i,r,o,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ee(i))?Lw(n,ft(e),i,o,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Bw(n,e,i,r))};function n8(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&Dw(e)&&ye(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Dw(e)&&Ee(t)?!1:e in n}const Fw={};function Dx(n,e,t){let i=Qa(n,e);Gc(i)&&(i=Ve({},i,e));class s extends Qh{constructor(r){super(i,r,t)}}return s.def=i,s}const i8=((n,e)=>Dx(n,e,Zx)),s8=typeof HTMLElement<"u"?HTMLElement:class{};class Qh extends s8{constructor(e,t={},i=Zd){super(),this._def=e,this._props=t,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==Zd?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow(Ve({},e.shadowRootOptions,{mode:"open"})),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Qh){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Ya(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null,this._teleportTargets&&(this._teleportTargets.clear(),this._teleportTargets=void 0))})}_processMutations(e){for(const t of e)this._setAttr(t.attributeName)}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(this._processMutations.bind(this)),this._ob.observe(this,{attributes:!0});const e=(i,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:o,styles:r}=i;let a;if(o&&!le(o))for(const l in o){const c=o[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=ac(this._props[l])),(a||(a=Object.create(null)))[ft(l)]=!0)}this._numberProps=a,this._resolveProps(i),this.shadowRoot&&this._applyStyles(r),this._mount(i)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(i=>{i.configureApp=this._def.configureApp,e(this._def=i,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const i in t)Ge(this,i)||Object.defineProperty(this,i,{get:()=>pe(t[i])})}_resolveProps(e){const{props:t}=e,i=le(t)?t:Object.keys(t||{});for(const s of Object.keys(this))s[0]!=="_"&&i.includes(s)&&this._setProp(s,this[s]);for(const s of i.map(ft))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(o){this._setProp(s,o,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let i=t?this.getAttribute(e):Fw;const s=ft(e);t&&this._numberProps&&this._numberProps[s]&&(i=ac(i)),this._setProp(s,i,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,i=!0,s=!1){if(t!==this._props[e]&&(t===Fw?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),s&&this._instance&&this._update(),i)){const o=this._ob;o&&(this._processMutations(o.takeRecords()),o.disconnect()),t===!0?this.setAttribute(xn(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(xn(e),t+""):t||this.removeAttribute(xn(e)),o&&o.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),Xx(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=V(this._def,Ve(e,this._props));return this._instance||(t.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const s=(o,r)=>{this.dispatchEvent(new CustomEvent(o,Gc(r[0])?Ve({detail:r},r[0]):{detail:r}))};i.emit=(o,...r)=>{s(o,r),xn(o)!==o&&s(xn(o),r)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const i=this._nonce;for(let s=e.length-1;s>=0;s--){const o=document.createElement("style");i&&o.setAttribute("nonce",i),o.textContent=e[s],this.shadowRoot.prepend(o)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const i=t.nodeType===1&&t.getAttribute("slot")||"default";(e[i]||(e[i]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=this._getSlots(),t=this._instance.type.__scopeId;for(let i=0;i<e.length;i++){const s=e[i],o=s.getAttribute("name")||"default",r=this._slots[o],a=s.parentNode;if(r)for(const l of r){if(t&&l.nodeType===1){const c=t+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_getSlots(){const e=[this];return this._teleportTargets&&e.push(...this._teleportTargets),e.reduce((t,i)=>(t.push(...Array.from(i.querySelectorAll("slot"))),t),[])}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function Fx(n){const e=jn(),t=e&&e.ce;return t||null}function o8(){const n=Fx();return n&&n.shadowRoot}function r8(n="$style"){{const e=jn();if(!e)return De;const t=e.type.__cssModules;if(!t)return De;const i=t[n];return i||De}}const $x=new WeakMap,Ux=new WeakMap,Xd=Symbol("_moveCb"),$w=Symbol("_enterCb"),a8=n=>(delete n.props.mode,n),l8=a8({name:"TransitionGroup",props:Ve({},Rx,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=jn(),i=b1();let s,o;return Kh(()=>{if(!s.length)return;const r=n.moveClass||`${n.name||"v"}-move`;if(!h8(s[0].el,t.vnode.el,r)){s=[];return}s.forEach(c8),s.forEach(u8);const a=s.filter(d8);Wm(t.vnode.el),a.forEach(l=>{const c=l.el,u=c.style;os(c,r),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Xd]=h=>{h&&h.target!==c||(!h||h.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",d),c[Xd]=null,uo(c,r))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const r=$e(n),a=Bx(r);let l=r.tag||Me;if(s=[],o)for(let c=0;c<o.length;c++){const u=o[c];u.el&&u.el instanceof Element&&(s.push(u),Xs(u,Aa(u,a,i,t)),$x.set(u,u.el.getBoundingClientRect()))}o=e.default?qh(e.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&Xs(u,Aa(u,a,i,t))}return V(l,null,o)}}}),Hx=l8;function c8(n){const e=n.el;e[Xd]&&e[Xd](),e[$w]&&e[$w]()}function u8(n){Ux.set(n,n.el.getBoundingClientRect())}function d8(n){const e=$x.get(n),t=Ux.get(n),i=e.left-t.left,s=e.top-t.top;if(i||s){const o=n.el.style;return o.transform=o.webkitTransform=`translate(${i}px,${s}px)`,o.transitionDuration="0s",n}}function h8(n,e,t){const i=n.cloneNode(),s=n[Oa];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(i);const{hasTransform:r}=Lx(i);return o.removeChild(i),r}const Ro=n=>{const e=n.props["onUpdate:modelValue"]||!1;return le(e)?t=>fr(e,t):e};function f8(n){n.target.composing=!0}function Uw(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ci=Symbol("_assign"),Vt={created(n,{modifiers:{lazy:e,trim:t,number:i}},s){n[Ci]=Ro(s);const o=i||s.props&&s.props.type==="number";Vs(n,e?"change":"input",r=>{if(r.target.composing)return;let a=n.value;t&&(a=a.trim()),o&&(a=rc(a)),n[Ci](a)}),t&&Vs(n,"change",()=>{n.value=n.value.trim()}),e||(Vs(n,"compositionstart",f8),Vs(n,"compositionend",Uw),Vs(n,"change",Uw))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:s,number:o}},r){if(n[Ci]=Ro(r),n.composing)return;const a=(o||n.type==="number")&&!/^0\d/.test(n.value)?rc(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||s&&n.value.trim()===l)||(n.value=l))}},eu={deep:!0,created(n,e,t){n[Ci]=Ro(t),Vs(n,"change",()=>{const i=n._modelValue,s=Ma(n),o=n.checked,r=n[Ci];if(le(i)){const a=Xc(i,s),l=a!==-1;if(o&&!l)r(i.concat(s));else if(!o&&l){const c=[...i];c.splice(a,1),r(c)}}else if(zo(i)){const a=new Set(i);o?a.add(s):a.delete(s),r(a)}else r(jx(n,o))})},mounted:Hw,beforeUpdate(n,e,t){n[Ci]=Ro(t),Hw(n,e,t)}};function Hw(n,{value:e,oldValue:t},i){n._modelValue=e;let s;if(le(e))s=Xc(e,i.props.value)>-1;else if(zo(e))s=e.has(i.props.value);else{if(e===t)return;s=Ws(e,jx(n,!0))}n.checked!==s&&(n.checked=s)}const ef={created(n,{value:e},t){n.checked=Ws(e,t.props.value),n[Ci]=Ro(t),Vs(n,"change",()=>{n[Ci](Ma(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[Ci]=Ro(i),e!==t&&(n.checked=Ws(e,i.props.value))}},tu={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const s=zo(e);Vs(n,"change",()=>{const o=Array.prototype.filter.call(n.options,r=>r.selected).map(r=>t?rc(Ma(r)):Ma(r));n[Ci](n.multiple?s?new Set(o):o:o[0]),n._assigning=!0,Ya(()=>{n._assigning=!1})}),n[Ci]=Ro(i)},mounted(n,{value:e}){jw(n,e)},beforeUpdate(n,e,t){n[Ci]=Ro(t)},updated(n,{value:e}){n._assigning||jw(n,e)}};function jw(n,e){const t=n.multiple,i=le(e);if(!(t&&!i&&!zo(e))){for(let s=0,o=n.options.length;s<o;s++){const r=n.options[s],a=Ma(r);if(t)if(i){const l=typeof a;l==="string"||l==="number"?r.selected=e.some(c=>String(c)===String(a)):r.selected=Xc(e,a)>-1}else r.selected=e.has(a);else if(Ws(Ma(r),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ma(n){return"_value"in n?n._value:n.value}function jx(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const zx={created(n,e,t){Bu(n,e,t,null,"created")},mounted(n,e,t){Bu(n,e,t,null,"mounted")},beforeUpdate(n,e,t,i){Bu(n,e,t,i,"beforeUpdate")},updated(n,e,t,i){Bu(n,e,t,i,"updated")}};function Wx(n,e){switch(n){case"SELECT":return tu;case"TEXTAREA":return Vt;default:switch(e){case"checkbox":return eu;case"radio":return ef;default:return Vt}}}function Bu(n,e,t,i,s){const r=Wx(n.tagName,t.props&&t.props.type)[s];r&&r(n,e,t,i)}function p8(){Vt.getSSRProps=({value:n})=>({value:n}),ef.getSSRProps=({value:n},e)=>{if(e.props&&Ws(e.props.value,n))return{checked:!0}},eu.getSSRProps=({value:n},e)=>{if(le(n)){if(e.props&&Xc(n,e.props.value)>-1)return{checked:!0}}else if(zo(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},zx.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=Wx(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const m8=["ctrl","shift","alt","meta"],g8={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>m8.some(t=>n[`${t}Key`]&&!e.includes(t))},Gt=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=((s,...o)=>{for(let r=0;r<e.length;r++){const a=g8[e[r]];if(a&&a(s,e))return}return n(s,...o)}))},b8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},v8=(n,e)=>{const t=n._withKeys||(n._withKeys={}),i=e.join(".");return t[i]||(t[i]=(s=>{if(!("key"in s))return;const o=xn(s.key);if(e.some(r=>r===o||b8[r]===o))return n(s)}))},qx=Ve({patchProp:t8},VO);let Gl,zw=!1;function Gx(){return Gl||(Gl=rx(qx))}function Kx(){return Gl=zw?Gl:ax(qx),zw=!0,Gl}const Xx=((...n)=>{Gx().render(...n)}),w8=((...n)=>{Kx().hydrate(...n)}),Zd=((...n)=>{const e=Gx().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=Yx(i);if(!s)return;const o=e._component;!ye(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const r=t(s,!1,Jx(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},e}),Zx=((...n)=>{const e=Kx().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=Yx(i);if(s)return t(s,!0,Jx(s))},e});function Jx(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Yx(n){return Ee(n)?document.querySelector(n):n}let Ww=!1;const _8=()=>{Ww||(Ww=!0,p8(),jO())},y8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:FE,BaseTransitionPropsValidators:v1,Comment:$t,DeprecationTypes:BO,EffectScope:a1,ErrorCodes:X7,ErrorTypeStrings:SO,Fragment:Me,KeepAlive:_6,ReactiveEffect:lc,Static:gr,Suspense:cO,Teleport:i6,Text:Ao,TrackOpTypes:H7,Transition:FO,TransitionGroup:Hx,TriggerOpTypes:j7,VueElement:Qh,assertNumber:K7,callWithAsyncErrorHandling:Ti,callWithErrorHandling:Ja,camelize:ft,capitalize:Wo,cloneVNode:gs,compatUtils:RO,computed:it,createApp:Zd,createBlock:$n,createCommentVNode:ae,createElementBlock:M,createElementVNode:m,createHydrationRenderer:ax,createPropsRestProxy:D6,createRenderer:rx,createSSRApp:Zx,createSlots:x6,createStaticVNode:Jt,createTextVNode:be,createVNode:V,customRef:CE,defineAsyncComponent:v6,defineComponent:Qa,defineCustomElement:Dx,defineEmits:A6,defineExpose:P6,defineModel:R6,defineOptions:O6,defineProps:I6,defineSSRCustomElement:i8,defineSlots:M6,devtools:IO,effect:f7,effectScope:l1,getCurrentInstance:jn,getCurrentScope:c1,getCurrentWatcher:z7,getTransitionRawChildren:qh,guardReactiveProps:Cx,h:Yh,handleError:Mr,hasInjectionContext:I1,hydrate:w8,hydrateOnIdle:h6,hydrateOnInteraction:g6,hydrateOnMediaQuery:m6,hydrateOnVisible:p6,initCustomFormatter:EO,initDirectivesForSSR:_8,inject:Qn,isMemoSame:Ax,isProxy:jh,isReactive:zi,isReadonly:Ks,isRef:kt,isRuntimeOnly:yO,isShallow:mi,isVNode:ms,markRaw:zh,mergeDefaults:V6,mergeModels:el,mergeProps:Jh,nextTick:Ya,normalizeClass:rt,normalizeProps:KC,normalizeStyle:Xa,onActivated:_1,onBeforeMount:jE,onBeforeUnmount:Jc,onBeforeUpdate:k1,onDeactivated:y1,onErrorCaptured:GE,onMounted:Ct,onRenderTracked:qE,onRenderTriggered:WE,onScopeDispose:oE,onServerPrefetch:zE,onUnmounted:Rr,onUpdated:Kh,onWatcherCleanup:SE,openBlock:O,popScopeId:e6,provide:Wl,proxyRefs:m1,pushScopeId:Q7,queuePostFlushCb:dc,reactive:Za,readonly:Nd,ref:X,registerRuntimeCompiler:_O,render:Xx,renderList:jt,renderSlot:x1,resolveComponent:we,resolveDirective:E6,resolveDynamicComponent:C6,resolveFilter:MO,resolveTransitionHooks:Aa,setBlockTracking:gc,setDevtoolsHook:AO,setTransitionHooks:Xs,shallowReactive:f1,shallowReadonly:R7,shallowRef:p1,ssrContextKey:dx,ssrUtils:OO,stop:p7,toDisplayString:te,toHandlerKey:hr,toHandlers:T6,toRaw:$e,toRef:xE,toRefs:EE,toValue:kE,transformVNodeArgs:mO,triggerRef:L7,unref:pe,useAttrs:N6,useCssModule:r8,useCssVars:zO,useHost:Fx,useId:o6,useModel:tl,useSSRContext:hx,useShadowRoot:o8,useSlots:L6,useTemplateRef:UE,useTransitionState:b1,vModelCheckbox:eu,vModelDynamic:zx,vModelRadio:ef,vModelSelect:tu,vModelText:Vt,vShow:R1,version:Px,warn:TO,watch:In,watchEffect:fx,watchPostEffect:eO,watchSyncEffect:px,withAsyncContext:F6,withCtx:Le,withDefaults:B6,withDirectives:vt,withKeys:v8,withMemo:xO,withModifiers:Gt,withScopeId:t6},Symbol.toStringTag,{value:"Module"})),k8={class:"border-b-2 border-gray-300 border-dotted pb-2 mb-6"},C8={class:"text-xl font-bold"},E8={key:0,class:"text-gray-400 font-light text-sm"},x8={__name:"Container",props:{title:{type:String,required:!1},subtitle:{type:String,required:!1}},setup(n){return(e,t)=>(O(),M("div",Jh({class:"mx-auto py-6 md:py-10 max-w-7xl px-1 md:px-3X"},e.$attrs),[m("div",k8,[m("h1",C8,te(n.title),1),n.subtitle?(O(),M("p",E8,te(n.subtitle),1)):ae("",!0)]),x1(e.$slots,"default")],16))}},T8=Object.freeze(Object.defineProperty({__proto__:null,default:x8},Symbol.toStringTag,{value:"Module"}));function Gm(n,e={},t){for(const i in n){const s=n[i],o=t?`${t}:${i}`:i;typeof s=="object"&&s!==null?Gm(s,e,o):typeof s=="function"&&(e[o]=s)}return e}const S8={run:n=>n()},I8=()=>S8,Qx=typeof console.createTask<"u"?console.createTask:I8;function A8(n,e){const t=e.shift(),i=Qx(t);return n.reduce((s,o)=>s.then(()=>i.run(()=>o(...e))),Promise.resolve())}function P8(n,e){const t=e.shift(),i=Qx(t);return Promise.all(n.map(s=>i.run(()=>s(...e))))}function _p(n,e){for(const t of[...n])t(e)}class O8{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,i={}){if(!e||typeof t!="function")return()=>{};const s=e;let o;for(;this._deprecatedHooks[e];)o=this._deprecatedHooks[e],e=o.to;if(o&&!i.allowDeprecated){let r=o.message;r||(r=`${s} hook has been deprecated`+(o.to?`, please use ${o.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(r)||(console.warn(r),this._deprecatedMessages.add(r))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let i,s=(...o)=>(typeof i=="function"&&i(),i=void 0,s=void 0,t(...o));return i=this.hook(e,s),i}removeHook(e,t){if(this._hooks[e]){const i=this._hooks[e].indexOf(t);i!==-1&&this._hooks[e].splice(i,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const i=this._hooks[e]||[];delete this._hooks[e];for(const s of i)this.hook(e,s)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=Gm(e),i=Object.keys(t).map(s=>this.hook(s,t[s]));return()=>{for(const s of i.splice(0,i.length))s()}}removeHooks(e){const t=Gm(e);for(const i in t)this.removeHook(i,t[i])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(A8,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(P8,e,...t)}callHookWith(e,t,...i){const s=this._before||this._after?{name:t,args:i,context:{}}:void 0;this._before&&_p(this._before,s);const o=e(t in this._hooks?[...this._hooks[t]]:[],i);return o instanceof Promise?o.finally(()=>{this._after&&s&&_p(this._after,s)}):(this._after&&s&&_p(this._after,s),o)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function M8(){return new O8}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let eT;const tf=n=>eT=n,tT=Symbol();function Km(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Kl;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Kl||(Kl={}));function R8(){const n=l1(!0),e=n.run(()=>X({}));let t=[],i=[];const s=zh({install(o){tf(s),s._a=o,o.provide(tT,s),o.config.globalProperties.$pinia=s,i.forEach(r=>t.push(r)),i=[]},use(o){return this._a?t.push(o):i.push(o),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return s}const nT=()=>{};function qw(n,e,t,i=nT){n.push(e);const s=()=>{const o=n.indexOf(e);o>-1&&(n.splice(o,1),i())};return!t&&c1()&&oE(s),s}function qr(n,...e){n.slice().forEach(t=>{t(...e)})}const B8=n=>n(),Gw=Symbol(),yp=Symbol();function Xm(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,i)=>n.set(i,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],s=n[t];Km(s)&&Km(i)&&n.hasOwnProperty(t)&&!kt(i)&&!zi(i)?n[t]=Xm(s,i):n[t]=i}return n}const L8=Symbol();function N8(n){return!Km(n)||!Object.prototype.hasOwnProperty.call(n,L8)}const{assign:ho}=Object;function V8(n){return!!(kt(n)&&n.effect)}function D8(n,e,t,i){const{state:s,actions:o,getters:r}=e,a=t.state.value[n];let l;function c(){a||(t.state.value[n]=s?s():{});const u=EE(t.state.value[n]);return ho(u,o,Object.keys(r||{}).reduce((d,h)=>(d[h]=zh(it(()=>{tf(t);const f=t._s.get(n);return r[h].call(f,f)})),d),{}))}return l=iT(n,c,e,t,i,!0),l}function iT(n,e,t={},i,s,o){let r;const a=ho({actions:{}},t),l={deep:!0};let c,u,d=[],h=[],f;const p=i.state.value[n];!o&&!p&&(i.state.value[n]={}),X({});let g;function y(x){let _;c=u=!1,typeof x=="function"?(x(i.state.value[n]),_={type:Kl.patchFunction,storeId:n,events:f}):(Xm(i.state.value[n],x),_={type:Kl.patchObject,payload:x,storeId:n,events:f});const S=g=Symbol();Ya().then(()=>{g===S&&(c=!0)}),u=!0,qr(d,_,i.state.value[n])}const k=o?function(){const{state:_}=t,S=_?_():{};this.$patch(R=>{ho(R,S)})}:nT;function v(){r.stop(),d=[],h=[],i._s.delete(n)}const b=(x,_="")=>{if(Gw in x)return x[yp]=_,x;const S=function(){tf(i);const R=Array.from(arguments),B=[],F=[];function ee(oe){B.push(oe)}function K(oe){F.push(oe)}qr(h,{args:R,name:S[yp],store:C,after:ee,onError:K});let G;try{G=x.apply(this&&this.$id===n?this:C,R)}catch(oe){throw qr(F,oe),oe}return G instanceof Promise?G.then(oe=>(qr(B,oe),oe)).catch(oe=>(qr(F,oe),Promise.reject(oe))):(qr(B,G),G)};return S[Gw]=!0,S[yp]=_,S},w={_p:i,$id:n,$onAction:qw.bind(null,h),$patch:y,$reset:k,$subscribe(x,_={}){const S=qw(d,x,_.detached,()=>R()),R=r.run(()=>In(()=>i.state.value[n],B=>{(_.flush==="sync"?u:c)&&x({storeId:n,type:Kl.direct,events:f},B)},ho({},l,_)));return S},$dispose:v},C=Za(w);i._s.set(n,C);const I=(i._a&&i._a.runWithContext||B8)(()=>i._e.run(()=>(r=l1()).run(()=>e({action:b}))));for(const x in I){const _=I[x];if(kt(_)&&!V8(_)||zi(_))o||(p&&N8(_)&&(kt(_)?_.value=p[x]:Xm(_,p[x])),i.state.value[n][x]=_);else if(typeof _=="function"){const S=b(_,x);I[x]=S,a.actions[x]=_}}return ho(C,I),ho($e(C),I),Object.defineProperty(C,"$state",{get:()=>i.state.value[n],set:x=>{y(_=>{ho(_,x)})}}),i._p.forEach(x=>{ho(C,r.run(()=>x({store:C,app:i._a,pinia:i,options:a})))}),p&&o&&t.hydrate&&t.hydrate(C.$state,p),c=!0,u=!0,C}/*! #__NO_SIDE_EFFECTS__ */function sT(n,e,t){let i;const s=typeof e=="function";i=s?t:e;function o(r,a){const l=I1();return r=r||(l?Qn(tT,null):null),r&&tf(r),r=eT,r._s.has(n)||(s?iT(n,e,i,r):D8(n,i,r)),r._s.get(n)}return o.$id=n,o}function nf(n){const e=$e(n),t={};for(const i in e){const s=e[i];s.effect?t[i]=it({get:()=>n[i],set(o){n[i]=o}}):(kt(s)||zi(s))&&(t[i]=xE(n,i))}return t}const Si=sT("useAuthStore",()=>{const n=X(null),e=X(null);return{user:n,tenant:e,updateUser:o=>{n.value={...n.value,...o}},updateTenant:o=>{e.value={...e.value,...o}},setAuth:async()=>{const o=await He.get("/api/auth");n.value=o.data.user,e.value=o.data.tenant}}}),F8={class:"bg-white py-2 px-2 xl:px-0 !bg-purple-700 bg-gradient-to-l from-gray-900 via-indigo-800 to-blue-900 !p-3 text-white","wire:ignore":""},$8={class:"max-w-7xl mx-auto flex items-center justify-between gap-x-2"},U8={class:"flex items-center"},H8={class:"flex items-center gap-4"},j8=["href"],z8=["src"],W8={class:"absolute mt-3 z-40 left-0","x-transition":""},q8={class:"p-0.5 bg-white rounded-b-md mt-px w-48 text-sm"},G8={class:"text-gray-500 p-2 mb-1"},K8={class:"font-medium text-sm text-gray-500"},X8={class:"text-gray-500 text-sm [*+&]:mt-2"},Z8={__name:"Header",setup(n){const e=X(!1);let t=X(null);const i=Si(),s=()=>{e.value=!e.value},o=()=>{e.value=!1},r=a=>{t.value&&!t.value.contains(a.target)&&o()};return Ct(()=>{document.addEventListener("click",r)}),Rr(()=>{document.removeEventListener("click",r)}),(a,l)=>{const c=we("RouterLink");return O(),M("div",F8,[m("div",$8,[m("div",U8,[V(c,{to:{name:"home"},class:"inline-flex items-center gap-2","wire:navigate":""},{default:Le(()=>[...l[0]||(l[0]=[m("img",{src:"/assets/images/broshur-logo-shape.webp",alt:"",class:"size-6 !w-auto"},null,-1),m("img",{src:"/assets/images/logo-white-0.webp",alt:"",class:"size-6 !w-auto hidden md:block"},null,-1)])]),_:1})]),m("div",H8,[m("a",{href:pe(i)?.tenant?.storefront_url,target:"_blank",class:"btn btn-primary btn-sm flex items-center gap-x-3"},[...l[1]||(l[1]=[Jt('<span class="text-sm hidden lg:flex">   </span><span class="text-sm flex lg:hidden">  </span><svg viewBox="0 0 24 24" fill="none" class="size-5 -rotate-90" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M13 11L22 2M22 2H16.6562M22 2V7.34375" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="0.5" d="M22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></g></svg>',3)])],8,j8),m("div",{class:"relative",ref_key:"dropdownRef",ref:t},[m("div",{class:"cursor-pointer flex items-center gap-x-2",onClick:s,"icon:trailing":"chevron-down"},[m("img",{src:pe(i)?.user?.image,alt:"",class:"object-cover rounded-full size-8 border-2 border-black/10 hover:border-black/20"},null,8,z8),l[2]||(l[2]=m("span",null,[m("svg",{class:"h-4 inline-block size-5 w-4 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[m("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M6 9l6 6l6 -6"})])],-1))]),vt(m("div",W8,[m("div",q8,[m("div",G8,[m("h1",K8,te(pe(i)?.user?.name),1),m("div",X8,te(pe(i)?.user?.email),1)]),m("div",{class:"grid gap-y-px",onClick:s},[V(c,{to:{name:"account"},class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex bg-black/10 bg-gray-100 px-4 py-2 text-sm transition-all transition-colors duration-300 items-center justify-center justify-start whitespace-nowrap rounded-md hover:bg-black/20 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none","wire:navigate":""},{default:Le(()=>[...l[3]||(l[3]=[m("span",null,[m("svg",{class:"@if-&& !@if-$label @endif !h-5 !w-5 inline-block size-5 ltr:-ml-1 rtl:-mr-1 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[m("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),m("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})])],-1),m("span",null,"  ",-1)])]),_:1}),l[4]||(l[4]=Jt('<a href="/" class="focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex bg-black/10 bg-gray-100 px-4 py-2 text-sm transition-all transition-colors duration-300 items-center justify-center justify-start whitespace-nowrap rounded-md hover:bg-black/20 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none"><span><svg class="@if-&amp;&amp; !@if-$label @endif !h-5 !w-5 inline-block size-5 ltr:-ml-1 rtl:-mr-1 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l-2 0l9 -9l9 9l-2 0"></path><path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path><path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path></svg></span><span>  </span></a><a href="/logout" class="focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex bg-black/10 bg-gray-100 px-4 py-2 text-sm transition-all transition-colors duration-300 items-center justify-center justify-start whitespace-nowrap rounded-md hover:bg-black/20 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none"><span><svg class="@if-&amp;&amp; !@if-$label @endif !h-5 !w-5 inline-block size-5 ltr:-ml-1 rtl:-mr-1 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"></path><path d="M9 12h12l-3 -3"></path><path d="M18 15l3 -3"></path></svg></span><span>  </span></a>',2))])])],512),[[R1,e.value]])],512)])])])}}},J8=Object.freeze(Object.defineProperty({__proto__:null,default:Z8},Symbol.toStringTag,{value:"Module"})),oT=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},Y8={},Q8={class:"bg-white pt-1x"},eM={class:"flex items-center gap-x-px font-semibold max-w-7xl justify-between lg:justify-start overflow-x-auto mx-auto px-px lg:px-0 divide-x-reverse divide-xXX divide-base-400/20 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"};function tM(n,e){const t=we("RouterLink");return O(),M("nav",Q8,[m("div",eM,[V(t,{to:{name:"home"},title:"",class:"lg:w-fullx xshrink-0 flex w-full px-2 py-3 gap-x-2 items-center justify-center lg:w-auto lg:px-5 lg:shrink",activeClass:"bg-base-200"},{default:Le(()=>[...e[0]||(e[0]=[m("svg",{viewBox:"0 0 24 24",class:"size-7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5",d:"M2 6.94975C2 6.06722 2 5.62595 2.06935 5.25839C2.37464 3.64031 3.64031 2.37464 5.25839 2.06935C5.62595 2 6.06722 2 6.94975 2C7.33642 2 7.52976 2 7.71557 2.01738C8.51665 2.09229 9.27652 2.40704 9.89594 2.92051C10.0396 3.03961 10.1763 3.17633 10.4497 3.44975L11 4C11.8158 4.81578 12.2237 5.22367 12.7121 5.49543C12.9804 5.64471 13.2651 5.7626 13.5604 5.84678C14.0979 6 14.6747 6 15.8284 6H16.2021C18.8345 6 20.1506 6 21.0062 6.76946C21.0849 6.84024 21.1598 6.91514 21.2305 6.99383C22 7.84935 22 9.16554 22 11.7979V14C22 17.7712 22 19.6569 20.8284 20.8284C19.6569 22 17.7712 22 14 22H10C6.22876 22 4.34315 22 3.17157 20.8284C2 19.6569 2 17.7712 2 14V6.94975Z",fill:"#1C274C"}),be(),m("path",{d:"M20 6.23751C19.9992 5.94016 19.9949 5.76263 19.9746 5.60842C19.7974 4.26222 18.7381 3.2029 17.3919 3.02567C17.1969 3 16.9647 3 16.5003 3H9.98828C10.1042 3.10392 10.2347 3.23445 10.45 3.44975L11.0003 4C11.8161 4.81578 12.2239 5.22367 12.7124 5.49543C12.9807 5.64471 13.2653 5.7626 13.5606 5.84678C14.0982 6 14.675 6 15.8287 6H16.2024C17.9814 6 19.1593 6 20 6.23751Z",fill:"#1C274C"}),be(),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.25 10C12.25 9.58579 12.5858 9.25 13 9.25H18C18.4142 9.25 18.75 9.58579 18.75 10C18.75 10.4142 18.4142 10.75 18 10.75H13C12.5858 10.75 12.25 10.4142 12.25 10Z",fill:"#1C274C"})])],-1),m("span",{class:"text-sm hidden lg:block"},"   ",-1),m("span",{class:"text-sm block lg:hidden"},"  ",-1)])]),_:1}),V(t,{to:{name:"design"},title:"",class:"lg:w-fullX xshrink-0 lg:shrink justify-center flex items-center w-full lg:w-auto gap-x-2 lg:px-5 px-2 py-3",activeClass:"bg-base-200"},{default:Le(()=>[...e[1]||(e[1]=[m("svg",{viewBox:"0 0 24 24",class:"size-7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M7 18C7 18.5523 6.55228 19 6 19C5.44772 19 5 18.5523 5 18C5 17.4477 5.44772 17 6 17C6.55228 17 7 17.4477 7 18Z",fill:"#1C274C"}),be(),m("path",{opacity:"0.4",d:"M10 6V18C10 20.2091 8.20914 22 6 22C3.79086 22 2 20.2091 2 18V6C2 3.79086 3.79086 2 6 2C8.20914 2 10 3.79086 10 6Z",fill:"#1C274C"}),be(),m("path",{opacity:"0.7",d:"M9.24756 20.3357L13.2218 16.3614L19.0599 10.2719C20.5819 8.68438 20.5554 6.17138 19.0003 4.61629C17.4218 3.03773 14.8624 3.03773 13.2838 4.61629L10 7.90015V18C10 18.8718 9.72106 19.6786 9.24756 20.3357Z",fill:"#1C274C"}),be(),m("path",{d:"M13.2218 16.3617L9.24756 20.336C9.72014 19.6801 9.99891 18.8752 10 18.0053C9.99711 20.212 8.20736 22 6 22H17.8994C20.1086 22 21.8994 20.2091 21.8994 18C21.8994 15.7909 20.1086 14 17.8994 14H15.486L13.2218 16.3617Z",fill:"#1C274C"})])],-1),m("span",{class:"text-sm"},"  ",-1)])]),_:1}),V(t,{to:{name:"share"},title:"",class:"lg:w-fullX xshrink-0 lg:shrink justify-center flex items-center w-full lg:w-auto gap-x-2 lg:px-5 px-2 py-3",activeClass:"bg-base-200"},{default:Le(()=>[...e[2]||(e[2]=[m("svg",{viewBox:"0 0 24 24",class:"size-7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5",d:"M8.14114 4.5C8 5.34287 8 6.46249 8 8V16C8 17.5375 8 18.6571 8.14114 19.5H8C5.64298 19.5 4.46447 19.5 3.73223 18.7678C3 18.0355 3 16.857 3 14.5V9.5C3 7.14298 3 5.96447 3.73223 5.23223C4.46447 4.5 5.64298 4.5 8 4.5H8.14114Z",fill:"#1C274C"}),be(),m("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.87868 2.87868C8 3.75736 8 5.17157 8 8V16C8 18.8284 8 20.2426 8.87868 21.1213C9.75736 22 11.1716 22 14 22H15C17.8284 22 19.2426 22 20.1213 21.1213C21 20.2426 21 18.8284 21 16V8C21 5.17157 21 3.75736 20.1213 2.87868C19.2426 2 17.8284 2 15 2H14C11.1716 2 9.75736 2 8.87868 2.87868ZM15.0303 7.46967C14.7374 7.17678 14.2626 7.17678 13.9697 7.46967L11.4697 9.96967C11.1768 10.2626 11.1768 10.7374 11.4697 11.0303C11.7626 11.3232 12.2374 11.3232 12.5303 11.0303L13.75 9.81066V16C13.75 16.4142 14.0858 16.75 14.5 16.75C14.9142 16.75 15.25 16.4142 15.25 16V9.81066L16.4697 11.0303C16.7626 11.3232 17.2374 11.3232 17.5303 11.0303C17.8232 10.7374 17.8232 10.2626 17.5303 9.96967L15.0303 7.46967Z",fill:"#1C274C"})])],-1),m("span",{class:"text-sm hidden lg:block"},"   ",-1),m("span",{class:"text-sm block lg:hidden"},"  ",-1)])]),_:1}),V(t,{to:{name:"settings"},title:"",class:"lg:w-fullX xshrink-0 lg:shrink justify-center flex items-center w-full lg:w-auto gap-x-2 lg:px-5 px-2 py-3",activeClass:"bg-base-200"},{default:Le(()=>[...e[3]||(e[3]=[m("svg",{viewBox:"0 0 24 24",class:"size-7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5","fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224Z",fill:"#1C274C"}),be(),m("path",{d:"M15.5227 12C15.5227 13.6569 14.1694 15 12.4999 15C10.8304 15 9.47705 13.6569 9.47705 12C9.47705 10.3431 10.8304 9 12.4999 9C14.1694 9 15.5227 10.3431 15.5227 12Z",fill:"#1C274C"})])],-1),m("span",{class:"text-sm"},"  ",-1)])]),_:1})])])}const nM=oT(Y8,[["render",tM]]),iM=Object.freeze(Object.defineProperty({__proto__:null,default:nM},Symbol.toStringTag,{value:"Module"})),sM={class:"space-y-3 flex flex-col gap-3 w-full"},oM={class:"flex justify-end mt-10"},rM=["disabled"],aM={key:0},lM={key:1,class:"loading loading-spinner loading-xs"},cM={__name:"ThemeOptionsForm",props:["modelValue","options","themeOptions","themeId"],setup(n){const e=X(!1),t=n,{user:i}=nf(Si()),s=it(()=>i.value?.storageUrl??""),o=()=>{e.value=!0,He.post("/api/theme-options",{options:t.modelValue,theme_id:t.themeId}).then(r=>{e.value=!1,console.log(r.data),document.getElementById("preview-iframe").contentWindow.location.reload()}).catch(r=>{e.value=!1,console.error(r)})};return(r,a)=>{const l=we("UiRadioField"),c=we("UiPickColor"),u=we("UiUploadImage");return O(),M("div",null,[a[0]||(a[0]=m("h4",{class:"text-base font-semibold text-gray-800 mb-3 border-b-2 border-gray-200 pb-3 border-dashed"},"   ",-1)),m("div",sM,[(O(!0),M(Me,null,jt(n.themeOptions,(d,h)=>(O(),M("div",{key:h},[d.type=="radio"?(O(),$n(l,{key:0,class:"bg-white my-1",options:d.options,modelValue:n.modelValue[h],"onUpdate:modelValue":f=>n.modelValue[h]=f,model:h,label:d.label,placeholder:"",help:""},null,8,["options","modelValue","onUpdate:modelValue","model","label"])):ae("",!0),d.type=="picker-color"?(O(),$n(c,{key:1,options:d.options,modelValue:n.modelValue[h],"onUpdate:modelValue":f=>n.modelValue[h]=f,name:h,label:d.label,placeholder:"",help:""},null,8,["options","modelValue","onUpdate:modelValue","name","label"])):ae("",!0),d.type=="upload-single-image"?(O(),$n(u,{key:2,modelValue:n.modelValue[h],"onUpdate:modelValue":f=>n.modelValue[h]=f,name:h,preview:n.modelValue[h]!=null?s.value+n.modelValue[h]:"",model:h,label:d.label,placeholder:d.placeholder,help:"option.info",modelId:t.modelId,modelType:"tenant",mediaCollection:"theme-media",collection:"theme-media"},null,8,["modelValue","onUpdate:modelValue","name","preview","model","label","placeholder","modelId"])):ae("",!0)]))),128))]),m("div",oM,[m("button",{onClick:o,class:"btn btn-primary w-full",disabled:e.value},[e.value?ae("",!0):(O(),M("span",aM,"  ")),e.value?(O(),M("span",lM)):ae("",!0)],8,rM)])])}}},uM=Object.freeze(Object.defineProperty({__proto__:null,default:cM},Symbol.toStringTag,{value:"Module"}));var rT=typeof global=="object"&&global&&global.Object===Object&&global,dM=typeof self=="object"&&self&&self.Object===Object&&self,Ji=rT||dM||Function("return this")(),bs=Ji.Symbol,aT=Object.prototype,hM=aT.hasOwnProperty,fM=aT.toString,wl=bs?bs.toStringTag:void 0;function pM(n){var e=hM.call(n,wl),t=n[wl];try{n[wl]=void 0;var i=!0}catch{}var s=fM.call(n);return i&&(e?n[wl]=t:delete n[wl]),s}var mM=Object.prototype,gM=mM.toString;function bM(n){return gM.call(n)}var vM="[object Null]",wM="[object Undefined]",Kw=bs?bs.toStringTag:void 0;function qo(n){return n==null?n===void 0?wM:vM:Kw&&Kw in Object(n)?pM(n):bM(n)}function Ii(n){return n!=null&&typeof n=="object"}var _M="[object Symbol]";function sf(n){return typeof n=="symbol"||Ii(n)&&qo(n)==_M}function lT(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var ni=Array.isArray,Xw=bs?bs.prototype:void 0,Zw=Xw?Xw.toString:void 0;function cT(n){if(typeof n=="string")return n;if(ni(n))return lT(n,cT)+"";if(sf(n))return Zw?Zw.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var yM=/\s/;function kM(n){for(var e=n.length;e--&&yM.test(n.charAt(e)););return e}var CM=/^\s+/;function EM(n){return n&&n.slice(0,kM(n)+1).replace(CM,"")}function pt(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Jw=NaN,xM=/^[-+]0x[0-9a-f]+$/i,TM=/^0b[01]+$/i,SM=/^0o[0-7]+$/i,IM=parseInt;function Yw(n){if(typeof n=="number")return n;if(sf(n))return Jw;if(pt(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=pt(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=EM(n);var t=TM.test(n);return t||SM.test(n)?IM(n.slice(2),t?2:8):xM.test(n)?Jw:+n}function xo(n){return n}var AM="[object AsyncFunction]",PM="[object Function]",OM="[object GeneratorFunction]",MM="[object Proxy]";function Cr(n){if(!pt(n))return!1;var e=qo(n);return e==PM||e==OM||e==AM||e==MM}var kp=Ji["__core-js_shared__"],Qw=(function(){var n=/[^.]+$/.exec(kp&&kp.keys&&kp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function RM(n){return!!Qw&&Qw in n}var BM=Function.prototype,LM=BM.toString;function Br(n){if(n!=null){try{return LM.call(n)}catch{}try{return n+""}catch{}}return""}var NM=/[\\^$.*+?()[\]{}|]/g,VM=/^\[object .+?Constructor\]$/,DM=Function.prototype,FM=Object.prototype,$M=DM.toString,UM=FM.hasOwnProperty,HM=RegExp("^"+$M.call(UM).replace(NM,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jM(n){if(!pt(n)||RM(n))return!1;var e=Cr(n)?HM:VM;return e.test(Br(n))}function zM(n,e){return n?.[e]}function Lr(n,e){var t=zM(n,e);return jM(t)?t:void 0}var Zm=Lr(Ji,"WeakMap"),e_=Object.create,WM=(function(){function n(){}return function(e){if(!pt(e))return{};if(e_)return e_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function qM(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function uT(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var GM=800,KM=16,XM=Date.now;function ZM(n){var e=0,t=0;return function(){var i=XM(),s=KM-(i-t);if(t=i,s>0){if(++e>=GM)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function JM(n){return function(){return n}}var Jd=(function(){try{var n=Lr(Object,"defineProperty");return n({},"",{}),n}catch{}})(),YM=Jd?function(n,e){return Jd(n,"toString",{configurable:!0,enumerable:!1,value:JM(e),writable:!0})}:xo,QM=ZM(YM);function eR(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var tR=9007199254740991,nR=/^(?:0|[1-9]\d*)$/;function of(n,e){var t=typeof n;return e=e??tR,!!e&&(t=="number"||t!="symbol"&&nR.test(n))&&n>-1&&n%1==0&&n<e}function rf(n,e,t){e=="__proto__"&&Jd?Jd(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function nu(n,e){return n===e||n!==n&&e!==e}var iR=Object.prototype,sR=iR.hasOwnProperty;function B1(n,e,t){var i=n[e];(!(sR.call(n,e)&&nu(i,t))||t===void 0&&!(e in n))&&rf(n,e,t)}function nl(n,e,t,i){var s=!t;t||(t={});for(var o=-1,r=e.length;++o<r;){var a=e[o],l=void 0;l===void 0&&(l=n[a]),s?rf(t,a,l):B1(t,a,l)}return t}var t_=Math.max;function oR(n,e,t){return e=t_(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,o=t_(i.length-e,0),r=Array(o);++s<o;)r[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(r),qM(n,this,a)}}function rR(n,e){return QM(oR(n,e,xo),n+"")}var aR=9007199254740991;function L1(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=aR}function il(n){return n!=null&&L1(n.length)&&!Cr(n)}function lR(n,e,t){if(!pt(t))return!1;var i=typeof e;return(i=="number"?il(t)&&of(e,t.length):i=="string"&&e in t)?nu(t[e],n):!1}function dT(n){return rR(function(e,t){var i=-1,s=t.length,o=s>1?t[s-1]:void 0,r=s>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(s--,o):void 0,r&&lR(t[0],t[1],r)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,o)}return e})}var cR=Object.prototype;function N1(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||cR;return n===t}function uR(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var dR="[object Arguments]";function n_(n){return Ii(n)&&qo(n)==dR}var hT=Object.prototype,hR=hT.hasOwnProperty,fR=hT.propertyIsEnumerable,Yd=n_((function(){return arguments})())?n_:function(n){return Ii(n)&&hR.call(n,"callee")&&!fR.call(n,"callee")};function pR(){return!1}var fT=typeof fi=="object"&&fi&&!fi.nodeType&&fi,i_=fT&&typeof pi=="object"&&pi&&!pi.nodeType&&pi,mR=i_&&i_.exports===fT,s_=mR?Ji.Buffer:void 0,gR=s_?s_.isBuffer:void 0,bc=gR||pR,bR="[object Arguments]",vR="[object Array]",wR="[object Boolean]",_R="[object Date]",yR="[object Error]",kR="[object Function]",CR="[object Map]",ER="[object Number]",xR="[object Object]",TR="[object RegExp]",SR="[object Set]",IR="[object String]",AR="[object WeakMap]",PR="[object ArrayBuffer]",OR="[object DataView]",MR="[object Float32Array]",RR="[object Float64Array]",BR="[object Int8Array]",LR="[object Int16Array]",NR="[object Int32Array]",VR="[object Uint8Array]",DR="[object Uint8ClampedArray]",FR="[object Uint16Array]",$R="[object Uint32Array]",gt={};gt[MR]=gt[RR]=gt[BR]=gt[LR]=gt[NR]=gt[VR]=gt[DR]=gt[FR]=gt[$R]=!0;gt[bR]=gt[vR]=gt[PR]=gt[wR]=gt[OR]=gt[_R]=gt[yR]=gt[kR]=gt[CR]=gt[ER]=gt[xR]=gt[TR]=gt[SR]=gt[IR]=gt[AR]=!1;function UR(n){return Ii(n)&&L1(n.length)&&!!gt[qo(n)]}function V1(n){return function(e){return n(e)}}var pT=typeof fi=="object"&&fi&&!fi.nodeType&&fi,Xl=pT&&typeof pi=="object"&&pi&&!pi.nodeType&&pi,HR=Xl&&Xl.exports===pT,Cp=HR&&rT.process,Ra=(function(){try{var n=Xl&&Xl.require&&Xl.require("util").types;return n||Cp&&Cp.binding&&Cp.binding("util")}catch{}})(),o_=Ra&&Ra.isTypedArray,D1=o_?V1(o_):UR,jR=Object.prototype,zR=jR.hasOwnProperty;function mT(n,e){var t=ni(n),i=!t&&Yd(n),s=!t&&!i&&bc(n),o=!t&&!i&&!s&&D1(n),r=t||i||s||o,a=r?uR(n.length,String):[],l=a.length;for(var c in n)(e||zR.call(n,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||of(c,l)))&&a.push(c);return a}function gT(n,e){return function(t){return n(e(t))}}var WR=gT(Object.keys,Object),qR=Object.prototype,GR=qR.hasOwnProperty;function KR(n){if(!N1(n))return WR(n);var e=[];for(var t in Object(n))GR.call(n,t)&&t!="constructor"&&e.push(t);return e}function iu(n){return il(n)?mT(n):KR(n)}function XR(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ZR=Object.prototype,JR=ZR.hasOwnProperty;function YR(n){if(!pt(n))return XR(n);var e=N1(n),t=[];for(var i in n)i=="constructor"&&(e||!JR.call(n,i))||t.push(i);return t}function sl(n){return il(n)?mT(n,!0):YR(n)}var bT=dT(function(n,e){nl(e,sl(e),n)}),QR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eB=/^\w*$/;function F1(n,e){if(ni(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||sf(n)?!0:eB.test(n)||!QR.test(n)||e!=null&&n in Object(e)}var vc=Lr(Object,"create");function tB(){this.__data__=vc?vc(null):{},this.size=0}function nB(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var iB="__lodash_hash_undefined__",sB=Object.prototype,oB=sB.hasOwnProperty;function rB(n){var e=this.__data__;if(vc){var t=e[n];return t===iB?void 0:t}return oB.call(e,n)?e[n]:void 0}var aB=Object.prototype,lB=aB.hasOwnProperty;function cB(n){var e=this.__data__;return vc?e[n]!==void 0:lB.call(e,n)}var uB="__lodash_hash_undefined__";function dB(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=vc&&e===void 0?uB:e,this}function Er(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Er.prototype.clear=tB;Er.prototype.delete=nB;Er.prototype.get=rB;Er.prototype.has=cB;Er.prototype.set=dB;function hB(){this.__data__=[],this.size=0}function af(n,e){for(var t=n.length;t--;)if(nu(n[t][0],e))return t;return-1}var fB=Array.prototype,pB=fB.splice;function mB(n){var e=this.__data__,t=af(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():pB.call(e,t,1),--this.size,!0}function gB(n){var e=this.__data__,t=af(e,n);return t<0?void 0:e[t][1]}function bB(n){return af(this.__data__,n)>-1}function vB(n,e){var t=this.__data__,i=af(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function io(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}io.prototype.clear=hB;io.prototype.delete=mB;io.prototype.get=gB;io.prototype.has=bB;io.prototype.set=vB;var wc=Lr(Ji,"Map");function wB(){this.size=0,this.__data__={hash:new Er,map:new(wc||io),string:new Er}}function _B(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function lf(n,e){var t=n.__data__;return _B(e)?t[typeof e=="string"?"string":"hash"]:t.map}function yB(n){var e=lf(this,n).delete(n);return this.size-=e?1:0,e}function kB(n){return lf(this,n).get(n)}function CB(n){return lf(this,n).has(n)}function EB(n,e){var t=lf(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function so(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}so.prototype.clear=wB;so.prototype.delete=yB;so.prototype.get=kB;so.prototype.has=CB;so.prototype.set=EB;var xB="Expected a function";function $1(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(xB);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],o=t.cache;if(o.has(s))return o.get(s);var r=n.apply(this,i);return t.cache=o.set(s,r)||o,r};return t.cache=new($1.Cache||so),t}$1.Cache=so;var TB=500;function SB(n){var e=$1(n,function(i){return t.size===TB&&t.clear(),i}),t=e.cache;return e}var IB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,AB=/\\(\\)?/g,PB=SB(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(IB,function(t,i,s,o){e.push(s?o.replace(AB,"$1"):i||t)}),e});function vT(n){return n==null?"":cT(n)}function cf(n,e){return ni(n)?n:F1(n,e)?[n]:PB(vT(n))}function ol(n){if(typeof n=="string"||sf(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function U1(n,e){e=cf(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[ol(e[t++])];return t&&t==i?n:void 0}function _c(n,e,t){var i=n==null?void 0:U1(n,e);return i===void 0?t:i}function wT(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var H1=gT(Object.getPrototypeOf,Object),OB="[object Object]",MB=Function.prototype,RB=Object.prototype,_T=MB.toString,BB=RB.hasOwnProperty,LB=_T.call(Object);function ci(n){if(!Ii(n)||qo(n)!=OB)return!1;var e=H1(n);if(e===null)return!0;var t=BB.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&_T.call(t)==LB}function yT(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(s);++i<s;)o[i]=n[i+e];return o}function NB(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:yT(n,e,t)}var VB="\\ud800-\\udfff",DB="\\u0300-\\u036f",FB="\\ufe20-\\ufe2f",$B="\\u20d0-\\u20ff",UB=DB+FB+$B,HB="\\ufe0e\\ufe0f",jB="\\u200d",zB=RegExp("["+jB+VB+UB+HB+"]");function kT(n){return zB.test(n)}function WB(n){return n.split("")}var CT="\\ud800-\\udfff",qB="\\u0300-\\u036f",GB="\\ufe20-\\ufe2f",KB="\\u20d0-\\u20ff",XB=qB+GB+KB,ZB="\\ufe0e\\ufe0f",JB="["+CT+"]",Jm="["+XB+"]",Ym="\\ud83c[\\udffb-\\udfff]",YB="(?:"+Jm+"|"+Ym+")",ET="[^"+CT+"]",xT="(?:\\ud83c[\\udde6-\\uddff]){2}",TT="[\\ud800-\\udbff][\\udc00-\\udfff]",QB="\\u200d",ST=YB+"?",IT="["+ZB+"]?",e9="(?:"+QB+"(?:"+[ET,xT,TT].join("|")+")"+IT+ST+")*",t9=IT+ST+e9,n9="(?:"+[ET+Jm+"?",Jm,xT,TT,JB].join("|")+")",i9=RegExp(Ym+"(?="+Ym+")|"+n9+t9,"g");function s9(n){return n.match(i9)||[]}function o9(n){return kT(n)?s9(n):WB(n)}function r9(n){return function(e){e=vT(e);var t=kT(e)?o9(e):void 0,i=t?t[0]:e.charAt(0),s=t?NB(t,1).join(""):e.slice(1);return i[n]()+s}}var a9=r9("toUpperCase");function l9(){this.__data__=new io,this.size=0}function c9(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function u9(n){return this.__data__.get(n)}function d9(n){return this.__data__.has(n)}var h9=200;function f9(n,e){var t=this.__data__;if(t instanceof io){var i=t.__data__;if(!wc||i.length<h9-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new so(i)}return t.set(n,e),this.size=t.size,this}function Wi(n){var e=this.__data__=new io(n);this.size=e.size}Wi.prototype.clear=l9;Wi.prototype.delete=c9;Wi.prototype.get=u9;Wi.prototype.has=d9;Wi.prototype.set=f9;function p9(n,e){return n&&nl(e,iu(e),n)}function m9(n,e){return n&&nl(e,sl(e),n)}var AT=typeof fi=="object"&&fi&&!fi.nodeType&&fi,r_=AT&&typeof pi=="object"&&pi&&!pi.nodeType&&pi,g9=r_&&r_.exports===AT,a_=g9?Ji.Buffer:void 0,l_=a_?a_.allocUnsafe:void 0;function PT(n,e){if(e)return n.slice();var t=n.length,i=l_?l_(t):new n.constructor(t);return n.copy(i),i}function b9(n,e){for(var t=-1,i=n==null?0:n.length,s=0,o=[];++t<i;){var r=n[t];e(r,t,n)&&(o[s++]=r)}return o}function OT(){return[]}var v9=Object.prototype,w9=v9.propertyIsEnumerable,c_=Object.getOwnPropertySymbols,j1=c_?function(n){return n==null?[]:(n=Object(n),b9(c_(n),function(e){return w9.call(n,e)}))}:OT;function _9(n,e){return nl(n,j1(n),e)}var y9=Object.getOwnPropertySymbols,MT=y9?function(n){for(var e=[];n;)wT(e,j1(n)),n=H1(n);return e}:OT;function k9(n,e){return nl(n,MT(n),e)}function RT(n,e,t){var i=e(n);return ni(n)?i:wT(i,t(n))}function Qm(n){return RT(n,iu,j1)}function C9(n){return RT(n,sl,MT)}var eg=Lr(Ji,"DataView"),tg=Lr(Ji,"Promise"),ng=Lr(Ji,"Set"),u_="[object Map]",E9="[object Object]",d_="[object Promise]",h_="[object Set]",f_="[object WeakMap]",p_="[object DataView]",x9=Br(eg),T9=Br(wc),S9=Br(tg),I9=Br(ng),A9=Br(Zm),Di=qo;(eg&&Di(new eg(new ArrayBuffer(1)))!=p_||wc&&Di(new wc)!=u_||tg&&Di(tg.resolve())!=d_||ng&&Di(new ng)!=h_||Zm&&Di(new Zm)!=f_)&&(Di=function(n){var e=qo(n),t=e==E9?n.constructor:void 0,i=t?Br(t):"";if(i)switch(i){case x9:return p_;case T9:return u_;case S9:return d_;case I9:return h_;case A9:return f_}return e});var P9=Object.prototype,O9=P9.hasOwnProperty;function M9(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&O9.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Qd=Ji.Uint8Array;function z1(n){var e=new n.constructor(n.byteLength);return new Qd(e).set(new Qd(n)),e}function R9(n,e){var t=e?z1(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var B9=/\w*$/;function L9(n){var e=new n.constructor(n.source,B9.exec(n));return e.lastIndex=n.lastIndex,e}var m_=bs?bs.prototype:void 0,g_=m_?m_.valueOf:void 0;function N9(n){return g_?Object(g_.call(n)):{}}function BT(n,e){var t=e?z1(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var V9="[object Boolean]",D9="[object Date]",F9="[object Map]",$9="[object Number]",U9="[object RegExp]",H9="[object Set]",j9="[object String]",z9="[object Symbol]",W9="[object ArrayBuffer]",q9="[object DataView]",G9="[object Float32Array]",K9="[object Float64Array]",X9="[object Int8Array]",Z9="[object Int16Array]",J9="[object Int32Array]",Y9="[object Uint8Array]",Q9="[object Uint8ClampedArray]",eL="[object Uint16Array]",tL="[object Uint32Array]";function nL(n,e,t){var i=n.constructor;switch(e){case W9:return z1(n);case V9:case D9:return new i(+n);case q9:return R9(n,t);case G9:case K9:case X9:case Z9:case J9:case Y9:case Q9:case eL:case tL:return BT(n,t);case F9:return new i;case $9:case j9:return new i(n);case U9:return L9(n);case H9:return new i;case z9:return N9(n)}}function LT(n){return typeof n.constructor=="function"&&!N1(n)?WM(H1(n)):{}}var iL="[object Map]";function sL(n){return Ii(n)&&Di(n)==iL}var b_=Ra&&Ra.isMap,oL=b_?V1(b_):sL,rL="[object Set]";function aL(n){return Ii(n)&&Di(n)==rL}var v_=Ra&&Ra.isSet,lL=v_?V1(v_):aL,cL=1,uL=2,dL=4,NT="[object Arguments]",hL="[object Array]",fL="[object Boolean]",pL="[object Date]",mL="[object Error]",VT="[object Function]",gL="[object GeneratorFunction]",bL="[object Map]",vL="[object Number]",DT="[object Object]",wL="[object RegExp]",_L="[object Set]",yL="[object String]",kL="[object Symbol]",CL="[object WeakMap]",EL="[object ArrayBuffer]",xL="[object DataView]",TL="[object Float32Array]",SL="[object Float64Array]",IL="[object Int8Array]",AL="[object Int16Array]",PL="[object Int32Array]",OL="[object Uint8Array]",ML="[object Uint8ClampedArray]",RL="[object Uint16Array]",BL="[object Uint32Array]",ut={};ut[NT]=ut[hL]=ut[EL]=ut[xL]=ut[fL]=ut[pL]=ut[TL]=ut[SL]=ut[IL]=ut[AL]=ut[PL]=ut[bL]=ut[vL]=ut[DT]=ut[wL]=ut[_L]=ut[yL]=ut[kL]=ut[OL]=ut[ML]=ut[RL]=ut[BL]=!0;ut[mL]=ut[VT]=ut[CL]=!1;function Ca(n,e,t,i,s,o){var r,a=e&cL,l=e&uL,c=e&dL;if(t&&(r=s?t(n,i,s,o):t(n)),r!==void 0)return r;if(!pt(n))return n;var u=ni(n);if(u){if(r=M9(n),!a)return uT(n,r)}else{var d=Di(n),h=d==VT||d==gL;if(bc(n))return PT(n,a);if(d==DT||d==NT||h&&!s){if(r=l||h?{}:LT(n),!a)return l?k9(n,m9(r,n)):_9(n,p9(r,n))}else{if(!ut[d])return s?n:{};r=nL(n,d,a)}}o||(o=new Wi);var f=o.get(n);if(f)return f;o.set(n,r),lL(n)?n.forEach(function(y){r.add(Ca(y,e,t,y,n,o))}):oL(n)&&n.forEach(function(y,k){r.set(k,Ca(y,e,t,k,n,o))});var p=c?l?C9:Qm:l?sl:iu,g=u?void 0:p(n);return eR(g||n,function(y,k){g&&(k=y,y=n[k]),B1(r,k,Ca(y,e,t,k,n,o))}),r}var LL=4;function FT(n){return Ca(n,LL)}var NL=1,VL=4;function Yi(n){return Ca(n,NL|VL)}var DL=1,FL=4;function W1(n,e){return e=typeof e=="function"?e:void 0,Ca(n,DL|FL,e)}var $L="__lodash_hash_undefined__";function UL(n){return this.__data__.set(n,$L),this}function HL(n){return this.__data__.has(n)}function eh(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new so;++e<t;)this.add(n[e])}eh.prototype.add=eh.prototype.push=UL;eh.prototype.has=HL;function jL(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function zL(n,e){return n.has(e)}var WL=1,qL=2;function $T(n,e,t,i,s,o){var r=t&WL,a=n.length,l=e.length;if(a!=l&&!(r&&l>a))return!1;var c=o.get(n),u=o.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=t&qL?new eh:void 0;for(o.set(n,e),o.set(e,n);++d<a;){var p=n[d],g=e[d];if(i)var y=r?i(g,p,d,e,n,o):i(p,g,d,n,e,o);if(y!==void 0){if(y)continue;h=!1;break}if(f){if(!jL(e,function(k,v){if(!zL(f,v)&&(p===k||s(p,k,t,i,o)))return f.push(v)})){h=!1;break}}else if(!(p===g||s(p,g,t,i,o))){h=!1;break}}return o.delete(n),o.delete(e),h}function GL(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function KL(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var XL=1,ZL=2,JL="[object Boolean]",YL="[object Date]",QL="[object Error]",eN="[object Map]",tN="[object Number]",nN="[object RegExp]",iN="[object Set]",sN="[object String]",oN="[object Symbol]",rN="[object ArrayBuffer]",aN="[object DataView]",w_=bs?bs.prototype:void 0,Ep=w_?w_.valueOf:void 0;function lN(n,e,t,i,s,o,r){switch(t){case aN:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case rN:return!(n.byteLength!=e.byteLength||!o(new Qd(n),new Qd(e)));case JL:case YL:case tN:return nu(+n,+e);case QL:return n.name==e.name&&n.message==e.message;case nN:case sN:return n==e+"";case eN:var a=GL;case iN:var l=i&XL;if(a||(a=KL),n.size!=e.size&&!l)return!1;var c=r.get(n);if(c)return c==e;i|=ZL,r.set(n,e);var u=$T(a(n),a(e),i,s,o,r);return r.delete(n),u;case oN:if(Ep)return Ep.call(n)==Ep.call(e)}return!1}var cN=1,uN=Object.prototype,dN=uN.hasOwnProperty;function hN(n,e,t,i,s,o){var r=t&cN,a=Qm(n),l=a.length,c=Qm(e),u=c.length;if(l!=u&&!r)return!1;for(var d=l;d--;){var h=a[d];if(!(r?h in e:dN.call(e,h)))return!1}var f=o.get(n),p=o.get(e);if(f&&p)return f==e&&p==n;var g=!0;o.set(n,e),o.set(e,n);for(var y=r;++d<l;){h=a[d];var k=n[h],v=e[h];if(i)var b=r?i(v,k,h,e,n,o):i(k,v,h,n,e,o);if(!(b===void 0?k===v||s(k,v,t,i,o):b)){g=!1;break}y||(y=h=="constructor")}if(g&&!y){var w=n.constructor,C=e.constructor;w!=C&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(g=!1)}return o.delete(n),o.delete(e),g}var fN=1,__="[object Arguments]",y_="[object Array]",Lu="[object Object]",pN=Object.prototype,k_=pN.hasOwnProperty;function mN(n,e,t,i,s,o){var r=ni(n),a=ni(e),l=r?y_:Di(n),c=a?y_:Di(e);l=l==__?Lu:l,c=c==__?Lu:c;var u=l==Lu,d=c==Lu,h=l==c;if(h&&bc(n)){if(!bc(e))return!1;r=!0,u=!1}if(h&&!u)return o||(o=new Wi),r||D1(n)?$T(n,e,t,i,s,o):lN(n,e,l,t,i,s,o);if(!(t&fN)){var f=u&&k_.call(n,"__wrapped__"),p=d&&k_.call(e,"__wrapped__");if(f||p){var g=f?n.value():n,y=p?e.value():e;return o||(o=new Wi),s(g,y,t,i,o)}}return h?(o||(o=new Wi),hN(n,e,t,i,s,o)):!1}function su(n,e,t,i,s){return n===e?!0:n==null||e==null||!Ii(n)&&!Ii(e)?n!==n&&e!==e:mN(n,e,t,i,su,s)}var gN=1,bN=2;function vN(n,e,t,i){var s=t.length,o=s;if(n==null)return!o;for(n=Object(n);s--;){var r=t[s];if(r[2]?r[1]!==n[r[0]]:!(r[0]in n))return!1}for(;++s<o;){r=t[s];var a=r[0],l=n[a],c=r[1];if(r[2]){if(l===void 0&&!(a in n))return!1}else{var u=new Wi,d;if(!(d===void 0?su(c,l,gN|bN,i,u):d))return!1}}return!0}function UT(n){return n===n&&!pt(n)}function wN(n){for(var e=iu(n),t=e.length;t--;){var i=e[t],s=n[i];e[t]=[i,s,UT(s)]}return e}function HT(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function _N(n){var e=wN(n);return e.length==1&&e[0][2]?HT(e[0][0],e[0][1]):function(t){return t===n||vN(t,n,e)}}function yN(n,e){return n!=null&&e in Object(n)}function kN(n,e,t){e=cf(e,n);for(var i=-1,s=e.length,o=!1;++i<s;){var r=ol(e[i]);if(!(o=n!=null&&t(n,r)))break;n=n[r]}return o||++i!=s?o:(s=n==null?0:n.length,!!s&&L1(s)&&of(r,s)&&(ni(n)||Yd(n)))}function CN(n,e){return n!=null&&kN(n,e,yN)}var EN=1,xN=2;function TN(n,e){return F1(n)&&UT(e)?HT(ol(n),e):function(t){var i=_c(t,n);return i===void 0&&i===e?CN(t,n):su(e,i,EN|xN)}}function SN(n){return function(e){return e?.[n]}}function IN(n){return function(e){return U1(e,n)}}function AN(n){return F1(n)?SN(ol(n)):IN(n)}function jT(n){return typeof n=="function"?n:n==null?xo:typeof n=="object"?ni(n)?TN(n[0],n[1]):_N(n):AN(n)}function PN(n){return function(e,t,i){for(var s=-1,o=Object(e),r=i(e),a=r.length;a--;){var l=r[++s];if(t(o[l],l,o)===!1)break}return e}}var zT=PN();function WT(n,e){return n&&zT(n,e,iu)}function ON(n,e){return function(t,i){if(t==null)return t;if(!il(t))return n(t,i);for(var s=t.length,o=-1,r=Object(t);++o<s&&i(r[o],o,r)!==!1;);return t}}var MN=ON(WT),xp=function(){return Ji.Date.now()},RN="Expected a function",BN=Math.max,LN=Math.min;function Bo(n,e,t){var i,s,o,r,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(RN);e=Yw(e)||0,pt(t)&&(u=!!t.leading,d="maxWait"in t,o=d?BN(Yw(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h);function f(E){var I=i,x=s;return i=s=void 0,c=E,r=n.apply(x,I),r}function p(E){return c=E,a=setTimeout(k,e),u?f(E):r}function g(E){var I=E-l,x=E-c,_=e-I;return d?LN(_,o-x):_}function y(E){var I=E-l,x=E-c;return l===void 0||I>=e||I<0||d&&x>=o}function k(){var E=xp();if(y(E))return v(E);a=setTimeout(k,g(E))}function v(E){return a=void 0,h&&i?f(E):(i=s=void 0,r)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function w(){return a===void 0?r:v(xp())}function C(){var E=xp(),I=y(E);if(i=arguments,s=this,l=E,I){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(k,e),f(l)}return a===void 0&&(a=setTimeout(k,e)),r}return C.cancel=b,C.flush=w,C}function ig(n,e,t){(t!==void 0&&!nu(n[e],t)||t===void 0&&!(e in n))&&rf(n,e,t)}function NN(n){return Ii(n)&&il(n)}function sg(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function VN(n){return nl(n,sl(n))}function DN(n,e,t,i,s,o,r){var a=sg(n,t),l=sg(e,t),c=r.get(l);if(c){ig(n,t,c);return}var u=o?o(a,l,t+"",n,e,r):void 0,d=u===void 0;if(d){var h=ni(l),f=!h&&bc(l),p=!h&&!f&&D1(l);u=l,h||f||p?ni(a)?u=a:NN(a)?u=uT(a):f?(d=!1,u=PT(l,!0)):p?(d=!1,u=BT(l,!0)):u=[]:ci(l)||Yd(l)?(u=a,Yd(a)?u=VN(a):(!pt(a)||Cr(a))&&(u=LT(l))):d=!1}d&&(r.set(l,u),s(u,l,i,o,r),r.delete(l)),ig(n,t,u)}function qT(n,e,t,i,s){n!==e&&zT(e,function(o,r){if(s||(s=new Wi),pt(o))DN(n,e,r,t,qT,i,s);else{var a=i?i(sg(n,r),o,r+"",n,e,s):void 0;a===void 0&&(a=o),ig(n,r,a)}},sl)}function FN(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function $N(n,e){var t=-1,i=il(n)?Array(n.length):[];return MN(n,function(s,o,r){i[++t]=e(s,o,r)}),i}function UN(n,e){var t=ni(n)?lT:$N;return t(n,jT(e))}var HN="[object String]";function C_(n){return typeof n=="string"||!ni(n)&&Ii(n)&&qo(n)==HN}function jN(n,e){return e.length<2?n:U1(n,yT(e,0,-1))}function Lo(n){return Ii(n)&&n.nodeType===1&&!ci(n)}function E_(n,e){return su(n,e)}function zN(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?su(n,e,void 0,t):!!i}function WN(n,e){var t={};return e=jT(e),WT(n,function(i,s,o){rf(t,s,e(i,s,o))}),t}var q1=dT(function(n,e,t){qT(n,e,t)});function qN(n,e){return e=cf(e,n),n=jN(n,e),n==null||delete n[ol(FN(e))]}function GN(n,e,t,i){if(!pt(n))return n;e=cf(e,n);for(var s=-1,o=e.length,r=o-1,a=n;a!=null&&++s<o;){var l=ol(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=r){var u=a[l];c=void 0,c===void 0&&(c=pt(u)?u:of(e[s+1])?[]:{})}B1(a,l,c),a=a[l]}return n}function KN(n,e,t){return n==null?n:GN(n,e,t)}var XN="Expected a function";function yc(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(XN);return pt(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Bo(n,e,{leading:i,maxWait:e,trailing:s})}function ZN(n,e){return n==null?!0:qN(n,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let og;try{og={window,document}}catch{/* istanbul ignore next -- @preserve */og={window:{},document:{}}}var ue=og;function JN(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Gr=JN(),ke={isMac:GT(Gr),isGecko:YN(Gr),isSafari:QN(Gr),isiOS:eV(Gr),isAndroid:tV(Gr),isBlink:nV(Gr),get isMediaForcedColors(){return iV()}};function GT(n){return n.indexOf("macintosh")>-1}function YN(n){return!!n.match(/gecko\/\d+/)}function QN(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function eV(n){return!!n.match(/iphone|ipad/i)||GT(n)&&navigator.maxTouchPoints>0}function tV(n){return n.indexOf("android")>-1}function nV(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function iV(){return ue.window.matchMedia?ue.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function KT(n,e,t,i){t=t||function(l,c){return l===c};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),r=sV(s,o,t);return i?rV(r,o.length):oV(o,r)}function sV(n,e,t){const i=x_(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=T_(n,i),o=T_(e,i),r=x_(s,o,t),a=n.length-r,l=e.length-r;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function x_(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function T_(n,e){return n.slice(e).reverse()}function oV(n,e){const t=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:o}=e;return o-i>0&&t.push({index:i,type:"insert",values:n.slice(i,o)}),s-i>0&&t.push({index:i+(o-i),type:"delete",howMany:s-i}),t}function rV(n,e){const{firstIndex:t,lastIndexOld:i,lastIndexNew:s}=n;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),s-t>0&&(o=o.concat(Array(s-t).fill("insert"))),i-t>0&&(o=o.concat(Array(i-t).fill("delete"))),s<e&&(o=o.concat(Array(e-s).fill("equal"))),o}function Zl(n,e,t){t=t||function(g,y){return g===y};const i=n.length,s=e.length;if(i>200||s>200||i+s>300)return Zl.fastDiff(n,e,t,!0);let o,r;if(s<i){const g=n;n=e,e=g,o="delete",r="insert"}else o="insert",r="delete";const a=n.length,l=e.length,c=l-a,u={},d={};function h(g){const y=(d[g-1]!==void 0?d[g-1]:-1)+1,k=d[g+1]!==void 0?d[g+1]:-1,v=y>k?-1:1;u[g+v]&&(u[g]=u[g+v].slice(0)),u[g]||(u[g]=[]),u[g].push(y>k?o:r);let b=Math.max(y,k),w=b-g;for(;w<a&&b<l&&t(n[w],e[b]);)w++,b++,u[g].push("equal");return b}let f=0,p;do{for(p=-f;p<c;p++)d[p]=h(p);for(p=c+f;p>c;p--)d[p]=h(p);d[c]=h(c),f++}while(d[c]!==l);return u[c].slice(1)}Zl.fastDiff=KT;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function S_(){return function n(){n.called=!0}}class Zs{source;name;path;stop;off;return;constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=S_(),this.off=S_()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Ai(){const[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+vn[n>>0&255]+vn[n>>8&255]+vn[n>>16&255]+vn[n>>24&255]+vn[e>>0&255]+vn[e>>8&255]+vn[e>>16&255]+vn[e>>24&255]+vn[t>>0&255]+vn[t>>8&255]+vn[t>>16&255]+vn[t>>24&255]+vn[i>>0&255]+vn[i>>8&255]+vn[i>>16&255]+vn[i>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Po={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function aV(n,e){const t=Po.get(e.priority);for(let i=0;i<n.length;i++)if(Po.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lV="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class P extends Error{context;data;constructor(e,t,i){super(cV(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new P(e.message,t);throw i.stack=e.stack,i}}function Ue(n,e){console.warn(...uV(n,e))}function XT(n){return`
Read more: ${lV}#error-${n}`}function cV(n,e){const t=new WeakSet,s=e?` ${JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=XT(n);return n+s+o}function uV(n,e){const t=XT(n);return e?[n,e,t]:[n,t]}const dV="43.3.1",hV=new Date(2024,10,6);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new P("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=dV;const ca=Symbol("listeningTo"),rg=Symbol("emitterId"),ks=Symbol("delegations"),ZT=ot(Object);function ot(n){if(!n)return ZT;class e extends n{on(i,s,o){this.listenTo(this,i,s,o)}once(i,s,o){let r=!1;const a=(l,...c)=>{r||(r=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,i,a,o)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,o,r={}){let a,l;this[ca]||(this[ca]={});const c=this[ca];Tp(i)||JT(i);const u=Tp(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(o),gV(this,i,s,o,r)}stopListening(i,s,o){const r=this[ca];let a=i&&Tp(i);const l=r&&a?r[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!r||i&&!l||s&&!c))if(o)Sp(this,i,s,o),c.indexOf(o)!==-1&&(c.length===1?delete l.callbacks[s]:Sp(this,i,s,o));else if(c){for(;o=c.pop();)Sp(this,i,s,o);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(i,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[ca]}}fire(i,...s){try{const o=i instanceof Zs?i:new Zs(this,i),r=o.name;let a=QT(this,r);if(o.path.push(this),a){const c=[o,...s];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),o.off.called&&(delete o.off.called,this._removeEventListener(r,a[u].callback)),!o.stop.called);u++);}const l=this[ks];if(l){const c=l.get(r),u=l.get("*");c&&I_(c,o,s),u&&I_(u,o,s)}return o.return}catch(o){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(o,this)}}delegate(...i){return{to:(s,o)=>{this[ks]||(this[ks]=new Map),i.forEach(r=>{const a=this[ks].get(r);a?a.set(s,o):this[ks].set(r,new Map([[s,o]]))})}}}stopDelegating(i,s){if(this[ks])if(!i)this[ks].clear();else if(!s)this[ks].delete(i);else{const o=this[ks].get(i);o&&o.delete(s)}}_addEventListener(i,s,o){mV(this,i);const r=ag(this,i),a=Po.get(o.priority),l={callback:s,priority:a};for(const c of r)aV(c,l)}_removeEventListener(i,s){const o=ag(this,i);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ot[n]=ZT.prototype[n]});function fV(n,e){const t=n[ca];return t&&t[e]?t[e].emitter:null}function JT(n,e){n[rg]||(n[rg]=e||Ai())}function Tp(n){return n[rg]}function YT(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function pV(){return{callbacks:[],childEvents:[]}}function mV(n,e){const t=YT(n);if(t[e])return;let i=e,s=null;const o=[];for(;i!==""&&!t[i];)t[i]=pV(),o.push(t[i]),s&&t[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const r of o)r.callbacks=t[i].callbacks.slice();t[i].childEvents.push(s)}}function ag(n,e){const t=YT(n)[e];if(!t)return[];let i=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const o=ag(n,t.childEvents[s]);i=i.concat(o)}return i}function QT(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?QT(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function I_(n,e,t){for(let[i,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const o=new Zs(e.source,s);o.path=[...e.path],i.fire(o,...t)}}function gV(n,e,t,i,s){e._addEventListener?e._addEventListener(t,i,s):n._addEventListener.call(e,t,i,s)}function Sp(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}const Jl=Symbol("observableProperties"),kc=Symbol("boundObservables"),Yl=Symbol("boundProperties"),Yo=Symbol("decoratedMethods"),A_=Symbol("decoratedOriginal"),e5=tt(ot());function tt(n){if(!n)return e5;class e extends n{set(i,s){if(pt(i)){Object.keys(i).forEach(r=>{this.set(r,i[r])},this);return}Ip(this);const o=this[Jl];if(i in this&&!o.has(i))throw new P("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return o.get(i)},set(r){const a=o.get(i);let l=this.fire(`set:${i}`,i,r,a);l===void 0&&(l=r),(a!==l||!o.has(i))&&(o.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=s}bind(...i){if(!i.length||!P_(i))throw new P("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new P("observable-bind-duplicate-properties",this);Ip(this);const s=this[Yl];i.forEach(r=>{if(s.has(r))throw new P("observable-bind-rebind",this)});const o=new Map;return i.forEach(r=>{const a={property:r,to:[]};s.set(r,a),o.set(r,a)}),{to:bV,toMany:vV,_observable:this,_bindProperties:i,_to:[],_bindings:o}}unbind(...i){if(!this[Jl])return;const s=this[Yl],o=this[kc];if(i.length){if(!P_(i))throw new P("observable-unbind-wrong-properties",this);i.forEach(r=>{const a=s.get(r);a&&(a.to.forEach(([l,c])=>{const u=o.get(l),d=u[c];d.delete(a),d.size||delete u[c],Object.keys(u).length||(o.delete(l),this.stopListening(l,"change"))}),s.delete(r))})}else o.forEach((r,a)=>{this.stopListening(a,"change")}),o.clear(),s.clear()}decorate(i){Ip(this);const s=this[i];if(!s)throw new P("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(o,r)=>{o.return=s.apply(this,r)}),this[i]=function(...o){return this.fire(i,o)},this[i][A_]=s,this[Yo]||(this[Yo]=[]),this[Yo].push(i)}stopListening(i,s,o){if(!i&&this[Yo]){for(const r of this[Yo])this[r]=this[r][A_];delete this[Yo]}super.stopListening(i,s,o)}[Jl];[Yo];[Yl];[kc]}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{tt[n]=e5.prototype[n]});function Ip(n){n[Jl]||(Object.defineProperty(n,Jl,{value:new Map}),Object.defineProperty(n,kc,{value:new Map}),Object.defineProperty(n,Yl,{value:new Map}))}function bV(...n){const e=_V(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new P("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new P("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new P("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),CV(this._observable,this._to),kV(this),this._bindProperties.forEach(s=>{t5(this._observable,s)})}function vV(n,e,t){if(this._bindings.size>1)throw new P("observable-bind-to-many-not-one-binding",this);this.to(...wV(n,e),t)}function wV(n,e){const t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function P_(n){return n.every(e=>typeof e=="string")}function _V(...n){if(!n.length)throw new P("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new P("observable-bind-to-parse-error",null)}),e}function yV(n,e,t,i){const s=n[kc],o=s.get(t),r=o||{};r[i]||(r[i]=new Set),r[i].add(e),o||s.set(t,r)}function kV(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(s=>{e=s.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([s.observable,e]),yV(n._observable,t,s.observable,e)})})}function t5(n,e){const i=n[Yl].get(e);let s;i.callback?s=i.callback.apply(n,i.to.map(o=>o[0][o[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=s:n.set(e,s)}function CV(n,e){e.forEach(t=>{const i=n[kc];let s;i.get(t.observable)||n.listenTo(t.observable,"change",(o,r)=>{s=i.get(t.observable)[r],s&&s.forEach(a=>{t5(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EV{_replacedElements;constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lg(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kn(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gi(n){return!!(n&&n[Symbol.iterator])}function Ni(n,e,t={},i=[]){const s=t&&t.xmlns,o=s?n.createElementNS(s,e):n.createElement(e);for(const r in t)o.setAttribute(r,t[r]);(C_(i)||!gi(i))&&(i=[i]);for(let r of i)C_(r)&&(r=n.createTextNode(r)),o.appendChild(r);return o}class n5{_config;constructor(e,t){this._config=Object.create(null),t&&this.define(O_(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(ci(t)){this._setObjectToTarget(e,t,s);return}const o=t.split(".");t=o.pop();for(const r of o)ci(e[r])||(e[r]=Object.create(null)),e=e[r];if(ci(i)){ci(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,i,s);return}s&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!ci(e[s])){e=null;break}e=e[s]}return e?O_(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],i)})}}function O_(n){return W1(n,xV)}function xV(n){return Lo(n)||typeof n=="function"?n:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function No(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function th(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const i5=vi(ot());function vi(n){if(!n)return i5;class e extends n{listenTo(i,s,o,r={}){if(No(i)||th(i)){const a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(i,a)||new TV(i,a);this.listenTo(l,s,o,r)}else super.listenTo(i,s,o,r)}stopListening(i,s,o){if(No(i)||th(i)){const r=this._getAllProxyEmitters(i);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(i,s,o)}_getProxyEmitter(i,s){return fV(this,s5(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{vi[n]=i5.prototype[n]});class TV extends ot(){_domNode;_options;constructor(e,t){super(),JT(this,s5(e,t)),this._domNode=e,this._options=t}_domListeners;attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),ot().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){ot().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function SV(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Ai())}function s5(n,e){let t=SV(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function IV(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function AV(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function o5(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function r5(n){if(!n.target)return null;const e=n.target.ownerDocument,t=n.clientX,i=n.clientY;let s=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?s=e.caretRangeFromPoint(t,i):n.rangeParent&&(s=e.createRange(),s.setStart(n.rangeParent,n.rangeOffset),s.collapse(!0)),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function At(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uf(n){return Object.prototype.toString.apply(n)=="[object Range]"}function a5(n){return!n||!n.parentNode||n.offsetParent===ue.document.body?null:n.offsetParent}const l5=["top","right","bottom","left","width","height"];class Te{top;right;bottom;left;width;height;_source;constructor(e){const t=uf(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),cg(e)||t)if(t){const i=Te.getDomRangeRects(e);Nu(this,Te.getBoundingRect(i))}else Nu(this,e.getBoundingClientRect());else if(th(e)){const{innerWidth:i,innerHeight:s}=e;Nu(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else Nu(this,e)}clone(){return new Te(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const i=new Te(t);return i._source=this._source,i}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(M_(e))return t;let i=e,s=e.parentNode||e.commonAncestorContainer,o;for(;s&&!M_(s);){const r=PV(s)==="visible";i instanceof HTMLElement&&R_(i)==="absolute"&&(o=i);const a=R_(s);if(r||o&&(a==="relative"&&r||a!=="relative")){i=s,s=s.parentNode;continue}const l=new Te(s),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=s,s=s.parentNode}return t}isEqual(e){for(const t of l5)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=ue.window,i=this.clone().moveBy(e,t);if(cg(i._source)){const s=a5(i._source);s&&OV(i,s)}return i}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(th(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const o=o5(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new Te(s));else{let s=e.startContainer;At(s)&&(s=s.parentNode);const o=new Te(s.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Te(t))}}function Nu(n,e){for(const t of l5)n[t]=e[t]}function M_(n){return cg(n)?n===n.ownerDocument.body:!1}function cg(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function R_(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function PV(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function OV(n,e){const t=new Te(e),i=o5(e);let s=0,o=0;s-=t.left,o-=t.top,s+=e.scrollLeft,o+=e.scrollTop,s-=i.left,o-=i.top,n.moveBy(s,o)}class Tt{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(e,t){Tt._observerInstance||Tt._createObserver(),this._element=e,this._callback=t,Tt._addElementCallback(e,t),Tt._observerInstance.observe(e)}get element(){return this._element}destroy(){Tt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Tt._elementCallbacks||(Tt._elementCallbacks=new Map);let i=Tt._elementCallbacks.get(e);i||(i=new Set,Tt._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=Tt._getElementCallbacks(e);i&&(i.delete(t),i.size||(Tt._elementCallbacks.delete(e),Tt._observerInstance.unobserve(e))),Tt._elementCallbacks&&!Tt._elementCallbacks.size&&(Tt._observerInstance=null,Tt._elementCallbacks=null)}static _getElementCallbacks(e){return Tt._elementCallbacks?Tt._elementCallbacks.get(e):null}static _createObserver(){Tt._observerInstance=new ue.window.ResizeObserver(e=>{for(const t of e){const i=Tt._getElementCallbacks(t.target);if(i)for(const s of i)s(t)}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function B_(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ou(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vl(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function c5(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ql(n){return n&&n.nodeType===Node.COMMENT_NODE}function MV(n){try{ue.document.createAttribute(n)}catch{return!1}return!0}function Js(n){return n?At(n)?Js(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function G1({element:n,target:e,positions:t,limiter:i,fitInViewport:s,viewportOffsetConfig:o}){Cr(e)&&(e=e()),Cr(i)&&(i=i());const r=a5(n),a=RV(o),l=new Te(n),c=L_(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:r,viewportRect:a};if(!i&&!s)u=new u5(t[0],d);else{if(i){const h=L_(i,a);h&&(d.limiterRect=h)}u=BV(t,d)}return u}function L_(n,e){const t=new Te(n).getVisible();return t?t.getIntersection(e):null}function RV(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new Te(ue.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function BV(n,e){const{elementRect:t}=e,i=t.getArea(),s=n.map(a=>new u5(a,e)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const u=c**2+l**2;u>o&&(o=u,r=a)}return r}class u5{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(e,t){const i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;const{left:s,top:o,name:r,config:a}=i;this.name=r,this.config=a,this._positioningFunctionCoordinates={left:s,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function N_(n){const e=n.parentNode;e&&e.removeChild(n)}function LV({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:s}){const o=K1(n);let r=o,a=null;for(e=DV(e);r;){let l;r==o?l=V_(n):l=V_(a),VV({parent:l,getRect:()=>D_(n,r),alignToTop:i,ancestorOffset:t,forceScroll:s});const c=D_(n,r);if(NV({window:r,rect:c,viewportOffset:e,alignToTop:i,forceScroll:s}),r.parent!=r){if(a=r.frameElement,r=r.parent,!a)return}else r=null}}function NV({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:s}){const o=e.clone().moveBy(0,s.bottom),r=e.clone().moveBy(0,-s.top),a=new Te(n).excludeScrollbarsAndBorders(),l=[r,o],c=t&&i,u=l.every(g=>a.contains(g));let{scrollX:d,scrollY:h}=n;const f=d,p=h;c?h-=a.top-e.top+s.top:u||(h5(r,a)?h-=a.top-e.top+s.top:d5(o,a)&&(t?h+=e.top-a.top-s.top:h+=e.bottom-a.bottom+s.bottom)),u||(f5(e,a)?d-=a.left-e.left+s.left:p5(e,a)&&(d+=e.right-a.right+s.right)),(d!=f||h!==p)&&n.scrollTo(d,h)}function VV({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:s=0,limiterElement:o}){const r=K1(n),a=t&&i;let l,c,u;const d=o||r.document.body;for(;n!=d;)c=e(),l=new Te(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+s:u||(h5(c,l)?n.scrollTop-=l.top-c.top+s:d5(c,l)&&(t?n.scrollTop+=c.top-l.top-s:n.scrollTop+=c.bottom-l.bottom+s)),u||(f5(c,l)?n.scrollLeft-=l.left-c.left+s:p5(c,l)&&(n.scrollLeft+=c.right-l.right+s)),n=n.parentNode}function d5(n,e){return n.bottom>e.bottom}function h5(n,e){return n.top<e.top}function f5(n,e){return n.left<e.left}function p5(n,e){return n.right>e.right}function K1(n){return uf(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function V_(n){if(uf(n)){let e=n.commonAncestorContainer;return At(e)&&(e=e.parentNode),e}else return n.parentNode}function D_(n,e){const t=K1(n),i=new Te(n);if(t===e)return i;{let s=t;for(;s!=e;){const o=s.frameElement,r=new Te(o).excludeScrollbarsAndBorders();i.moveBy(r.left,r.top),s=s.parent}}return i}function DV(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}const FV={ctrl:"",cmd:"",alt:"",shift:""},$V={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},F_={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},Re=WV(),UV=Object.fromEntries(Object.entries(Re).map(([n,e])=>{let t;return e in F_?t=F_[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function Ba(n){let e;if(typeof n=="string"){if(e=Re[n.toLowerCase()],!e)throw new P("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?Re.alt:0)+(n.ctrlKey?Re.ctrl:0)+(n.shiftKey?Re.shift:0)+(n.metaKey?Re.cmd:0);return e}function X1(n){return typeof n=="string"&&(n=qV(n)),n.map(e=>typeof e=="string"?jV(e):e).reduce((e,t)=>t+e,0)}function nh(n){let e=X1(n);return Object.entries(ke.isMac||ke.isiOS?FV:$V).reduce((s,[o,r])=>((e&Re[o])!=0&&(e&=~Re[o],s+=r),s),"")+(e?UV[e]:"")}function HV(n){return n==Re.arrowright||n==Re.arrowleft||n==Re.arrowup||n==Re.arrowdown}function m5(n,e){const t=e==="ltr";switch(n){case Re.arrowleft:return t?"left":"right";case Re.arrowright:return t?"right":"left";case Re.arrowup:return"up";case Re.arrowdown:return"down"}}function jV(n){if(n.endsWith("!"))return Ba(n.slice(0,-1));const e=Ba(n);return(ke.isMac||ke.isiOS)&&e==Re.ctrl?Re.cmd:e}function zV(n,e){const t=m5(n,e);return t==="down"||t==="right"}function WV(){const n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function qV(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const GV=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function $_(n){return GV.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function at(n){return Array.isArray(n)?n:[n]}/* istanbul ignore else -- @preserve */ue.window.CKEDITOR_TRANSLATIONS||(ue.window.CKEDITOR_TRANSLATIONS={});function KV(n,e,t=1,i){if(typeof t!="number")throw new P("translation-service-quantity-not-a-number",null,{quantity:t});const s=i||ue.window.CKEDITOR_TRANSLATIONS,o=JV(s);o===1&&(n=Object.keys(s)[0]);const r=e.id||e.string;if(o===0||!ZV(n,r,s))return t!==1?e.plural:e.string;const a=s[n].dictionary,l=s[n].getPluralForm||(d=>d===1?0:1),c=a[r];if(typeof c=="string")return c;const u=Number(l(t));return c[u]}function XV(n){return Array.isArray(n)?n.reduce((e,t)=>q1(e,t)):n}function ZV(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function JV(n){return Object.keys(n).length}class YV{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=$_(this.uiLanguage),this.contentLanguageDirection=$_(this.contentLanguage),this.translations=XV(i),this.t=(s,o)=>this._t(s,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=at(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,o=KV(this.uiLanguage,e,s,this.translations);return QV(o,t)}}function QV(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}class zn extends ot(){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(e={},t={}){super();const i=gi(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new P("collection-add-item-invalid-index",this);let i=0;for(const s of e){const o=this._getItemIdBeforeAdding(s),r=t+i;this._items.splice(r,0,s),this._itemMap.set(o,s),this.fire("add",s,r),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new P("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new P("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(s,o,r)=>{const a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{const c=e(o);if(!c){this._skippedIndexesFromExternal.push(r);return}let u=r;for(const d of this._skippedIndexesFromExternal)r>d&&u--;for(const d of t._skippedIndexesFromExternal)u>=d&&u++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,u);for(let d=0;d<t._skippedIndexesFromExternal.length;d++)u<=t._skippedIndexesFromExternal[d]&&t._skippedIndexesFromExternal[d]++}};for(const s of t)i(null,s,t.getIndex(s));this.listenTo(t,"add",i),this.listenTo(t,"remove",(s,o,r)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(r<c&&l.push(c-1),r>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],typeof i!="string")throw new P("collection-add-invalid-id",this);if(this.get(i))throw new P("collection-add-item-already-exists",this)}else e[t]=i=Ai();return i}_remove(e){let t,i,s,o=!1;const r=this._idProperty;if(typeof e=="string"?(i=e,s=this._itemMap.get(i),o=!s,s&&(t=this._items.indexOf(s))):typeof e=="number"?(t=e,s=this._items[t],o=!s,s&&(i=s[r])):(s=e,i=s[r],t=this._items.indexOf(s),o=t==-1||!this._itemMap.get(i)),o)throw new P("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const a=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(a),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function en(n){const e=n.next();return e.done?null:e.value}class tn extends vi(tt()){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(H_(e))this._addElement(e);else if(U_(e))this._addView(e);else{if(!e.element)throw new P("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){H_(e)?this._removeElement(e):U_(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new P("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const t=this.externalViews.find(i=>eD(e,i));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function U_(n){return"focusTracker"in n&&n.focusTracker instanceof tn}function H_(n){return Lo(n)}function eD(n,e){return j_(n,e)?!0:!!e.focusTracker.externalViews.find(t=>j_(n,t))}function j_(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}class gn{_listener;constructor(){this._listener=new(vi())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+Ba(i),i)})}set(e,t,i={}){const s=X1(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0)},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Ba(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tD(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}function Ys(n){return gi(n)?new Map(n):tD(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nD=1e4;function z_(n,e,t,i){if(Math.max(e.length,n.length)>nD)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{const s=Array.from(n);return s.splice(t,i,...e),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Z1(n,e){let t;function i(...s){i.cancel(),t=setTimeout(()=>n(...s),e)}return i.cancel=()=>{clearTimeout(t)},i}function iD(n){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}const i=t.split("-"),s=i[0],o=i[1];if(!o)return e(n);try{atob(o)}catch{try{if(atob(s),!atob(s).length)return e(n)}catch{return e(n)}}if(s.length<40||s.length>255)return"INVALID";let r="";try{atob(s),r=atob(o)}catch{return"INVALID"}if(r.length!==8)return"INVALID";const a=Number(r.substring(0,4)),l=Number(r.substring(4,6))-1,c=Number(r.substring(6,8)),u=new Date(a,l,c);return u<hV||isNaN(Number(u))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sD(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function oD(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function rD(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function J1(n,e){return oD(n.charAt(e-1))&&rD(n.charAt(e))}function Y1(n,e){return sD(n.charAt(e))}const aD=lD();function g5(n,e){const t=String(n).matchAll(aD);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function lD(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(s=>s.source).join("|")+")",i=`${e}|${t}(?:${t})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hd=new WeakMap;let W_=!1;function b5({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:s=!1}){const o=n.document;hd.has(o)||(hd.set(o,new Map),o.registerPostFixer(a=>Ap(o,a)),o.on("change:isComposing",()=>{n.change(a=>Ap(o,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{r(c)}),e.placeholder?r(e.placeholder):t&&r(t),t&&fD();function r(a){hd.get(o).set(e,{text:a,isDirectHost:i,keepOnFocus:s,hostElement:i?e:null}),n.change(l=>Ap(o,l))}}function cD(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function uD(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function dD(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(r=>!r.is("uiElement")))return!1;const i=n.document,o=i.selection.anchor;return i.isComposing&&o&&o.parent===n?!1:e||!i.isFocused?!0:!!o&&o.parent!==n}function Ap(n,e){const t=hd.get(n),i=[];let s=!1;for(const[o,r]of t)r.isDirectHost&&(i.push(o),q_(e,o,r)&&(s=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const a=hD(o);a&&(i.includes(a)||(r.hostElement=a,q_(e,o,r)&&(s=!0)))}return s}function q_(n,e,t){const{text:i,isDirectHost:s,hostElement:o}=t;let r=!1;return o.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,o),r=!0),(s||e.childCount==1)&&dD(o,t.keepOnFocus)?cD(n,o)&&(r=!0):uD(n,o)&&(r=!0),r}function hD(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function fD(){W_||Ue("enableplaceholder-deprecated-text-option"),W_=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Nr=class{is(){throw new Error("is() method is abstract")}},Vr=class extends ot(Nr){document;parent;constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new P("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=kn(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=FT(this);return delete e.parent,e}};Vr.prototype.is=function(n){return n==="node"||n==="view:node"};let yt=class ug extends Vr{_textData;constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof ug?this===e||this.data===e.data:!1}_clone(){return new ug(this.document,this.data)}};yt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let cs=class extends Nr{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new P("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new P("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};cs.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class Cc{_patterns=[];constructor(...e){this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const s=G_(t,i);if(s)return{element:t,pattern:i,match:s}}return null}matchAll(...e){const t=[];for(const i of e)for(const s of this._patterns){const o=G_(i,s);o&&t.push({element:i,pattern:s,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function G_(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=pD(e.name,n.name),!t.name)||e.attributes&&(t.attributes=vD(e.attributes,n),!t.attributes)||e.classes&&(t.classes=wD(e.classes,n),!t.classes)||e.styles&&(t.styles=_D(e.styles,n),!t.styles)?null:t}function pD(n,e){return n instanceof RegExp?!!e.match(n):n===e}function Q1(n,e,t){const i=mD(n),s=Array.from(e),o=[];if(i.forEach(([r,a])=>{s.forEach(l=>{gD(r,l)&&bD(a,l,t)&&o.push(l)})}),!(!i.length||o.length<i.length))return o}function mD(n){return Array.isArray(n)?n.map(e=>ci(e)?((e.key===void 0||e.value===void 0)&&Ue("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):ci(n)?Object.entries(n):[[n,!0]]}function gD(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function bD(n,e,t){if(n===!0)return!0;const i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function vD(n,e){const t=new Set(e.getAttributeKeys());return ci(n)?(n.style!==void 0&&Ue("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Ue("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),Q1(n,t,i=>e.getAttribute(i))}function wD(n,e){return Q1(n,e.getClassNames(),()=>{})}function _D(n,e){return Q1(n,e.getStyleNames(!0),t=>e.getStyle(t))}class dg{_styles;_styleProcessor;constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=kD(e);for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(e){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(i)}set(e,t){if(pt(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=hg(e);ZN(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!pt(this._styles[e]))return this._styles[e];const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const s=t.splice(0,t.length-1).join("."),o=_c(this._styles,s);if(!o)return;!Object.keys(o).length&&this.remove(s)}}class yD{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(pt(t)){Pp(i,hg(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:o,value:r}=s(t);Pp(i,o,r)}else Pp(i,e,t)}getNormalized(e,t){if(!e)return q1({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return _c(t,i);const s=i(e,t);if(s)return s}return _c(t,hg(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=new Set;for(const i of this._consumables.keys()){const s=this.getNormalized(i,e);s&&(typeof s!="object"||Object.keys(s).length)&&t.add(i)}for(const i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function kD(n){let e=null,t=0,i=0,s=null;const o=new Map;if(n==="")return o;n.charAt(n.length-1)!=";"&&(n=n+";");for(let r=0;r<n.length;r++){const a=n.charAt(r);if(e===null)switch(a){case":":s||(s=n.substr(t,r-t),i=r+1);break;case'"':case"'":e=a;break;case";":{const l=n.substr(i,r-i);s&&o.set(s.trim(),l.trim()),s=null,t=r+1;break}}else a===e&&(e=null)}return o}function hg(n){return n.replace("-",".")}function Pp(n,e,t){let i=t;pt(t)&&(i=q1({},_c(n,e),t)),KN(n,e,i)}let Gi=class v5 extends Vr{name;_unsafeAttributesToRender=[];_attrs;_children;_classes;_styles;_customProperties=new Map;constructor(e,t,i,s){if(super(e),this.name=t,this._attrs=CD(i),this._children=[],s&&this._insertChild(0,s),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");K_(this._classes,o),this._attrs.delete("class")}this._styles=new dg(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof v5))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Cc(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=ED(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const i=String(t);this._fireChange("attributes",this),e=="class"?K_(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of at(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of at(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of at(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Gi.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function CD(n){const e=Ys(n);for(const[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function K_(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function ED(n,e){return typeof e=="string"?[new yt(n,e)]:(gi(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new yt(n,t):t instanceof cs?new yt(n,t.data):t))}class Ec extends Gi{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=xD}}Ec.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function xD(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}class df extends tt(Ec){constructor(e,t,i,s){super(e,t,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}df.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const X_=Symbol("rootName");class w5 extends df{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(X_)}set rootName(e){this._setCustomProperty(X_,e)}set _name(e){this.name=e}}w5.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let rr=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new P("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new P("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=se._createAt(e.startPosition):this._position=se._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i instanceof yt){if(e.isAtEnd)return this._position=se._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(s instanceof Gi){if(!this.shallow)e=new se(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",s,t,e,1)}if(s instanceof yt){if(this.singleCharacters)return e=new se(s,0),this._position=e,this._next();let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new cs(s,0,o),e=se._createAfter(r)):(r=new cs(s,0,s.data.length),e.offset++),this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const r=new cs(i,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=se._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i instanceof yt){if(e.isAtStart)return this._position=se._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(s instanceof Gi)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new se(s,s.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof yt){if(this.singleCharacters)return e=new se(s,s.data.length),this._position=e,this._previous();let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new cs(s,a,s.data.length-a),o=r.data.length,e=se._createBefore(r)}else r=new cs(s,0,s.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",r,t,e,o)}if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;const r=new cs(i,e.offset,o);return this._position=e,this._formatReturnValue("text",r,t,e,o)}return e=se._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,o){return t instanceof cs&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=se._createAfter(t.textNode),this._position=s):i=se._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=se._createBefore(t.textNode),this._position=s):i=se._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:o}}}},se=class Ts extends Nr{parent;offset;constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof df);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=Ts._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new rr(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const s=kn(t,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<i[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new rr(e)}clone(){return new Ts(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Ts)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new P("view-createpositionat-offset-required",i)}return new Ts(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Ts(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new P("view-position-after-root",e,{root:e});return new Ts(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Ts(e.textNode,e.offsetInText);if(!e.parent)throw new P("view-position-before-root",e,{root:e});return new Ts(e.parent,e.index)}};se.prototype.is=function(n){return n==="position"||n==="view:position"};let Oe=class fo extends Nr{start;end;constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new rr({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Vu,{direction:"backward"}),t=this.end.getLastMatchingPosition(Vu);return e.parent.is("$text")&&e.isAtStart&&(e=se._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=se._createAfter(t.parent)),new fo(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Vu);if(e.isAfter(this.end)||e.isEqual(this.end))return new fo(e,e);let t=this.end.getLastMatchingPosition(Vu,{direction:"backward"});const i=e.nodeAfter,s=t.nodeBefore;return i&&i.is("$text")&&(e=new se(i,0)),s&&s.is("$text")&&(t=new se(s,s.data.length)),new fo(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new fo(this.start,e.start)),this.containsPosition(e.end)&&t.push(new fo(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new fo(t,i)}return null}getWalker(e={}){return e.boundaries=this,new rr(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new fo(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new rr(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new rr(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,s){return new this(new se(e,t),new se(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(se._createBefore(e),t)}};Oe.prototype.is=function(n){return n==="range"||n==="view:range"};function Vu(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}let Us=class _5 extends ot(Nr){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=lg(this.getRanges()),i=lg(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),s.start.isEqual(r.start)&&s.end.isEqual(r.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(s);else if(t instanceof _5||t instanceof eb)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Oe)this._setRanges([t],s&&s.backward),this._setFakeOptions(s);else if(t instanceof se)this._setRanges([new Oe(t)]),this._setFakeOptions(s);else if(t instanceof Vr){const o=!!s&&!!s.backward;let r;if(i===void 0)throw new P("view-selection-setto-required-second-parameter",this);i=="in"?r=Oe._createIn(t):i=="on"?r=Oe._createOn(t):r=new Oe(se._createAt(t,i)),this._setRanges([r],o),this._setFakeOptions(s)}else if(gi(t))this._setRanges(t,s&&s.backward),this._setFakeOptions(s);else throw new P("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new P("view-selection-setfocus-no-ranges",this);const i=se._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),i.compareWith(s)=="before"?this._addRange(new Oe(i,s),!0):this._addRange(new Oe(s,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Oe))throw new P("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new P("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Oe(e.start,e.end))}};Us.prototype.is=function(n){return n==="selection"||n==="view:selection"};let eb=class extends ot(Nr){_selection;constructor(...e){super(),this._selection=new Us,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};eb.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class rl extends Zs{startRange;_eventPhase;_currentTarget;constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Op=Symbol("bubbling contexts");function fg(n){class e extends n{fire(i,...s){try{const o=i instanceof Zs?i:new Zs(this,i),r=Mp(this);if(!r.size)return;if(_l(o,"capturing",this),Kr(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!y5(r,l):!1;let u=l||TD(a);if(_l(o,"atTarget",u),!c){if(Kr(r,"$text",o,...s))return o.return;_l(o,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(Kr(r,"$root",o,...s))return o.return}else if(u.is("element")&&Kr(r,u.name,o,...s))return o.return;if(Kr(r,u,o,...s))return o.return;u=u.parent,_l(o,"bubbling",u)}return _l(o,"bubbling",this),Kr(r,"$document",o,...s),o.return}catch(o){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(o,this)}}_addEventListener(i,s,o){const r=at(o.context||"$document"),a=Mp(this);for(const l of r){let c=a.get(l);c||(c=new(ot()),a.set(l,c)),this.listenTo(c,i,s,o)}}_removeEventListener(i,s){const o=Mp(this);for(const r of o.values())this.stopListening(r,i,s)}}return e}{const n=fg(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{fg[e]=n.prototype[e]})}function _l(n,e,t){n instanceof rl&&(n._eventPhase=e,n._currentTarget=t)}function Kr(n,e,t,...i){const s=typeof e=="string"?n.get(e):y5(n,e);return s?(s.fire(t,...i),t.stop.called):!1}function y5(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function Mp(n){return n[Op]||(n[Op]=new Map),n[Op]}function TD(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,i=e.getPath(),s=t.getPath();return i.length>s.length?e:t}let k5=class extends fg(tt()){selection;roots;stylesProcessor;_postFixers=new Set;constructor(e){super(),this.selection=new eb,this.roots=new zn({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(t=i(e),t)break;while(t)}};const Z_=10;class Ea extends Gi{static DEFAULT_PRIORITY=Z_;_priority=Z_;_id=null;_clonesGroup=null;constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=SD}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new P("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}Ea.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function SD(){if(Rp(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(Rp(n)>1)return null;n=n.parent}return!n||Rp(n)>1?null:this.childCount}function Rp(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}class tb extends Gi{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=ID}_insertChild(e,t){if(t&&(t instanceof Vr||Array.from(t).length>0))throw new P("view-emptyelement-cannot-add",[this,t]);return 0}}tb.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function ID(){return null}class hf extends Gi{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=PD}_insertChild(e,t){if(t&&(t instanceof Vr||Array.from(t).length>0))throw new P("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}hf.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function AD(n){n.document.on("arrowKey",(e,t)=>OD(e,t,n.domConverter),{priority:"low"})}function PD(){return null}function OD(n,e,t){if(e.keyCode==Re.arrowright){const i=e.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||e.shiftKey){const o=i.focusNode,r=i.focusOffset,a=t.domPositionToView(o,r);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=t.viewPositionToDom(c);s?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}class nb extends Gi{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=MD}_insertChild(e,t){if(t&&(t instanceof Vr||Array.from(t).length>0))throw new P("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}nb.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function MD(){return null}let br=class extends ot(Nr){document;_children=[];_customProperties=new Map;constructor(e,t){super(),this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=RD(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};br.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function RD(n,e){return typeof e=="string"?[new yt(n,e)]:(gi(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new yt(n,t):t instanceof cs?new yt(n,t.data):t))}class C5{document;_cloneGroups=new Map;_slotFactory=null;constructor(e){this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new br(this.document,e)}createText(e){return new yt(this.document,e)}createAttributeElement(e,t,i={}){const s=new Ea(this.document,e,t);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(e,t,i={},s={}){let o=null;ci(i)?s=i:o=i;const r=new Ec(this.document,e,t,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(e,t,i={}){const s=new df(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(e,t,i={}){const s=new tb(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(e,t,i){const s=new hf(this.document,e,t);return i&&(s.render=i),s}createRawElement(e,t,i,s={}){const o=new nb(this.document,e,t);return i&&(o.render=i),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){ci(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof se?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new P("view-writer-break-non-container-element",this.document);if(!t.parent)throw new P("view-writer-break-root",this.document);if(e.isAtStart)return se._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(se._createAfter(t),i);const s=new Oe(e,se._createAt(t,"end")),o=new se(i,0);this.move(s,o)}return se._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const r=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new se(r,a))}const s=i.getChild(t-1),o=i.getChild(t);if(!s||!o)return e;if(s.is("$text")&&o.is("$text"))return Y_(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new se(s,r))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new P("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),o=s instanceof yt?se._createAt(s,"end"):se._createAt(t,"end");return this.move(Oe._createIn(i),se._createAt(t,"end")),this.remove(Oe._createOn(i)),o}insert(e,t){t=gi(t)?[...t]:[t],E5(t,this.document);const i=t.reduce((r,a)=>{const l=r[r.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?r.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),r},[]);let s=null,o=e;for(const{nodes:r,breakAttributes:a}of i){const l=this._insertNodes(o,r,a);s||(s=l.start),o=l.end}return s?new Oe(s,o):new Oe(e)}remove(e){const t=e instanceof Oe?e:Oe._createOn(e);if(yl(t,this.document),t.isCollapsed)return new br(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),o=i.parent,r=s.offset-i.offset,a=o._removeChildren(i.offset,r);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new br(this.document,a)}clear(e,t){yl(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const o=s.item;let r;if(o.is("element")&&t.isSimilar(o))r=Oe._createOn(o);else if(!s.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(r=Oe._createIn(a))}r&&(r.end.isAfter(e.end)&&(r.end=e.end),r.start.isBefore(e.start)&&(r.start=e.start),this.remove(r))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,o=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-o}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof Ea))throw new P("view-writer-wrap-invalid-attribute",this.document);if(yl(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!BD(i.parent)&&(i=i.getLastMatchingPosition(o=>o.item.is("uiElement"))),i=this._wrapPosition(i,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new Oe(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof Ea))throw new P("view-writer-unwrap-invalid-attribute",this.document);if(yl(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._unwrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Oe(a,l)}rename(e,t){const i=new Ec(this.document,e,t.getAttributes());return this.insert(se._createAfter(t),i),this.move(Oe._createIn(t),se._createAt(i,0)),this.remove(Oe._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return se._createAt(e,t)}createPositionAfter(e){return se._createAfter(e)}createPositionBefore(e){return se._createBefore(e)}createRange(e,t){return new Oe(e,t)}createRangeOn(e){return Oe._createOn(e)}createRangeIn(e){return Oe._createIn(e)}createSelection(...e){return new Us(...e)}createSlot(e="children"){if(!this._slotFactory)throw new P("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let s;if(i?s=pg(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new P("view-writer-invalid-position-container",this.document);let o;i?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Bp(e):e;const r=s._insertChild(o.offset,t);for(const u of t)this._addToClonedElementsGroup(u);const a=o.getShiftedBy(r),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const c=this.mergeAttributes(a);return new Oe(l,c)}_wrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(s,l))r.push(new se(e,o));else if(c||!u||LD(s,l)){const d=s._clone();l._remove(),d._appendChild(l),e._insertChild(o,d),this._addToClonedElementsGroup(d),r.push(new se(e,o))}else this._wrapChildren(l,0,l.childCount,s);o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Oe._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(s)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),r.push(new se(e,o),new se(e,o+u)),o+=u,i+=u-1;continue}if(this._unwrapAttributeElement(s,l)){r.push(new se(e,o),new se(e,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,s),o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Oe._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._wrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Oe(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return J_(e.clone());e.parent.is("$text")&&(e=Bp(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new Oe(e,e.getShiftedBy(1));this.wrap(s,t);const o=new se(i.parent,i.index);i._remove();const r=o.nodeBefore,a=o.nodeAfter;return r instanceof yt&&a instanceof yt?Y_(r,a):J_(o)}_wrapAttributeElement(e,t){if(!Q_(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!Q_(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(yl(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new Oe(l,l)}const o=this._breakAttributes(s,t),r=o.parent.childCount,a=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new Oe(a,o)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new P("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new P("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new P("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&mg(s.parent)||mg(s))return e.clone();if(s.is("$text"))return this._breakAttributes(Bp(e),t);const o=s.childCount;if(i==o){const r=new se(s.parent,s.index+1);return this._breakAttributes(r,t)}else if(i===0){const r=new se(s.parent,s.index);return this._breakAttributes(r,t)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const l=s.childCount-i,c=s._removeChildren(i,l);a._appendChild(c);const u=new se(s.parent,r);return this._breakAttributes(u,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function BD(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function pg(n){let e=n.parent;for(;!mg(e);){if(!e)return;e=e.parent}return e}function LD(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function J_(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new se(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new se(t,0):n}function Bp(n){if(n.offset==n.parent.data.length)return new se(n.parent.parent,n.parent.index+1);if(n.offset===0)return new se(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new yt(n.root.document,e)),new se(n.parent.parent,n.parent.index+1)}function Y_(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new se(n,t)}const ND=[yt,Ea,Ec,tb,nb,hf];function E5(n,e){for(const t of n){if(!ND.some(i=>t instanceof i))throw new P("view-writer-insert-invalid-node-type",e);t.is("$text")||E5(t.getChildren(),e)}}function mg(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function yl(n,e){const t=pg(n.start),i=pg(n.end);if(!t||!i||t!==i)throw new P("view-writer-invalid-range-container",e)}function Q_(n,e){return n.id===null&&e.id===null}const x5=n=>n.createTextNode(""),T5=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="",e},S5=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},Ui=7,xc="".repeat(Ui);function ai(n){return typeof n=="string"?n.substr(0,Ui)===xc:At(n)&&n.data.substr(0,Ui)===xc}function ba(n){return n.data.length==Ui&&ai(n)}function ey(n){const e=typeof n=="string"?n:n.data;return ai(n)?e.slice(Ui):e}function VD(n){n.document.on("arrowKey",DD,{priority:"low"})}function DD(n,e){if(e.keyCode==Re.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;ai(i)&&s<=Ui&&t.collapse(i,0)}}}let FD=class extends tt(){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(e,t){super(),this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),ke.isBlink&&!ke.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new P("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!ke.isAndroid)return;let e=null;const t=ke.isBlink&&!ke.isAndroid?!this.isSelecting:!0;for(const i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=se._createBefore(e.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){const i=this.domConverter.viewPositionToDom(e),s=i.parent.ownerDocument;ai(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=ty(s,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(i,s),r=this._findUpdateActions(o,i,s,UD);if(r.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const l of r)if(l==="update"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);d&&!d.is("uiElement")&&!d.is("rawElement")&&this._updateElementMappings(d,i[u]),N_(s[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?se._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&At(t.parent)&&ai(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!ai(e))throw new P("view-renderer-filler-was-lost",this);ba(e)?e.remove():e.data=e.data.substr(Ui),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!$D(t))return!1;const s=e.nodeBefore,o=e.nodeAfter;return!(s instanceof yt||o instanceof yt||i===t.getFillerOffset()&&(!s||!s.is("element","br"))||ke.isAndroid&&(s||o))}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const r=t.inlineFillerPosition;r&&r.parent==e.parent&&r.offset==e.index&&(o=xc+o),this._updateTextNode(i,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(t){for(const i of t.attributes){const s=i.name;e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(t,s)}for(const i of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,i,e.getAttribute(i),e)}}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;if(ke.isAndroid){let d=null;for(const h of Array.from(i.childNodes)){if(d&&At(d)&&At(h)){i.normalize();break}d=h}}const s=t.inlineFillerPosition,o=i.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&ty(i.ownerDocument,r,s.offset);const a=this._diffNodeLists(o,r),l=this._findUpdateActions(a,o,r,HD);let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(o[c]),N_(o[c])):(d==="equal"||d==="update")&&c++;c=0;for(const d of l)d==="insert"?(c5(i,c,r[c]),c++):d==="update"?(this._updateTextNode(o[c],r[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(r[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=WD(e,this._fakeSelectionContainer),Zl(e,t,jD.bind(null,this.domConverter))}_findUpdateActions(e,t,i,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],r=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?r.push(t[l.equal+l.delete]):(o=o.concat(Zl(r,a,s).map(u=>u==="equal"?"update":u)),o.push("equal"),r=[],a=[]),l[c]++;return o.concat(Zl(r,a,s).map(c=>c==="equal"?"update":c))}_updateTextNode(e,t){const i=e.data;i!=t&&(ke.isAndroid&&this.isComposing&&i.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){const i=KT(e.data,t);for(const s of i)s.type==="insert"?e.insertData(s.index,s.values.join("")):e.deleteData(s.index,s.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(ke.isBlink&&!ke.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&ke.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=qD(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"";const s=t.getSelection(),o=t.createRange();s.removeAllRanges(),o.selectNodeContents(i),s.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,s.parent,s.offset),ke.isGecko&&zD(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const i=e.activeElement,s=this.domConverter.mapDomToView(i);i&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function $D(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function ty(n,e,t){const i=e instanceof Array?e:e.childNodes,s=i[t];if(At(s))return s.data=xc+s.data,s;{const o=n.createTextNode(xc);return Array.isArray(e)?i.splice(t,0,o):c5(e,t,o),o}}function UD(n,e){return No(n)&&No(e)&&!At(n)&&!At(e)&&!Ql(n)&&!Ql(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function HD(n,e){return No(n)&&No(e)&&At(n)&&At(e)}function jD(n,e,t){return e===t?!0:At(e)&&At(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function zD(n,e){let t=n.parent,i=n.offset;if(At(t)&&ba(t)&&(i=Vl(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;const s=t.childNodes[i];s&&s.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function WD(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function qD(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="",e}const GD=S5(ue.document),KD=x5(ue.document),XD=T5(ue.document),Du="data-ck-unsafe-attribute-",ny="data-ck-unsafe-element";class I5{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new Cc;_inlineObjectElementMatcher=new Cc;_elementsWithTemporaryCustomProperties=new Set;constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?ue.document:ue.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Us(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const i=new DOMParser().parseFromString(t,"text/html"),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=r.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(sy(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{const i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let s;if(i.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,i);else{if(i.is("uiElement"))return i.name==="$comment"?s=this._domDocument.createComment(i.getCustomProperty("$rawContent")):s=i.render(this._domDocument,this),t.bind&&this.bindElements(s,i),s;this._shouldRenameElement(i.name)?(sy(i.name),s=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?s=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):s=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(s,this),t.bind&&this.bindElements(s,i);for(const o of i.getAttributeKeys())this.setDomElementAttribute(s,o,i.getAttribute(o),i)}if(t.withChildren!==!1)for(const o of this.viewChildrenToDom(i,t))s instanceof HTMLTemplateElement?s.content.appendChild(o):s.appendChild(o);return s}}setDomElementAttribute(e,t,i,s){const o=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);if(o||Ue("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!MV(t)){Ue("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(Du+t)&&o&&e.removeAttribute(Du+t),e.setAttribute(o?t:Du+t,i)}removeDomElementAttribute(e,t){t!=ny&&(e.removeAttribute(t),e.removeAttribute(Du+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const o of e.getChildren()){i===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!en(o.getAttributes());if(r&&this.renderingMode=="data")if(o.is("rawElement")){const a=this._domDocument.createElement(o.name);o.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(o,t);else r&&Ue("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t);s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return ai(i)&&(s+=Ui),{parent:i,offset:s}}else{let i,s,o;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;o=i.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,o=s.nextSibling}if(At(o)&&ai(o))return{parent:o,offset:Ui};const r=s?Vl(s)+1:0;return{parent:i,offset:r}}}domToView(e,t={}){const i=[],s=this._domToView(e,t,i),o=s.next().value;return!o||(s.next(),this._processDomInlineNodes(null,i,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},i=[]){let s=[];e instanceof HTMLTemplateElement?s=[...e.content.childNodes]:s=[...e.childNodes];for(let o=0;o<s.length;o++){const r=s[o],a=this._domToView(r,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),yield l,a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(YD(e))return new Us([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;At(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const o=e.getRangeAt(s),r=this.domRangeToView(o);r&&i.push(r)}return new Us(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Oe(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Vl(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return se._createBefore(i);if(At(e)){if(ba(e))return this.domPositionToView(e.parentNode,Vl(e));const s=this.findCorrespondingViewText(e);let o=t;return s?(ai(e)&&(o-=Ui,o=o<0?0:o),new se(s,o)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new se(s,0)}else{const s=e.childNodes[t-1];if(At(s)&&ba(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,Vl(s));const o=At(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new se(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(ba(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const o=s.nextSibling;return o instanceof yt?o:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const o=s.getChild(0);return o instanceof yt?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:i,scrollY:s}=ue.window,o=[];iy(t,r=>{const{scrollLeft:a,scrollTop:l}=r;o.push([a,l])}),t.focus(),iy(t,r=>{const[a,l]=o.shift();r.scrollLeft=a,r.scrollTop=l}),ue.window.scrollTo(i,s)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(GD):e.tagName==="BR"&&A5(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(XD)||JD(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=IV(e);for(t.pop();t.length;){const i=t.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return x5(this._domDocument);case"markedNbsp":return T5(this._domDocument);case"br":return S5(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(At(e)&&ai(e)&&t<Ui||this.isElement(e)&&ai(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;const s=this.getHostViewElement(e);if(s)return s;if(Ql(e)&&t.skipComments)return null;if(At(e)){if(ba(e))return null;{const o=e.data;if(o==="")return null;const r=new yt(this.document,o);return i.push(r),r}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&i.push(o),o;if(this.isDocumentFragment(e))o=new br(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)o._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||i.push(o),o;if(Ql(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;const r=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,r))o._appendChild(a);if(this._isInlineObjectElement(o))i.push(o),this._processDomInlineNodes(null,r,t);else for(const a of r)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let o=0;o<t.length;o++){const r=t[o];if(!r.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(r))a=ey(r.data);else{a=r.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=o>0?t[o-1]:null,u=o+1<t.length?t[o+1]:null,d=!c||c.is("element")&&c.name=="br"||s,h=u?!1:!ai(r.data);i.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=ey(a),a=a.replace(/ \u00A0/g,"  ");const f=u&&u.is("element")&&u.name!="br",p=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||f||p)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&r.parent?(r._remove(),t.splice(o,1),o--):(r._data=a,s=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||s)&&(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(ZD(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const i=new rr({startPosition:t?se._createAfter(e):se._createBefore(e),direction:t?"forward":"backward"});for(const{item:s}of i){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Ql(e))return new hf(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Gi(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(ny,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const s of t.getAttributeNames())i.setAttribute(s,t.getAttribute(s))}return i}}function ZD(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function iy(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function JD(n,e){return n.isEqualNode(KD)&&A5(n,e)&&n.parentNode.childNodes.length===1}function A5(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function sy(n){n==="script"&&Ue("domconverter-unsafe-script-element-detected"),n==="style"&&Ue("domconverter-unsafe-style-element-detected")}function YD(n){if(!ke.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}class ws extends vi(){view;document;_isEnabled=!1;constructor(e){super(),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class La{view;document;domEvent;domTarget;constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,bT(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Dr extends ws{useCapture=!1;usePassive=!1;observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new La(this.view,t,i))}}class QD extends Dr{domEventType=["keydown","keyup"];onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Ba(this)}};this.fire(e.type,e,t)}}class eF extends ws{_fireSelectionChangeDoneDebounced;constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Bo(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Us(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Re.arrowleft||e==Re.arrowup)&&i.setTo(i.getFirstPosition()),(e==Re.arrowright||e==Re.arrowdown)&&i.setTo(i.getLastPosition());const s={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}let P5=class extends ws{domConverter;_config;_domElements;_mutationObserver;constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,i=new Set,s=new Set;for(const r of e){const a=t.mapDomToView(r.target);a&&(a.is("uiElement")||a.is("rawElement")||r.type==="childList"&&!this._isBogusBrMutation(r)&&s.add(a))}for(const r of e){const a=t.mapDomToView(r.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&r.type==="characterData"){const l=t.findCorrespondingViewText(r.target);l&&!s.has(l.parent)?i.add(l):!l&&ai(r.target)&&s.add(t.mapDomToView(r.target.parentNode))}}const o=[];for(const r of i)o.push({type:"text",node:r});for(const r of s){const a=t.mapViewToDom(r),l=Array.from(r.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));zN(l,c,tF)||o.push({type:"children",node:r})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function tF(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}class ih extends Dr{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(e){super(e),this.useCapture=!0;const t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(i,s)=>this._handleBlur(s)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class nF extends ws{mutationObserver;focusObserver;selection;domConverter;_documents;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter;constructor(e){super(e),this.mutationObserver=e.getObserver(P5),this.focusObserver=e.getObserver(ih),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Bo(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Bo(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!ke.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(t);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(i))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class iF extends Dr{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(e){super(e);const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O5{_files;_native;constructor(e,t={}){this._files=t.cacheFiles?oy(e):null,this._native=e}get files(){return this._files||(this._files=oy(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function oy(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class sF extends Dr{domEventType="beforeinput";onDomEvent(e){const t=e.getTargetRanges(),i=this.view,s=i.document;let o=null,r=null,a=[];if(e.dataTransfer&&(o=new O5(e.dataTransfer)),e.data!==null?r=e.data:o&&(r=o.getData("text/plain")),s.selection.isFake)a=Array.from(s.selection.getRanges());else if(t.length)a=t.map(l=>{const c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),u=i.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return i.createRange(c,u);if(u)return i.createRange(u)}).filter(l=>!!l);else if(ke.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(ke.isAndroid&&e.inputType=="insertCompositionText"&&r&&r.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&r&&r.includes(`
`)){const l=r.split(/\n{1,2}/g);let c=a;for(let u=0;u<l.length;u++){const d=l[u];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[s.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:r,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}class oF extends ws{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&HV(i.keyCode)){const s=new rl(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class rF extends ws{constructor(e){super(e);const t=this.document;t.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=Re.tab||s.ctrlKey)return;const o=new rl(t,"tab",t.selection.getFirstRange());t.fire(o,s),o.stop.called&&i.stop()})}observe(){}stopObserving(){}}let aF=class extends tt(){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(e){super(),this.document=new k5(e),this.domConverter=new I5(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new FD(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new C5(this.document),this.addObserver(P5),this.addObserver(ih),this.addObserver(nF),this.addObserver(QD),this.addObserver(eF),this.addObserver(iF),this.addObserver(oF),this.addObserver(sF),this.addObserver(rF),VD(this),AD(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),ke.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:i})=>{i.forEach(s=>this._renderer.markToSync(s.type,s.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const s={};for(const{name:r,value:a}of Array.from(e.attributes))s[r]=a,r==="class"?this._writer.addClass(a.split(" "),i):i.hasAttribute(r)||this._writer.setAttribute(r,a,i);this._initialDomRootAttributes.set(e,s);const o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(r,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(r,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(r,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const r of this._observers.values())r.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const i=this._initialDomRootAttributes.get(t);for(const s in i)t.setAttribute(s,i[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,s]of this.domRoots)t.observe(s,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:s=20}={}){const o=this.document.selection.getFirstRange();if(!o)return;const r=Yi({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:s});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});const a={target:this.domConverter.viewRangeToDom(o),viewportOffset:i,ancestorOffset:s,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,r),LV(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new P("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(ih).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return se._createAt(e,t)}createPositionAfter(e){return se._createAfter(e)}createPositionBefore(e){return se._createBefore(e)}createRange(e,t){return new Oe(e,t)}createRangeOn(e){return Oe._createOn(e)}createRangeIn(e){return Oe._createIn(e)}createSelection(...e){return new Us(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Go{is(){throw new Error("is() method is abstract")}}let Fr=class extends Go{parent=null;_attrs;_index=null;_startOffset=null;constructor(e){super(),this._attrs=Ys(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=kn(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Ys(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Fr.prototype.is=function(n){return n==="node"||n==="model:node"};class ec{_nodes=[];_offsetToNode=[];constructor(e){e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new P("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[e];if(!t)throw new P("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){for(const r of t)if(!(r instanceof Fr))throw new P("model-nodelist-insertnodes-not-node",this);const i=Array.from(t),s=lF(i);let o=this.indexToOffset(e);this._nodes=z_(this._nodes,i,e,0),this._offsetToNode=z_(this._offsetToNode,s,o,0);for(let r=e;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=o,o+=this._nodes[r].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e);const s=this._nodes.splice(e,t),o=s[s.length-1],r=o.startOffset+o.offsetSize-i;this._offsetToNode.splice(i,r);for(const a of s)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return s}toJSON(){return this._nodes.map(e=>e.toJSON())}}function lF(n){const e=[];for(const t of n){const i=e.length;e.length+=t.offsetSize,e.fill(t,i)}return e}let wt=class gg extends Fr{_data;constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new gg(this.data,this.getAttributes())}static fromJSON(e){return new gg(e.data,e.attributes)}};wt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};class Hi extends Go{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new P("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new P("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Hi.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};let bt=class fd extends Fr{name;_children=new ec;constructor(e,t,i){super(t),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new fd(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=cF(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(fd.fromJSON(i)):t.push(wt.fromJSON(i))}return new fd(e.name,e.attributes,t)}};bt.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function cF(n){return typeof n=="string"?[new wt(n)]:(gi(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new wt(e):e instanceof Hi?new wt(e.data,e.getAttributes()):e))}class Ds{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new P("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new P("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=z._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,s,o;do s=this.position,o=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=s,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=tc(t,i),o=s||M5(t,i,s);if(o instanceof bt){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Qo("elementStart",o,e,t,1)}if(o instanceof wt){let r;if(this.singleCharacters)r=1;else{let c=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),r=c-t.offset}const a=t.offset-o.startOffset,l=new Hi(o,a,r);return t.offset+=r,this._position=t,Qo("text",l,e,t,r)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Qo("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,o=tc(t,s),r=o||R5(t,s,o);if(r instanceof bt)return t.offset--,this.shallow?(this._position=t,Qo("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this._position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():Qo("elementEnd",r,e,t));if(r instanceof wt){let a;if(this.singleCharacters)a=1;else{let u=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-r.startOffset,c=new Hi(r,l-a,a);return t.offset-=a,this._position=t,Qo("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,Qo("elementStart",i,e,t,1)}}function Qo(n,e,t,i,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:s}}}class z extends Go{root;path;stickiness;constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new P("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new P("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new P("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new P("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return tc(this,this.parent)}get nodeAfter(){const e=this.parent;return M5(this,e,tc(this,e))}get nodeBefore(){const e=this.parent;return R5(this,e,tc(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=kn(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Ds(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=kn(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const s=this.path[i]-e.path[i];if(s<-1||s>1)return!1;if(s===1)return ry(e,this,i);if(s===-1)return ry(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?bg(this.path,t):bg(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),i=e.getParentPath();return kn(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=z._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this);let s;return i?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=z._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,t){const i=z._createAt(this);if(this.root!=e.root)return i;if(kn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(kn(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;i.path[s]-=t}}return i}_getTransformedByInsertion(e,t){const i=z._createAt(this);if(this.root!=e.root)return i;if(kn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(kn(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(i.path[s]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return z._createAt(this);const s=this._getTransformedByDeletion(e,i);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):s._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,s=z._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-e.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof z)return new z(e.root,e.path,e.stickiness);{const s=e;if(t=="end")t=s.maxOffset;else{if(t=="before")return this._createBefore(s,i);if(t=="after")return this._createAfter(s,i);if(t!==0&&!t)throw new P("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new P("model-position-parent-incorrect",[this,e]);const o=s.getPath();return o.push(t),new this(s.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new P("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new P("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new z(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new P("model-position-fromjson-no-root",t,{rootName:e.root});return new z(t.getRoot(e.root),e.path,e.stickiness)}}z.prototype.is=function(n){return n==="position"||n==="model:position"};function tc(n,e){const t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function M5(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function R5(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function ry(n,e,t){return!(t+1===n.path.length||!bg(e.path,t+1)||!uF(n,t+1))}function bg(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function uF(n,e){let t=n.parent,i=n.path.length-1,s=0;for(;i>=e;){if(n.path[i]+s!==t.maxOffset)return!1;s=1,i--,t=t.parent}return!0}class L extends Go{start;end;constructor(e,t){super(),this.start=z._createAt(e),this.end=t?z._createAt(t):z._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Ds({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return kn(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}containsItem(e){const t=z._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new L(this.start,e.start)),this.containsPosition(e.end)&&t.push(new L(e.end,this.end))):t.push(new L(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new L(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let s=this.start,o=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(o)&&(o=e.end),new L(s,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=z._createAt(this.start);let s=i.parent;for(;i.path.length>t+1;){const o=s.maxOffset-i.offset;o!==0&&e.push(new L(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],r=o-i.offset;r!==0&&e.push(new L(i,i.getShiftedBy(r))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Ds(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Ds(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Ds(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new L(this.start,this.end)]}getTransformedByOperations(e){const t=[new L(this.start,this.end)];for(const i of e)for(let s=0;s<t.length;s++){const o=t[s].getTransformedByOperation(i);t.splice(s,1,...o),s+=o.length-1}for(let i=0;i<t.length;i++){const s=t[i];for(let o=i+1;o<t.length;o++){const r=t[o];(s.containsRange(r)||r.containsRange(s)||s.isEqual(r))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,s=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new L(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new L(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=z._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new L(t,i)):new L(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new L(this.start,e),new L(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const s=new L(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,t),s.end=s.end._getTransformedByInsertion(e,t),[s]}}_getTransformedByMove(e,t,i,s=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,t,i);return[new L(d)]}const o=L._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,t,i),h=this.end._getTransformedByMove(e,t,i);return[new L(d,h)]}let a;const l=this.getDifference(o);let c=null;const u=this.getIntersection(o);if(l.length==1?c=new L(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new L(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(r,i,u!==null||s):a=[],u){const d=new L(u.start._getCombined(o.start,r),u.end._getCombined(o.start,r));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return i==null&&s==null?null:(i==null&&(i=e),s==null&&(s=e),new L(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return new this(z._createAt(e,0),z._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(z._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new P("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,r)=>o.start.isAfter(r.start)?1:-1);const i=e.indexOf(t),s=new this(t.start,t.end);for(let o=i-1;o>=0&&e[o].end.isEqual(s.start);o--)s.start=z._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(s.end);o++)s.end=z._createAt(e[o].end);return s}static fromJSON(e,t){return new this(z.fromJSON(e.start,t),z.fromJSON(e.end,t))}}L.prototype.is=function(n){return n==="range"||n==="model:range"};class B5 extends ot(){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;constructor(){super(),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new P("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(i),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=z._createAt(s,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new L(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Oe(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const s of t)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())i.add(o);else i.add(s);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){const o=this._toModelOffset(e.parent,e.index,i),r=this._toModelOffset(e,t,e);return o+r}if(e.is("$text"))return t;let s=0;for(let o=0;o<t;o++)s+=this.getModelLength(e.getChild(o));return s}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,s=0,o=0,r=0;if(e.is("$text"))return new se(e,t);for(;o<t;)i=e.getChild(r),s=this.getModelLength(i),o+=s,r++;return o==t?this._moveViewPositionToTextNode(new se(e,r)):this.findPositionIn(i,t-(o-s))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t instanceof yt?new se(t,t.data.length):i instanceof yt?new se(i,0):e}}class dF{_consumable=new Map;_textProxyRegistry=new Map;add(e,t){t=Fu(t),e instanceof Hi&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Fu(t),e instanceof Hi&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Fu(t),e instanceof Hi&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const s=i.get(t);return s===void 0?null:s}revert(e,t){t=Fu(t),e instanceof Hi&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[i,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&e==a&&t.push({event:o,item:i.name||i.description})}if(t.length)throw new P("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,s=e.parent,o=Symbol("$textProxy:"+e.data);let r,a;return r=this._textProxyRegistry.get(t),r||(r=new Map,this._textProxyRegistry.set(t,r)),a=r.get(i),a||(a=new Map,r.set(i,a)),a.set(s,o),o}}function Fu(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class L5 extends ot(){_conversionApi;_firedEventsMap;constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const s=this._createConversionApi(i,e.getRefreshedItems());for(const r of e.getMarkersToRemove())this._convertMarkerRemove(r.name,r.range,s);const o=this._reduceChanges(e.getChanges());for(const r of o)r.type==="insert"?this._convertInsert(L._createFromPositionAndShift(r.position,r.length),s):r.type==="reinsert"?this._convertReinsert(L._createFromPositionAndShift(r.position,r.length),s):r.type==="remove"?this._convertRemove(r.position,r.length,r.name,s):this._convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,s);s.mapper.flushDeferredBindings();for(const r of s.mapper.flushUnboundMarkerNames()){const a=t.get(r).getRange();this._convertMarkerRemove(r,a,s),this._convertMarkerAdd(r,a,s)}for(const r of e.getMarkersToAdd())this._convertMarkerAdd(r.name,r.range,s);s.consumable.verifyAllConsumed("insert")}convert(e,t,i,s={}){const o=this._createConversionApi(i,void 0,s);this._convertInsert(e,o);for(const[r,a]of t)this._convertMarkerAdd(r,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const s=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},s);const o=e.getFirstPosition().root;if(!s.mapper.toViewElement(o))return;const r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,e,r),this.fire("selection",{selection:e},s),!!e.isCollapsed){for(const a of r)if(s.consumable.test(e,"addMarker:"+a.name)){const l=a.getRange();if(!hF(e.getFirstPosition(),a,s.mapper))continue;const c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,s)}for(const a of e.getAttributeKeys())if(s.consumable.test(e,"attribute:"+a)){const l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,s)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const s of Array.from(e.getWalker({shallow:!0})).map(ay))this._testAndFire("insert",s,t)}_convertRemove(e,t,i,s){this.fire(`remove:${i}`,{position:e,length:t},s)}_convertAttribute(e,t,i,s,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const r of e){const a={item:r.item,range:L._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:t,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const s of i.map(ay))this._testAndFire("insert",{...s,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(i.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,s)){this._addConsumablesForRange(i.consumable,t,s);for(const o of t.getItems()){if(!i.consumable.test(o,s))continue;const r={item:o,range:L._createOn(o),markerName:e,markerRange:t};this.fire(s,r,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const i of t){const s=i.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const o of s.getAttributeKeys())e.add(s,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,i){for(const s of t.getItems())e.add(s,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const s of i)e.add(t,"addMarker:"+s.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,i){const s=fF(e,t),o=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,r=this._firedEventsMap.get(i),a=r.get(o);if(!a)r.set(o,new Set([s]));else if(!a.has(s))a.add(s);else return;this.fire(s,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:L._createOn(e)};for(const s of i.item.getAttributeKeys())i.attributeKey=s,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(s),this._testAndFire(`attribute:${s}`,i,t)}_createConversionApi(e,t=new Set,i={}){const s={...this._conversionApi,consumable:new dF,writer:e,options:i,convertItem:o=>this._convertInsert(L._createOn(o),s),convertChildren:o=>this._convertInsert(L._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!t.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function hF(n,e,t){const i=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(i.containsItem(r))return!!t.toViewElement(r).getCustomProperty("addHighlight")})}function fF(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function ay(n){const e=n.item,t=L._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}class ui extends ot(Go){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...e){super(),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new L(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new L(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new L(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof ui)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof L)this._setRanges([t],!!s&&!!s.backward);else if(t instanceof z)this._setRanges([new L(t)]);else if(t instanceof Fr){const o=!!s&&!!s.backward;let r;if(i=="in")r=L._createIn(t);else if(i=="on")r=L._createOn(t);else if(i!==void 0)r=new L(z._createAt(t,i));else throw new P("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([r],o)}else if(gi(t))this._setRanges(t,s&&!!s.backward);else throw new P("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const i=Array.from(e),s=i.some(o=>{if(!(o instanceof L))throw new P("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(r=>!r.isEqual(o))});i.length===this._ranges.length&&!s||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new P("model-selection-setfocus-no-ranges",[this,e]);const i=z._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(s)=="before"?(this._pushRange(new L(i,s)),this._lastRangeBackward=!0):(this._pushRange(new L(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=ly(t.start,e);mF(i,t)&&(yield i);for(const o of t.getWalker()){const r=o.item;o.type=="elementEnd"&&pF(r,e,t)&&(yield r)}const s=ly(t.end,e);gF(s,t)&&(yield s)}}containsEntireContent(e=this.anchor.root){const t=z._createAt(e,0),i=z._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new L(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new P("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}ui.prototype.is=function(n){return n==="selection"||n==="model:selection"};function N5(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function pF(n,e,t){return N5(n,e)&&ib(n,t)}function ly(n,e){const i=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=i.isLimit(a),!o&&N5(a,e)));return s.forEach(a=>e.add(a)),r}function ib(n,e){const t=bF(n);return t?!e.containsRange(L._createOn(t),!0):!0}function mF(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(z._createAt(n,n.maxOffset))?!1:ib(n,e):!1}function gF(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(z._createAt(n,0))?!1:ib(n,e):!1}function bF(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}class Vn extends ot(L){constructor(e,t){super(e,t),vF.call(this)}detach(){this.stopListening()}toRange(){return new L(this.start,this.end)}static fromRange(e){return new Vn(e.start,e.end)}}Vn.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function vF(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&wF.call(this,t)},{priority:"low"})}function wF(n){const e=this.getTransformedByOperation(n),t=L._createFromRanges(e),i=!t.isEqual(this),s=_F(this,n);let o=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?o=n.sourcePosition:o=n.deletionPosition);const r=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function _F(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}const Tc="selection:";class Ki extends ot(Go){_selection;constructor(e){super(),this._selection=new yF(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Tc+e}static _isStoreAttributeKey(e){return e.startsWith(Tc)}}Ki.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class yF extends ui{markers=new zn({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(e){super(),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const s=i[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,s,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(t,i)=>{kF(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Ai();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new P("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new P("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Vn.fromRange(e);return t.on("change:range",(i,s,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const r=this._ranges.indexOf(t);this._ranges.splice(r,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const r=s.getRange();for(const a of this.getRanges())r.containsRange(a,!a.isCollapsed)&&e.push(s)}const i=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const o=Array.from(this.markers),r=this.markers.has(e);if(!t)r&&(this.markers.remove(e),s=!0);else{let a=!1;for(const l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!r?(this.markers.add(e),s=!0):!a&&r&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=Ys(this._getSurroundingAttributes()),i=Ys(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,r]of this._attributePriority)r=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const s=[];for(const[o,r]of this.getAttributes())(!i.has(o)||i.get(o)!==r)&&s.push(o);for(const[o]of i)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[i,s]of this.getAttributes())e.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of e)this._setAttribute(i,s,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Tc)&&(yield[t.substr(Tc.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=kl(s,t)),i||(i=kl(o,t)),!this.isGravityOverridden&&!i){let r=s;for(;r&&!i;)r=r.previousSibling,i=kl(r,t)}if(!i){let r=o;for(;r&&!i;)r=r.nextSibling,i=kl(r,t)}i||(i=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&t.isObject(o.item)){i=kl(o.item,t);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function kl(n,e){if(!n)return null;if(n instanceof Hi||n instanceof wt)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[i,s]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,s]);return t}function kF(n,e){const t=n.document.differ;for(const i of t.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&n.enqueueChange(e,r=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(Tc));for(const l of a)r.removeAttribute(l,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V5{_dispatchers;constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class CF extends V5{elementToElement(e){return this.add(UF(e))}elementToStructure(e){return this.add(HF(e))}attributeToElement(e){return this.add(jF(e))}attributeToAttribute(e){return this.add(zF(e))}markerToElement(e){return this.add(WF(e))}markerToHighlight(e){return this.add(GF(e))}markerToData(e){return this.add(qF(e))}}function D5(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const i=t.writer,s=t.mapper.toViewPosition(e.range.start),o=i.createText(e.item.data);i.insert(s,o)}}function F5(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function EF(){return(n,e,t)=>{const i=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(s,{isPhantom:!0}),r=t.writer.createRange(i,o),a=t.writer.remove(r.getTrimmed());for(const l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function $5(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function xF(){return(n,e,t)=>{const i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=[];for(const o of i.getRanges())s.push(t.mapper.toViewRange(o));t.writer.setSelection(s,{backward:i.isBackward})}}function TF(){return(n,e,t)=>{const i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=t.writer,o=i.getFirstPosition(),r=t.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function SF(){return(n,e,t)=>{const i=t.writer,s=i.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);i.setSelection(null)}}function IF(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.writer,a=r.document.selection;if(t.item instanceof ui||t.item instanceof Ki)r.wrap(a.getFirstRange(),o);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(l=r.unwrap(l,s)),t.attributeNewValue!==null&&o&&r.wrap(l,o)}}}function AF(n,e=e$){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=n(i.item,s,i);if(!o)return;e(i.item,s.consumable);const r=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(r,o),s.convertAttributes(i.item),W5(o,i.item.getChildren(),s,{reconversion:i.reconversion})}}function PF(n,e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(ZF(i.item,o,s));const r=n(i.item,s,i);if(s.writer._clearSlotFactory(),!r)return;JF(i.item,o,s),e(i.item,s.consumable);const a=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(a,r),s.convertAttributes(i.item),YF(r,o,s,{reconversion:i.reconversion})}}function OF(n){return(e,t,i)=>{t.isOpening=!0;const s=n(t,i);t.isOpening=!1;const o=n(t,i);if(!s||!o)return;const r=t.markerRange;if(r.isCollapsed&&!i.consumable.consume(r,e.name))return;for(const c of r)if(!i.consumable.consume(c.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(r.start),s),i.mapper.bindElementToMarker(s,t.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function MF(){return(n,e,t)=>{const i=t.mapper.markerNameToElements(e.markerName);if(i){for(const s of i)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function RF(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=t.markerRange;i.consumable.consume(o,e.name)&&(cy(o,!1,i,t,s),cy(o,!0,i,t,s),e.stop())}}function cy(n,e,t,i,s){const o=e?n.start:n.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let c,u;e&&r||!e&&!a?(c=r,u=!0):(c=a,u=!1);const d=t.mapper.toViewElement(c);if(d){BF(d,e,u,t,i,s);return}}const l=t.mapper.toViewPosition(o);LF(l,e,t,i,s)}function BF(n,e,t,i,s,o){const r=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(r)?n.getAttribute(r).split(","):[];a.unshift(o.name),i.writer.setAttribute(r,a.join(","),n),i.mapper.bindElementToMarker(n,s.markerName)}function LF(n,e,t,i,s){const o=`${s.group}-${e?"start":"end"}`,r=s.name?{name:s.name}:null,a=t.writer.createUIElement(o,r);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function NF(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=i.mapper.markerNameToElements(t.markerName);if(!o)return;for(const a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function r(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function VF(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.mapper.toViewElement(t.item),a=i.writer;if(!r)throw new P("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&s)if(s.key=="class"){const l=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(const c of l)a.removeClass(c,r)}else if(s.key=="style")if(typeof s.value=="string"){const l=new dg(a.document.stylesProcessor);l.setTo(s.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,r)}else{const l=Object.keys(s.value);for(const c of l)a.removeStyle(c,r)}else a.removeAttribute(s.key,r);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(const c of l)a.addClass(c,r)}else if(o.key=="style")if(typeof o.value=="string"){const l=new dg(a.document.stylesProcessor);l.setTo(o.value);for(const[c,u]of l.getStylesEntries())a.setStyle(c,u,r)}else{const l=Object.keys(o.value);for(const c of l)a.setStyle(c,o.value[c],r)}else a.setAttribute(o.key,o.value,r)}}function DF(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof ui||t.item instanceof Ki)&&!t.item.is("$textProxy"))return;const s=sb(n,t,i);if(!s||!i.consumable.consume(t.item,e.name))return;const o=i.writer,r=$5(o,s),a=o.document.selection;if(t.item instanceof ui||t.item instanceof Ki)o.wrap(a.getFirstRange(),r);else{const l=i.mapper.toViewRange(t.range),c=o.wrap(l,r);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(r)){i.mapper.bindElementToMarker(u,t.markerName);break}}}}function FF(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof bt))return;const s=sb(n,t,i);if(!s||!i.consumable.test(t.item,e.name))return;const o=i.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const a of L._createIn(t.item))i.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,s,i.writer),i.mapper.bindElementToMarker(o,t.markerName)}}}function $F(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;const s=sb(n,t,i);if(!s)return;const o=$5(i.writer,s),r=i.mapper.markerNameToElements(t.markerName);if(r){for(const a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function UF(n){const e=U5(n.model),t=Sc(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,AF(t,z5(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",j5(e),{priority:"low"})}}function HF(n){const e=U5(n.model),t=Sc(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new P("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,PF(t,z5(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",j5(e),{priority:"low"})}}function jF(n){n=Yi(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=Sc(n.view[s],"attribute");else n.view=Sc(n.view,"attribute");const i=H5(n);return s=>{s.on(t,IF(i),{priority:n.converterPriority||"normal"})}}function zF(n){n=Yi(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=uy(n.view[s]);else n.view=uy(n.view);const i=H5(n);return s=>{s.on(t,VF(i),{priority:n.converterPriority||"normal"})}}function WF(n){const e=Sc(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,OF(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,MF(),{priority:n.converterPriority||"normal"})}}function qF(n){n=Yi(n);const e=n.model;let t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,RF(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,NF(t),{priority:n.converterPriority||"normal"})}}function GF(n){return e=>{e.on(`addMarker:${n.model}`,DF(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,FF(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,$F(n.view),{priority:n.converterPriority||"normal"})}}function U5(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?at(n.attributes):[],children:!!n.children}}function Sc(n,e){return typeof n=="function"?n:(t,i)=>KF(n,i,e)}function KF(n,e,t){typeof n=="string"&&(n={name:n});let i;const s=e.writer,o=Object.assign({},n.attributes);if(t=="container")i=s.createContainerElement(n.name,o);else if(t=="attribute"){const r={priority:n.priority||Ea.DEFAULT_PRIORITY};i=s.createAttributeElement(n.name,o,r)}else i=s.createUIElement(n.name,o);if(n.styles){const r=Object.keys(n.styles);for(const a of r)s.setStyle(a,n.styles[a],i)}if(n.classes){const r=n.classes;if(typeof r=="string")s.addClass(r,i);else for(const a of r)s.addClass(a,i)}return i}function H5(n){return n.model.values?(e,t,i)=>{const s=n.view[e];return s?s(e,t,i):null}:n.view}function uy(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function sb(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function XF(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(n.children)return!0}return!1}}function j5(n){const e=XF(n);return(t,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const o of i.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!e(r,o)){s.push(o);continue}if(!i.reconvertedElements.has(r)){i.reconvertedElements.add(r);const a=z._createBefore(r);let l=s.length;for(let c=s.length-1;c>=0;c--){const u=s[c],h=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(h=="before"||u.type=="remove"&&h=="same")break;l=c}s.splice(l,0,{type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}i.changes=s}}function z5(n){return(e,t,i={})=>{const s=["insert"];for(const o of n.attributes)e.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>t.test(e,o))?(i.preflight||s.forEach(o=>t.consume(e,o)),!0):!1}}function ZF(n,e,t){return(i,s)=>{const o=i.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(n.getChildren());else if(typeof s=="function")r=Array.from(n.getChildren()).filter(a=>s(a));else throw new P("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(o,r),o}}function JF(n,e,t){const i=Array.from(e.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new P("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(s.size!=n.childCount)throw new P("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function YF(n,e,t,i){t.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of e)W5(n,o,t,i),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",r);function r(a,l){const c=l.modelPosition.nodeAfter,u=o.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(s,u))}}function W5(n,e,t,i){for(const s of e)QF(n.root,s,t,i)||t.convertItem(s)}function QF(n,e,t,i){const{writer:s,mapper:o}=t;if(!i.reconversion)return!1;const r=o.toViewElement(e);return!r||r.root==n||!t.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(z._createBefore(e))),!0)}function e$(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function q5(n){const{schema:e,document:t}=n.model;for(const i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function G5(n,e,t){const i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function K5(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class t$ extends V5{elementToElement(e){return this.add(X5(e))}elementToAttribute(e){return this.add(s$(e))}attributeToAttribute(e){return this.add(o$(e))}elementToMarker(e){return this.add(r$(e))}dataToMarker(e){return this.add(a$(e))}}function dy(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=s}}}function n$(){return(n,e,{schema:t,consumable:i,writer:s})=>{let o=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!G5(o,"$text",t)||e.viewItem.data.trim().length==0)return;o=K5(o,s)}i.consume(e.viewItem);const r=s.createText(e.viewItem.data);s.insert(r,o),e.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),e.modelCursor=e.modelRange.end}}function i$(n,e){return(t,i)=>{const s=i.newSelection,o=[];for(const a of s.getRanges())o.push(e.toModelRange(a));const r=n.createSelection(o,{backward:s.isBackward});r.isEqual(n.document.selection)||n.change(a=>{a.setSelection(r)})}}function X5(n){n=Yi(n);const e=vg(n),t=ob(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"normal"})}}function s$(n){n=Yi(n),Z5(n);const e=J5(n,!1),t=ob(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"low"})}}function o$(n){n=Yi(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=u$(n)),Z5(n,e);const t=J5(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function r$(n){const e=f$(n.model);return X5({...n,model:e})}function a$(n){n=Yi(n),n.model||(n.model=s=>s?n.view+":"+s:n.view);const e={view:n.view,model:n.model},t=vg(hy(e,"start")),i=vg(hy(e,"end"));return s=>{s.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),s.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});const o=Po.low,r=Po.highest,a=Po.get(n.converterPriority)/r;s.on("element",l$(e),{priority:o+a})}}function l$(n){return(e,t,i)=>{const s=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const l of a){const c=n.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,r),t.modelCursor.isEqual(r)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(r,1),t.modelRange=t.modelRange._getTransformedByInsertion(r,1)[0]}}}}function ob(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function vg(n){const e=new Cc(n.view);return(t,i,s)=>{const o=e.match(i.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(i.viewItem,r))return;const a=c$(n.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,r),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function c$(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function u$(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function Z5(n,e=null){const t=e===null?!0:o=>o.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:s}}function J5(n,e){const t=new Cc(n.view);return(i,s,o)=>{if(!s.modelRange&&e)return;const r=t.match(s.viewItem);if(!r||(d$(n.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(s.viewItem,o):n.model.value;if(l===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),h$(s.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function d$(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!ob(t)?!1:!t.classes&&!t.attributes&&!t.styles}function h$(n,e,t,i){let s=!1;for(const o of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(o,e.key)&&(s=!0,!o.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,o));return s}function f$(n){return(e,t)=>{const i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function hy(n,e){const t=(i,s)=>{const o=i.getAttribute("name"),r=n.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${n.view}-${e}`,model:t}}function p$(n){n.document.registerPostFixer(e=>m$(e,n))}function m$(n,e){const t=e.document.selection,i=e.schema,s=[];let o=!1;for(const r of t.getRanges()){const a=Y5(r,i);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&n.setSelection(w$(s),{backward:t.isBackward}),!1}function Y5(n,e){return n.isCollapsed?g$(n,e):b$(n,e)}function g$(n,e){const t=n.start,i=e.getNearestSelectionRange(t);if(!i){const o=t.getAncestors().reverse().find(r=>e.isObject(r));return o?L._createOn(o):null}if(!i.isCollapsed)return i;const s=i.start;return t.isEqual(s)?null:new L(s)}function b$(n,e){const{start:t,end:i}=n,s=e.checkChild(t,"$text"),o=e.checkChild(i,"$text"),r=e.getLimitElement(t),a=e.getLimitElement(i);if(r===a){if(s&&o)return null;if(v$(t,i,e)){const d=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),f=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),p=d?d.start:t,g=f?f.end:i;return new L(p,g)}}const l=r&&!r.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,d=l&&(!u||!py(t.nodeAfter,e)),h=c&&(!u||!py(i.nodeBefore,e));let f=t,p=i;return d&&(f=z._createBefore(fy(r,e))),h&&(p=z._createAfter(fy(a,e))),new L(f,p)}return null}function fy(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function v$(n,e,t){const i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||s}function w$(n){const e=[...n],t=new Set;let i=1;for(;i<e.length;){const o=e[i],r=e.slice(0,i);for(const[a,l]of r.entries())if(!t.has(a)){if(o.isEqual(l))t.add(a);else if(o.isIntersecting(l)){t.add(a),t.add(i);const c=o.getJoined(l);e.push(c)}}i++}return e.filter((o,r)=>!t.has(r))}function py(n,e){return n&&e.isSelectable(n)}class _$ extends tt(){model;view;mapper;downcastDispatcher;constructor(e,t){super(),this.model=e,this.view=new aF(t),this.mapper=new B5,this.downcastDispatcher=new L5({mapper:this.mapper,schema:e.schema});const i=this.model.document,s=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(r=>{this.downcastDispatcher.convertChanges(i.differ,o,r),this.downcastDispatcher.convertSelection(s,o,r)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",i$(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",y$(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",D5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",F5(),{priority:"lowest"}),this.downcastDispatcher.on("remove",EF(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",SF()),this.downcastDispatcher.on("selection",xF(),{priority:"low"}),this.downcastDispatcher.on("selection",TF(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(r=>{if(r.rootName=="$graveyard")return null;const a=new w5(this.view.document,r.name);return a.rootName=r.rootName,this.mapper.bindElements(r,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new P("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function y$(n,e,t){return(i,s)=>{if(!(t.document.isComposing&&!ke.isAndroid))for(let o=0;o<s.targetRanges.length;o++){const r=s.targetRanges[o],a=n.toModelRange(r),l=Y5(a,e);!l||l.isEqual(a)||(s.targetRanges[o]=n.toViewRange(l))}}}class nc{_consumables=new Map;add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new k$(e),this._consumables.set(e,i)),i.add(t)}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const r of i)r=="style"||r=="class"||t.attributes.push(r);const s=e.getClassNames();for(const r of s)t.classes.push(r);const o=e.getStyleNames();for(const r of o)t.styles.push(r);return t}static createFrom(e,t){if(t||(t=new nc),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,nc.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=nc.createFrom(i,t);return t}}const $u=["attributes","classes","styles"];class k${element;_canConsumeName;_consumables;constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of $u)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of $u)if(t in e){const i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of $u)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of $u)t in e&&this._revert(t,e[t])}_add(e,t){const i=at(t),s=this._consumables[e];for(const o of i){if(e==="attributes"&&(o==="class"||o==="style"))throw new P("viewconsumable-invalid-attribute",this);if(s.set(o,!0),e==="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!0)}}_test(e,t){const i=at(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles",a=this._test(r,[...this._consumables[r].keys()]);if(a!==!0)return a}else{const r=s.get(o);if(r===void 0)return null;if(!r)return!1}return!0}_consume(e,t){const i=at(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}else if(s.set(o,!1),e=="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!1)}_revert(e,t){const i=at(t),s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._revert(r,[...this._consumables[r].keys()])}else s.get(o)===!1&&s.set(o,!0)}}class C$ extends tt(){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new Oo(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new Oo(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new P("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new P("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){const i=this.getDefinition(e.last);if(!i)return!1;const s=this._evaluateAttributeChecks(e,t);return s!==void 0?s:i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof z){const i=e.nodeBefore,s=e.nodeAfter;if(!(i instanceof bt))throw new P("schema-check-merge-no-element-before",this);if(!(s instanceof bt))throw new P("schema-check-merge-no-element-after",this);return this.checkMerge(i,s)}if(this.isLimit(e)||this.isLimit(t))return!1;for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,s=this._customChildChecks.get(i)||[];s.push(e),this._customChildChecks.set(i,s)}addAttributeCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,s=this._customAttributeChecks.get(i)||[];s.push(e),this._customAttributeChecks.set(i,s)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof z?t=e.parent:t=(e instanceof L?[e]:Array.from(e.getRanges())).reduce((s,o)=>{const r=o.getCommonAncestor();return s?s.getCommonAncestor(r,{includeSelf:!0}):r},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new wt("",e.getAttributes())];return this.checkAttribute(s,t)}else{const i=e.getRanges();for(const s of i)for(const o of s)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=F$(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new L(e);let i,s;const o=e.getAncestors().reverse().find(r=>this.isLimit(r))||e.root;(t=="both"||t=="backward")&&(i=new Ds({boundaries:L._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(s=new Ds({boundaries:L._createIn(o),startPosition:e}));for(const r of D$(i,s)){const a=r.walker==i?"elementEnd":"elementStart",l=r.value;if(l.type==a&&this.isObject(l.item))return L._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new L(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const s=i.model;for(const[o,r]of Object.entries(t))s.schema.checkAttribute(e,o)&&i.setAttribute(o,r,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))my(this,i,t);else{const o=L._createIn(i).getPositions();for(const r of o){const a=r.nodeBefore||r.parent;my(this,a,t)}}}getAttributesWithProperty(e,t,i){const s={};for(const[o,r]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(i===void 0||i===a[t])&&(s[o]=r)}return s}createContext(e){return new Oo(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const o of i)e[o]=E$(t[o],o);const s=Object.values(e);for(const o of s)x$(e,o),T$(e,o),S$(e,o),I$(e,o);for(const o of s)A$(e,o);for(const o of s)P$(e,o);for(const o of s)O$(e,o);for(const o of s)R$(e,o);for(const o of s)B$(e,o);this._compiledDefinitions=M$(e)}_checkContextMatch(e,t){const i=e.last;let s=this._evaluateChildChecks(e,t);if(s=s!==void 0?s:t.allowIn.includes(i.name),!s)return!1;const o=this.getDefinition(i),r=e.trimLast();return o?r.length==0?!0:this._checkContextMatch(r,o):!1}_evaluateChildChecks(e,t){const i=this._customChildChecks.get(this._genericCheckSymbol)||[],s=this._customChildChecks.get(t.name)||[];for(const o of[...i,...s]){const r=o(e,t);if(r!==void 0)return r}}_evaluateAttributeChecks(e,t){const i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],s=this._customAttributeChecks.get(t)||[];for(const o of[...i,...s]){const r=o(e,t);if(r!==void 0)return r}}*_getValidRangesForRange(e,t){let i=e.start,s=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(L._createIn(o),t)),this.checkAttribute(o,t)||(i.isEqual(s)||(yield new L(i,s)),i=z._createAfter(o)),s=z._createAfter(o);i.isEqual(s)||(yield new L(i,s))}findOptimalInsertionRange(e,t){const i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new L(z._createAt(i,t)):L._createOn(i);const s=en(e.getSelectedBlocks());if(!s)return new L(e.focus);if(s.isEmpty)return new L(z._createAt(s,0));const o=z._createAfter(s);return e.focus.isTouching(o)?new L(o):new L(z._createBefore(s))}}class Oo{_items;constructor(e){if(e instanceof Oo)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(V$)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new Oo([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new Oo([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function E$(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return L$(n,t),is(n,t,"allowIn"),is(n,t,"allowChildren"),is(n,t,"disallowIn"),is(n,t,"disallowChildren"),is(n,t,"allowContentOf"),is(n,t,"allowWhere"),is(n,t,"allowAttributes"),is(n,t,"disallowAttributes"),is(n,t,"allowAttributesOf"),is(n,t,"inheritTypesFrom"),N$(n,t),t}function x$(n,e){for(const t of e.allowIn){const i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function T$(n,e){for(const t of e.allowChildren){const i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function S$(n,e){for(const t of e.disallowIn){const i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function I$(n,e){for(const t of e.disallowChildren){const i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function A$(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function P$(n,e){for(const t of e.allowContentOf){const i=n[t];i&&(i.disallowChildren.forEach(s=>{e.allowChildren.has(s)||(e.disallowChildren.add(s),n[s].disallowIn.add(e.name))}),i.allowChildren.forEach(s=>{e.disallowChildren.has(s)||(e.allowChildren.add(s),n[s].allowIn.add(e.name))}))}}function O$(n,e){for(const t of e.allowWhere){const i=n[t];i&&(i.disallowIn.forEach(s=>{e.allowIn.has(s)||(e.disallowIn.add(s),n[s].disallowChildren.add(e.name))}),i.allowIn.forEach(s=>{e.disallowIn.has(s)||(e.allowIn.add(s),n[s].allowChildren.add(e.name))}))}}function M$(n){const e={};for(const t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function R$(n,e){for(const t of e.allowAttributesOf){const i=n[t];if(!i)return;i.allowAttributes.forEach(s=>{e.disallowAttributes.has(s)||e.allowAttributes.add(s)})}}function B$(n,e){for(const t of e.inheritTypesFrom){const i=n[t];if(i){const s=Object.keys(i).filter(o=>o.startsWith("is"));for(const o of s)o in e||(e[o]=i[o])}}}function L$(n,e){for(const t of n){const i=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of i)e[s]=!!t[s]}}function is(n,e,t){for(const i of n){let s=i[t];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(o=>e[t].add(o))}}function N$(n,e){for(const t of n){const i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function V$(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*D$(n,e){let t=!1;for(;!t;){if(t=!0,n){const i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){const i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*F$(n){for(const e of n)yield*e.getMinimalFlatRanges()}function my(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}class $$ extends ot(){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(e){super(),this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=H$(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=nc.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(s){this._removeEmptyElements();for(const r of Array.from(this._modelCursor.parent.getChildren()))t.append(r,o);o.markers=U$(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof L))throw new P("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:z._createAt(t,0);const s=new L(i);for(const o of Array.from(e.getChildren())){const r=this._convertItem(o,i);r.modelRange instanceof L&&(s.end=r.modelRange.end,i=r.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){const i=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(i[i.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=s.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:s}=this.conversionApi;let o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return G5(t,e,i)?{position:K5(t,s)}:null;const r=this.conversionApi.writer.split(t,o),a=[];for(const c of r.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const u=a.pop(),d=c.item;this._registerSplitPair(u,d)}const l=r.range.end.parent;return this._cursorParents.set(e,l),{position:r.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function U$(n,e){const t=new Set,i=new Map,s=L._createIn(n).getItems();for(const o of s)o.is("element","$marker")&&t.add(o);for(const o of t){const r=o.getAttribute("data-name"),a=e.createPositionBefore(o);i.has(r)?i.get(r).end=a.clone():i.set(r,new L(a.clone())),e.remove(o)}return i}function H$(n,e){let t;for(const i of new Oo(n)){const s={};for(const r of i.getAttributeKeys())s[r]=i.getAttribute(r);const o=e.createElement(i.name,s);t&&e.insert(o,t),t=z._createAt(o,0)}return t}class j${getHtml(e){const i=ue.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}}class z${domParser;domConverter;htmlWriter;skipComments=!0;constructor(e){this.domParser=new DOMParser,this.domConverter=new I5(e,{renderingMode:"data"}),this.htmlWriter=new j$}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}class W$ extends ot(){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(e,t){super(),this.model=e,this.mapper=new B5,this.downcastDispatcher=new L5({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",D5(),{priority:"lowest"}),this.downcastDispatcher.on("insert",F5(),{priority:"lowest"}),this.upcastDispatcher=new $$({schema:e.schema}),this.viewDocument=new k5(t),this.stylesProcessor=t,this.htmlProcessor=new z$(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new C5(this.viewDocument),this.upcastDispatcher.on("text",n$(),{priority:"lowest"}),this.upcastDispatcher.on("element",dy(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",dy(),{priority:"lowest"}),tt().prototype.decorate.call(this,"init"),tt().prototype.decorate.call(this,"set"),tt().prototype.decorate.call(this,"get"),tt().prototype.decorate.call(this,"toView"),tt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},q5)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new P("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return s.isAttached()||Ue("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=L._createIn(e),r=new br(i);this.mapper.bindElements(e,r);const a=e.is("documentFragment")?e.markers:q$(e);return this.downcastDispatcher.convert(o,a,s,t),r}init(e){if(this.model.document.version)throw new P("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new P("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const s of Object.keys(t)){const o=this.model.document.getRoot(s);i.insert(this.parse(t[s],o),o,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new P("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(i)){const r=this.model.document.getRoot(o);s.remove(s.createRangeIn(r)),s.insert(this.parse(i[o],r),r,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function q$(n){const e=[],t=n.root.document;if(!t)return new Map;const i=L._createIn(n);for(const s of t.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(i.start)||o.end.isEqual(i.end);if(r&&a)e.push([s.name,o]);else{const l=i.getIntersection(o);l&&e.push([s.name,l])}}return e.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(e)}class G${_helpers=new Map;_downcast;_upcast;constructor(e,t){this._downcast=at(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=at(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new P("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new P("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of Lp(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of Lp(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of Lp(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new P("conversion-group-exists",this);const s=i?new CF(t):new t$(t);this._helpers.set(e,s)}}function*Lp(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*gy(t,i,s)}else yield*gy(n.model,n.view,n.upcastAlso)}function*gy(n,e,t){if(yield{model:n,view:e},t)for(const i of at(t))yield{model:n,view:i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bi{baseVersion;isDocumentOperation;batch;constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function rb(n,e){const t=eS(e),i=t.reduce((r,a)=>r+a.offsetSize,0),s=n.parent;Pc(n);const o=n.index;return s._insertChild(o,t),Ac(s,o+t.length),Ac(s,o),new L(n,n.getShiftedBy(i))}function Q5(n){if(!n.isFlat)throw new P("operation-utils-remove-range-not-flat",this);const e=n.start.parent;Pc(n.start),Pc(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return Ac(e,n.start.index),t}function Ic(n,e){if(!n.isFlat)throw new P("operation-utils-move-range-not-flat",this);const t=Q5(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),rb(e,t)}function K$(n,e,t){Pc(n.start),Pc(n.end);for(const i of n.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;t!==null?s._setAttribute(e,t):s._removeAttribute(e),Ac(s.parent,s.index)}Ac(n.end.parent,n.end.index)}function eS(n){const e=[];function t(i){if(typeof i=="string")e.push(new wt(i));else if(i instanceof Hi)e.push(new wt(i.data,i.getAttributes()));else if(i instanceof Fr)e.push(i);else if(gi(i))for(const s of i)t(s)}t(n);for(let i=1;i<e.length;i++){const s=e[i],o=e[i-1];s instanceof wt&&o instanceof wt&&tS(s,o)&&(e.splice(i-1,2,new wt(o.data+s.data,o.getAttributes())),i--)}return e}function Ac(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&tS(t,i)){const s=new wt(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function Pc(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const o=new wt(e.data.substr(0,i),e.getAttributes()),r=new wt(e.data.substr(i),e.getAttributes());t._insertChild(s,[o,r])}}function tS(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;i.next()}return i.next().done}class Ke extends bi{sourcePosition;howMany;targetPosition;constructor(e,t,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[L._createFromPositionAndShift(this.sourcePosition,this.howMany),L._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ke(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ke(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new P("move-operation-nodes-do-not-exist",this);if(e===t&&i<s&&s<i+this.howMany)throw new P("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&kn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new P("move-operation-node-into-itself",this)}}_execute(){Ic(L._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=z.fromJSON(e.sourcePosition,t),s=z.fromJSON(e.targetPosition,t);return new this(i,e.howMany,s,e.baseVersion)}}class an extends bi{position;nodes;shouldReceiveAttributes;constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ec(eS(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new ec([...this.nodes].map(i=>i._clone(!0))),t=new an(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new z(e,[0]);return new Ke(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new P("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ec([...e].map(t=>t._clone(!0))),rb(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const o of e.nodes)o.name?i.push(bt.fromJSON(o)):i.push(wt.fromJSON(o));const s=new an(z.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}class st extends bi{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(e,t,i,s,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new z(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new L(this.splitPosition,e)}get affectedSelectable(){const e=[L._createFromPositionAndShift(this.splitPosition,0),L._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(L._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new st(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new z(e,[0]);return new Lt(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new P("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new P("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new P("split-operation-graveyard-position-invalid",this)}else throw new P("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Ic(L._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();rb(this.insertionPosition,i)}const t=new L(z._createAt(e,this.splitPosition.offset),z._createAt(e,e.maxOffset));Ic(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new z(e.root,t,"toPrevious")}static fromJSON(e,t){const i=z.fromJSON(e.splitPosition,t),s=z.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?z.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,s,o,e.baseVersion)}}class Lt extends bi{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(e,t,i,s,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new z(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new L(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[L._createOn(e),L._createFromPositionAndShift(this.targetPosition,0),L._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Lt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new z(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new st(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new P("merge-operation-how-many-invalid",this)}else throw new P("merge-operation-target-position-invalid",this);else throw new P("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=L._createIn(e);Ic(t,this.targetPosition),Ic(L._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=z.fromJSON(e.sourcePosition,t),s=z.fromJSON(e.targetPosition,t),o=z.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,s,o,e.baseVersion)}}class Un extends bi{name;oldRange;newRange;affectsData;_markers;constructor(e,t,i,s,o,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Un(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Un(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Un(e.name,e.oldRange?L.fromJSON(e.oldRange,t):null,e.newRange?L.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class Ut extends bi{range;key;oldValue;newValue;constructor(e,t,i,s,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Ut(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ut(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new P("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!E_(e.getAttribute(this.key),this.oldValue))throw new P("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new P("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){E_(this.oldValue,this.newValue)||K$(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Ut(L.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Yt extends bi{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Yt(this.baseVersion)}getReversed(){return new Yt(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class ei extends bi{position;oldName;newName;constructor(e,t,i,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new ei(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new ei(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof bt){if(e.name!==this.oldName)throw new P("rename-operation-wrong-name",this)}else throw new P("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new ei(z.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class Hs extends bi{root;key;oldValue;newValue;constructor(e,t,i,s,o){super(o),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Hs(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Hs(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new P("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new P("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new P("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new P("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Hs(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class fs extends bi{rootName;elementName;isAdd;_document;constructor(e,t,i,s,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=s,!this._document.getRoot(this.rootName)){const r=this._document.createRoot(this.elementName,this.rootName);r._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new fs(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new fs(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new fs(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}const Mi={};Mi[Ut.className]=Ut;Mi[an.className]=an;Mi[Un.className]=Un;Mi[Ke.className]=Ke;Mi[Yt.className]=Yt;Mi[bi.className]=bi;Mi[ei.className]=ei;Mi[Hs.className]=Hs;Mi[fs.className]=fs;Mi[st.className]=st;Mi[Lt.className]=Lt;class X${static fromJSON(e,t){return Mi[e.__className].fromJSON(e,t)}}const wg=new Map;function We(n,e,t){let i=wg.get(n);i||(i=new Map,wg.set(n,i)),i.set(e,t)}function Z$(n,e){const t=wg.get(n);return t&&t.has(e)?t.get(e):J$}function J$(n){return[n]}function by(n,e,t={}){const i=Z$(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(s){throw s}}function Y$(n,e,t){n=n.slice(),e=e.slice();const i=new Q$(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const s=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:s};const o=new WeakMap;for(const l of n)o.set(l,0);const r={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=o.get(l);if(c==e.length){a++;continue}const u=e[c],d=by(l,u,i.getContext(l,u,!0)),h=by(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(d,l),i.setOriginalOperations(h,u);for(const f of d)o.set(f,c+h.length);n.splice(a,1,...d),e.splice(c,1,...h)}return wy(n),wy(e),vy(n,r.nextBaseVersionB),vy(e,r.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:s}}class Q${originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){if(e instanceof Ke)t instanceof Lt?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof Ke&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof st){if(t instanceof Lt)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof Ke)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=L._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:o})}}}else if(e instanceof Lt)t instanceof Lt?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof st?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof Ke&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Un){const i=e.newRange;if(!i)return;if(t instanceof Lt){const s=i.start.isEqual(t.targetPosition),o=i.start.isEqual(t.deletionPosition),r=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(s||o||r||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),o=this.originalOperations.get(t);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,i)}}function vy(n,e){for(const t of n)t.baseVersion=e++}function wy(n){const e=new Map;for(let t=0;t<n.length;t++){const i=n[t];i instanceof Un&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(const{op:t,ranges:i}of e.values())i.length?t.newRange=L._createFromRanges(i):t.newRange=null}We(Ut,Ut,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(o=>new Ut(o,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&i.push(new Ut(s,e.key,e.newValue,n.newValue,0)),i.length==0?[new Yt(0)]:i}else return[n]});We(Ut,an,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new Ut(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const s=nS(e,n.key,n.oldValue);s&&i.unshift(s)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function nS(n,e,t){const s=n.nodes.getNode(0).getAttribute(e);if(s==t)return null;const o=new L(n.position,n.position.getShiftedBy(n.howMany));return new Ut(o,e,s,t,0)}We(Ut,Lt,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(L._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(s=>new Ut(s,n.key,n.oldValue,n.newValue,n.baseVersion))});We(Ut,Ke,(n,e)=>eU(n.range,e).map(i=>new Ut(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function eU(n,e){const t=L._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,s=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(s=n.getDifference(t),i=n.getIntersection(t)):s=[n];const o=[];for(let r of s){r=r._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=r.start.hasSameParentAs(a),c=r._getTransformedByInsertion(a,e.howMany,l);o.push(...c)}return i&&o.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}We(Ut,st,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new L(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});We(an,Ut,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=nS(n,e.key,e.newValue);i&&t.push(i)}return t});We(an,an,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));We(an,Ke,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));We(an,st,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));We(an,Lt,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));We(Un,an,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));We(Un,Un,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new Yt(0)];return[n]});We(Un,Lt,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));We(Un,Ke,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=L._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let s=1;s<i.length;s++){const o=n.clone();o.oldRange=null,o.newRange=i[s],o.baseVersion=-1,t.push(o)}}return t});We(Un,st,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=z._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=z._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=z._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=z._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});We(Lt,an,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));We(Lt,Lt,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new z(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new Yt(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new Ke(l,n.howMany,c,0)]}else return[new Yt(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});We(Lt,Ke,(n,e,t)=>{const i=L._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new Yt(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});We(Lt,st,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});We(Ke,an,(n,e)=>{const i=L._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});We(Ke,Ke,(n,e,t)=>{const i=L._createFromPositionAndShift(n.sourcePosition,n.howMany),s=L._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,r=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?r=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(r=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&r?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),_y(n,e)&&_y(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),va([i],a);if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),va([i],a);const u=kn(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),va([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const d=[],h=i.getDifference(s);for(const p of h){p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=kn(p.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",y=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);d.push(...y)}const f=i.getIntersection(s);return f!==null&&o&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(f):d.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),d.length===0?[new Yt(n.baseVersion)]:va(d,a)});We(Ke,st,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));const s=L._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new L(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const l=[new L(s.start,e.splitPosition),a];return va(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const r=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&r.push(L._createFromPositionAndShift(e.insertionPosition,1))}return va(r,i)});We(Ke,Lt,(n,e,t)=>{const i=L._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const r=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);const c=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(r.push(new Ke(n.sourcePosition,n.howMany-1,c,0)),a=a._getTransformedByMove(n.sourcePosition,c,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1));const u=e.deletionPosition._getCombined(n.sourcePosition,c),d=new Ke(a,1,u,0),h=d.getMovedRangeStart().path.slice();h.push(0);const f=new z(d.targetPosition.root,h);l=l._getTransformedByMove(a,u,1);const p=new Ke(l,e.howMany,f,0);return r.push(d),r.push(p),r}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new Yt(0)]}const o=L._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});We(ei,an,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));We(ei,Lt,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));We(ei,Ke,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));We(ei,ei,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new Yt(0)];return[n]});We(ei,st,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if(kn(t,i)=="same"&&!e.graveyardPosition){const s=new ei(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});We(Hs,Hs,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new Yt(0)];n.oldValue=e.newValue}return[n]});We(fs,fs,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new Yt(0)]:[n]);We(st,an,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));We(st,Lt,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const s=new z(e.graveyardPosition.root,i),o=st.getInsertionPosition(new z(e.graveyardPosition.root,i)),r=new st(s,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=st.getInsertionPosition(n.splitPosition),n.graveyardPosition=r.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[r,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=st.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});We(st,Ke,(n,e,t)=>{const i=L._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const o=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){const r=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new z(a.root,l);return[new Ke(r,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=st.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:r}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(r),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=st.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=st.getInsertionPosition(n.splitPosition),[n]});We(st,st,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new Yt(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new Yt(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=[];return e.howMany&&l.push(new Ke(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new Ke(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new Yt(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const s=new z(e.insertionPosition.root,i),o=new Ke(n.insertionPosition,1,s,0);return[n,o]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=st.getInsertionPosition(n.splitPosition),[n]});function _y(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function va(n,e){const t=[];for(let i=0;i<n.length;i++){const s=n[i],o=new Ke(s.start,s.end.offset-s.start.offset,e,0);t.push(o);for(let r=i+1;r<n.length;r++)n[r]=n[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}class Wt extends ot(z){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new P("model-liveposition-root-not-rootelement",e);tU.call(this)}detach(){this.stopListening()}toPosition(){return new z(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Wt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function tU(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&nU.call(this,t)},{priority:"low"})}function nU(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}class Xr{operations;isUndoable;isLocal;isUndo;isTyping;constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Ue("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:s=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=s,this.isTyping=o}get type(){return Ue("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}class sh{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(e){this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const o=L._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const r of o.getItems({shallow:!0}))this._setElementState(r,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=L._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);const s=L._createFromPositionAndShift(t.splitPosition,t.howMany);for(const o of s.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1),this._setElementState(i,"move");const o=t.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,t.targetPosition.offset,i.maxOffset);const r=L._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of r.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=i:(s={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,s=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(i||s||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),o=this._elementChildrenSnapshots.get(i),r=ky(i.getChildren()),a=iU(o.length,s);let l=0,c=0;for(const u of a)if(u==="i"){const d=this._getDiffActionForNode(r[l].node,"insert"),h=this._elementsSnapshots.get(r[l].node),f=this._getInsertDiff(i,l,d,r[l],h);t.push(f),l++}else if(u==="r"){const d=this._getDiffActionForNode(o[c].node,"remove"),h=this._getRemoveDiff(i,l,d,o[c]);t.push(h),c++}else if(u==="a"){const d=o[c].attributes,h=r[l].attributes;let f;if(r[l].name=="$text")f=new L(z._createAt(i,l),z._createAt(i,l+1));else{const g=i.offsetToIndex(l);f=new L(z._createAt(i,l),z._createAt(i.getChild(g),0))}const p=this._getAttributesDiff(f,d,h);t.push(...p),l++,c++}else l++,c++}t.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<t.length;i++){const o=t[s],r=t[i],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),l=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,c=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(sU),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=L._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const i=t.getData();this.bufferMarkerChange(t.name,{...i,range:null},i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,s){const o=this._changedRoots.get(e)||{name:e},r=o.attributes||{};if(r[t]){const a=r[t];s===a.oldValue?delete r[t]:a.newValue=s}else r[t]={oldValue:i,newValue:s};Object.entries(r).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=r,this._changedRoots.set(e,o))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_setElementState(e,t){if(!e.is("element"))return;const i=sh._statesPriority.indexOf(this._elementState.get(e));sh._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=ky(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,o=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){const r=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:r-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=e.howMany;else if(s<=o)if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r,e.nodesToHandle-=r}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){const r=o-e.offset;i.howMany-=r,e.nodesToHandle-=r}}if(i.type=="remove"&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r}else if(e.offset<o)if(s<=o){const r=i.howMany;i.howMany=e.offset-i.offset;const a=r-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=o-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&s>i.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,t),t.push(r)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(s>o?(e.nodesToHandle=s-o,e.offset=o):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&s>i.offset){const r={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(r,t),t.push(r),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&s<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=o&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,s,o){const r={type:"insert",position:z._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&o&&(r.before={name:o.name,attributes:new Map(o.attributes)}),r}_getRemoveDiff(e,t,i,s){return{type:"remove",action:i,position:z._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[o,r]of t){const a=i.has(o)?i.get(o):null;a!==r&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(o)}for(const[o,r]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i){for(const o of i)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new L(z._createAt(e,t),z._createAt(e,t+i));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function yy(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function ky(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(yy(t));else e.push(yy(t));return e}function iU(n,e){const t=[];let i=0,s=0;for(const o of e){if(o.offset>i){for(let r=0;r<o.offset-i;r++)t.push("e");s+=o.offset-i}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)t.push("i");i=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)t.push("r");i=o.offset,s+=o.howMany}else{if(o.howMany>1500)for(let r=0;r<o.howMany;r++)t.push("a");else t.push(..."a".repeat(o.howMany).split(""));i=o.offset+o.howMany,s+=o.howMany}}if(s<n)for(let o=0;o<n-s-i;o++)t.push("e");return t}function sU(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class oU{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new P("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let s=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),s>a&&s<l&&(s=a-1);if(s<i.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class oh extends bt{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}oh.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const Cy="$graveyard";class rU extends ot(){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(e){super(),this.model=e,this.history=new oU,this.selection=new Ki(this),this.roots=new zn({idProperty:"rootName"}),this.differ=new sh(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Cy),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,s,o,r)=>{const a={...i.getData(),range:o};this.differ.bufferMarkerChange(i.name,r,a),s===null&&i.on("change",(l,c)=>{const u=i.getData();this.differ.bufferMarkerChange(i.name,{...u,range:c},u)})}),this.registerPostFixer(t=>{let i=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(t.remove(t.createRangeIn(s)),i=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(t.removeMarker(s),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(Cy)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new P("model-document-createroot-name-exists",this,{name:t});const i=new oh(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=FT(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,s=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&Ey(e.start)&&Ey(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function Ey(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!J1(t,i)&&!Y1(t,i)}return!0}class aU extends ot(){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof ua?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,s=!1){const o=e instanceof ua?e.name:e;if(o.includes(","))throw new P("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const c=r.getData(),u=r.getRange();let d=!1;return u.isEqual(t)||(r._attachLiveRange(Vn.fromRange(t)),d=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,d=!0),typeof s=="boolean"&&s!=r.affectsData&&(r._affectsData=s,d=!0),d&&this.fire(`update:${o}`,r,u,t,c),r}const a=Vn.fromRange(t),l=new ua(o,a,i,s);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,{...l.getData(),range:null}),l}_remove(e){const t=e instanceof ua?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){const t=e instanceof ua?e.name:e,i=this._markers.get(t);if(!i)throw new P("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire(`update:${t}`,i,s,s,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class ua extends ot(Go){name;_managedUsingOperations;_affectsData;_liveRange;constructor(e,t,i,s){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new P("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new P("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new P("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new P("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new P("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}ua.prototype.is=function(n){return n==="marker"||n==="model:marker"};class lU extends bi{sourcePosition;howMany;constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new P("detach-operation-on-document-node",this)}_execute(){Q5(L._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}let nr=class iS extends Go{markers=new Map;_children=new ec;constructor(e){super(),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(bt.fromJSON(i)):t.push(wt.fromJSON(i));return new iS(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=cU(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}};nr.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function cU(n){return typeof n=="string"?[new wt(n)]:(gi(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new wt(e):e instanceof Hi?new wt(e.data,e.getAttributes()):e))}class uU{model;batch;constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new wt(e,t)}createElement(e,t){return new bt(e,t)}createDocumentFragment(){return new nr}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof wt&&e.data=="")return;const s=z._createAt(t,i);if(e.parent)if(Sy(e.root,s.root)){this.move(L._createOn(e),s);return}else{if(e.root.document)throw new P("model-writer-insert-forbidden-move",this);this.remove(e)}const o=s.root.document?s.root.document.version:null,r=new an(s,e,o);if(e instanceof wt&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof nr)for(const[a,l]of e.markers){const c=z._createAt(l.root,0),d={range:new L(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,t,i,s){t instanceof nr||t instanceof bt||t instanceof z?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof nr||t instanceof bt||t instanceof z?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof nr||t instanceof bt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof nr||t instanceof bt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof L){const s=i.getMinimalFlatRanges();for(const o of s)xy(this,e,t,o)}else Ty(this,e,t,i)}setAttributes(e,t){for(const[i,s]of Ys(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof L){const i=t.getMinimalFlatRanges();for(const s of i)xy(this,e,null,s)}else Ty(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(e instanceof L))t(e);else for(const i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof L))throw new P("writer-move-invalid-range",this);if(!e.isFlat)throw new P("writer-move-range-not-flat",this);const s=z._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Sy(e.root,s.root))throw new P("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,r=new Ke(e.start,e.end.offset-e.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(e){this._assertWriterUsedCorrectly();const i=(e instanceof L?e:L._createOn(e)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),dU(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof bt))throw new P("writer-merge-no-element-before",this);if(!(i instanceof bt))throw new P("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(L._createIn(i),z._createAt(t,"end")),this.remove(i)}_merge(e){const t=z._createAt(e.nodeBefore,"end"),i=z._createAt(e.nodeAfter,0),s=e.root.document.graveyard,o=new z(s,[0]),r=e.root.document.version,a=new Lt(i,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof bt))throw new P("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new ei(z._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new P("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new P("writer-split-invalid-limit-element",this);let s,o;do{const r=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=st.getInsertionPosition(e),c=new st(e,a,l,null,r);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!o&&(s=i,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new L(z._createAt(s,"end"),z._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new P("writer-wrap-range-not-flat",this);const i=t instanceof bt?t:new bt(t);if(i.childCount>0)throw new P("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new P("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new L(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,z._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new P("writer-unwrap-element-no-parent",this);this.move(L._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new P("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new P("writer-addmarker-marker-exists",this);if(!s)throw new P("writer-addmarker-no-range",this);return i?(Cl(this,e,null,s,o),this.model.markers.get(e)):this.model.markers._set(e,s,i,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new P("writer-updatemarker-marker-not-exists",this);if(!t){Ue("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const o=typeof t.usingOperation=="boolean",r=typeof t.affectsData=="boolean",a=r?t.affectsData:s.affectsData;if(!o&&!t.range&&!r)throw new P("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=t.range?t.range:l;if(o&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?Cl(this,i,null,c,a):(Cl(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}s.managedUsingOperations?Cl(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new P("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}const s=i.getRange();Cl(this,t,s,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new P("writer-addroot-root-exists",this);const s=this.model.document,o=new fs(e,t,!0,s,s.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new P("writer-detachroot-no-root",this);for(const o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(const o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));const i=this.model.document,s=new fs(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,s]of Ys(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=Ki._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=Ki._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new P("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let o=!1;if(e==="move"){const r=t;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=t,a=r.nodeBefore,l=r.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,u=s.end.parent==l&&s.end.offset==0,d=s.end.nodeAfter==l,h=s.start.nodeAfter==l;o=c||u||d||h}o&&this.updateMarker(i.name,{range:s})}}}function xy(n,e,t,i){const s=n.model,o=s.document;let r=i.start,a,l,c;for(const d of i.getWalker({shallow:!0}))c=d.item.getAttribute(e),a&&l!=c&&(l!=t&&u(),r=a),a=d.nextPosition,l=c;a instanceof z&&a!=r&&l!=t&&u();function u(){const d=new L(r,a),h=d.root.document?o.version:null,f=new Ut(d,e,l,t,h);n.batch.addOperation(f),s.applyOperation(f)}}function Ty(n,e,t,i){const s=n.model,o=s.document,r=i.getAttribute(e);let a,l;if(r!=t){if(i.root===i){const u=i.document?o.version:null;l=new Hs(i,e,r,t,u)}else{a=new L(z._createBefore(i),n.createPositionAfter(i));const u=a.root.document?o.version:null;l=new Ut(a,e,r,t,u)}n.batch.addOperation(l),s.applyOperation(l)}}function Cl(n,e,t,i,s){const o=n.model,r=o.document,a=new Un(e,t,i,o.markers,!!s,r.version);n.batch.addOperation(a),o.applyOperation(a)}function dU(n,e,t,i){let s;if(n.root.document){const o=i.document,r=new z(o.graveyard,[0]);s=new Ke(n,e,r,o.version)}else s=new lU(n,e);t.addOperation(s),i.applyOperation(s)}function Sy(n,e){return n===e||n instanceof oh&&e instanceof oh}function hU(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&yU(s,e)){_U(o,e);return}const r={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(r,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=fU(i);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(mU(o,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),o)),aS(o,e,a),!t.doNotAutoparagraph&&vU(s,a)&&rS(o,a,e,r),a.detach(),l.detach()})}function fU(n){const e=n.root.document.model,t=n.start;let i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const s=pU(i);if(s&&i.isTouching(e.createPositionAt(s,0))){const o=e.createSelection(n);e.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=e.createRange(r,i);e.hasContent(a,{ignoreMarkers:!0})||(i=r)}}return[Wt.fromPosition(t,"toPrevious"),Wt.fromPosition(i,"toNext")]}function pU(n){const e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function mU(n,e,t){const i=n.model;if(!ab(n.model.schema,e,t))return;const[s,o]=bU(e,t);!s||!o||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(o,{ignoreMarkers:!0})?oS(n,e,t,s.parent):sS(n,e,t,s.parent))}function sS(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){const r=t.parent;t=n.createPositionBefore(r),n.remove(r)}ab(n.model.schema,e,t)&&sS(n,e,t,i)}}function oS(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const r=e.parent;e=n.createPositionBefore(r),n.remove(r)}t=n.createPositionBefore(o),gU(n,t),ab(n.model.schema,e,t)&&oS(n,e,t,i)}}function gU(n,e){const t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function ab(n,e,t){const i=e.parent,s=t.parent;return i==s||n.isLimit(i)||n.isLimit(s)?!1:wU(e,t,n)}function bU(n,e){const t=n.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]&&t[s]==i[s];)s++;return[t[s],i[s]]}function vU(n,e){const t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function wU(n,e,t){const i=new L(n,e);for(const s of i.getWalker())if(t.isLimit(s.item))return!1;return!0}function rS(n,e,t,i={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,i,n),n.insert(s,e),aS(n,t,n.createPositionAt(s,0))}function _U(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),rS(n,n.createPositionAt(t,0),e)}function yU(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function aS(n,e,t){e instanceof Ki?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kU(n,e){return n.change(t=>{const i=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return i;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let l;s.start.parent==s.end.parent?l=s:l=t.createRange(t.createPositionAt(a,s.start.path[r.length]),t.createPositionAt(a,s.end.path[r.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?t.appendText(u.data,u.getAttributes(),i):t.append(t.cloneElement(u,!0),i);if(l!=s){const u=s._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],d=t.createRange(t.createPositionAt(i,0),u.start),h=t.createRange(u.end,t.createPositionAt(i,"end"));Iy(h,t),Iy(d,t)}return i})}function Iy(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const o=e.createRangeOn(s);s=s.parent,e.remove(o)}})}function CU(n,e,t){return n.change(i=>{const s=t||n.document.selection;s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});const o=new EU(n,i,s.anchor),r=[];let a;if(e.is("documentFragment")){if(e.markers.size){const u=[];for(const[d,h]of e.markers){const{start:f,end:p}=h,g=f.isEqual(p);u.push({position:f,name:d,isCollapsed:g},{position:p,name:d,isCollapsed:g})}u.sort(({position:d},{position:h})=>d.isBefore(h)?1:-1);for(const{position:d,name:h,isCollapsed:f}of u){let p=null,g=null;const y=d.parent===e&&d.isAtStart,k=d.parent===e&&d.isAtEnd;!y&&!k?(p=i.createElement("$marker"),i.insert(p,d)):f&&(g=y?"start":"end"),r.push({name:h,element:p,collapsed:g})}}a=e.getChildren()}else a=[e];o.handleNodes(a);let l=o.getSelectionRange();if(e.is("documentFragment")&&r.length){const u=l?Vn.fromRange(l):null,d={};for(let h=r.length-1;h>=0;h--){const{name:f,element:p,collapsed:g}=r[h],y=!d[f];if(y&&(d[f]=[]),p){const k=i.createPositionAt(p,"before");d[f].push(k),i.remove(p)}else{const k=o.getAffectedRange();if(!k){g&&d[f].push(o.position);continue}g?d[f].push(k[g]):d[f].push(y?k.start:k.end)}}for(const[h,[f,p]]of Object.entries(d))f&&p&&f.root===p.root&&f.root.document&&!i.model.markers.has(h)&&i.addMarker(h,{usingOperation:!0,affectsData:!0,range:new L(f,p)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(s instanceof Ki?i.setSelection(l):s.setTo(l));const c=o.getAffectedRange()||n.createRange(s.anchor);return o.destroy(),c})}class EU{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new P("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?L._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new L(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Wt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new P("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Wt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Wt.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof bt)||!this._canMergeLeft(e))return;const t=Wt._createBefore(e);t.stickiness="toNext";const i=Wt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Wt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Wt._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof bt)||!this._canMergeRight(e))return;const t=Wt._createAfter(e);t.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(t))throw new P("insertcontent-invalid-insertion-position",this);this.position=z._createAt(t.nodeBefore,"end");const i=Wt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Wt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Wt._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof bt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof bt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function xU(n,e,t,i={}){if(!n.schema.isObject(e))throw new P("insertobject-element-not-an-object",n,{object:e});const s=t||n.document.selection;let o=s;i.findOptimalPosition&&n.schema.isBlock(e)&&(o=n.createSelection(n.schema.findOptimalInsertionRange(s,i.findOptimalPosition)));const r=en(s.getSelectedBlocks()),a={};return r&&Object.assign(a,n.schema.getAttributesWithProperty(r,"copyOnReplace",!0)),n.change(l=>{o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let c=e;const u=o.anchor.parent;!n.schema.checkChild(u,e)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const d=n.insertContent(c,o);return d.isCollapsed||i.setSelection&&TU(l,e,i.setSelection,a),d})}function TU(n,e,t,i){const s=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new P("insertobject-invalid-place-parameter-value",s);let o=e.nextSibling;if(s.schema.isInline(e)){n.setSelection(e,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(o=n.createElement("paragraph"),s.schema.setAllowedAttributes(o,i,n),s.insertContent(o,n.createPositionAfter(e))),o&&n.setSelection(o,0)}const SU=' ,.?!:;"-()';function IU(n,e,t={}){const i=n.schema,s=t.direction!="backward",o=t.unit?t.unit:"character",r=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Ds({boundaries:MU(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:i,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let u;for(;u=l.next();){if(u.done)return;const d=AU(c,u.value);if(d){e instanceof Ki?n.change(h=>{h.setSelectionFocus(d)}):e.setFocus(d);return}}}function AU(n,e){const{isForward:t,walker:i,unit:s,schema:o,treatEmojiAsSingleUnit:r}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?OU(i,t):PU(i,s,r);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return z._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l)){i.skip(()=>!0);return}if(o.checkChild(c,"$text"))return c}}function PU(n,e,t){const i=n.position.textNode;if(i){const s=i.data;let o=n.position.offset-i.startOffset;for(;J1(s,o)||e=="character"&&Y1(s,o)||t&&g5(s,o);)n.next(),o=n.position.offset-i.startOffset}return n.position}function OU(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const i=n.position.offset-t.startOffset;if(BU(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(RU(t.data,i,e))break;n.next()}}return n.position}function MU(n,e){const t=n.root,i=z._createAt(t,e?"end":0);return e?new L(n,i):new L(i,n)}function RU(n,e,t){const i=e+(t?0:-1);return SU.includes(n.charAt(i))}function BU(n,e,t){return e===(t?n.offsetSize:0)}let LU=class extends tt(){markers;document;schema;_pendingChanges;_currentWriter;constructor(){super(),this.markers=new aU,this.document=new rU(this),this.schema=new C$,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),p$(this),this.document.registerPostFixer(q5),this.on("insertContent",(e,[t,i])=>{e.return=CU(this,t,i)}),this.on("insertObject",(e,[t,i,s])=>{e.return=xU(this,t,i,s)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Xr,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Xr):e instanceof Xr||(e=new Xr(e)):e=new Xr,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...s){const o=Np(t,i);return this.fire("insertContent",[e,o,i,...s])}insertObject(e,t,i,s,...o){const r=Np(t,i);return this.fire("insertObject",[e,r,s,s,...o])}deleteContent(e,t){hU(this,e,t)}modifySelection(e,t){IU(this,e,t)}getSelectedContent(e){return kU(this,e)}hasContent(e,t={}){const i=e instanceof L?e:L._createIn(e);if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=t;if(!o){for(const r of this.markers.getMarkersIntersectingRange(i))if(r.affectsData)return!0}for(const r of i.getItems())if(this.schema.isContent(r))if(r.is("$textProxy"))if(s){if(r.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=Np(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new z(e,t,i)}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new L(e,t)}createRangeIn(e){return L._createIn(e)}createRangeOn(e){return L._createOn(e)}createSelection(...e){return new ui(...e)}createBatch(e){return new Xr(e)}createOperationFromJSON(e){return X$.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new uU(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Np(n,e){if(n)return n instanceof ui||n instanceof Ki?n:n instanceof Fr?e||e===0?new ui(n,e):n.is("rootElement")?new ui(n,"in"):new ui(n,"on"):new ui(n)}class NU extends Dr{domEventType="click";onDomEvent(e){this.fire(e.type,e)}}class ff extends Dr{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(e){this.fire(e.type,e)}}class pf{document;constructor(e){this.document=e}createDocumentFragment(e){return new br(this.document,e)}createElement(e,t,i){return new Gi(this.document,e,t,i)}createText(e){return new yt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Gi(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){ci(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return se._createAt(e,t)}createPositionAfter(e){return se._createAfter(e)}createPositionBefore(e){return se._createBefore(e)}createRange(e,t){return new Oe(e,t)}createRangeOn(e){return Oe._createOn(e)}createRangeIn(e){return Oe._createIn(e)}createSelection(...e){return new Us(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const VU=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,DU=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,FU=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,$U=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,UU=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,HU=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,jU=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function zU(n){return n.startsWith("#")?VU.test(n):n.startsWith("rgb")?DU.test(n)||FU.test(n):n.startsWith("hsl")?$U.test(n)||UU.test(n):jU.has(n.toLowerCase())}const WU=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function qU(n){return WU.test(n)}const GU=/^[+-]?[0-9]*([.][0-9]+)?%$/;function KU(n){return GU.test(n)}const XU=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function ZU(n){return XU.includes(n)}const JU=["center","top","bottom","left","right"];function YU(n){return JU.includes(n)}const QU=["fixed","scroll","local"];function eH(n){return QU.includes(n)}const tH=/^url\(/;function nH(n){return tH.test(n)}function iH(n){const e=n.trim().slice(0,1500).matchAll(HU);return Array.from(e).map(t=>t[0])}function sH(n){n.setNormalizer("background",oH()),n.setNormalizer("background-color",rH()),n.setReducer("background",aH()),n.setStyleRelation("background",["background-color"])}function oH(){return n=>{const e={},t=iH(n);for(const i of t)ZU(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):YU(i)?(e.position=e.position||[],e.position.push(i)):eH(i)?e.attachment=i:zU(i)?e.color=i:nH(i)&&(e.image=i);return{path:"background",value:e}}}function rH(){return n=>({path:"background.color",value:n})}function aH(){return n=>{const e=[];return e.push(["background-color",n.color]),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lS{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(e){if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){const i=this._listeners[e]||[];for(const s of i)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _g(n,e=new Set){const t=[n],i=new Set;let s=0;for(;t.length>s;){const o=t[s++];if(!(i.has(o)||!lH(o)||e.has(o)))if(i.add(o),Symbol.iterator in o)try{for(const r of o)t.push(r)}catch{}else for(const r in o)r!=="defaultValue"&&t.push(o[r])}return i}function lH(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function cS(n,e,t=new Set){if(n===e&&cH(n))return!0;const i=_g(n,t),s=_g(e,t);for(const o of i)if(s.has(o))return!0;return!1}function cH(n){return typeof n=="object"&&n!==null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uS extends lS{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(e,t={}){super(t),this._throttledSave=yc(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,s)=>e.create(i,s)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],i=this._config.rootsAttributes||{},s={};for(const[r,a]of Object.entries(this._data.roots))a.isLoaded?(e[r]="",s[r]=i[r]||{}):t.push(r);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(uH),this._initUsingData?this.create(e,o,o.context):Lo(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,s=i.has("CommentsRepository")&&i.get("CommentsRepository"),o=i.has("TrackChanges")&&i.get("TrackChanges"),r={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{r.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(r.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return s&&(r.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(r.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),r}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return cS(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return W1(e,(t,i)=>{if(Lo(t)||i==="context")return t})}}class uH{editor;_data;constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const i=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)i._appendChild(this._createNode(e,s));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:s,attributes:o}])=>{const r=JSON.parse(s),a=JSON.parse(o),l=t.model.document.getRoot(i);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of r){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([i,s])=>{const{document:o}=t.model,{rangeJSON:{start:r,end:a},...l}=s,c=o.getRoot(r.root),u=e.createPositionFromPath(c,r.path,r.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(u,d);e.addMarker(i,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(i.threadId)&&o.getCommentThread(i.threadId).remove(),o.addCommentThread({channelId:s,...i})}),t.forEach(i=>{const s=this.editor.plugins.get("TrackChangesEditing");if(s.hasSuggestion(i.id)){const o=s.getSuggestion(i.id);o.attributes=i.attributes}else s.addSuggestionData(i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ic=Symbol("MainQueueId");class dH extends lS{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new hH;_contextConfig;_item;constructor(e,t={}){super(t),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(ic,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=Ay(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return s=new uS(null,this._watchdogConfig),s.setCreator(i.creator),s._setExcludedProperties(this._contextProps),i.destructor&&s.setDestructor(i.destructor),this._watchdogs.set(i.id,s),s.on("error",(o,{error:r,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:r}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{const c=()=>{s.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};s.on("restart",c)}))}),s.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){const t=Ay(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{const s=this._getWatchdog(i);return this._watchdogs.delete(i),s.destroy()})))}destroy(){return this._actionQueues.enqueue(ic,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(ic,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=_g(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return cS(this._context,e.context)}}class hH{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const i=e===ic;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const o=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(ic),this._queues.get(e)])).then(t),r=o.catch(()=>{});return this._queues.set(e,r),o.finally(()=>{this._activeActions--,this._queues.get(e)===r&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function Ay(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H extends tt(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Py,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Py),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function Py(n){n.return=!1,n.stop()}class Ze extends tt(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const i=e.model.document.selection,o=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",Oy,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",Oy),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function Oy(n){n.return=!1,n.stop()}class dS extends ot(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of i)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new P("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const s=this,o=this._context;f(e),g(e);const r=e.filter(E=>!d(E,t)),a=[...p(r)];C(a,i);const l=b(a);return w(l,"init").then(()=>w(l,"afterInit")).then(()=>l);function c(E){return typeof E=="function"}function u(E){return c(E)&&!!E.isContextPlugin}function d(E,I){return I.some(x=>x===E||h(E)===x||h(x)===E)}function h(E){return c(E)?E.pluginName||E.name:E}function f(E,I=new Set){E.forEach(x=>{c(x)&&(I.has(x)||(I.add(x),x.pluginName&&!s._availablePlugins.has(x.pluginName)&&s._availablePlugins.set(x.pluginName,x),x.requires&&f(x.requires,I)))})}function p(E,I=new Set){return E.map(x=>c(x)?x:s._availablePlugins.get(x)).reduce((x,_)=>I.has(_)?x:(I.add(_),_.requires&&(g(_.requires,_),p(_.requires,I).forEach(S=>x.add(S))),x.add(_)),new Set)}function g(E,I=null){E.map(x=>c(x)?x:s._availablePlugins.get(x)||x).forEach(x=>{y(x,I),k(x,I),v(x,I)})}function y(E,I){if(!c(E))throw I?new P("plugincollection-soft-required",o,{missingPlugin:E,requiredBy:h(I)}):new P("plugincollection-plugin-not-found",o,{plugin:E})}function k(E,I){if(u(I)&&!u(E))throw new P("plugincollection-context-required",o,{plugin:h(E),requiredBy:h(I)})}function v(E,I){if(I&&d(E,t))throw new P("plugincollection-required",o,{plugin:h(E),requiredBy:h(I)})}function b(E){return E.map(I=>{let x=s._contextPlugins.get(I);return x=x||new I(o),s._add(I,x),x})}function w(E,I){return E.reduce((x,_)=>!_[I]||s._contextPlugins.has(_)?x:x.then(_[I].bind(_)),Promise.resolve())}function C(E,I){for(const x of I){if(typeof x!="function")throw new P("plugincollection-replace-plugin-invalid-type",null,{pluginItem:x});const _=x.pluginName;if(!_)throw new P("plugincollection-replace-plugin-missing-name",null,{pluginItem:x});if(x.requires&&x.requires.length)throw new P("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:_});const S=s._availablePlugins.get(_);if(!S)throw new P("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:_});const R=E.indexOf(S);if(R===-1){if(s._contextPlugins.has(S))return;throw new P("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:_})}if(S.requires&&S.requires.length)throw new P("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:_});E.splice(R,1,x),s._availablePlugins.set(_,x)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new P("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}class My{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(e){const{translations:t,...i}=e||{};this.config=new n5(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new dS(this,s);const o=this.config.get("language")||{};this.locale=new YV({uiLanguage:typeof o=="string"?o:o.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new zn}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new P("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new P("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new P("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}class hS extends tt(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class fH{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new P("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class pH extends gn{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const s=t;t=(o,r)=>{this.editor.execute(s),r()}}super.set(e,t,i)}}const Vp="contentEditing",Ry="common";class mH{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:Vp,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:Ry}),s&&s.forEach(o=>{this.addKeystrokeInfoGroup({categoryId:e,...o})})}addKeystrokeInfoGroup({categoryId:e=Vp,id:t,label:i,keystrokes:s}){const o=this.keystrokeInfos.get(e);if(!o)throw new P("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=Vp,groupId:t=Ry,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new P("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new P("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});s.groups.get(t).keystrokes.push(...i)}}class gH extends tt(){accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(e={}){if(super(),"sanitizeHtml"in e)throw new P("editor-config-sanitizehtml-not-supported");const t=this.constructor,{translations:i,...s}=t.defaultConfig||{},{translations:o=i,...r}=e,a=e.language||s.language;this._context=e.context||new My({language:a,translations:o}),this._context._addEditor(this,!e.context);const l=Array.from(t.builtinPlugins||[]);this.config=new n5(r,s),this.config.define("plugins",l),this.config.define(this._context._getEditorConfig()),this.plugins=new dS(this,l,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new fH,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new LU,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const c=new yD;this.data=new W$(this.model,c),this.editing=new _$(this.model,c),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new G$([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new pH(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new mH(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new P("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new P("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new P("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){/* istanbul ignore next -- @preserve */P.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}static Context=My;static EditorWatchdog=uS;static ContextWatchdog=dH}function bH(n){if(!Cr(n.updateSourceElement))throw new P("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(vH(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();Cr(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function vH(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function yg(n){class e extends n{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new P("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){B_(this.sourceElement,"");return}const r=typeof i=="string"?i:this.data.get();B_(this.sourceElement,r)}}return e}yg.updateSourceElement=yg(Object).prototype.updateSourceElement;class By extends hS{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new zn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new P("pendingactions-add-invalid-message",this);const t=new(tt());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var wH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',_H='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',yH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',kH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',CH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',EH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',xH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',TH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',SH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',IH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',AH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',PH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',OH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',MH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',RH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',BH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',LH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',NH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',VH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',DH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',FH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',$H='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',UH='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',HH='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',jH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',zH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',WH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',qH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',GH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',KH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',XH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',ZH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',JH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',YH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',QH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',ej='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',tj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',nj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',ij='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',sj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',oj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',rj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',aj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>';const he={bold:JH,cancel:wH,caption:_H,check:yH,colorPalette:kH,eraser:CH,image:SH,imageUpload:IH,imageUrl:AH,textAlternative:EH,previousArrow:xH,nextArrow:TH,importExport:tj,paragraph:YH,plus:QH,text:ej,alignLeft:PH,alignCenter:OH,alignRight:MH,alignJustify:RH,objectLeft:FH,objectCenter:LH,objectRight:$H,objectFullWidth:VH,objectInline:DH,objectBlockLeft:BH,objectBlockRight:NH,objectSizeCustom:HH,objectSizeFull:UH,objectSizeLarge:jH,objectSizeSmall:zH,objectSizeMedium:WH,pencil:qH,pilcrow:GH,quote:KH,threeVerticalDots:XH,dragIndicator:ZH,redo:nj,undo:ij,bulletedList:sj,numberedList:oj,codeBlock:rj,horizontalLine:aj};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lj extends tt(){total;_reader;_data;constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((i,s)=>{t.onload=()=>{const o=t.result;this._data=o,i(o)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}class vr extends H{loaders=new zn;_loadersMap=new Map;_pendingAction=null;static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[By]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ue("filerepository-no-upload-adapter"),null;const t=new Ly(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(const s of this.loaders)i+=s.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(const s of this.loaders)s.uploadTotal&&(i+=s.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){const t=e instanceof Ly?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,s)=>{i===t&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(By);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=s=>`${t("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}class Ly extends tt(){id;_filePromiseWrapper;_adapter;_reader;constructor(e,t){super(),this.id=Ai(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new lj,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,s)=>s?i/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new P("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new P("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((i,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,i(o)}).catch(o=>{t.isFulfilled=!0,s(o)})}),t}}class fS extends H{static get requires(){return[vr]}static get pluginName(){return"SimpleUploadAdapter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.config.get("simpleUpload");if(e){if(!e.uploadUrl){Ue("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(vr).createUploadAdapter=t=>new cj(t,e)}}}class cj{loader;options;xhr;constructor(e,t){this.loader=e,this.options=t}upload(){return this.loader.file.then(e=>new Promise((t,i)=>{this._initRequest(),this._initListeners(t,i,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.options.uploadUrl,!0),e.responseType="json"}_initListeners(e,t,i){const s=this.xhr,o=this.loader,r=`Couldn't upload file: ${i.name}.`;s.addEventListener("error",()=>t(r)),s.addEventListener("abort",()=>t()),s.addEventListener("load",()=>{const a=s.response;if(!a||a.error)return t(a&&a.error&&a.error.message?a.error.message:r);const l=a.url?{default:a.url}:a.urls;e({...a,urls:l})});/* istanbul ignore else -- @preserve */s.upload&&s.upload.addEventListener("progress",a=>{a.lengthComputable&&(o.uploadTotal=a.total,o.uploaded=a.loaded)})}_sendRequest(e){const t=this.options.headers||{},i=this.options.withCredentials||!1;for(const o of Object.keys(t))this.xhr.setRequestHeader(o,t[o]);this.xhr.withCredentials=i;const s=new FormData;s.append("upload",e),this.xhr.send(s)}}var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function lb(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var s=!1;try{s=this instanceof i}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var Dp,Ny;function mS(){return Ny||(Ny=1,Dp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Dp}var uj=mS();const Vy=pS(uj);var Dy={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Fy(n){var e,t=[],i=1,s;if(typeof n=="string")if(Vy[n])t=Vy[n].slice(),s="rgb";else if(n==="transparent")i=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var o=n.slice(1),r=o.length,a=r<=4;i=1,a?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],r===4&&(i=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],r===8&&(i=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var l=e[1],c=l==="rgb",o=l.replace(/a$/,"");s=o;var r=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,f){if(/%$/.test(h))return f===r?parseFloat(h)/100:o==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(o[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(Dy[h]!==void 0)return Dy[h]}return parseFloat(h)}),l===o&&t.push(1),i=c||t[r]===void 0?1:t[r],t=t.slice(0,r)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),s=n.match(/([a-z])/ig).join("").toLowerCase());else isNaN(n)?Array.isArray(n)||n.length?(t=[n[0],n[1],n[2]],s="rgb",i=n.length===4?n[3]:1):n instanceof Object&&(n.r!=null||n.red!=null||n.R!=null?(s="rgb",t=[n.r||n.red||n.R||0,n.g||n.green||n.G||0,n.b||n.blue||n.B||0]):(s="hsl",t=[n.h||n.hue||n.H||0,n.s||n.saturation||n.S||0,n.l||n.lightness||n.L||n.b||n.brightness]),i=n.a||n.alpha||n.opacity||1,n.opacity!=null&&(i/=100)):(s="rgb",t=[n>>>16,(n&65280)>>>8,n&255]);return{space:s,values:t,alpha:i}}var Fp,$y;function gS(){if($y)return Fp;$y=1;const n=mS(),e={};for(const s of Object.keys(n))e[n[s]]=s;const t={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Fp=t;for(const s of Object.keys(t)){if(!("channels"in t[s]))throw new Error("missing channels property: "+s);if(!("labels"in t[s]))throw new Error("missing channel labels property: "+s);if(t[s].labels.length!==t[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:o,labels:r}=t[s];delete t[s].channels,delete t[s].labels,Object.defineProperty(t[s],"channels",{value:o}),Object.defineProperty(t[s],"labels",{value:r})}t.rgb.hsl=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(o,r,a),c=Math.max(o,r,a),u=c-l;let d,h;c===l?d=0:o===c?d=(r-a)/u:r===c?d=2+(a-o)/u:a===c&&(d=4+(o-r)/u),d=Math.min(d*60,360),d<0&&(d+=360);const f=(l+c)/2;return c===l?h=0:f<=.5?h=u/(c+l):h=u/(2-c-l),[d,h*100,f*100]},t.rgb.hsv=function(s){let o,r,a,l,c;const u=s[0]/255,d=s[1]/255,h=s[2]/255,f=Math.max(u,d,h),p=f-Math.min(u,d,h),g=function(y){return(f-y)/6/p+1/2};return p===0?(l=0,c=0):(c=p/f,o=g(u),r=g(d),a=g(h),u===f?l=a-r:d===f?l=1/3+o-a:h===f&&(l=2/3+r-o),l<0?l+=1:l>1&&(l-=1)),[l*360,c*100,f*100]},t.rgb.hwb=function(s){const o=s[0],r=s[1];let a=s[2];const l=t.rgb.hsl(s)[0],c=1/255*Math.min(o,Math.min(r,a));return a=1-1/255*Math.max(o,Math.max(r,a)),[l,c*100,a*100]},t.rgb.cmyk=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.min(1-o,1-r,1-a),c=(1-o-l)/(1-l)||0,u=(1-r-l)/(1-l)||0,d=(1-a-l)/(1-l)||0;return[c*100,u*100,d*100,l*100]};function i(s,o){return(s[0]-o[0])**2+(s[1]-o[1])**2+(s[2]-o[2])**2}return t.rgb.keyword=function(s){const o=e[s];if(o)return o;let r=1/0,a;for(const l of Object.keys(n)){const c=n[l],u=i(s,c);u<r&&(r=u,a=l)}return a},t.keyword.rgb=function(s){return n[s]},t.rgb.xyz=function(s){let o=s[0]/255,r=s[1]/255,a=s[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const l=o*.4124+r*.3576+a*.1805,c=o*.2126+r*.7152+a*.0722,u=o*.0193+r*.1192+a*.9505;return[l*100,c*100,u*100]},t.rgb.lab=function(s){const o=t.rgb.xyz(s);let r=o[0],a=o[1],l=o[2];r/=95.047,a/=100,l/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const c=116*a-16,u=500*(r-a),d=200*(a-l);return[c,u,d]},t.hsl.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;let l,c,u;if(r===0)return u=a*255,[u,u,u];a<.5?l=a*(1+r):l=a+r-a*r;const d=2*a-l,h=[0,0,0];for(let f=0;f<3;f++)c=o+1/3*-(f-1),c<0&&c++,c>1&&c--,6*c<1?u=d+(l-d)*6*c:2*c<1?u=l:3*c<2?u=d+(l-d)*(2/3-c)*6:u=d,h[f]=u*255;return h},t.hsl.hsv=function(s){const o=s[0];let r=s[1]/100,a=s[2]/100,l=r;const c=Math.max(a,.01);a*=2,r*=a<=1?a:2-a,l*=c<=1?c:2-c;const u=(a+r)/2,d=a===0?2*l/(c+l):2*r/(a+r);return[o,d*100,u*100]},t.hsv.rgb=function(s){const o=s[0]/60,r=s[1]/100;let a=s[2]/100;const l=Math.floor(o)%6,c=o-Math.floor(o),u=255*a*(1-r),d=255*a*(1-r*c),h=255*a*(1-r*(1-c));switch(a*=255,l){case 0:return[a,h,u];case 1:return[d,a,u];case 2:return[u,a,h];case 3:return[u,d,a];case 4:return[h,u,a];case 5:return[a,u,d]}},t.hsv.hsl=function(s){const o=s[0],r=s[1]/100,a=s[2]/100,l=Math.max(a,.01);let c,u;u=(2-r)*a;const d=(2-r)*l;return c=r*l,c/=d<=1?d:2-d,c=c||0,u/=2,[o,c*100,u*100]},t.hwb.rgb=function(s){const o=s[0]/360;let r=s[1]/100,a=s[2]/100;const l=r+a;let c;l>1&&(r/=l,a/=l);const u=Math.floor(6*o),d=1-a;c=6*o-u,(u&1)!==0&&(c=1-c);const h=r+c*(d-r);let f,p,g;switch(u){default:case 6:case 0:f=d,p=h,g=r;break;case 1:f=h,p=d,g=r;break;case 2:f=r,p=d,g=h;break;case 3:f=r,p=h,g=d;break;case 4:f=h,p=r,g=d;break;case 5:f=d,p=r,g=h;break}return[f*255,p*255,g*255]},t.cmyk.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100,l=s[3]/100,c=1-Math.min(1,o*(1-l)+l),u=1-Math.min(1,r*(1-l)+l),d=1-Math.min(1,a*(1-l)+l);return[c*255,u*255,d*255]},t.xyz.rgb=function(s){const o=s[0]/100,r=s[1]/100,a=s[2]/100;let l,c,u;return l=o*3.2406+r*-1.5372+a*-.4986,c=o*-.9689+r*1.8758+a*.0415,u=o*.0557+r*-.204+a*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,c=c>.0031308?1.055*c**(1/2.4)-.055:c*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,l=Math.min(Math.max(0,l),1),c=Math.min(Math.max(0,c),1),u=Math.min(Math.max(0,u),1),[l*255,c*255,u*255]},t.xyz.lab=function(s){let o=s[0],r=s[1],a=s[2];o/=95.047,r/=100,a/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const l=116*r-16,c=500*(o-r),u=200*(r-a);return[l,c,u]},t.lab.xyz=function(s){const o=s[0],r=s[1],a=s[2];let l,c,u;c=(o+16)/116,l=r/500+c,u=c-a/200;const d=c**3,h=l**3,f=u**3;return c=d>.008856?d:(c-16/116)/7.787,l=h>.008856?h:(l-16/116)/7.787,u=f>.008856?f:(u-16/116)/7.787,l*=95.047,c*=100,u*=108.883,[l,c,u]},t.lab.lch=function(s){const o=s[0],r=s[1],a=s[2];let l;l=Math.atan2(a,r)*360/2/Math.PI,l<0&&(l+=360);const u=Math.sqrt(r*r+a*a);return[o,u,l]},t.lch.lab=function(s){const o=s[0],r=s[1],l=s[2]/360*2*Math.PI,c=r*Math.cos(l),u=r*Math.sin(l);return[o,c,u]},t.rgb.ansi16=function(s,o=null){const[r,a,l]=s;let c=o===null?t.rgb.hsv(s)[2]:o;if(c=Math.round(c/50),c===0)return 30;let u=30+(Math.round(l/255)<<2|Math.round(a/255)<<1|Math.round(r/255));return c===2&&(u+=60),u},t.hsv.ansi16=function(s){return t.rgb.ansi16(t.hsv.rgb(s),s[2])},t.rgb.ansi256=function(s){const o=s[0],r=s[1],a=s[2];return o===r&&r===a?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(r/255*5)+Math.round(a/255*5)},t.ansi16.rgb=function(s){let o=s%10;if(o===0||o===7)return s>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const r=(~~(s>50)+1)*.5,a=(o&1)*r*255,l=(o>>1&1)*r*255,c=(o>>2&1)*r*255;return[a,l,c]},t.ansi256.rgb=function(s){if(s>=232){const c=(s-232)*10+8;return[c,c,c]}s-=16;let o;const r=Math.floor(s/36)/5*255,a=Math.floor((o=s%36)/6)/5*255,l=o%6/5*255;return[r,a,l]},t.rgb.hex=function(s){const r=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r},t.hex.rgb=function(s){const o=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let r=o[0];o[0].length===3&&(r=r.split("").map(d=>d+d).join(""));const a=parseInt(r,16),l=a>>16&255,c=a>>8&255,u=a&255;return[l,c,u]},t.rgb.hcg=function(s){const o=s[0]/255,r=s[1]/255,a=s[2]/255,l=Math.max(Math.max(o,r),a),c=Math.min(Math.min(o,r),a),u=l-c;let d,h;return u<1?d=c/(1-u):d=0,u<=0?h=0:l===o?h=(r-a)/u%6:l===r?h=2+(a-o)/u:h=4+(o-r)/u,h/=6,h%=1,[h*360,u*100,d*100]},t.hsl.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=r<.5?2*o*r:2*o*(1-r);let l=0;return a<1&&(l=(r-.5*a)/(1-a)),[s[0],a*100,l*100]},t.hsv.hcg=function(s){const o=s[1]/100,r=s[2]/100,a=o*r;let l=0;return a<1&&(l=(r-a)/(1-a)),[s[0],a*100,l*100]},t.hcg.rgb=function(s){const o=s[0]/360,r=s[1]/100,a=s[2]/100;if(r===0)return[a*255,a*255,a*255];const l=[0,0,0],c=o%1*6,u=c%1,d=1-u;let h=0;switch(Math.floor(c)){case 0:l[0]=1,l[1]=u,l[2]=0;break;case 1:l[0]=d,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=u;break;case 3:l[0]=0,l[1]=d,l[2]=1;break;case 4:l[0]=u,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=d}return h=(1-r)*a,[(r*l[0]+h)*255,(r*l[1]+h)*255,(r*l[2]+h)*255]},t.hcg.hsv=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);let l=0;return a>0&&(l=o/a),[s[0],l*100,a*100]},t.hcg.hsl=function(s){const o=s[1]/100,a=s[2]/100*(1-o)+.5*o;let l=0;return a>0&&a<.5?l=o/(2*a):a>=.5&&a<1&&(l=o/(2*(1-a))),[s[0],l*100,a*100]},t.hcg.hwb=function(s){const o=s[1]/100,r=s[2]/100,a=o+r*(1-o);return[s[0],(a-o)*100,(1-a)*100]},t.hwb.hcg=function(s){const o=s[1]/100,a=1-s[2]/100,l=a-o;let c=0;return l<1&&(c=(a-l)/(1-l)),[s[0],l*100,c*100]},t.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]},t.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]},t.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]},t.gray.hsl=function(s){return[0,0,s[0]]},t.gray.hsv=t.gray.hsl,t.gray.hwb=function(s){return[0,100,s[0]]},t.gray.cmyk=function(s){return[0,0,0,s[0]]},t.gray.lab=function(s){return[s[0],0,0]},t.gray.hex=function(s){const o=Math.round(s[0]/100*255)&255,a=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(a.length)+a},t.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]},Fp}var $p,Uy;function dj(){if(Uy)return $p;Uy=1;const n=gS();function e(){const o={},r=Object.keys(n);for(let a=r.length,l=0;l<a;l++)o[r[l]]={distance:-1,parent:null};return o}function t(o){const r=e(),a=[o];for(r[o].distance=0;a.length;){const l=a.pop(),c=Object.keys(n[l]);for(let u=c.length,d=0;d<u;d++){const h=c[d],f=r[h];f.distance===-1&&(f.distance=r[l].distance+1,f.parent=l,a.unshift(h))}}return r}function i(o,r){return function(a){return r(o(a))}}function s(o,r){const a=[r[o].parent,o];let l=n[r[o].parent][o],c=r[o].parent;for(;r[c].parent;)a.unshift(r[c].parent),l=i(n[r[c].parent][c],l),c=r[c].parent;return l.conversion=a,l}return $p=function(o){const r=t(o),a={},l=Object.keys(r);for(let c=l.length,u=0;u<c;u++){const d=l[u];r[d].parent!==null&&(a[d]=s(d,r))}return a},$p}var Up,Hy;function hj(){if(Hy)return Up;Hy=1;const n=gS(),e=dj(),t={},i=Object.keys(n);function s(r){const a=function(...l){const c=l[0];return c==null?c:(c.length>1&&(l=c),r(l))};return"conversion"in r&&(a.conversion=r.conversion),a}function o(r){const a=function(...l){const c=l[0];if(c==null)return c;c.length>1&&(l=c);const u=r(l);if(typeof u=="object")for(let d=u.length,h=0;h<d;h++)u[h]=Math.round(u[h]);return u};return"conversion"in r&&(a.conversion=r.conversion),a}return i.forEach(r=>{t[r]={},Object.defineProperty(t[r],"channels",{value:n[r].channels}),Object.defineProperty(t[r],"labels",{value:n[r].labels});const a=e(r);Object.keys(a).forEach(c=>{const u=a[c];t[r][c]=o(u),t[r][c].raw=s(u)})}),Up=t,Up}var bS=hj();const fj=pS(bS),vS=AP({__proto__:null,default:fj},[bS]),Oc=(n,e=0,t=1)=>n>t?t:n<e?e:n,pn=(n,e=0,t=Math.pow(10,e))=>Math.round(t*n)/t,pj=n=>wj(kg(n)),kg=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?pn(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?pn(parseInt(n.substring(6,8),16)/255,2):1}),mj=n=>vj(bj(n)),gj=({h:n,s:e,v:t,a:i})=>{const s=(200-e)*t/100;return{h:pn(n),s:pn(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:pn(s/2),a:pn(i,2)}},Cg=n=>{const{h:e,s:t,l:i}=gj(n);return`hsl(${e}, ${t}%, ${i}%)`},bj=({h:n,s:e,v:t,a:i})=>{n=n/360*6,e=e/100,t=t/100;const s=Math.floor(n),o=t*(1-e),r=t*(1-(n-s)*e),a=t*(1-(1-n+s)*e),l=s%6;return{r:pn([t,r,o,o,a,t][l]*255),g:pn([a,t,t,r,o,o][l]*255),b:pn([o,o,a,t,t,r][l]*255),a:pn(i,2)}},Hu=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},vj=({r:n,g:e,b:t,a:i})=>{const s=i<1?Hu(pn(i*255)):"";return"#"+Hu(n)+Hu(e)+Hu(t)+s},wj=({r:n,g:e,b:t,a:i})=>{const s=Math.max(n,e,t),o=s-Math.min(n,e,t),r=o?s===n?(e-t)/o:s===e?2+(t-n)/o:4+(n-e)/o:0;return{h:pn(60*(r<0?r+6:r)),s:pn(s?o/s*100:0),v:pn(s/255*100),a:i}},wS=(n,e)=>{if(n===e)return!0;for(const t in n)if(n[t]!==e[t])return!1;return!0},_j=(n,e)=>n.toLowerCase()===e.toLowerCase()?!0:wS(kg(n),kg(e)),jy={},_S=n=>{let e=jy[n];return e||(e=document.createElement("template"),e.innerHTML=n,jy[n]=e),e},cb=(n,e,t)=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let xa=!1;const Eg=n=>"touches"in n,yj=n=>xa&&!Eg(n)?!1:(xa||(xa=Eg(n)),!0),zy=(n,e)=>{const t=Eg(e)?e.touches[0]:e,i=n.el.getBoundingClientRect();cb(n.el,"move",n.getMove({x:Oc((t.pageX-(i.left+window.pageXOffset))/i.width),y:Oc((t.pageY-(i.top+window.pageYOffset))/i.height)}))},kj=(n,e)=>{const t=e.keyCode;t>40||n.xy&&t<37||t<33||(e.preventDefault(),cb(n.el,"move",n.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class yS{constructor(e,t,i,s){const o=_S(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`);e.appendChild(o.content.cloneNode(!0));const r=e.querySelector(`[part=${t}]`);r.addEventListener("mousedown",this),r.addEventListener("touchstart",this),r.addEventListener("keydown",this),this.el=r,this.xy=s,this.nodes=[r.firstChild,r]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(xa?"touchmove":"mousemove",this),t(xa?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!yj(e)||!xa&&e.button!=0)return;this.el.focus(),zy(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),zy(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":kj(this,e);break}}style(e){e.forEach((t,i)=>{for(const s in t)this.nodes[i].style.setProperty(s,t[s])})}}class Cj extends yS{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:Cg({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${pn(e)}`)}getMove(e,t){return{h:t?Oc(this.h+e.x*360,0,360):360*e.x}}}class Ej extends yS{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:Cg(e)},{"background-color":Cg({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${pn(e.s)}%, Brightness ${pn(e.v)}%`)}getMove(e,t){return{s:t?Oc(this.hsva.s+e.x*100,0,100):e.x*100,v:t?Oc(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const xj=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',Tj="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Sj="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",ju=Symbol("same"),Hp=Symbol("color"),Wy=Symbol("hsva"),jp=Symbol("update"),qy=Symbol("parts"),Gy=Symbol("css"),Ky=Symbol("sliders");class Ij extends HTMLElement{static get observedAttributes(){return["color"]}get[Gy](){return[xj,Tj,Sj]}get[Ky](){return[Ej,Cj]}get color(){return this[Hp]}set color(e){if(!this[ju](e)){const t=this.colorModel.toHsva(e);this[jp](t),this[Hp]=e}}constructor(){super();const e=_S(`<style>${this[Gy].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[qy]=this[Ky].map(i=>new i(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){const s=this.colorModel.fromAttr(i);this[ju](s)||(this.color=s)}handleEvent(e){const t=this[Wy],i={...t,...e.detail};this[jp](i);let s;!wS(i,t)&&!this[ju](s=this.colorModel.fromHsva(i))&&(this[Hp]=s,cb(this,"color-changed",{value:s}))}[ju](e){return this.color&&this.colorModel.equal(e,this.color)}[jp](e){this[Wy]=e,this[qy].forEach(t=>t.update(e))}}const Aj={defaultColor:"#000",toHsva:pj,fromHsva:({h:n,s:e,v:t})=>mj({h:n,s:e,v:t,a:1}),equal:_j,fromAttr:n=>n};class Pj extends Ij{get colorModel(){return Aj}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wi extends zn{_parentElement;constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,s)=>{this._renderViewIntoCollectionParent(i,s)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!Oj(e))throw new P("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const s of e)i.delegate(s).to(t);this.on("add",(i,s)=>{for(const o of e)s.delegate(o).to(t)}),this.on("remove",(i,s)=>{for(const o of e)s.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function Oj(n){return n.every(e=>typeof e=="string")}const Mj="http://www.w3.org/1999/xhtml";class ti extends ot(){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(e){super(),Object.assign(this,Zy(Xy(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=Qy(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new P("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const i of t.children)rh(i)?yield i:ub(i)&&(yield*e(i))}yield*e(this)}static bind(e,t){return{to(i,s){return new Rj({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:s})},if(i,s,o){return new kS({observable:e,emitter:t,attribute:i,valueIfTrue:s,callback:o})}}}static extend(e,t){if(e._isRendered)throw new P("template-extend-render",[this,e]);TS(e,Zy(Xy(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new P("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Mj,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),pd(this.text)?this._bindToObservable({schema:this.text,updater:Lj(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,i=e.revertData;for(const s in this.attributes){const o=t.getAttribute(s),r=this.attributes[s];i&&(i.attributes[s]=o);const a=Yy(r)?r[0].ns:null;if(pd(r)){const l=Yy(r)?r[0].value:r;i&&ek(s)&&l.unshift(o),this._bindToObservable({schema:l,updater:Nj(t,s,a),data:e})}else if(s=="style"&&typeof r[0]!="string")this._renderStyleAttribute(r[0],e);else{i&&o&&ek(s)&&r.unshift(o);const l=r.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(xS,"");Na(l)||t.setAttributeNS(a,s,l)}}}_renderStyleAttribute(e,t){const i=t.node;for(const s in e){const o=e[s];pd(o)?this._bindToObservable({schema:[o],updater:Vj(i,s),data:t}):i.style[s]=o}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let o=0;for(const r of this.children)if(db(r)){if(!s){r.setParent(t);for(const a of r)i.appendChild(a.element)}}else if(rh(r))s||(r.isRendered||r.render(),i.appendChild(r.element));else if(No(r))i.appendChild(r);else if(s){const a=e.revertData,l=Qy();a.children.push(l),r._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:l})}else i.appendChild(r.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map(s=>{const[o,r]=t.split("@");return s.activateDomEventListener(o,r,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const s=i.revertData;CS(e,t,i);const o=e.filter(r=>!Na(r)).filter(r=>r.observable).map(r=>r.activateAttributeListener(e,t,i));s&&s.bindings.push(o)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const o of s)o();if(t.text){e.textContent=t.text;return}const i=e;for(const s in t.attributes){const o=t.attributes[s];o===null?i.removeAttribute(s):i.setAttribute(s,o)}for(let s=0;s<t.children.length;++s)this._revertTemplateFromNode(i.childNodes[s],t.children[s])}}class ru{attribute;observable;emitter;callback;constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>CS(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class Rj extends ru{eventNameOrFunction;constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){const s=(o,r)=>{(!t||r.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(r):this.observable.fire(this.eventNameOrFunction,r))};return this.emitter.listenTo(i.node,e,s),()=>{this.emitter.stopListening(i.node,e,s)}}}class kS extends ru{valueIfTrue;constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Na(t)?!1:this.valueIfTrue||!0}}function pd(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(pd):n instanceof ru):!1}function Bj(n,e){return n.map(t=>t instanceof ru?t.getValue(e):t)}function CS(n,e,{node:t}){const i=Bj(n,t);let s;n.length==1&&n[0]instanceof kS?s=i[0]:s=i.reduce(xS,""),Na(s)?e.remove():e.set(s)}function Lj(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function Nj(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function Vj(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function Xy(n){return W1(n,t=>{if(t&&(t instanceof ru||ub(t)||rh(t)||db(t)))return t})}function Zy(n){if(typeof n=="string"?n=$j(n):n.text&&Uj(n),n.on&&(n.eventListeners=Fj(n.on),delete n.on),!n.text){n.attributes&&Dj(n.attributes);const e=[];if(n.children)if(db(n.children))e.push(n.children);else for(const t of n.children)ub(t)||rh(t)||No(t)?e.push(t):e.push(new ti(t));n.children=e}return n}function Dj(n){for(const e in n)n[e].value&&(n[e].value=at(n[e].value)),ES(n,e)}function Fj(n){for(const e in n)ES(n,e);return n}function $j(n){return{text:[n]}}function Uj(n){n.text=at(n.text)}function ES(n,e){n[e]=at(n[e])}function xS(n,e){return Na(e)?n:Na(n)?e:`${n} ${e}`}function Jy(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function TS(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),Jy(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),Jy(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new P("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)TS(n.children[t++],i)}}function Na(n){return!n&&n!==0}function rh(n){return n instanceof me}function ub(n){return n instanceof ti}function db(n){return n instanceof wi}function Yy(n){return pt(n[0])&&n[0].ns}function Qy(){return{children:[],bindings:[],attributes:{}}}function ek(n){return n=="class"||n=="style"}class me extends vi(tt()){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new zn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=ti.bind(this,this)}createCollection(e){const t=new wi(e);return this._viewCollections.add(t),t}registerChild(e){gi(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){gi(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new ti(e)}extendTemplate(e){ti.extend(this.template,e)}render(){if(this.isRendered)throw new P("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function au({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:s}){n.listenTo(document,"mousedown",(o,r)=>{if(!e())return;const a=typeof r.composedPath=="function"?r.composedPath():[],l=typeof i=="function"?i():i;for(const c of l)if(c.contains(r.target)||a.includes(c))return;t()},s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mf(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lu({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hj({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:s}){const o=typeof i=="number"?()=>i:i;n.set("arrowright",r((c,u)=>s==="rtl"?l(c,u.length):a(c,u.length))),n.set("arrowleft",r((c,u)=>s==="rtl"?a(c,u.length):l(c,u.length))),n.set("arrowup",r((c,u)=>{let d=c-o();return d<0&&(d=c+o()*Math.floor(u.length/o()),d>u.length-1&&(d-=o())),d})),n.set("arrowdown",r((c,u)=>{let d=c+o();return d>u.length-1&&(d=c%o()),d}));function r(c){return u=>{const d=t.find(p=>p.element===e.focusedElement),h=t.getIndex(d),f=c(h,t);t.get(f).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}class _s extends me{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),i=t.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:o}of Array.from(t.attributes))_s.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}class SS extends me{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class Ne extends me{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(e,t=new SS){super(e);const i=this.bindTemplate,s=Ai();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new _s,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r),i.if("isVisible","ck-hidden",r=>!r),i.to("isOn",r=>r?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",r=>r||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,r=>!r),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(r=>{this.isEnabled?this.fire("execute"):r.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(r,a,l)=>!a||tk(l)?!1:String(!!r)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(r,a,l)=>!a||!tk(l)?!1:String(!!r)),ke.isSafari&&(this._focusDelayed||(this._focusDelayed=Z1(()=>this.focus(),0)),o.on.mousedown=i.to(()=>{this._focusDelayed()}),o.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new me;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>nh(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=nh(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}function tk(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class jj extends me{children;iconView;constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new _s,this.iconView.content=t.icon,this.children.add(this.iconView));const s=new me(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(s)}}class Qi extends ot(){focusables;focusTracker;keystrokeHandler;actions;constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(const s of i)e.keystrokeHandler.set(s,(o,r)=>{this[t](),r()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(zp)||null}get last(){return this.focusables.filter(zp).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=i),s}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",i=>{const s=t();this.focusNext(),s!==t()&&i.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",i=>{const s=t();this.focusPrevious(),s!==t()&&i.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const i=this.current;if(i===null)return this[e===1?"first":"last"];let s=this.focusables.get(i),o=(i+t+e)%t;do{const r=this.focusables.get(o);if(zp(r)){s=r;break}o=(o+t+e)%t}while(o!==i);return s}}function zp(n){return cu(n)&&Js(n.element)}function cu(n){return"focus"in n&&typeof n.focus=="function"}function zj(n){return cu(n)&&"focusCycler"in n&&n.focusCycler instanceof Qi}function Wj(n){class e extends n{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...i){super(...i),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(ue.document,"mouseup",this._onDragEndBound),this.listenTo(ue.document,"touchend",this._onDragEndBound),this.listenTo(ue.document,"mousemove",this._onDragBound),this.listenTo(ue.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(ue.document,"mouseup",this._onDragEndBound),this.stopListening(ue.document,"touchend",this._onDragEndBound),this.stopListening(ue.document,"mousemove",this._onDragBound),this.stopListening(ue.document,"touchmove",this._onDragBound)}_onDragStart(i,s){if(!this._isHandleElementPressed(s))return;this._attachDragListeners();let o=0,r=0;s instanceof MouseEvent?(o=s.clientX,r=s.clientY):(o=s.touches[0].clientX,r=s.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:r},this.isDragging=!0}_onDrag(i,s){if(!this.isDragging){this._detachDragListeners();return}let o=0,r=0;s instanceof MouseEvent?(o=s.clientX,r=s.clientY):(o=s.touches[0].clientX,r=s.touches[0].clientY),s.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(r-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:r}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}class qj extends me{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new gn,this._focusTracker=new tn,this._focusables=new wi,this.focusCycler=new Qi({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const i=new Ne(this.locale);let s;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(s in t)s!="onExecute"&&s!="onCreate"&&i.set(s,t[s]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class Gj extends me{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const Li={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},nk=ou("px");class Mc extends Wj(me){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(e,{getCurrentDomRoot:t,getViewportOffset:i}){super(e);const s=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",Li.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=i,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new gn,this.focusTracker=new tn,this._focusables=new wi,this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",s.if("isModal","ck-dialog-overlay__transparent",r=>!r),s.if("_isVisible","ck-hidden",r=>!r)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",s.if("isModal","ck-dialog_modal"),s.to("className")],role:"dialog","aria-label":s.to("ariaLabel"),style:{top:s.to("_top",r=>nk(r)),left:s.to("_left",r=>nk(r)),visibility:s.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{this.fire("close",{source:"escKeyPress"}),t()}),this.on("drag",(e,{deltaX:t,deltaY:i})=>{this.wasMoved=!0,this.moveBy(t,i)}),this.listenTo(ue.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(ue.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,i)=>{i&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:i=!0,content:s,actionButtons:o}){t&&(this.headerView=new jj(this.locale,{icon:e}),i&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),s&&(s instanceof me&&(s=[s]),this.contentView=new Gj(this.locale),this.contentView.children.addMany(s),this.parts.add(this.contentView)),o&&(this.actionsView=new qj(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const i=this._getViewportRect(),s=this._getDialogRect();e+s.width>i.right&&(e=i.right-s.width),e<i.left&&(e=i.left),t<i.top&&(t=i.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t=this.position,i;this._getCurrentDomRoot()?i=this._getVisibleDomRootRect(e):t=Li.SCREEN_CENTER;const s=Mc.defaultOffset,o=this._getDialogRect();switch(t){case Li.EDITOR_TOP_SIDE:{if(i){const r=this.locale.contentLanguageDirection==="ltr"?i.right-o.width-s:i.left+s;this.moveTo(r,i.top+s)}else this._moveOffScreen();break}case Li.EDITOR_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),Math.round(i.top+i.height/2-o.height/2)):this._moveOffScreen();break}case Li.SCREEN_CENTER:{this.moveTo(Math.round((e.width-o.width)/2),Math.round((e.height-o.height)/2));break}case Li.EDITOR_TOP_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top+s):this._moveOffScreen();break}case Li.EDITOR_BOTTOM_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom-o.height-s):this._moveOffScreen();break}case Li.EDITOR_ABOVE_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.top-o.height-s):this._moveOffScreen();break}case Li.EDITOR_BELOW_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-o.width/2),i.bottom+s):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let t=new Te(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new Te(this.element.firstElementChild)}_getViewportRect(){const e=new Te(ue.window);if(this.isModal)return e;const t={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)cu(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),zj(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const e=new Ne(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:he.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}class Vi extends H{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(e){super(e);const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{Vi._visibleDialogPlugin&&Vi._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,i)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),i())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const i of t)i.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:i,hasCloseButton:s=!0,content:o,actionButtons:r,className:a,isModal:l,position:c,onHide:u}){const d=this.editor;this.view=new Mc(d.locale,{getCurrentDomRoot:()=>d.editing.view.getDomRoot(d.model.document.selection.anchor.root.rootName),getViewportOffset:()=>d.ui.viewportOffset});const h=this.view;h.on("close",()=>{this.hide()}),d.ui.view.body.add(h),d.keystrokes.listenTo(h.element),c||(c=l?Li.SCREEN_CENTER:Li.EDITOR_CENTER),l&&this._lockBodyScroll(),h.set({position:c,_isVisible:!0,className:a,isModal:l}),h.setupParts({icon:t,title:i,hasCloseButton:s,content:o,actionButtons:r}),this.id=e,u&&(this._onHide=u),this.isOpen=!0,Vi._visibleDialogPlugin=this}hide(){Vi._visibleDialogPlugin&&Vi._visibleDialogPlugin.fire(`hide:${Vi._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.isModal&&this._unlockBodyScroll(),t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,Vi._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}class Va extends Ne{_checkIconHolderView=new Kj;constructor(e,t=new SS){super(e,t),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(s,o)=>s||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,i)=>{const{children:s,_checkIconHolderView:o}=this;i?s.add(o,0):s.remove(o)})}}class Kj extends me{children;_checkIconView=this._createCheckIconView();constructor(){super();const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,i)=>{const{children:s,_checkIconView:o}=this;i&&!s.has(o)?s.add(o):!i&&s.has(o)&&s.remove(o)})}_createCheckIconView(){const e=new _s;return e.content=he.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class nn extends Va{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class gf extends me{id;constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Ai()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class Xj extends me{constructor(e,t){super(e);const i=e.t,s=new gf;s.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[Ni(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),s]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const i=[Ni(document,"h3",{},t.label),...Array.from(t.groups.values()).map(s=>this._createGroup(s)).flat()];return t.description&&i.splice(1,0,Ni(document,"p",{},t.description)),Ni(document,"section",{},i)})}_createGroup(e){const t=e.keystrokes.sort((s,o)=>s.label.localeCompare(o.label)).map(s=>this._createGroupRow(s)).flat(),i=[Ni(document,"dl",{},t)];return e.label&&i.unshift(Ni(document,"h4",{},e.label)),i}_createGroupRow(e){const t=this.locale.t,i=Ni(document,"dt"),s=Ni(document,"dd"),o=Jj(e.keystroke),r=[];for(const a of o)r.push(a.map(Zj).join(""));return i.innerHTML=e.label,s.innerHTML=r.join(", ")+(e.mayRequireFn&&ke.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,s]}}function Zj(n){return nh(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function Jj(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}var ik='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class Yj extends H{contentView=null;static get requires(){return[Vi]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const i=this._createButton(Ne);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const i=this._createButton(nn);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,s)=>{this._toggleDialog(),s()}),this._setupRootLabels()}_createButton(e){const t=this.editor,i=t.plugins.get("Dialog"),s=t.locale,o=new e(s);return o.set({keystroke:"Alt+0",icon:ik,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(i,"id",r=>r==="accessibilityHelp"),o}_setupRootLabels(){const e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(o=>{for(const r of t.document.roots)s(o,r)}),e.on("addRoot",(o,r)=>{const a=e.editing.view.document.getRoot(r.rootName);t.change(l=>s(l,a))},{priority:"low"})});function s(o,r){const l=[r.getAttribute("aria-label"),i("Press %0 for help.",[nh("Alt+0")])].filter(c=>c).join(". ");o.setAttribute("aria-label",l,r)}}_toggleDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new Xj(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:ik,hasCloseButton:!0,content:this.contentView})}}class Qj extends wi{locale;_bodyCollectionContainer;constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new ti({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Ni(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}class hb extends Ne{toggleSwitchView;constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new me;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class sk extends IS(Ne){}class ez extends IS(Va){}function IS(n){class e extends n{buttonView;_fileInputView;constructor(...i){super(...i),this.buttonView=this,this._fileInputView=new tz(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class tz extends me{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var bf='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class nz extends me{buttonView;children;constructor(e,t){super(e);const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Ne(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:bf}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function iz(n,e){const t=n.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(s=>{const o=i[s.label];return o&&o!=s.label&&(s.label=o),s})}function sz(n){return n.map(oz).filter(e=>!!e)}function oz(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}var rz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class AS extends Ne{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=rz,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",i=>ke.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ok extends me{columns;items;focusTracker;keystrokes;constructor(e,t){super(e);const i=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t&&t.columns?t.columns:5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new tn,this.keystrokes=new gn,this.items.on("add",(o,r)=>{r.isOn=r.color===this.selectedColor}),i.forEach(o=>{const r=new AS;r.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),r.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(r)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(o,r,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),Hj({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function PS(n,e){if(!n)return"";const t=OS(n);if(!t)return"";if(t.space===e)return n;if(!uz(t))return"";const s=vS[t.space][e];if(!s)return"";const o=s(t.space==="hex"?t.hexValue:t.values);return cz(o,e)}function az(n){if(!n)return"";const e=OS(n);return e?e.space==="hex"?e.hexValue:PS(n,"hex"):"#000"}function lz(n,e){customElements.get(n)===void 0&&customElements.define(n,e)}function cz(n,e){switch(e){case"hex":return`#${n}`;case"rgb":return`rgb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"hsl":return`hsl( ${n[0]}, ${n[1]}%, ${n[2]}% )`;case"hwb":return`hwb( ${n[0]}, ${n[1]}, ${n[2]} )`;case"lab":return`lab( ${n[0]}% ${n[1]} ${n[2]} )`;case"lch":return`lch( ${n[0]}% ${n[1]} ${n[2]} )`;default:return""}}function OS(n){if(n.startsWith("#")){const t=Fy(n);return{space:"hex",values:t.values,hexValue:n,alpha:t.alpha}}const e=Fy(n);return e.space?e:null}function uz(n){return Object.keys(vS).includes(n.space)}class al extends me{fieldView;labelView;statusView;fieldWrapperChildren;constructor(e,t){super(e);const i=`ck-labeled-field-view-${Ai()}`,s=`ck-labeled-field-view-status-${Ai()}`;this.fieldView=t(this,i,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(r,a)=>r||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new gf(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new me(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",s=>!s)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}class dz extends me{focusTracker;constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new tn,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=hz(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function hz(n){return!n.value}class MS extends dz{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class fz extends MS{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class pz extends MS{constructor(e,{min:t,max:i,step:s}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}class mz extends me{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ue("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}class ah extends me{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(e,t,i){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new gn,this.focusTracker=new tn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,i,s)=>{if(s)if(this.panelPosition==="auto"){const o=ah._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(t,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(t,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:s,northEast:o,northWest:r,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:u}=ah.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,s,a,l,e,o,r,c,u,t]:[s,i,l,a,e,r,o,u,c,t]}static defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)*3/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)*3/4,name:"nmw"})};static _getOptimalPosition=G1}class RS extends Ne{arrowView;constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new _s;return e.content=bf,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class Vo extends me{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class fb extends me{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class md extends me{labelView;items;children;constructor(e,t=new gf){super(e);const i=this.bindTemplate,s=new pb(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:t.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof fb));e&&e.focus()}}}class pb extends me{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(e){super(e);const t=this.bindTemplate;this.focusables=new wi,this.items=this.createCollection(),this.focusTracker=new tn,this.keystrokes=new gn,this._focusCycler=new Qi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof md?this._registerFocusableItemsGroup(e):e instanceof Vo&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const i of t.removed)i instanceof md?this._deregisterFocusableItemsGroup(i):i instanceof Vo&&this._deregisterFocusableListItem(i);for(const i of Array.from(t.added).reverse())i instanceof md?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(const s of i.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((s,o)=>{const r=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(s,r)});const i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}const rk=ou("px"),gz={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class li extends me{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",i=>`ck-balloon-panel_${i}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",rk),left:t.to("left",rk)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const t=gd(e.target);if(t&&!Js(t))return!1;this.show();const i=li.defaultPositions,s=Object.assign({},{element:this.element,positions:[i.southArrowNorth,i.southArrowNorthMiddleWest,i.southArrowNorthMiddleEast,i.southArrowNorthWest,i.southArrowNorthEast,i.northArrowSouth,i.northArrowSouthMiddleWest,i.northArrowSouthMiddleEast,i.northArrowSouthWest,i.northArrowSouthEast,i.viewportStickyNorth],limiter:ue.document.body,fitInViewport:!0},e),o=li._getOptimalPosition(s)||gz,r=parseInt(o.left),a=parseInt(o.top),l=o.name,c=o.config||{},{withArrow:u=!0}=c;return this.top=a,this.left=r,this.position=l,this.withArrow=u,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let t=gd(e.target);const i=e.limiter?gd(e.limiter):ue.document.body;if(this.listenTo(ue.document,"scroll",(s,o)=>{const r=o.target,a=t&&r.contains(t),l=i&&r.contains(i);(a||l||!t||!i)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(ue.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(t&&At(t)&&(t=t.parentElement),t)){const s=()=>{Js(t)||this.unpin()};this._resizeObserver=new Tt(t,s)}return!0}_stopPinning(){this.stopListening(ue.document,"scroll"),this.stopListening(ue.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:t=li.arrowSideOffset,heightOffset:i=li.arrowHeightOffset,stickyVerticalOffset:s=li.stickyVerticalOffset,config:o}=e;return{northWestArrowSouthWest:(l,c)=>({top:r(l,c),left:l.left-t,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(l,c)=>({top:r(l,c),left:l.left-c.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(l,c)=>({top:r(l,c),left:l.left-c.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(l,c)=>({top:r(l,c),left:l.left-c.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(l,c)=>({top:r(l,c),left:l.left-c.width+t,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(l,c)=>({top:r(l,c),left:l.left+l.width/2-t,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(l,c)=>({top:r(l,c),left:l.left+l.width/2-c.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(l,c)=>({top:r(l,c),left:l.left+l.width/2-c.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(l,c)=>({top:r(l,c),left:l.left+l.width/2-c.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(l,c)=>({top:r(l,c),left:l.left+l.width/2-c.width+t,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(l,c)=>({top:r(l,c),left:l.right-t,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(l,c)=>({top:r(l,c),left:l.right-c.width*.25-t,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(l,c)=>({top:r(l,c),left:l.right-c.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(l,c)=>({top:r(l,c),left:l.right-c.width*.75+t,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(l,c)=>({top:r(l,c),left:l.right-c.width+t,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:l=>({top:a(l),left:l.left-t,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.left-c.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(l,c)=>({top:a(l),left:l.left-c.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.left-c.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(l,c)=>({top:a(l),left:l.left-c.width+t,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:l=>({top:a(l),left:l.left+l.width/2-t,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(l,c)=>({top:a(l),left:l.left+l.width/2-c.width+t,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:l=>({top:a(l),left:l.right-t,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(l,c)=>({top:a(l),left:l.right-c.width*.25-t,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(l,c)=>({top:a(l),left:l.right-c.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(l,c)=>({top:a(l),left:l.right-c.width*.75+t,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(l,c)=>({top:a(l),left:l.right-c.width+t,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(l,c)=>({top:l.top+l.height/2-c.height/2,left:l.left-c.width-i,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(l,c)=>({top:l.top+l.height/2-c.height/2,left:l.right+i,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(l,c,u,d)=>{const h=d||u;return!l.getIntersection(h)||h.height-l.height>s?null:{top:h.top+s,left:l.left+l.width/2-c.width/2,name:"arrowless",config:{withArrow:!1,...o}}}};function r(l,c){return l.top-c.height-i}function a(l){return l.bottom+i}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=G1;static defaultPositions=li.generatePositions()}function gd(n){return Lo(n)?n:uf(n)?n.commonAncestorContainer:typeof n=="function"?gd(n()):null}class BS extends me{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class bz extends me{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vz(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function LS(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const wz={alignLeft:he.alignLeft,bold:he.bold,importExport:he.importExport,paragraph:he.paragraph,plus:he.plus,text:he.text,threeVerticalDots:he.threeVerticalDots,pilcrow:he.pilcrow,dragIndicator:he.dragIndicator};class mb extends me{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(e,t){super(e);const i=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new tn,this.keystrokes=new gn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new _z(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new Qi({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:vz(this)}}),this._behavior=this.options.shouldGroupWhenFull?new kz(this):new yz(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){const s=LS(e),o=i||s.removeItems;return this._cleanItemsConfiguration(s.items,t,o).map(a=>pt(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new BS:a==="-"?new bz:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){const s=e.filter((o,r,a)=>o==="|"?!0:i.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(Ue("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!pt(o)&&!t.has(o)?(Ue("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const t=r=>r!=="-"&&r!=="|",i=e.length,s=e.findIndex(t);if(s===-1)return[];const o=i-e.slice().reverse().findIndex(t);return e.slice(s,o).filter((r,a,l)=>t(r)?!0:!(a>0&&l[a-1]===r))}_createNestedToolbarDropdown(e,t,i){let{label:s,icon:o,items:r,tooltip:a=!0,withText:l=!1}=e;if(r=this._cleanItemsConfiguration(r,t,i),!r.length)return null;const c=this.locale,u=es(c);return s||Ue("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:s,tooltip:a,withText:!!l}),o!==!1?u.buttonView.icon=wz[o]||o||he.threeVerticalDots:u.buttonView.withText=!0,wf(u,()=>u.toolbarView._buildItemsFromConfig(r,t,i)),u}}class _z extends me{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class yz{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>cu(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class kz{view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{const s=i.index,o=Array.from(i.added);for(const r of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Js(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Te(e.lastChild),s=new Te(e);if(!this.cachedPadding){const o=ue.window.getComputedStyle(e),r=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return t==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Tt(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new BS),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=es(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",wf(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:he.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{cu(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class vf extends me{children;actionView;arrowView;keystrokes;focusTracker;constructor(e,t){super(e);const i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new gn,this.focusTracker=new tn,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",s=>!s),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new Ne;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new Ne,t=e.bindTemplate;return e.icon=bf,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function es(n,e=RS){const t=typeof e=="function"?new e(n):e,i=new mz(n),s=new ah(n,t,i);return t.bind("isEnabled").to(s),t instanceof vf?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),Cz(s),s}function wf(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?ak(n,e,t):n.once("change:isOpen",()=>ak(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&gb(n,()=>n.toolbarView.items.find(i=>i.isOn))}function ak(n,e,t){const i=n.locale,s=i.t,o=n.toolbarView=new mb(i),r=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),r instanceof wi?o.items.bindTo(r).using(a=>a):o.items.addMany(r),n.panelView.children.add(o),n.focusTracker.add(o),o.items.delegate("execute").to(n)}function uu(n,e,t={}){n.isOpen?lk(n,e,t):n.once("change:isOpen",()=>lk(n,e,t),{priority:"highest"}),gb(n,()=>n.listView.items.find(i=>i instanceof Vo?i.children.first.isOn:!1))}function lk(n,e,t){const i=n.locale,s=n.listView=new pb(i),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.role=t.role,VS(n,s.items,o,i),n.panelView.children.add(s),s.items.delegate("execute").to(n)}function gb(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():Ue("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Po.low-10})}function Cz(n){Ez(n),xz(n),Tz(n),Sz(n),Iz(n),Az(n)}function Ez(n){au({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...NS(n.focusTracker).filter(e=>!n.element.contains(e))]})}function NS(n){return[...n.elements,...n.externalViews.flatMap(e=>NS(e.focusTracker))]}function xz(n){n.on("execute",e=>{e.source instanceof hb||(n.isOpen=!1)})}function Tz(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function Sz(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function Iz(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;n.focusTracker.elements.some(o=>o.contains(ue.document.activeElement))&&n.buttonView.focus()})}function Az(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function VS(n,e,t,i){e.on("change",()=>{const s=[...e].reduce((r,a)=>(a instanceof Vo&&a.children.first instanceof Va&&r.push(a.children.first),r),[]),o=s.some(r=>r.isToggleable);s.forEach(r=>{r.hasCheckSpace=o})}),e.bindTo(t).using(s=>{if(s.type==="separator")return new fb(i);if(s.type==="group"){const o=new md(i);return o.set({label:s.label}),VS(n,o.items,s.items,i),o.items.delegate("execute").to(n),o}else if(s.type==="button"||s.type==="switchbutton"){const o=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",r=new Vo(i);let a;return s.type==="button"?(a=new Va(i),a.set({isToggleable:o})):a=new hb(i),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(r),r.children.add(a),r}return null})}const du=(n,e,t)=>{const i=new fz(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},Pz=(n,e,t)=>{const i=new pz(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},Oz=150;class Mz extends me{hexInputRow;_debounceColorPickerEvent;_config;constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const i=this.createCollection();t.hideInput||i.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:i}),this._config=t,this._debounceColorPickerEvent=Bo(s=>{this.set("color",s),this.fire("colorSelected",{color:this.color})},Oz,{leading:!0}),this.on("set:color",(s,o,r)=>{s.return=PS(r,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Wp(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Wp(this.color)!=Wp(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),lz("hex-color-picker",Pj),this.picker=ue.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(ke.isGecko||ke.isiOS||ke.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const i=[...this.picker.shadowRoot.children].filter(s=>s.getAttribute("role")==="slider").map(s=>new Rz(s));this.slidersView=this.createCollection(),i.forEach(s=>{this.slidersView.add(s)})}_createInputRow(){const e=this._createColorInput();return new Lz(this.locale,e)}_createColorInput(){const e=new al(this.locale,du),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",i=>e.isFocused?e.fieldView.value:i.startsWith("#")?i.substring(1):i),e.fieldView.on("input",()=>{const i=e.fieldView.element.value;if(i){const s=DS(i);s&&this._debounceColorPickerEvent(s)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function Wp(n){let e=az(n);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class Rz extends me{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class Bz extends me{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class Lz extends me{children;inputView;constructor(e,t){super(e),this.inputView=t,this.children=this.createCollection([new Bz,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return DS(this.inputView.fieldView.element.value)}}function DS(n){if(!n)return null;const e=n.trim().replace(/^#/,"");return![3,4,6,8].includes(e.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?null:`#${e}`}class Nz extends tt(zn){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(i=>i.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}class Vz extends me{items;colorDefinitions;focusTracker;columns;documentColors;documentColorsCount;staticColorsGrid;documentColorsGrid;colorPickerButtonView;removeColorButtonView;_focusables;_documentColorsLabel;_removeButtonLabel;_colorPickerLabel;constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e);const u=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new Nz,this.documentColorsCount=r,this._focusables=c,this._removeButtonLabel=s,this._colorPickerLabel=a,this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",u.if("isVisible","ck-hidden",d=>!d)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const i=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const o of i.getRoots()){const r=e.createRangeIn(o);for(const a of r.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=ti.bind(this.documentColors,this.documentColors),t=new me(this.locale);t.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Ne,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:he.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Ne;return e.set({withText:!0,icon:he.eraser,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new ok(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,i)=>{this.fire("execute",{value:i.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=ti.bind(this.documentColors,this.documentColors),t=new ok(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{const s=new AS;return s.set({color:i.color,hasBorder:i.options&&i.options.hasBorder}),i.label&&s.set({label:i.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:i.color,source:"documentColorsGrid"})}),s}),this.documentColors.on("change:isEmpty",(i,s,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class Dz extends me{items;colorPickerView;saveButtonView;cancelButtonView;actionBarView;focusTracker;keystrokes;_focusables;_colorPickerViewConfig;constructor(e,{focusTracker:t,focusables:i,keystrokes:s,colorPickerViewConfig:o}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=s,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._colorPickerViewConfig=o;const r=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",r.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();const e=new Mz(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,i,s)=>{e.color=s}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const i=new me,s=this.createCollection();return s.add(e),s.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:s}),i}_createActionButtons(){const e=this.locale,t=e.t,i=new Ne(e),s=new Ne(e);return i.set({icon:he.check,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),s.set({icon:he.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),s.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:i,cancelButtonView:s}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}class FS extends me{focusTracker;keystrokes;items;colorGridsFragmentView;colorPickerFragmentView;_focusCycler;_focusables;_colorPickerViewConfig;constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),this.items=this.createCollection(),this.focusTracker=new tn,this.keystrokes=new gn,this._focusables=new wi,this._colorPickerViewConfig=l,this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new Vz(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new Dz(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,u,d)=>{this.colorGridsFragmentView.set("selectedColor",d),this.colorPickerFragmentView.set("selectedColor",d)}),this.colorGridsFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.colorPickerFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class Fz{editor;_components=new Map;constructor(e){this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(qp(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new P("componentfactory-item-missing",this,{name:e});return this._components.get(qp(e)).callback(this.editor.locale)}has(e){return this._components.has(qp(e))}}function qp(n){return String(n).toLowerCase()}const ck="ck-tooltip";class Rn extends vi(){tooltipTextView;balloonPanelView;static defaultBalloonPositions=li.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(e){if(super(),Rn._editors.add(e),Rn._instance)return Rn._instance;Rn._instance=this,this.tooltipTextView=new me(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new li(e.locale),this.balloonPanelView.class=ck,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=$z(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Bo(this._pinTooltip,600),this._unpinTooltipDebounced=Bo(this._unpinTooltip,400),this.listenTo(ue.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(ue.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ue.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ue.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ue.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ue.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Rn._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Rn._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Rn._instance=null)}static getPositioningFunctions(e){const t=Rn.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const i=Gp(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}i!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")?this._pinTooltip(i,Kp(i)):this._pinTooltipDebounced(i,Kp(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!Lo(t))return;const s=this.balloonPanelView.element,o=s&&(s===i||s.contains(i)),r=!o&&t===s;if(o){this._unpinTooltipDebounced.cancel();return}if(!r&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const a=Gp(t),l=Gp(i);(r||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:s}){this._unpinTooltip();const o=en(Rn._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[ck,s].filter(r=>r).join(" "),this.balloonPanelView.pin({target:e,positions:Rn.getPositioningFunctions(i)}),this._mutationObserver.attach(e);for(const r of Rn._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Rn._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=Kp(this._currentElementWithTooltip);if(!Js(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Rn.getPositioningFunctions(e.position)})}}function Gp(n){return Lo(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function Kp(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function $z(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var Uz=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const Hz=53,jz=10,zz=50,Wz=350,qz="Powered by";class Gz extends vi(){editor;_balloonView;_showBalloonThrottled;_lastFocusedEditableElement;constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=yc(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!t&&iD(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,s,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,s,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,t=this._balloonView=new li,i=US(e),s=new Kz(e.locale,i.label);t.content.add(s),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=Xz(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}const s=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));s.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=s[0]}}class Kz extends me{constructor(e,t){super(e);const i=new _s,s=this.bindTemplate;i.set({content:Uz,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:Hz+"px",height:jz+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:s.to(o=>o.preventDefault())}}]})}}function Xz(n,e){const t=US(n),i=t.side==="right"?Zz(e,t):Jz(e,t);return{target:e,positions:[i]}}function Zz(n,e){return $S(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function Jz(n,e){return $S(n,e,t=>t.left+e.horizontalOffset)}function $S(n,e,t){return(i,s)=>{const o=new Te(n);if(o.width<Wz||o.height<zz)return null;let r;e.position==="inside"?r=o.bottom-s.height:r=o.bottom-s.height/2,r-=e.verticalOffset;const a=t(o,s),c=i.clone().moveTo(a,r).getIntersection(s.clone().moveTo(a,r)).getVisible();return!c||c.getArea()<s.getArea()?null:{top:r,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function US(n){const e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:qz,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}const uk={POLITE:"polite",ASSERTIVE:"assertive"};class Yz{editor;view;constructor(e){this.editor=e,e.once("ready",()=>{for(const t of Object.values(uk))this.announce("",t)})}announce(e,t=uk.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new Qz(i.locale),i.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:o}=typeof t=="string"?{politeness:t}:t;let r=this.view.regionViews.find(a=>a.politeness===s);r||(r=new eW(i,s),this.view.regionViews.add(r)),r.announce({announcement:e,isUnsafeHTML:o})}}class Qz extends me{regionViews;constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class eW extends me{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;const i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}}class Ko extends Vo{constructor(e,t){super(e);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const zu=5,Zr={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(const t of n.menus){const i=e.path[0],s=i instanceof Ko&&i.children.first===t;t.isOpen=(e.path.includes(t)||s)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,s){const o=n.children.getIndex(i),r=i.isOpen,a=n.children.length,l=n.children.get((o+a+s)%a);i.isOpen=!1,r&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(s=>e.source.parentMenuView===s.parentMenuView&&e.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(n){au({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,s)=>{s||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},ro={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},tW={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-zu,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-zu,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+zu,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+zu,name:"wn"})},nW=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function iW(n){let e;return!("items"in n)||!n.items?e={items:Yi(nW),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function sW({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){const s=Yi(n);return dk(n,s,i),oW(n,s),dk(n,s,s.addItems),rW(n,s,t),HS(n,s),aW(s,e),s}function oW(n,e){const t=e.removeItems,i=[];e.items=e.items.filter(({menuId:s})=>t.includes(s)?(i.push(s),!1):!0),ll(e.items,s=>{s.groups=s.groups.filter(({groupId:o})=>t.includes(o)?(i.push(o),!1):!0);for(const o of s.groups)o.items=o.items.filter(r=>{const a=jS(r);return t.includes(a)?(i.push(a),!1):!0})});for(const s of t)i.includes(s)||Ue("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:s})}function dk(n,e,t){const i=[];if(t.length!=0){for(const s of t){const o=uW(s.position),r=dW(s.position);if(lW(s))if(!r)o==="start"?(e.items.unshift(s.menu),i.push(s)):o==="end"&&(e.items.push(s.menu),i.push(s));else{const a=e.items.findIndex(l=>l.menuId===r);a!=-1?o==="before"?(e.items.splice(a,0,s.menu),i.push(s)):o==="after"&&(e.items.splice(a+1,0,s.menu),i.push(s)):hk(e,s.menu,r,o)&&i.push(s)}else cW(s)?ll(e.items,a=>{if(a.menuId===r)o==="start"?(a.groups.unshift(s.group),i.push(s)):o==="end"&&(a.groups.push(s.group),i.push(s));else{const l=a.groups.findIndex(c=>c.groupId===r);l!==-1&&(o==="before"?(a.groups.splice(l,0,s.group),i.push(s)):o==="after"&&(a.groups.splice(l+1,0,s.group),i.push(s)))}}):hk(e,s.item,r,o)&&i.push(s)}for(const s of t)i.includes(s)||Ue("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:s})}}function hk(n,e,t,i){let s=!1;return ll(n.items,o=>{for(const{groupId:r,items:a}of o.groups){if(s)return;if(r===t)i==="start"?(a.unshift(e),s=!0):i==="end"&&(a.push(e),s=!0);else{const l=a.findIndex(c=>jS(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),s=!0):i==="after"&&(a.splice(l+1,0,e),s=!0))}}}),s}function rW(n,e,t){ll(e.items,i=>{for(const s of i.groups)s.items=s.items.filter(o=>{const r=typeof o=="string"&&!t.has(o);return r&&!e.isUsingDefaultConfig&&Ue("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Yi(i),componentName:o}),!r})})}function HS(n,e){const t=e.isUsingDefaultConfig;let i=!1;if(e.items=e.items.filter(s=>s.groups.length?!0:(Xp(n,s,t),!1)),!e.items.length){Xp(n,n,t);return}ll(e.items,s=>{s.groups=s.groups.filter(o=>o.items.length?!0:(i=!0,!1));for(const o of s.groups)o.items=o.items.filter(r=>zS(r)&&!r.groups.length?(Xp(n,r,t),i=!0,!1):!0)}),i&&HS(n,e)}function Xp(n,e,t){t||Ue("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function aW(n,e){const t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};ll(n.items,s=>{s.label in i&&(s.label=i[s.label])})}function ll(n,e){if(Array.isArray(n))for(const i of n)t(i);function t(i){e(i);for(const s of i.groups)for(const o of s.items)zS(o)&&t(o)}}function lW(n){return typeof n=="object"&&"menu"in n}function cW(n){return typeof n=="object"&&"group"in n}function uW(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function dW(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function jS(n){return typeof n=="string"?n:n.menuId}function zS(n){return typeof n=="object"&&"menuId"in n}class hW extends tt(){editor;componentFactory;focusTracker;tooltipManager;poweredBy;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;constructor(e){super();const t=e.editing.view;this.editor=e,this.componentFactory=new Fz(e),this.focusTracker=new tn,this.tooltipManager=new Rn(e),this.poweredBy=new Gz(e),this.ariaLiveAnnouncer=new Yz(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){const t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);const i=iW(this.editor.config.get("menuBar")||{});e.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(s,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(s,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const e=this.editor;let t;e.keystrokes.set("Alt+F10",(i,s)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();(!o||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let r=0;r<t.length;r++){const a=t.shift();if(t.push(a),a!==o&&this._focusFocusableCandidateToolbar(a)){o&&o.options.afterBlur&&o.options.afterBlur();break}}s()}),e.keystrokes.set("Esc",(i,s)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),s())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:i,options:s}=t;(Js(i.element)||s.beforeFocus)&&e.push(t)}return e.sort((t,i)=>fk(t)-fk(i)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),Js(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const t of e)this.focusTracker.add(t.element);e.on("add",(t,i)=>{this.focusTracker.add(i.element)}),e.on("remove",(t,i)=>{this.focusTracker.remove(i.element)})}}function fk(n){const{toolbarView:e,options:t}=n;let i=10;return Js(e.element)&&i--,t.isContextual&&i--,i}class fW extends me{body;menuBarView;constructor(e){super(e),this.body=new Qj(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class pW extends fW{top;main;_voiceLabelView;constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new gf;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}class mW extends me{name=null;_editingView;_editableElement;_hasExternalElement;constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(s){e.change(o=>{const r=e.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",r),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",r)})}function i(s){e.once("change:isRenderingInProgress",(o,r,a)=>{a?i(s):t(s)})}}}class gW extends mW{_options;constructor(e,t,i,s={}){super(e,t,i),this._options=s,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(t=>{const i=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){const e=this.locale.t,t=this._options.label,i=this._editableElement,s=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[s];if(typeof t=="function")return t(this);if(i){const o=i.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",s)}}class pk extends hS{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class Da extends tt(){constructor(e,t){super(),t&&bT(this,t),e&&this.set(e)}}const Wu=ou("px");class Rc extends H{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.positionLimiter=()=>{const t=this.editor.editing.view,s=t.document.selection.editableElement;return s?t.domConverter.mapViewToDom(s.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new P("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new P("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new P("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new li(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new bW(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new vW(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}}class bW extends me{focusTracker;buttonPrevView;buttonNextView;content;constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new tn,this.buttonPrevView=this._createButtonView(t("Previous"),he.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),he.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new Ne(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class vW extends me{content;_balloonPanelView;constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:i.to("top",Wu),left:i.to("left",Wu),width:i.to("width",Wu),height:i.to("height",Wu)}},children:this.content}),this.on("change:numberOfPanels",(s,o,r,a)=>{r>a?this._addPanels(r-a):this._removePanels(a-r),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new me;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:s}=new Te(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:s})}}}const Jr=ou("px");class wW extends me{content;contentPanelElement;_contentPanelPlaceholder;constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?Jr(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new ti({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?Jr(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&Jr(i)),bottom:t.to("_stickyBottomOffset",i=>i&&Jr(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(ue.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Te(this.limiterElement);let t=e.getVisible();if(t){const i=new Te(ue.window);i.top+=this.viewportTopOffset,i.height-=this.viewportTopOffset,t=t.getIntersection(i)}if(t&&e.top<t.top){const i=t.top;if(i+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){const s=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-s>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(s):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Jr(-ue.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Jr(-ue.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Te(this.contentPanelElement)}}class _W extends Va{arrowView;constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new _s;return e.content=bf,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class yW extends me{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}class Ei extends me{buttonView;panelView;focusTracker;keystrokes;constructor(e){super(e);const t=this.bindTemplate;this.buttonView=new _W(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new yW(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new gn,this.focusTracker=new tn,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",i=>!i),t.if("parentMenuView","ck-menu-bar__menu_top-level",i=>!i)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),ro.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(ro.openOnButtonClick(this),ro.openOnArrowRightKey(this),ro.closeOnArrowLeftKey(this),ro.openAndFocusOnEnterKeyPress(this),ro.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),ro.openAndFocusPanelOnArrowDownKey(this),ro.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,i)=>{if(!i)return;const s=Ei._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:i,northWest:s,westSouth:o,eastSouth:r,westNorth:a,eastNorth:l}=tW;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[r,l,o,a]:[e,t,i,s]:this.parentMenuView?[o,a,r,l]:[t,e,s,i]}static _getOptimalPosition=G1}class Do extends pb{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const i=mk(t);return i&&i.isToggleable});this.items.forEach(t=>{const i=mk(t);i&&(i.hasCheckSpace=e)})}}function mk(n){return n instanceof Vo?n.children.map(e=>kW(e)?e.buttonView:e).find(e=>e instanceof Va):null}function kW(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof Ne}class WS extends ez{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const gk=["mouseenter","arrowleft","arrowright","change:isOpen"];class CW extends me{children;menus=[];constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,i=[]){const s=this.locale,r=sW({normalizedConfig:e,locale:s,componentFactory:t,extraItems:i}).items.map(a=>this._createMenu({componentFactory:t,menuDefinition:a}));this.children.addMany(r)}render(){super.render(),Zr.toggleMenusAndFocusItemsOnHover(this),Zr.closeMenusWhenTheBarCloses(this),Zr.closeMenuWhenAnotherOnTheSameLevelOpens(this),Zr.focusCycleMenusOnArrows(this),Zr.closeOnClickOutside(this),Zr.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...gk).to(t),e.parentMenuView=t):e.delegate(...gk).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){const s=this.locale,o=new Ei(s);return this.registerMenu(o,i),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{const r=new Do(s);r.ariaLabel=t.label,o.panelView.children.add(r),r.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){const s=this.locale,o=[];for(const r of e.groups){for(const a of r.items){const l=new Ko(s,t);if(pt(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{const c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}o.push(l)}r!==e.groups[e.groups.length-1]&&o.push(new fb(s))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){const s=i.create(e);return s instanceof Ei||s instanceof nn||s instanceof WS?(this._registerMenuTree(s,t),s.on("execute",()=>{this.close()}),s):(Ue("menu-bar-component-unsupported",{componentName:e,componentView:s}),null)}_registerMenuTree(e,t){if(!(e instanceof Ei)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);const i=e.panelView.children.filter(o=>o instanceof Do)[0];if(!i){e.delegate("mouseenter").to(t);return}const s=i.items.filter(o=>o instanceof Vo);for(const o of s)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,s)=>{clearTimeout(e),s?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bb=["left","right","center","justify"];function qS(n){return bb.includes(n)}function GS(n,e){return e.contentLanguageDirection=="rtl"?n==="right":n==="left"}function KS(n){const e=n.map(i=>{let s;return typeof i=="string"?s={name:i}:s=i,s}).filter(i=>{const s=bb.includes(i.name);return s||Ue("alignment-config-name-not-recognized",{option:i}),s}),t=e.filter(i=>!!i.className).length;if(t&&t<e.length)throw new P("alignment-config-classnames-are-missing",{configuredOptions:n});return e.forEach((i,s,o)=>{const r=o.slice(s+1);if(r.some(l=>l.name==i.name))throw new P("alignment-config-name-already-defined",{option:i,configuredOptions:n});if(i.className&&r.some(c=>c.className==i.className))throw new P("alignment-config-classname-already-defined",{option:i,configuredOptions:n})}),e}const vb="alignment";class EW extends Ze{refresh(){const t=this.editor.locale,i=en(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,i=t.locale,s=t.model,o=s.document,r=e.value;s.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");GS(r,i)||c===r||!r?xW(l,a):TW(l,a,r)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,vb)}}function xW(n,e){for(const t of n)e.removeAttribute(vb,t)}function TW(n,e,t){for(const i of n)e.setAttribute(vb,t,i)}class SW extends H{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("alignment",{options:bb.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,i=e.model.schema,o=KS(e.config.get("alignment.options")).filter(c=>qS(c.name)&&!GS(c.name,t)),r=o.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(OW(o)):e.conversion.for("downcast").attributeToAttribute(IW(o));const a=AW(o);for(const c of a)e.conversion.for("upcast").attributeToAttribute(c);const l=PW(o);for(const c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new EW(e))}}function IW(n){const e={};for(const{name:i}of n)e[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}function AW(n){const e=[];for(const{name:t}of n)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function PW(n){const e=[];for(const{name:t}of n)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function OW(n){const e={};for(const i of n)e[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}const El=new Map([["left",he.alignLeft],["right",he.alignRight],["center",he.alignCenter],["justify",he.alignJustify]]);class MW extends H{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=KS(e.config.get("alignment.options"));t.map(i=>i.name).filter(qS).forEach(i=>this._addButton(i)),this._addToolbarDropdown(t),this._addMenuBarMenu(t)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,i=>this._createButton(i,e))}_createButton(e,t,i={}){const s=this.editor,o=s.commands.get("alignment"),r=new Ne(e);return r.set({label:this.localizedOptionTitles[t],icon:El.get(t),tooltip:!0,isToggleable:!0,...i}),r.bind("isEnabled").to(o),r.bind("isOn").to(o,"value",a=>a===t),this.listenTo(r,"execute",()=>{s.execute("alignment",{value:t}),s.editing.view.focus()}),r}_addToolbarDropdown(e){const t=this.editor;t.ui.componentFactory.add("alignment",s=>{const o=es(s),r=s.uiLanguageDirection==="rtl"?"w":"e",a=s.t;wf(o,()=>e.map(u=>this._createButton(s,u.name,{tooltipPosition:r})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),o.buttonView.set({label:a("Text alignment"),tooltip:!0}),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=s.contentLanguageDirection==="rtl"?El.get("right"):El.get("left"),c=t.commands.get("alignment");return o.buttonView.bind("icon").to(c,"value",u=>El.get(u)||l),o.bind("isEnabled").to(c,"isEnabled"),this.listenTo(o,"execute",()=>{t.editing.view.focus()}),o})}_addMenuBarMenu(e){const t=this.editor;t.ui.componentFactory.add("menuBar:alignment",i=>{const s=t.commands.get("alignment"),o=i.t,r=new Ei(i),a=new Do(i);r.bind("isEnabled").to(s),a.set({ariaLabel:o("Text alignment"),role:"menu"}),r.buttonView.set({label:o("Text alignment")});for(const l of e){const c=new Ko(i,r),u=new nn(i);u.delegate("execute").to(r),u.set({label:this.localizedOptionTitles[l.name],icon:El.get(l.name),role:"menuitemcheckbox",isToggleable:!0}),u.on("execute",()=>{t.execute("alignment",{value:l.name}),t.editing.view.focus()}),u.bind("isOn").to(s,"value",d=>d===l.name),u.bind("isEnabled").to(s,"isEnabled"),c.children.add(u),a.items.add(c)}return r.panelView.children.add(a),r})}}class XS extends H{static get requires(){return[SW,MW]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZS{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(e,t=20){this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}class RW extends Ze{_buffer;constructor(e,t){super(e),this._buffer=new ZS(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,s=e.text||"",o=s.length;let r=i.selection;if(e.selection?r=e.selection:e.range&&(r=t.createSelection(e.range)),!t.canEditAt(r))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();const c=Array.from(i.selection.getAttributes());t.deleteContent(r),s&&t.insertContent(l.createText(s,c),r),a?l.setSelection(a):r.is("documentSelection")||l.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}const JS=["insertText","insertReplacementText"],BW=[...JS,"insertCompositionText"];class LW extends ws{focusObserver;constructor(e){super(e),this.focusObserver=e.getObserver(ih);const t=ke.isAndroid?BW:JS,i=e.document;i.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{data:r,targetRanges:a,inputType:l,domEvent:c}=o;if(!t.includes(l))return;this.focusObserver.flush();const u=new Zs(i,"insertText");i.fire(u,new La(e,c,{text:r,selection:e.createSelection(a)})),u.stop.called&&s.stop()}),ke.isAndroid||i.on("compositionend",(s,{data:o,domEvent:r})=>{this.isEnabled&&o&&i.fire("insertText",new La(e,r,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}}class YS extends H{_compositionQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.editing.mapper,o=t.document.selection;this._compositionQueue=new NW(e),i.addObserver(LW);const r=new RW(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",r),e.commands.add("input",r),this.listenTo(i.document,"insertText",(a,l)=>{i.document.isComposing||l.preventDefault(),ke.isAndroid&&i.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:c,selection:u}=l;let d;u?d=Array.from(u.getRanges()).map(p=>s.toModelRange(p)):d=Array.from(o.getRanges());let h=c;if(ke.isAndroid){const p=Array.from(d[0].getItems()).reduce((g,y)=>g+(y.is("$textProxy")?y.data:""),"");if(p&&(p.length<=h.length?h.startsWith(p)&&(h=h.substring(p.length),d[0].start=d[0].start.getShiftedBy(p.length)):p.startsWith(h)&&(d[0].start=d[0].start.getShiftedBy(h.length),h="")),h.length==0&&d[0].isCollapsed)return}const f={text:h,selection:t.createSelection(d)};ke.isAndroid&&i.document.isComposing?this._compositionQueue.push(f):(e.execute("insertText",f),i.scrollToTheSelection())}),ke.isAndroid?this.listenTo(i.document,"keydown",(a,l)=>{o.isCollapsed||l.keyCode!=229||!i.document.isComposing||bk(t,r)}):this.listenTo(i.document,"compositionstart",()=>{o.isCollapsed||bk(t,r)}),ke.isAndroid?(this.listenTo(i.document,"mutations",(a,{mutations:l})=>{if(i.document.isComposing)for(const{node:c}of l){const u=DW(c,s),d=s.toModelElement(u);if(this._compositionQueue.isComposedElement(d)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(i.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(i.document,"compositionend",()=>{const a=[];for(const l of this._compositionQueue.flushComposedElements()){const c=s.toViewElement(l);c&&a.push({type:"children",node:c})}a.length&&i.document.fire("mutations",{mutations:a})},{priority:"lowest"})):this.listenTo(i.document,"compositionend",()=>{i.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class NW{editor;flushDebounced=Bo(()=>this.flush("timeout"),50);_queue=[];_compositionElements=new Set;constructor(e){this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){const t={text:e.text};if(e.selection){t.selectionRanges=[];for(const i of e.selection.getRanges())t.selectionRanges.push(Vn.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const i=e.selectionRanges.map(s=>VW(s)).filter(s=>!!s);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){const t=this.editor,i=t.model,s=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const r=t.commands.get("insertText").buffer;i.enqueueChange(r.batch,()=>{for(r.lock();this._queue.length;){const a=this.shift();t.execute("insertText",a)}r.unlock()}),s.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){const e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}}function bk(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function VW(n){const e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function DW(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}class vk extends Ze{direction;_buffer;constructor(e,t){super(e),this.direction=t,this._buffer=new ZS(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(e.selection||i.selection);if(!t.canEditAt(o))return;const r=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,r)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=lg(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s),r=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(r,o),e.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),o=i.schema.getLimitElement(s),r=o.getChild(0);return!(s.parent!=r||!e.containsEntireContent(r)||!i.schema.checkChild(o,"paragraph")||r.name=="paragraph")}}const FW="character",wk="word",$W="codePoint",To="selection",da="backward",Dl="forward",QS={deleteContent:{unit:To,direction:da},deleteContentBackward:{unit:$W,direction:da},deleteWordBackward:{unit:wk,direction:da},deleteHardLineBackward:{unit:To,direction:da},deleteSoftLineBackward:{unit:To,direction:da},deleteContentForward:{unit:FW,direction:Dl},deleteWordForward:{unit:wk,direction:Dl},deleteHardLineForward:{unit:To,direction:Dl},deleteSoftLineForward:{unit:To,direction:Dl}};class UW extends ws{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:l}=o,c=QS[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:i};u.unit==To&&(u.selectionToRemove=e.createSelection(r[0])),l==="deleteContentBackward"&&(ke.isAndroid&&(u.sequence=1),jW(r)&&(u.unit=To,u.selectionToRemove=e.createSelection(r)));const d=new rl(t,"delete",r[0]);t.fire(d,new La(e,a,u)),d.stop.called&&s.stop()}),ke.isBlink&&HW(this)}observe(){}stopObserving(){}}function HW(n){const e=n.view,t=e.document;let i=null,s=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,s=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=t.selection,d=n.isEnabled&&l==i&&o(l)&&!u.isCollapsed&&!s;if(i=null,d){const h=u.getFirstRange(),f=new rl(t,"delete",h),p={unit:To,direction:r(l),selectionToRemove:u};t.fire(f,new La(e,c,p))}}),t.on("beforeinput",(a,{inputType:l})=>{const c=QS[l];o(i)&&c&&c.direction==r(i)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==Re.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function o(a){return a==Re.backspace||a==Re.delete}function r(a){return a==Re.backspace?da:Dl}}function jW(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:i,item:s}of e){if(i.parent.is("$text")){const o=i.parent.data,r=i.offset;if(J1(o,r)||Y1(o,r)||g5(o,r))continue;t++}else(s.is("containerElement")||s.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class vs extends H{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.model.document;t.addObserver(UW),this._undoOnBackspace=!1;const o=new vk(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new vk(e,"backward")),this.listenTo(i,"delete",(r,a)=>{i.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:u,unit:d}=a,h=l==="forward"?"deleteForward":"delete",f={sequence:c};if(d=="selection"){const p=Array.from(u.getRanges()).map(g=>e.editing.mapper.toModelRange(g));f.selection=e.model.createSelection(p)}else f.unit=d;e.execute(h,f),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(r,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),r.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class zW extends H{static get requires(){return[YS,vs]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eI(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((s,{item:o})=>o.is("$text")||o.is("$textProxy")?s+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,n.end)}}class WW extends tt(){model;testCallback;_hasMatch;constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:s})=>{if(s){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,o=i.document.selection,r=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:l}=eI(r,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){const u=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}}class _k extends H{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",(r,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==Re.arrowright,c=a.keyCode==Re.arrowleft;if(!l&&!c)return;const u=s.contentLanguageDirection;let d=!1;u==="ltr"&&l||u==="rtl"&&c?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&r.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(r,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&yi(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Cs(s,t)?!1:yi(o,t)?(Tl(e),Cs(s,t)&&yi(o,t,!0)?xl(i,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(Tl(e),this._restoreGravity(),yi(o,t,!0)?xl(i,t):qu(i,t,o),!0):o.isAtStart?Cs(s,t)?(Tl(e),qu(i,t,o),!0):!1:!Cs(s,t)&&yi(o,t,!0)?(Tl(e),qu(i,t,o),!0):yk(o,t)?o.isAtEnd&&!Cs(s,t)&&yi(o,t)?(Tl(e),qu(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view.document;e.editing.view.addObserver(ff);let o=!1;this.listenTo(s,"mousedown",()=>{o=!0}),this.listenTo(s,"selectionChange",()=>{const r=this.attributes;if(!o||(o=!1,!i.isCollapsed)||!Cs(i,r))return;const a=i.getFirstPosition();yi(a,r)&&(a.isAtStart||yi(a,r,!0)?xl(t,r):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection,s=this.attributes;this.listenTo(t,"insertContent",()=>{const o=i.getFirstPosition();Cs(i,s)&&yi(o,s)&&xl(t,s)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view;let o=!1,r=!1;this.listenTo(s.document,"delete",(a,l)=>{o=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;const a=i.getFirstPosition();r=Cs(i,this.attributes)&&!yk(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,!r&&e.model.enqueueChange(()=>{const a=i.getFirstPosition();Cs(i,this.attributes)&&yi(a,this.attributes)&&(a.isAtStart||yi(a,this.attributes,!0)?xl(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Cs(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function qu(n,e,t){const i=t.nodeBefore;n.change(s=>{if(i){const o=[],r=n.schema.isObject(i)&&n.schema.isInline(i);for(const[a,l]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!r||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);s.setSelectionAttribute(o)}else s.removeSelectionAttribute(e)})}function xl(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function Tl(n){n.preventDefault()}function yk(n,e){const t=n.getShiftedBy(-1);return yi(t,e)}function yi(n,e,t=!1){const{nodeBefore:i,nodeAfter:s}=n;for(const o of e){const r=i?i.getAttribute(o):void 0,a=s?s.getAttribute(o):void 0;if(!(t&&(r===void 0||a===void 0))&&a!==r)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _f(n,e,t,i){return i.createRange(kk(n,e,t,!0,i),kk(n,e,t,!1,i))}function kk(n,e,t,i,s){let o=n.textNode||(i?n.nodeBefore:n.nodeAfter),r=null;for(;o&&o.getAttribute(e)==t;)r=o,o=i?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,i?"before":"after"):n}function qW(n,e,t,i){const s=n.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=_f(a.getFirstPosition(),e,a.getAttribute(e),n.model),u=n.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",t)&&!d.hasClass(i)&&(r.addClass(i,d),o.add(d),l=!0)}return l}),n.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const c of o.values())l.removeClass(i,c),o.delete(c)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ao(n,e,t,i){let s,o=null;typeof i=="function"?s=i:(o=n.commands.get(i),s=()=>{n.execute(i)}),n.model.document.on("change:data",(r,a)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const l=en(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||o&&o.value===!0)return;const h=d.getChild(0),f=n.model.createRangeOn(h);if(!f.containsRange(l)&&!l.end.isEqual(f.end))return;const p=t.exec(h.data.substr(0,l.end.offset));p&&n.model.enqueueChange(g=>{const y=g.createPositionAt(d,0),k=g.createPositionAt(d,p[0].length),v=new Vn(y,k);if(s({match:p})!==!1){g.remove(v);const w=n.model.document.selection.getFirstRange(),C=g.createRangeIn(d);d.isEmpty&&!C.isEqual(w)&&!C.containsRange(w,!0)&&g.remove(d)}v.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yr(n,e,t,i){let s,o;t instanceof RegExp?s=t:o=t,o=o||(r=>{let a;const l=[],c=[];for(;(a=s.exec(r))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":h,"3":f}=a;const p=d+h+f;u+=a[0].length-p.length;const g=[u,u+d.length],y=[u+d.length+h.length,u+d.length+h.length+f.length];l.push(g),l.push(y),c.push([u+d.length,u+d.length+h.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(r,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const h=c.focus,f=h.parent,{text:p,range:g}=GW(l.createRange(l.createPositionAt(f,0),h),l),y=o(p),k=Ck(g.start,y.format,l),v=Ck(g.start,y.remove,l);k.length&&v.length&&l.enqueueChange(b=>{if(i(b,k)!==!1){for(const C of v.reverse())b.remove(C);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function Ck(n,e,t){return e.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>t.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}function GW(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((s,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(t=e.createPositionAfter(o),""):s+o.data,""),range:e.createRange(t,n.end)}}class tI extends H{static get requires(){return[vs]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&ao(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&ao(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&ao(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&ao(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=Gu(this.editor,"bold");Yr(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Yr(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=Gu(this.editor,"italic");Yr(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Yr(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=Gu(this.editor,"code");Yr(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=Gu(this.editor,"strikethrough");Yr(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const i=t[7],s=new RegExp(`^(#{${i}})\\s$`);ao(this.editor,this,s,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&ao(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&ao(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&ao(this.editor,this,/^---$/,"horizontalLine")}}function Gu(n,e){return(t,i)=>{if(!n.commands.get(e).isEnabled)return!1;const o=n.model.schema.getValidRanges(i,e);for(const r of o)t.setAttribute(e,!0,r);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wb extends Ze{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(r=>{if(s.isCollapsed)o?r.setSelectionAttribute(this.attributeKey,!0):r.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const l of a)o?r.setAttribute(this.attributeKey,o,l):r.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const o of s.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}const Qr="bold";class KW extends H{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Qr}),e.model.schema.setAttributeProperties(Qr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Qr,view:"strong",upcastAlso:["b",i=>{const s=i.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Qr,new wb(e,Qr)),e.keystrokes.set("CTRL+B",Qr),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function _b({editor:n,commandName:e,plugin:t,icon:i,label:s,keystroke:o}){return r=>{const a=n.commands.get(e),l=new r(n.locale);return l.set({label:s,icon:i,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof nn?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}const Zp="bold";class XW extends H{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=_b({editor:e,commandName:Zp,plugin:this,icon:he.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(Zp,()=>i(Ne)),e.ui.componentFactory.add("menuBar:"+Zp,()=>i(nn))}}class nI extends H{static get requires(){return[KW,XW]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const ea="italic";class ZW extends H{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:ea}),e.model.schema.setAttributeProperties(ea,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ea,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(ea,new wb(e,ea)),e.keystrokes.set("CTRL+I",ea),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}var JW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const Jp="italic";class YW extends H{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=_b({editor:e,commandName:Jp,plugin:this,icon:JW,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(Jp,()=>i(Ne)),e.ui.componentFactory.add("menuBar:"+Jp,()=>i(nn))}}class iI extends H{static get requires(){return[ZW,YW]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const Sl="underline";class QW extends H{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Sl}),e.model.schema.setAttributeProperties(Sl,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Sl,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Sl,new wb(e,Sl)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}var eq='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const Yp="underline";class tq extends H{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=_b({editor:e,commandName:Yp,plugin:this,icon:eq,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(Yp,()=>i(Ne)),e.ui.componentFactory.add("menuBar:"+Yp,()=>i(nn))}}class sI extends H{static get requires(){return[QW,tq]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*oI(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class nq extends Ze{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,s=t.schema,o=i.isCollapsed,r=i.getFirstRange(),a=r.start.parent,l=r.end.parent;if(s.isLimit(a)||s.isLimit(l))return!o&&a==l&&t.deleteContent(i),!1;if(o){const c=oI(e.model.schema,i.getAttributes());return Ek(e,r.start),e.setSelectionAttribute(c),!0}else{const c=!(r.start.isAtStart&&r.end.isAtEnd),u=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(u)return Ek(e,i.focus),!0;e.setSelection(l,0)}}return!1}}function Ek(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}const iq={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class rI extends ws{constructor(e){super(e);const t=this.document;let i=!1;t.on("keydown",(s,o)=>{i=o.shiftKey}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;let r=o.inputType;ke.isSafari&&i&&r=="insertParagraph"&&(r="insertLineBreak");const a=o.domEvent,l=iq[r];if(!l)return;const c=new rl(t,"enter",o.targetRanges[0]);t.fire(c,new La(e,a,{isSoft:l.isSoft})),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}class yf extends H{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,s=this.editor.t;t.addObserver(rI),e.commands.add("enter",new nq(e)),this.listenTo(i,"enter",(o,r)=>{i.isComposing||r.preventDefault(),!r.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class sq extends Ze{execute(){const e=this.editor.model,t=e.document;e.change(i=>{rq(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=oq(e.schema,t.selection)}}function oq(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const i=e.getFirstRange(),s=i.start.parent,o=i.end.parent;return!((xg(s,n)||xg(o,n))&&s!==o)}function rq(n,e,t){const i=t.isCollapsed,s=t.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(i){const l=oI(n.schema,t.getAttributes());xk(n,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?xk(n,e,t.focus):l&&e.setSelection(r,0)}}function xk(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function xg(n,e){return n.is("rootElement")?!1:e.isLimit(n)||xg(n.parent,e)}class aI extends H{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,o=s.document,r=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),s.addObserver(rI),e.commands.add("shiftEnter",new sq(e)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aq extends Ze{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,o=Array.from(s.getSelectedBlocks()),r=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!r)this._removeQuote(a,o.filter(Ku));else{const l=o.filter(c=>Ku(c)||Sk(i,c));this._applyQuote(a,l)}})}_getValue(){const e=this.editor.model.document.selection,t=en(e.getSelectedBlocks());return!!(t&&Ku(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=en(e.getSelectedBlocks());return i?Sk(t,i):!1}_removeQuote(e,t){Tk(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){e.unwrap(i.start.parent);return}if(i.start.isAtStart){const o=e.createPositionBefore(i.start.parent);e.move(i,o);return}i.end.isAtEnd||e.split(i.end);const s=e.createPositionAfter(i.end.parent);e.move(i,s)})}_applyQuote(e,t){const i=[];Tk(e,t).reverse().forEach(s=>{let o=Ku(s.start);o||(o=e.createElement("blockQuote"),e.wrap(s,o)),i.push(o)}),i.reverse().reduce((s,o)=>s.nextSibling==o?(e.merge(e.createPositionAfter(s)),s):o)}}function Ku(n){return n.parent.name=="blockQuote"?n.parent:null}function Tk(n,e){let t,i=0;const s=[];for(;i<e.length;){const o=e[i],r=e[i+1];t||(t=n.createPositionBefore(o)),(!r||o.nextSibling!=r)&&(s.push(n.createRange(t,n.createPositionAfter(o))),t=null),i++}return s}function Sk(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}class lq extends H{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[yf,vs]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new aq(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(r=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return r.unwrap(c),!0;if(c.is("element")){const u=r.createRangeIn(c);for(const d of u.getItems())if(d.is("element","blockQuote")&&!t.checkChild(r.createPositionBefore(d),d))return r.unwrap(d),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0}return!1});const i=this.editor.editing.view.document,s=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",(r,a)=>{if(!s.isCollapsed||!o.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(r,a)=>{if(a.direction!="backward"||!s.isCollapsed||!o.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"})}}class cq extends H{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(nn);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("blockQuote"),o=new e(t.locale),r=i.t;return o.set({label:r("Block quote"),icon:he.quote,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value"),this.listenTo(o,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),o}}class lI extends H{static get requires(){return[lq,cq]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uq extends ot(){_stack=[];add(e,t){const i=this._stack,s=i[0];this._insertDescriptor(e);const o=i[0];s!==o&&!Qp(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}remove(e,t){const i=this._stack,s=i[0];this._removeDescriptor(e);const o=i[0];s!==o&&!Qp(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex(o=>o.id===e.id);if(Qp(e,t[i]))return;i>-1&&t.splice(i,1);let s=0;for(;t[s]&&dq(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex(s=>s.id===e);i>-1&&t.splice(i,1)}}function Qp(n,e){return n&&e&&n.priority==e.priority&&lh(n.classes)==lh(e.classes)}function dq(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:lh(n.classes)>lh(e.classes)}function lh(n){return Array.isArray(n)?n.sort().join(","):n}var hq='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const fq="ck-widget",Ik="ck-widget_selected";function Dt(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function yb(n,e,t={}){if(!n.is("containerElement"))throw new P("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(fq,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=wq,e.setCustomProperty("widgetLabel",[],n),t.label&&gq(n,t.label),t.hasSelectionHandle&&_q(n,e),cI(n,e),n}function pq(n,e,t){if(e.classes&&t.addClass(at(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function mq(n,e,t){if(e.classes&&t.removeClass(at(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function cI(n,e,t=pq,i=mq){const s=new uq;s.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});const o=(a,l,c)=>s.add(l,c),r=(a,l,c)=>s.remove(l,c);e.setCustomProperty("addHighlight",o,n),e.setCustomProperty("removeHighlight",r,n)}function gq(n,e){n.getCustomProperty("widgetLabel").push(e)}function bq(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function vq(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.setAttribute("role","textbox",n),e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,s,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(i,s,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),cI(n,e),n}function kb(n,e){const t=n.getSelectedElement();if(t){const i=po(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function wq(){return null}function _q(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),o=new _s;return o.set("content",hq),o.render(),s.appendChild(o.element),s});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}function Cb(n){const e=a=>{const{width:l,paddingLeft:c,paddingRight:u}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(u)||0)},t=n.parentElement;if(!t)return 0;let i=e(t);const s=5;let o=0,r=t;for(;isNaN(i);){if(r=r.parentElement,++o>s)return 0;i=e(r)}return i}function yq(n,e=new Te(n)){const t=Cb(n);return t?e.width/t*100:0}const Ss="widget-type-around";function er(n,e,t){return!!n&&Dt(n)&&!t.isInline(e)}function kq(n){return n.closest(".ck-widget__type-around__button")}function Cq(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Eq(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function po(n){return n.getAttribute(Ss)}var xq='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const uI=["before","after"],Tq=new DOMParser().parseFromString(xq,"image/svg+xml").firstChild,Ak="ck-widget__type-around_disabled";class Sq extends H{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[yf,vs]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,s,o)=>{t.change(r=>{for(const a of t.document.roots)o?r.removeClass(Ak,a):r.addClass(Ak,a)}),o||e.model.change(r=>{r.removeSelectionAttribute(Ss)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,s=i.editing.view,o=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,i,s){this.listenTo(e,t,(...o)=>{this.isEnabled&&i(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const i=this.editor.model.document.selection,s=po(i);if(!s)return!1;const o=i.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,r,a)=>{const l=a.mapper.toViewElement(r.item);l&&er(l,r.item,t)&&(Iq(a.writer,s,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,s=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Dt,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Ss)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=i.getSelectedElement();if(a){const l=e.editing.mapper.toViewElement(a);if(er(l,a,s))return}e.model.change(l=>{l.removeSelectionAttribute(Ss)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const u=c.writer;if(this._currentFakeCaretModelElement){const p=c.mapper.toViewElement(this._currentFakeCaretModelElement);p&&(u.removeClass(uI.map(r),p),this._currentFakeCaretModelElement=null)}const d=l.selection.getSelectedElement();if(!d)return;const h=c.mapper.toViewElement(d);if(!er(h,d,s))return;const f=po(l.selection);f&&(u.addClass(r(f),h),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(Ss)})});function r(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const i=this.editor,s=i.model,o=s.document.selection,r=s.schema,a=i.editing.view,l=t.keyCode,c=zV(l,i.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),d=i.editing.mapper.toModelElement(u);let h;er(u,d,r)?h=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed?h=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(h=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),h&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const i=this.editor.model,s=i.document.selection,o=po(s);return i.change(r=>{if(o){if(!(o===(e?"after":"before")))return r.removeSelectionAttribute(Ss),!0}else return r.setSelectionAttribute(Ss,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,s=i.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(r);return er(a,r,s)?(i.change(l=>{o._setSelectionOverElement(r),l.setSelectionAttribute(Ss,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,i=t.model,s=i.schema,o=t.editing.mapper,r=i.document.selection,a=e?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,l=o.toViewElement(a);return er(l,a,s)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Ss,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,s)=>{const o=kq(s.domTarget);if(!o)return;const r=Cq(o),a=Eq(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,r),s.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const r=t.getSelectedElement(),a=e.editing.mapper.toViewElement(r),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:er(a,r,l)&&(this._insertParagraph(r,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),s.stop())},{context:Dt})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=t.selection)},{priority:"high"}),ke.isAndroid?this._listenToIfEnabled(t,"keydown",(i,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,s=i.schema;this._listenToIfEnabled(t.document,"delete",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=po(i.document.selection);if(!a)return;const l=r.direction,c=i.document.selection.getSelectedElement(),u=a==="before",d=l=="forward";if(u===d)e.execute("delete",{selection:i.createSelection(c,"on")});else{const f=s.getNearestSelectionRange(i.createPositionAt(c,a),l);if(f)if(!f.isCollapsed)i.change(p=>{p.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const p=i.createSelection(f.start);if(i.modifySelection(p,{direction:l}),!p.focus.isEqual(f.start))i.change(g=>{g.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const g=Oq(s,f.start.parent);i.deleteContent(i.createSelection(g,"on"),{doNotAutoparagraph:!0})}}}r.preventDefault(),o.stop()},{context:Dt})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[o,r])=>{if(r&&!r.is("documentSelection"))return;const a=po(i);if(a)return s.stop(),t.change(l=>{const c=i.getSelectedElement(),u=t.createPositionAt(c,a),d=l.createSelection(u),h=t.insertContent(o,d);return l.setSelection(d),h})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,o)=>{const[,r,a={}]=o;if(r&&!r.is("documentSelection"))return;const l=po(i);l&&(a.findOptimalPosition=l,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;po(i)&&s.stop()},{priority:"high"})}}function Iq(n,e,t){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return Aq(o,e),Pq(o),o});n.insert(n.createPositionAt(t,"end"),i)}function Aq(n,e){for(const t of uI){const i=new ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(Tq,!0)]});n.appendChild(i.render())}}function Pq(n){const e=new ti({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function Oq(n,e){let t=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}function Mq(n){const e=n.model;return(t,i)=>{const s=i.keyCode==Re.arrowup,o=i.keyCode==Re.arrowdown,r=i.shiftKey,a=e.document.selection;if(!s&&!o)return;const l=o;if(r&&Lq(a,l))return;const c=Rq(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(r)return}(c.isCollapsed||Bq(n,c,l))&&(e.change(u=>{const d=l?c.end:c.start;if(r){const h=e.createSelection(a.anchor);h.setFocus(d),u.setSelection(h)}else u.setSelection(d)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function Rq(n,e,t){const i=n.model;if(t){const s=e.isCollapsed?e.focus:e.getLastPosition(),o=Pk(i,s,"forward");if(!o)return null;const r=i.createRange(s,o),a=Ok(i.schema,r,"backward");return a?i.createRange(s,a):null}else{const s=e.isCollapsed?e.focus:e.getFirstPosition(),o=Pk(i,s,"backward");if(!o)return null;const r=i.createRange(o,s),a=Ok(i.schema,r,"forward");return a?i.createRange(a,s):null}}function Pk(n,e,t){const i=n.schema,s=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of s.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return r;if(l==o&&i.isBlock(a))return null}return null}function Ok(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:s}of e.getWalker({direction:t}))if(n.checkChild(s,"$text"))return s;return null}function Bq(n,e,t){const i=n.model,s=n.view.domConverter;if(t){const c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}const o=n.mapper.toViewRange(e),r=s.viewRangeToDom(o),a=Te.getDomRangeRects(r);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function Lq(n,e){return!n.isCollapsed&&n.isBackward==e}class hu extends H{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[Sq,vs]}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,r,a)=>{const l=a.writer,c=r.selection;if(c.isCollapsed)return;const u=c.getSelectedElement();if(!u)return;const d=e.editing.mapper.toViewElement(u);Dt(d)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(d),{fake:!0,label:bq(d)})}),this.editor.editing.downcastDispatcher.on("selection",(o,r,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const l=a.writer,c=l.document.selection;let u=null;for(const d of c.getRanges())for(const h of d){const f=h.item;Dt(f)&&!Dq(f,u)&&(l.addClass(Ik,f),this._previouslySelected.add(f),u=f)}},{priority:"low"}),t.addObserver(ff),this.listenTo(i,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(i,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Dt,"$text"]}),this.listenTo(i,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(i,"arrowKey",Mq(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(o,r)=>{this._handleDelete(r.direction=="forward")&&(r.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(i,"tab",(o,r)=>{o.eventPhase=="atTarget"&&(r.shiftKey||this._selectFirstNestedEditable()&&(r.preventDefault(),o.stop()))},{context:Dt,priority:"low"}),this.listenTo(i,"tab",(o,r)=>{r.shiftKey&&this._selectAncestorWidget()&&(r.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(i,"keydown",(o,r)=>{r.keystroke==Re.esc&&this._selectAncestorWidget()&&(r.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:s("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:s("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:s("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:s("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:s("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:s("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const i=this.editor,s=i.editing.view,o=s.document;let r=t.target;if(!r)return;if(t.domEvent.detail>=3){this._selectBlockContent(r)&&t.preventDefault();return}if(!Dt(r)){const l=Nq(r);if(!l)return;if(Dt(l))r=l;else{const c=Vq(s,t);if(c&&Dt(c))r=c;else return}}ke.isAndroid&&t.preventDefault(),o.isFocused||s.focus();const a=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,i=t.model,s=t.editing.mapper,o=i.schema,r=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=Fq(s.toModelElement(r),i.schema);return a?(i.change(l=>{const c=o.isLimit(a)?null:$q(l.createPositionAfter(a),o),u=l.createPositionAt(a,0),d=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(u,d))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,s=this.editor.model,o=s.schema,r=s.document.selection,a=r.getSelectedElement(),l=m5(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&o.isObject(a)){const h=c?r.getLastPosition():r.getFirstPosition(),f=o.getNearestSelectionRange(h,c?"forward":"backward");f&&(s.change(p=>{p.setSelection(f)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed&&!t.shiftKey){const h=r.getFirstPosition(),f=r.getLastPosition(),p=h.nodeAfter,g=f.nodeBefore;(p&&o.isObject(p)||g&&o.isObject(g))&&(s.change(y=>{y.setSelection(c?f:h)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&o.isObject(d)){if(o.isInline(d)&&u)return;this._setSelectionOverElement(d),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,s=i.schema,o=i.document.selection.getSelectedElement();o&&s.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){const i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(o=>{let r=i.anchor.parent;for(;r.isEmpty;){const a=r;r=a.parent,o.remove(a)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,s=t.document.selection,o=t.createSelection(s);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(s))return null;const r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(Ik,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,i=this.editor.editing.view.document;for(const s of i.selection.getFirstRange().getItems())if(s.is("editableElement")){const o=e.editing.mapper.toModelElement(s);/* istanbul ignore next -- @preserve */if(!o)continue;const r=e.model.createPositionAt(o,0),a=e.model.schema.getNearestSelectionRange(r,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,s=e.editing.view.document.selection.getFirstPosition().parent,r=(s.is("$text")?s.parent:s).findAncestor(Dt);if(!r)return!1;const a=t.toModelElement(r);/* istanbul ignore next -- @preserve */return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}}function Nq(n){let e=n;for(;e;){if(e.is("editableElement")||Dt(e))return e;e=e.parent}return null}function Vq(n,e){const t=r5(e.domEvent);let i=null;if(t?i=n.domConverter.domRangeToView(t):i=n.createRange(n.createPositionAt(e.target,0)),!i)return null;const s=i.start;if(!s.parent)return null;let o=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?o=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(o=s.nodeAfter)),o.is("$text")?o.parent:o}function Dq(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function Fq(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function $q(n,e){const t=new Ds({startPosition:n});for(const{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}class Mk extends H{_toolbarDefinitions=new Map;_balloon;static get requires(){return[Rc]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{Uq(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:s,balloonClassName:o="ck-toolbar-container"}){if(!i.length){Ue("widget-toolbar-no-items",{toolbarId:e});return}const r=this.editor,a=r.t,l=new mb(r.locale);if(l.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new P("widget-toolbar-duplicated",this,{toolbarId:e});const c={view:l,getRelatedElement:s,balloonClassName:o,itemsConfig:i,initialized:!1};r.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const u=s(r.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const s of this._toolbarDefinitions.values()){const o=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const r=o.getAncestors().length;r>e&&(e=r,t=o,i=s)}}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?Rk(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:dI(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){const s=i.getRelatedElement(this.editor.editing.view.document.selection);Rk(this.editor,s)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function Rk(n,e){const t=n.plugins.get("ContextualBalloon"),i=dI(n,e);t.updatePosition(i)}function dI(n,e){const t=n.editing.view,i=li.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}function Uq(n){const e=n.getSelectedElement();return!!(e&&Dt(e))}class Hq extends tt(){_referenceCoordinates;_options;_originalWidth;_originalHeight;_originalWidthPercents;_aspectRatio;constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){const s=new Te(t);this.activeHandlePosition=Wq(e),this._referenceCoordinates=jq(t,qq(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=yq(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function jq(n,e){const t=new Te(n),i=e.split("-"),s={x:i[1]=="right"?t.right:t.left,y:i[0]=="bottom"?t.bottom:t.top};return s.x+=n.ownerDocument.defaultView.scrollX,s.y+=n.ownerDocument.defaultView.scrollY,s}function zq(n){return`ck-widget__resizer__handle-${n}`}function Wq(n){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(n.classList.contains(zq(t)))return t}function qq(n){const e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}class Gq extends me{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,s)=>i!==null&&s!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,s,o)=>e.unit==="px"?`${i}${s}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,s,o)=>s<50||o<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class Bk extends tt(){_state;_sizeView;_options;_viewResizerWrapper=null;_initialViewWidth;constructor(e){super(),this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(s=>{const o=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(r){const a=this.toDomElement(r);return e._appendHandles(a),e._appendSizeUI(a),a});s.insert(s.createPositionAt(t,"end"),o),s.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new Hq(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",d=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",d,this._options.viewElement)});const s=this._getHandleHost(),o=new Te(s),r=Math.round(o.width),a=Math.round(o.height),l=new Te(s);t.width=Math.round(l.width),t.height=Math.round(l.height),this.redraw(o),this.state.update({...t,handleHostWidth:r,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!Zq(t))return;const i=t.parentElement,s=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(i.isSameNode(s)){const l=e||new Te(s);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];kn(r,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i=Xq(e),s=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};s&&t.activeHandlePosition.endsWith("-right")&&(o.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),s&&(o.x*=2);let r=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(r/t.aspectRatio>a?"width":"height")=="width"?a=r/t.aspectRatio:r=a*t.aspectRatio,{width:Math.round(r),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*r*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const i of t)e.appendChild(new ti({tag:"div",attributes:{class:`ck-widget__resizer__handle ${Kq(i)}`}}).render())}_appendSizeUI(e){this._sizeView=new Gq,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function Kq(n){return`ck-widget__resizer__handle-${n}`}function Xq(n){return{x:n.pageX,y:n.pageY}}function Zq(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}class em extends H{_resizers=new Map;_observer;_redrawSelectedResizerThrottled;static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,t=ue.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(ff),this._observer=new(vi()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=yc(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,o]of this._resizers)s.isAttached()||(this._resizers.delete(s),o.destroy())},{priority:"lowest"}),this._observer.listenTo(ue.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{const s=i.getSelectedElement(),o=this.getResizerByViewElement(s)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new Bk(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const r=i.get("WidgetToolbarRepository");t.on("begin",()=>{r.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{r.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{r.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;Bk.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bc extends Dr{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(e){super(e);const t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(s){return(o,r)=>{r.preventDefault();const a=r.dropRange?[r.dropRange]:null,l=new Zs(t,s);t.fire(l,{dataTransfer:r.dataTransfer,method:o.name,targetRanges:a,target:r.target,domEvent:r.domEvent}),l.stop.called&&r.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",s={dataTransfer:new O5(t,{cacheFiles:i})};if(e.type=="drop"||e.type=="dragover"){const o=r5(e);s.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,s)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jq(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yq(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Lk=["figcaption","li"],Nk=["ol","ul"];function hI(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return`
`;let e="",t=null;for(const i of n.getChildren())e+=Qq(i,t)+hI(i),t=i;return e}function Qq(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||Nk.includes(n.name)&&Nk.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":Lk.includes(n.name)||Lk.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class fI extends H{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=s=>s.model.getSelectedContent(s.model.document.selection)){return this.editor.model.change(s=>{const o=s.model.document.selection;s.setSelection(t);const r=this._insertFakeMarkersIntoSelection(s,s.model.document.selection,e),a=i(s),l=this._removeFakeMarkersInsideElement(s,a);for(const[c,u]of Object.entries(r)){l[c]||=s.createRangeIn(a);for(const d of u)s.remove(d)}a.markers.clear();for(const[c,u]of Object.entries(l))a.markers.set(c,u);return s.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,t){const i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(s=>{const o=this._insertFakeMarkersElements(s,i),r=t(s),a=this._removeFakeMarkersInsideElement(s,r);for(const l of Object.values(o).flat())s.remove(l);for(const[l,c]of Object.entries(a))s.model.markers.has(l)||s.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return r})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const s=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),s?this._markersToCopy.set(e,s):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;const{allowedActions:s}=i;return s==="all"||s.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){const s=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,s)}_getCopyableMarkersFromSelection(e,t,i){const s=Array.from(t.getRanges()),o=new Set(s.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),r=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;const{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){const u=a.getRange();return s.some(d=>d.containsRange(u,!0))}return!0};return Array.from(o).filter(r).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,r])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:r}];if(this._isMarkerCopyable(o,t)){const a=this._getMarkerClipboardConfig(o),l=i.markers.has(o)&&i.markers.get(o).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:r}]}return[]})}_insertFakeMarkersElements(e,t){const i={},s=t.flatMap(o=>{const{start:r,end:a}=o.range;return[{position:r,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:r})=>o.isBefore(r)?1:-1);for(const{position:o,marker:r,type:a}of s){const l=e.createElement("$marker",{"data-name":r.name,"data-type":a});i[r.name]||(i[r.name]=[]),i[r.name].push(l),e.insert(l,o)}return i}_removeFakeMarkersInsideElement(e,t){const s=this._getAllFakeMarkersFromElement(e,t).reduce((o,r)=>{const a=r.markerElement&&e.createPositionBefore(r.markerElement);let l=o[r.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(r.name).duplicateOnPaste?o[this._getUniqueMarkerName(r.name)]=o[r.name]:c=!0,l=null),c||(o[r.name]={...l,[r.type]:a}),r.markerElement&&e.remove(r.markerElement),o},{});return WN(s,o=>new L(o.start||e.createPositionFromPath(t,[0]),o.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const i=Array.from(e.createRangeIn(t)).flatMap(({item:r})=>{if(!r.is("element","$marker"))return[];const a=r.getAttribute("data-name"),l=r.getAttribute("data-type");return[{markerElement:r,name:a,type:l}]}),s=[],o=[];for(const r of i)r.type==="end"&&(i.some(l=>l.name===r.name&&l.type==="start")||s.push({markerElement:null,name:r.name,type:"start"})),r.type==="start"&&(i.some(l=>l.name===r.name&&l.type==="end")||o.unshift({markerElement:null,name:r.name,type:"end"}));return[...s,...i,...o]}_getUniqueMarkerName(e){const t=e.split(":"),i=Ai().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}}class Xi extends H{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[fI]}init(){this.editor.editing.view.addObserver(Bc),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const o=s._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:i})})}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(r,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&r.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(r,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let d="";l.getData("text/html")?d=Yq(l.getData("text/html")):l.getData("text/plain")&&(d=Jq(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(d)}const u=new Zs(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&r.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(r,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(r.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(r,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,o=(r,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,r.name)};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{e.model.canEditAt(e.model.document.selection)?o(r,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(r,a)=>{const l=e.data.toView(a.content);s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",hI(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}const tm=ou("px");class eG extends me{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>tm(t)),top:e.to("top",t=>tm(t)),width:e.to("width",t=>tm(t))}}})}}class Xu extends H{removeDropMarkerDelayed=Z1(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=yc(e=>this._updateDropMarker(e),40);_reconvertMarkerThrottled=yc(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new eG;_domEmitter=new(vi());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,s,o,r){this.removeDropMarkerDelayed.cancel();const a=Vk(this.editor,e,t,i,s,o,r);/* istanbul ignore next -- @preserve */if(a){if(r&&r.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,i,s,o,r){const a=Vk(this.editor,e,t,i,s,o,r);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change(s=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const i=this.toDomElement(t);return i.append("",t.createElement("span"),""),i})}_updateDropTargetLine(e){const t=this.editor.editing,i=e.start.nodeBefore,s=e.start.nodeAfter,o=e.start.parent,r=i?t.mapper.toViewElement(i):null,a=r?t.view.domConverter.mapViewToDom(r):null,l=s?t.mapper.toViewElement(s):null,c=l?t.view.domConverter.mapViewToDom(l):null,u=t.mapper.toViewElement(o);if(!u)return;const d=t.view.domConverter.mapViewToDom(u),h=this._getScrollableRect(u),{scrollX:f,scrollY:p}=ue.window,g=a?new Te(a):null,y=c?new Te(c):null,k=new Te(d).excludeScrollbarsAndBorders(),v=g?g.bottom:k.top,b=y?y.top:k.bottom,w=ue.window.getComputedStyle(d),C=v<=b?(v+b)/2:b;if(h.top<C&&C<h.bottom){const E=k.left+parseFloat(w.paddingLeft),I=k.right-parseFloat(w.paddingRight),x=Math.max(E+f,h.left),_=Math.min(I+f,h.right);this._dropTargetLineView.set({isVisible:!0,left:x,top:C+p,width:_-x})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(e);i=nG(s),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const o=new Tt(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:o})}return new Te(i).excludeScrollbarsAndBorders()}}function Vk(n,e,t,i,s,o,r){const a=n.model,l=n.editing.mapper;let u=Dk(n,e);for(;u;){if(!o){if(a.schema.checkChild(u,"$text")){if(t){const d=t[0].start,h=l.toModelPosition(d);if(!r||Array.from(r.getItems()).every(p=>a.schema.checkChild(h,p))){if(a.schema.checkChild(h,"$text"))return a.createRange(h);if(d)return Zu(n,Dk(n,d.parent),i,s)}}}else if(a.schema.isInline(u))return Zu(n,u,i,s)}if(a.schema.isBlock(u))return Zu(n,u,i,s);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(p=>p.is("element")&&!tG(n,p));let h=0,f=d.length;if(f==0)return a.createRange(a.createPositionAt(u,"end"));for(;h<f-1;){const p=Math.floor((h+f)/2);pI(n,d[p],i,s)=="before"?f=p:h=p}return Zu(n,d[h],i,s)}u=u.parent}return null}function tG(n,e){const t=n.editing.mapper,i=n.editing.view.domConverter,s=t.toViewElement(e);if(!s)return!0;const o=i.mapViewToDom(s);return ue.window.getComputedStyle(o).float!="none"}function Zu(n,e,t,i){const s=n.model;return s.createRange(s.createPositionAt(e,pI(n,e,t,i)))}function pI(n,e,t,i){const s=n.editing.mapper,o=n.editing.view.domConverter,r=s.toViewElement(e),a=o.mapViewToDom(r),l=new Te(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function Dk(n,e){const t=n.editing.mapper,i=n.editing.view,s=t.toModelElement(e);if(s)return s;const o=i.createPositionBefore(e),r=t.findMappedViewAncestor(o);return t.toModelElement(r)}function nG(n){let e=n;do{e=e.parentElement;const t=ue.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}class iG extends H{_isBlockDragging=!1;_domEmitter=new(vi());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),ke.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(s,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(ue.document,"dragover",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(ue.document,"drop",(s,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(ue.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(s,o,r)=>{i.setAttribute("draggable",r?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,i=t.document.selection,s=this.editor.editing.view,o=Array.from(i.getSelectedBlocks()),r=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(r)),this._isBlockDragging=!0,s.focus(),s.getObserver(Bc).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,s=document.elementFromPoint(t,i),o=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||o.getObserver(Bc).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:s,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class sG extends H{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=Z1(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(vi());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Xi,hu,Xu,iG]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Bc),t.addObserver(ff),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,s,o)=>{o||this._finalizeDragging(!1)}),ke.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=e.plugins.get(Xu);this.listenTo(s,"dragstart",(r,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=Ai(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");const{dataTransfer:u,domTarget:d,domEvent:h}=a,{clientX:f}=h;this._updatePreview({dataTransfer:u,domTarget:d,clientX:f}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(r,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(ue.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(s,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(r,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:l,clientY:c}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),ke.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),r.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get(Xu);this.listenTo(i,"clipboardInput",(o,r)=>{if(r.method!="drop")return;const{clientX:a,clientY:l}=r.domEvent,c=s.getFinalDropRange(r.target,r.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=r.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),Fk(r.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),o.stop();return}r.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Xi);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=Fk(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(s,o)=>{if(ke.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=$k(o.target);if(ke.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){const a=i.selection.getSelectedElement();(!a||!Dt(a))&&(r=i.selection.editableElement)}r&&(t.change(a=>{a.setAttribute("draggable","true",r)}),this._draggableElement=e.editing.mapper.toModelElement(r))}),this.listenTo(i,"mouseup",()=>{ke.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,i=t.model;t.plugins.get(Xu).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(o=>{const r=i.createSelection(this._draggedRange);i.deleteContent(r,{doNotAutoparagraph:!0});const a=r.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,i=t.model,s=i.document.selection,o=e?$k(e):null;if(o){const c=t.editing.mapper.toModelElement(o);this._draggedRange=Vn.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const r=Array.from(s.getSelectedBlocks()),a=s.getFirstRange();if(r.length==0){this._draggedRange=Vn.fromRange(a);return}const l=mI(i,r);if(r.length>1)this._draggedRange=Vn.fromRange(l),this._blockMode=!0;else if(r.length==1){const c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=Vn.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){const s=this.editor.editing.view,o=s.document.selection.editableElement,r=s.domConverter.mapViewToDom(o),a=ue.window.getComputedStyle(r);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Ni(ue.document,"div",{style:"position: fixed; left: -999999px;"}),ue.document.body.appendChild(this._previewContainer));const l=new Te(r);if(r.contains(t))return;const c=parseFloat(a.paddingLeft),u=Ni(ue.document,"div");u.className="ck ck-content",u.style.width=a.width,u.style.paddingLeft=`${l.left-i+c}px`,ke.isiOS&&(u.style.backgroundColor="white"),s.domConverter.setContentOf(u,e.getData("text/html")),e.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function Fk(n){return ke.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function $k(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Dt);if(Dt(n))return n;const e=n.findAncestor(t=>Dt(t)||t.is("editableElement"));return Dt(e)?e:null}function mI(n,e){const t=e[0],i=e[e.length-1],s=t.getCommonAncestor(i),o=n.createPositionBefore(t),r=n.createPositionAfter(i);if(s&&s.is("element")&&!n.schema.isLimit(s)){const a=n.createRangeOn(s),l=o.isTouching(a.start),c=r.isTouching(a.end);if(l&&c)return mI(n,[s])}return n.createRange(o,r)}class oG extends H{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Xi]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=t.document.selection;i.addObserver(Bc),e.plugins.get(Xi).on("contentInsertion",(o,r)=>{rG(r.content,t)&&t.change(a=>{const l=Array.from(s.getAttributes()).filter(([u])=>t.schema.getAttributeProperties(u).isFormatting);s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0}),l.push(...s.getAttributes());const c=a.createRangeIn(r.content);for(const u of c.getItems())for(const d of l)t.schema.checkAttribute(u,d[0])&&a.setAttribute(d[0],d[1],u)})})}}function rG(n,e){let t=e.createRangeIn(n);if(n.childCount==1){const i=n.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(t=e.createRangeIn(i))}for(const i of t.getItems())if(!e.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(o=>e.schema.getAttributeProperties(o).isFormatting))return!1;return!0}class Eb extends H{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[fI,Xi,sG,oG]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ch(n){const e=n.t,t=n.config.get("codeBlock.languages");for(const i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function uh(n,e,t){const i={};for(const s of n)if(e==="class"){const o=s[e].split(" ").shift();i[o]=s[t]}else i[s[e]]=s[t];return i}function xb(n){return n.data.match(/^(\s*)/)[0]}function aG(n,e){const t=n.createDocumentFragment(),i=e.split(`
`),s=i.reduce((o,r,a)=>(o.push(r),a<i.length-1&&o.push(n.createElement("br")),o),[]);return n.appendChild(s,t),t}function Tg(n){const e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];const i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:s}of i){let o=s.is("$textProxy")?s.textNode:s;const r=o.parent;if(!r.is("element","codeBlock")||o.is("element","softBreak"))continue;for(;o.previousSibling&&!o.previousSibling.is("element","softBreak");)o=o.previousSibling;const a=o.is("$text")?o.startOffset+xb(o).length:o.startOffset,l=n.createPositionAt(r,a);t.every(c=>!c.isEqual(l))&&t.push(l)}return t}function gI(n){const e=en(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function Uk(n,e){return e.is("rootElement")||n.isLimit(e)?!1:n.checkChild(e.parent,"codeBlock")}function Hk(n,e,t,i){const s=uh(e,"language","label"),o=t.getAttribute("language");if(o in s){const r=s[o];return n(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",r)}return n(i==="enter"?"Entering code snippet":"Leaving code snippet")}function bI(n,e){for(n.textNode&&(n=e.createPositionBefore(n.textNode));n.nodeBefore&&!n.nodeBefore.is("element","softBreak");)n=e.createPositionBefore(n.nodeBefore);const t=n.nodeAfter;return t&&t.is("$text")?t:null}class lG extends Ze{_lastLanguage;constructor(e){super(e),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor,i=t.model,s=i.document.selection,r=ch(t)[0],a=Array.from(s.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,c=cG(e,this._lastLanguage,r.language);i.change(u=>{l?this._applyCodeBlock(u,a,c):this._removeCodeBlock(u,a)})}_getValue(){const e=this.editor.model.document.selection,t=en(e.getSelectedBlocks());return!!(t&&t.is("element","codeBlock"))?t.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=en(e.getSelectedBlocks());return i?Uk(t,i):!1}_applyCodeBlock(e,t,i){this._lastLanguage=i;const s=this.editor.model.schema,o=t.filter(r=>Uk(s,r));for(const r of o)e.rename(r,"codeBlock"),e.setAttribute("language",i,r),s.removeDisallowedAttributes([r],e),Array.from(r.getChildren()).filter(a=>!s.checkChild(r,a)).forEach(a=>e.remove(a));o.reverse().forEach((r,a)=>{const l=o[a+1];r.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(r)))})}_removeCodeBlock(e,t){const i=t.filter(s=>s.is("element","codeBlock"));for(const s of i){const o=e.createRangeOn(s);for(const r of Array.from(o.getItems()).reverse())if(r.is("element","softBreak")&&r.parent.is("element","codeBlock")){const{position:a}=e.split(e.createPositionBefore(r)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(r)}e.rename(s,"paragraph"),e.removeAttribute("language",s)}}}function cG(n,e,t){return n.language?n.language:n.usePreviousLanguageChoice&&e?e:t}class uG extends Ze{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(i=>{const s=Tg(t);for(const o of s){const r=i.createText(this._indentSequence);t.insertContent(r,o)}})}_checkEnabled(){return this._indentSequence?gI(this.editor.model.document.selection):!1}}class dG extends Ze{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(()=>{const i=Tg(t);for(const s of i){const o=jk(t,s,this._indentSequence);o&&t.deleteContent(t.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return gI(e.document.selection)?Tg(e).some(t=>jk(e,t,this._indentSequence)):!1}}function jk(n,e,t){const i=bI(e,n);if(!i)return null;const s=xb(i),o=s.lastIndexOf(t);if(o+t.length!==s.length||o===-1)return null;const{parent:r,startOffset:a}=i;return n.createRange(n.createPositionAt(r,a+o),n.createPositionAt(r,a+o+t.length))}function zk(n,e,t=!1){const i=uh(e,"language","class"),s=uh(e,"language","label");return(o,r,a)=>{const{writer:l,mapper:c,consumable:u}=a;if(!u.consume(r.item,"insert"))return;const d=r.item.getAttribute("language"),h=c.toViewPosition(n.createPositionBefore(r.item)),f={};t&&(f["data-language"]=s[d],f.spellcheck="false");const p=i[d]?{class:i[d]}:void 0,g=l.createContainerElement("code",p),y=l.createContainerElement("pre",f,g);l.insert(h,y),c.bindElements(r.item,g)}}function hG(n){return(e,t,i)=>{if(t.item.parent.name!=="codeBlock")return;const{writer:s,mapper:o,consumable:r}=i;if(!r.consume(t.item,"insert"))return;const a=o.toViewPosition(n.createPositionBefore(t.item));s.insert(a,s.createText(`
`))}}function fG(n,e){const t=uh(e,"class","language"),i=e[0].language;return(s,o,r)=>{const a=o.viewItem,l=a.parent;if(!l||!l.is("element","pre")||o.modelCursor.findAncestor("codeBlock"))return;const{consumable:c,writer:u}=r;if(!c.test(a,{name:!0}))return;const d=u.createElement("codeBlock"),h=[...a.getClassNames()];h.length||h.push("");for(const f of h){const p=t[f];if(p){u.setAttribute("language",p,d);break}}d.hasAttribute("language")||u.setAttribute("language",i,d),r.convertChildren(a,d),r.safeInsert(d,o.modelCursor)&&(c.consume(a,{name:!0}),r.updateConversionResult(d,o))}}function pG(){return(n,e,{consumable:t,writer:i})=>{let s=e.modelCursor;if(!t.test(e.viewItem)||!s.findAncestor("codeBlock"))return;t.consume(e.viewItem);const r=e.viewItem.data.split(`
`).map(l=>i.createText(l)),a=r[r.length-1];for(const l of r)if(i.insert(l,s),s=s.getShiftedBy(l.offsetSize),l!==a){const c=i.createElement("softBreak");i.insert(c,s),s=i.createPositionAfter(c)}e.modelRange=i.createRange(e.modelCursor,s),e.modelCursor=s}}function mG(){return(n,e,{consumable:t})=>{const i=e.viewItem;if(i.findAncestor("pre"))return;const s=Array.from(i.getChildren()),o=s.find(r=>r.is("element","code"));if(o)for(const r of s)r===o||!r.is("$text")||t.consume(r,{name:!0})}}const vI="paragraph";class gG extends H{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[aI]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const e=this.editor,t=e.model.schema,i=e.model,s=e.editing.view,o=ch(e);e.commands.add("codeBlock",new lG(e)),e.commands.add("indentCodeBlock",new uG(e)),e.commands.add("outdentCodeBlock",new dG(e)),this.listenTo(s.document,"tab",(r,a)=>{const l=a.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(l).isEnabled&&(e.execute(l),a.stopPropagation(),a.preventDefault(),r.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((r,a)=>{const l=r.getItem(r.length-2);if(t.getAttributeProperties(a).isFormatting&&l&&l.name=="codeBlock")return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",zk(i,o,!0)),e.data.downcastDispatcher.on("insert:codeBlock",zk(i,o)),e.data.downcastDispatcher.on("insert:softBreak",hG(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",fG(s,o)),e.data.upcastDispatcher.on("text",pG()),e.data.upcastDispatcher.on("element:pre",mG(),{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(r,a)=>{let l=i.createRange(i.document.selection.anchor);if(a.targetRanges&&(l=e.editing.mapper.toModelRange(a.targetRanges[0])),!l.start.parent.is("element","codeBlock"))return;const c=a.dataTransfer.getData("text/plain"),u=new pf(e.editing.view.document);a.content=aG(u,c)}),e.plugins.has("ClipboardPipeline")&&e.plugins.get(Xi).on("contentInsertion",(r,a)=>{const l=e.model,c=l.document.selection;c.anchor.parent.is("element","codeBlock")&&l.change(u=>{const d=u.createRangeIn(a.content);for(const h of[...d.getItems()])h.is("node")&&!t.checkChild(c.anchor,h)&&u.remove(h)})}),this.listenTo(i,"getSelectedContent",(r,[a])=>{const l=a.anchor;a.isCollapsed||!l.parent.is("element","codeBlock")||!l.hasSameParentAs(a.focus)||i.change(c=>{const u=r.return;if(l.parent.is("element")&&(u.childCount>1||a.containsEntireContent(l.parent))){const h=c.createElement("codeBlock",l.parent.getAttributes());c.append(u,h);const f=c.createDocumentFragment();c.append(h,f),r.return=f;return}const d=u.getChild(0);t.checkAttribute(d,"code")&&c.setAttribute("code",!0,d)})})}afterInit(){const e=this.editor,t=e.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),s&&s.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(o,r)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!vG(e,r.isSoft)&&!wG(e,r.isSoft)&&bG(e),r.preventDefault(),o.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:e,ui:t,t:i}=this.editor,s=ch(this.editor);let o=null;e.document.selection.on("change:range",()=>{const r=e.document.selection.focus.parent;!t||o===r||!r.is("element")||(o&&o.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(Hk(i,s,o,"leave")),r.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(Hk(i,s,r,"enter")),o=r)})}}function bG(n){const e=n.model,t=e.document,i=t.selection.getLastPosition();let s;const o=bI(i,e);o&&o.is("$text")&&(s=xb(o)),n.model.change(r=>{n.execute("shiftEnter"),s&&r.insertText(s,t.selection.anchor)})}function vG(n,e){const i=n.model.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeAfter;return e||!i.selection.isCollapsed||!o.isAtStart||!ir(r)?!1:(n.model.change(a=>{n.execute("enter");const l=i.selection.anchor.parent.previousSibling;a.rename(l,vI),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(r)}),s.scrollToTheSelection(),!0)}function wG(n,e){const t=n.model,i=t.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeBefore;let a;if(e||!i.selection.isCollapsed||!o.isAtEnd||!r||!r.previousSibling)return!1;if(ir(r)&&ir(r.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling),t.createPositionAfter(r));else if(nm(r)&&ir(r.previousSibling)&&ir(r.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling),t.createPositionAfter(r));else if(nm(r)&&ir(r.previousSibling)&&nm(r.previousSibling.previousSibling)&&r.previousSibling.previousSibling&&ir(r.previousSibling.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling.previousSibling),t.createPositionAfter(r));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");const c=i.selection.anchor.parent;l.rename(c,vI),n.model.schema.removeDisallowedAttributes([c],l)}),s.scrollToTheSelection(),!0}function nm(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function ir(n){return n&&n.is("element","softBreak")}class _G extends H{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=e.ui.componentFactory,s=ch(e),o=this._getLanguageListItemDefinitions(s),r=e.commands.get("codeBlock");i.add("codeBlock",a=>{const l=es(a,vf),c=l.buttonView,u=t("Insert code block");return c.set({label:u,tooltip:!0,icon:he.codeBlock,isToggleable:!0}),c.bind("isOn").to(r,"value",d=>!!d),c.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),l.on("execute",d=>{e.execute("codeBlock",{language:d.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(r),uu(l,o,{role:"menu",ariaLabel:u}),l}),i.add("menuBar:codeBlock",a=>{const l=new Ei(a);l.buttonView.set({role:"menuitem",label:t("Code block"),icon:he.codeBlock}),l.bind("isEnabled").to(r);const c=new Do(a);c.set({ariaLabel:t("Insert code block")});for(const u of o){const d=new Ko(a,l),h=new nn(a);h.bind(...Object.keys(u.model)).to(u.model),h.set({isToggleable:!0,role:"menuitemcheckbox"}),h.delegate("execute").to(l),h.on("execute",()=>{e.execute("codeBlock",{language:u.model._codeBlockLanguage,forceValue:r.value!=u.model._codeBlockLanguage}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(e){const i=this.editor.commands.get("codeBlock"),s=new zn;for(const o of e){const r={type:"button",model:new Da({_codeBlockLanguage:o.language,label:o.label,role:"menuitemradio",withText:!0})};r.model.bind("isOn").to(i,"value",a=>a===r.model._codeBlockLanguage),s.add(r)}return s}}class wI extends H{static get requires(){return[gG,_G]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yG extends hW{view;_toolbarConfig;_elementReplacer;constructor(e,t){super(e),this.view=t,this._toolbarConfig=LS(e.config.get("toolbar")),this._elementReplacer=new EV,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,i=this.view,s=t.editing.view,o=i.editable,r=s.document.getRoot();o.name=r.rootName,i.render();const a=o.element;this.setEditableElement(o.name,a),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&this._initMenuBar(i.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),s=e.sourceElement;let o;const r=e.config.get("placeholder");r&&(o=typeof r=="string"?r:r[this.view.editable.name]),!o&&s&&s.tagName.toLowerCase()==="textarea"&&(o=s.getAttribute("placeholder")),o&&(i.placeholder=o),b5({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",s=>{const o=s.return;if(!o||!e.isSticky||!e.element)return;const r=new Te(e.element).height,a=typeof o.target=="function"?o.target():o.target,l=typeof o.limiter=="function"?o.limiter():o.limiter;if(a&&l&&new Te(a).height>=new Te(l).height-r)return;const c={...o.viewportOffsetConfig},u=(c.top||0)+r;s.return={...o,viewportOffsetConfig:{...c,top:u}}},{priority:"low"});const i=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",i),this.listenTo(this.editor.ui,"change:viewportOffset",i)}_handleScrollToTheSelectionWithStickyPanel(e,t,i){const s=this.view.stickyPanel;if(s.isSticky){const o=new Te(s.element).height;t.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(s,"change:isSticky",o),setTimeout(()=>{this.stopListening(s,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const i=t.view;i.on("moveTo",(s,o)=>{if(!e.isSticky||i.wasMoved)return;const r=new Te(e.contentPanelElement);o[1]<r.bottom+Mc.defaultOffset&&(o[1]=r.bottom+Mc.defaultOffset)},{priority:"high"})},{priority:"low"})}}class kG extends pW{stickyPanel;toolbar;editable;constructor(e,t,i={}){super(e),this.stickyPanel=new wW(e),this.toolbar=new mb(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new CW(e)),this.editable=new gW(e,t,void 0,{label:i.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class _I extends yg(gH){ui;constructor(e,t={}){if(!bd(e)&&t.initialData!==void 0)throw new P("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",CG(e)),bd(e)&&(this.sourceElement=e),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),o=new kG(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:s.isVisible,label:this.config.get("label")});this.ui=new yG(this,o),bH(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{const s=new this(e,t);i(s.initPlugins().then(()=>s.ui.init(bd(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function CG(n){return bd(n)?AV(n):n}function bd(n){return Lo(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EG extends Ze{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Wk(e.schema,i))do if(i=i.parent,!i)return;while(!Wk(e.schema,i));e.change(s=>{s.setSelection(i,"in")})}}function Wk(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}const xG=X1("Ctrl+A");class TG extends H{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,s=e.editing.view.document;e.commands.add("selectAll",new EG(e)),this.listenTo(s,"keydown",(o,r)=>{Ba(r)===xG&&(e.execute("selectAll"),r.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}var SG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class IG extends H{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(nn))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("selectAll"),o=new e(t.locale),r=i.t;return o.set({label:r("Select all"),icon:SG,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}}class AG extends H{static get requires(){return[TG,IG]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yI extends Ze{_stack=[];_createdBatches=new WeakSet;constructor(e){super(e),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]={...i[1]};const s=i[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const s=this.editor.model,o=s.document,r=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(const c of a){const u=c.filter(d=>d.root!=o.graveyard).filter(d=>!OG(d,l));u.length&&(PG(u),r.push(u[0]))}r.length&&s.change(c=>{c.setSelection(r,{backward:t})})}_undo(e,t){const i=this.editor.model,s=i.document;this._createdBatches.add(t);const o=e.operations.slice().filter(r=>r.isDocumentOperation);o.reverse();for(const r of o){const a=r.baseVersion+1,l=Array.from(s.history.getOperations(a)),u=Y$([r.getReversed()],l,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let d of u){const h=d.affectedSelectable;h&&!i.canEditAt(h)&&(d=new Yt(d.baseVersion)),t.addOperation(d),i.applyOperation(d),s.history.setOperationAsUndone(r,d)}}}}function PG(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function OG(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}class MG extends yI{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const o=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,o)}),this.fire("revert",i.batch,s),this.refresh()}}class RG extends yI{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}class BG extends H{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;this._undoCommand=new MG(e),this._redoCommand=new RG(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,s)=>{const o=s[0];if(!o.isDocumentOperation)return;const r=o.batch,a=this._redoCommand.createdBatches.has(r),l=this._undoCommand.createdBatches.has(r);this._batchRegistry.has(r)||(this._batchRegistry.add(r),r.isUndoable&&(a?this._undoCommand.addBatch(r):l||(this._undoCommand.addBatch(r),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,s,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class LG extends H{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?he.undo:he.redo,o=t.uiLanguageDirection=="ltr"?he.redo:he.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,i,s){const o=this.editor;o.ui.componentFactory.add(e,()=>{const r=this._createButton(Ne,e,t,i,s);return r.set({tooltip:!0}),r}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(nn,e,t,i,s))}_createButton(e,t,i,s,o){const r=this.editor,a=r.locale,l=r.commands.get(t),c=new e(a);return c.set({label:i,icon:o,keystroke:s}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{r.execute(t),r.editing.view.focus()}),c}}class Tb extends H{static get requires(){return[BG,LG]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kI extends H{static get requires(){return[Yj,Eb,yf,AG,aI,zW,Tb]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kf extends Ze{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.value,r=e.batch,a=l=>{if(s.isCollapsed)o?l.setSelectionAttribute(this.attributeKey,o):l.removeSelectionAttribute(this.attributeKey);else{const c=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const u of c)o?l.setAttribute(this.attributeKey,o,u):l.removeAttribute(this.attributeKey,u)}};r?t.enqueueChange(r,l=>{a(l)}):t.change(l=>{a(l)})}}const Kn="fontSize",Xn="fontFamily",us="fontColor",Rs="fontBackgroundColor";function CI(n,e){const t={model:{key:n,values:[]},view:{},upcastAlso:{}};for(const i of e)t.model.values.push(i.model),t.view[i.model]=i.view,i.upcastAlso&&(t.upcastAlso[i.model]=i.upcastAlso);return t}function EI(n){return e=>VG(e.getStyle(n))}function xI(n){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${n}:${e}`},{priority:7})}function NG({dropdownView:n,colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a}){const l=n.locale,c=new FS(l,{colors:e,columns:t,removeButtonLabel:i,colorPickerLabel:s,documentColorsLabel:o,documentColorsCount:r,colorPickerViewConfig:a});return n.colorSelectorView=c,n.panelView.children.add(c),c}function VG(n){return n.replace(/\s/g,"")}class DG extends kf{constructor(e){super(e,Xn)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function TI(n){return n.map(FG).filter(e=>e!==void 0)}function FG(n){if(typeof n=="object")return n;if(n==="default")return{title:"Default",model:void 0};if(typeof n=="string")return $G(n)}function $G(n){const e=n.replace(/"|'/g,"").split(","),t=e[0],i=e.map(UG).join(", ");return{title:t,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}function UG(n){return n=n.trim(),n.indexOf(" ")>0&&(n=`'${n}'`),n}class HG extends H{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(Xn,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Xn}),e.model.schema.setAttributeProperties(Xn,{isFormatting:!0,copyOnEnter:!0});const t=TI(e.config.get("fontFamily.options")).filter(s=>s.model),i=CI(Xn,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Xn,new DG(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Xn,view:(t,{writer:i})=>i.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Xn,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Xn,value:t=>t.getAttribute("face")}})}}var qk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class jG extends H{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Xn),o=t("Font Family"),r=zG(i,s);e.ui.componentFactory.add(Xn,a=>{const l=es(a);return uu(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:qk,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Xn}`,a=>{const l=new Ei(a);l.buttonView.set({label:o,icon:qk}),l.bind("isEnabled").to(s);const c=new Do(a);for(const u of r){const d=new Ko(a,l),h=new nn(a);h.set({role:"menuitemradio",isToggleable:!0}),h.bind(...Object.keys(u.model)).to(u.model),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t;return TI(e.config.get(Xn).options).map(s=>(s.title==="Default"&&(s.title=t("Default")),s))}}function zG(n,e){const t=new zn;for(const i of n){const s={type:"button",model:new Da({commandName:Xn,commandParam:i.model,label:i.title,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(e,"value",o=>o===i.model?!0:!o||!i.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===i.model.toLowerCase()),i.view&&typeof i.view!="string"&&i.view.styles&&s.model.set("labelStyle",`font-family: ${i.view.styles["font-family"]}`),t.add(s)}return t}class WG extends H{static get requires(){return[HG,jG]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class qG extends kf{constructor(e){super(e,Kn)}}function Sb(n){return n.map(e=>GG(e)).filter(e=>e!==void 0)}const Gk={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function GG(n){if(typeof n=="number"&&(n=String(n)),typeof n=="object"&&ZG(n))return Sg(n);const e=XG(n);if(e)return Sg(e);if(n==="default")return{model:void 0,title:"Default"};if(!JG(n))return KG(n)}function KG(n){return typeof n=="string"&&(n={title:n,model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},Sg(n)}function Sg(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}function XG(n){return typeof n=="string"?Gk[n]:Gk[n.model]}function ZG(n){return n.title&&n.model&&n.view}function JG(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new P("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}const Kk=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class YG extends H{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(Kn,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Kn}),e.model.schema.setAttributeProperties(Kn,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),i=Sb(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=CI(Kn,i);t?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(s),e.commands.add(Kn,new qG(e))}_prepareAnyValueConverters(e){const t=this.editor,i=e.model.values.filter(s=>!qU(String(s))&&!KU(String(s)));if(i.length)throw new P("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:Kn,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Kn,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Kn,value:t=>{const i=t.getAttribute("size"),s=i[0]==="-"||i[0]==="+";let o=parseInt(i,10);s&&(o=3+o);const r=Kk.length-1,a=Math.min(Math.max(o,0),r);return Kk[a]}}})}}var Xk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class QG extends H{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Kn),o=t("Font Size"),r=eK(i,s);e.ui.componentFactory.add(Kn,a=>{const l=es(a);return uu(l,r,{role:"menu",ariaLabel:o}),l.buttonView.set({label:o,icon:Xk,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(s),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Kn}`,a=>{const l=new Ei(a);l.buttonView.set({label:o,icon:Xk}),l.bind("isEnabled").to(s);const c=new Do(a);for(const u of r){const d=new Ko(a,l),h=new nn(a);h.set({role:"menuitemradio",isToggleable:!0}),h.bind(...Object.keys(u.model)).to(u.model),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Sb(e.config.get(Kn).options).map(o=>{const r=i[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function eK(n,e){const t=new zn;for(const i of n){const s={type:"button",model:new Da({commandName:Kn,commandParam:i.model,label:i.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};i.view&&typeof i.view!="string"&&(i.view.styles&&s.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view.classes&&s.model.set("class",`${s.model.class} ${i.view.classes}`)),s.model.bind("isOn").to(e,"value",o=>o===i.model),t.add(s)}return t}class tK extends H{static get requires(){return[YG,QG]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(e){return Sb(e)}}class nK extends kf{constructor(e){super(e,us)}}class iK extends H{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(us,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:us,value:EI("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:us,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:us,view:xI("color")}),e.commands.add(us,new nK(e)),e.model.schema.extend("$text",{allowAttributes:us}),e.model.schema.setAttributeProperties(us,{isFormatting:!0,copyOnEnter:!0})}}class SI extends H{commandName;componentName;icon;dropdownLabel;columns;constructor(e,{commandName:t,componentName:i,icon:s,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=i,this.icon=s,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,i=t.t,s=e.commands.get(this.commandName),o=e.config.get(this.componentName),r=sz(o.colors),a=iz(t,r),l=o.documentColors,c=o.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,u=>{const d=es(u);let h=!1;const f=NG({dropdownView:d,colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:c?o.colorPicker||{}:!1});return f.bind("selectedColor").to(s,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(s),f.on("execute",(p,g)=>{d.isOpen&&e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),g.source!=="colorPicker"&&e.editing.view.focus(),g.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),f.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),f.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(p,g,y)=>{h||(h=!0,d.colorSelectorView.appendUI()),y&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),gb(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(p=>p.isOn)),d}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,u=>{const d=new Ei(u);d.buttonView.set({label:this.dropdownLabel,icon:this.icon}),d.bind("isEnabled").to(s);let h=!1;const f=new FS(u,{colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),colorPickerLabel:i("Color picker"),documentColorsLabel:l!==0?i("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:!1});return f.bind("selectedColor").to(s,"value"),f.delegate("execute").to(d),f.on("execute",(p,g)=>{e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),e.editing.view.focus()}),d.on("change:isOpen",(p,g,y)=>{h||(h=!0,f.appendUI()),y&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),d.panelView.children.add(f),d})}}var sK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class oK extends SI{constructor(e){const t=e.locale.t;super(e,{commandName:us,componentName:us,icon:sK,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class rK extends H{static get requires(){return[iK,oK]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class aK extends kf{constructor(e){super(e,Rs)}}class lK extends H{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define(Rs,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(sH),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Rs,value:EI("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Rs,view:xI("background-color")}),e.commands.add(Rs,new aK(e)),e.model.schema.extend("$text",{allowAttributes:Rs}),e.model.schema.setAttributeProperties(Rs,{isFormatting:!0,copyOnEnter:!0})}}var cK='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class uK extends SI{constructor(e){const t=e.locale.t;super(e,{commandName:Rs,componentName:Rs,icon:cK,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class dK extends H{static get requires(){return[lK,uK]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}class II extends H{static get requires(){return[WG,tK,rK,dK]}static get pluginName(){return"Font"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hK extends Ze{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,i=en(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&Zk(i,e.schema)}execute(e={}){const t=this.editor.model,i=t.document,s=e.selection||i.selection;t.canEditAt(s)&&t.change(o=>{const r=s.getSelectedBlocks();for(const a of r)!a.is("element","paragraph")&&Zk(a,t.schema)&&o.rename(a,"paragraph")})}}function Zk(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}class fK extends Ze{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,i=e.attributes;let s=e.position;t.canEditAt(s)&&t.change(o=>{if(s=this._findPositionToInsertParagraph(s,o),!s)return;const r=o.createElement("paragraph");i&&t.schema.setAllowedAttributes(r,i,o),t.insertContent(r,s),o.setSelection(r,"in")})}_findPositionToInsertParagraph(e,t){const i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;const s=i.schema.findAllowedParent(e,"paragraph");if(!s)return null;const o=e.parent,r=i.schema.checkChild(o,"$text");return o.isEmpty||r&&e.isAtEnd?i.createPositionAfter(o):!o.isEmpty&&r&&e.isAtStart?i.createPositionBefore(o):t.split(e,s).position}}class fu extends H{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new hK(e)),e.commands.add("insertParagraph",new fK(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!fu.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pK extends Ze{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){const e=en(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>Jk(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,i=t.document,s=e.value;t.change(o=>{const r=Array.from(i.selection.getSelectedBlocks()).filter(a=>Jk(a,s,t.schema));for(const a of r)a.is("element",s)||o.rename(a,s)})}}function Jk(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}const Yk="paragraph";class mK extends H{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[fu]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const s of t)s.model!=="paragraph"&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new pK(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(s,o)=>{const r=e.model.document.selection.getFirstPosition().parent;i.some(l=>r.is("element",l.model))&&!r.is("element",Yk)&&r.childCount===0&&o.writer.rename(r,Yk)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Po.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gK(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{const s=t[i.title];return s&&s!=i.title&&(i.title=s),i})}class bK extends H{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=gK(e),s=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",r=>{const a={},l=new zn,c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c];for(const f of i){const p={type:"button",model:new Da({label:f.title,class:f.class,role:"menuitemradio",withText:!0})};f.model==="paragraph"?(p.model.bind("isOn").to(u,"value"),p.model.set("commandName","paragraph"),d.push(u)):(p.model.bind("isOn").to(c,"value",g=>g===f.model),p.model.set({commandName:"heading",commandValue:f.model})),l.add(p),a[f.model]=f.title}const h=es(r);return uu(h,l,{ariaLabel:o,role:"menu"}),h.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(d,"isEnabled",(...f)=>f.some(p=>p)),h.buttonView.bind("label").to(c,"value",u,"value",(f,p)=>{const g=p?"paragraph":f;return typeof g=="boolean"||!a[g]?s:a[g]}),h.buttonView.bind("ariaLabel").to(c,"value",u,"value",(f,p)=>{const g=p?"paragraph":f;return typeof g=="boolean"||!a[g]?o:`${a[g]}, ${o}`}),this.listenTo(h,"execute",f=>{const{commandName:p,commandValue:g}=f.source;e.execute(p,g?{value:g}:void 0),e.editing.view.focus()}),h}),e.ui.componentFactory.add("menuBar:heading",r=>{const a=new Ei(r),l=e.commands.get("heading"),c=e.commands.get("paragraph"),u=[l],d=new Do(r);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(d);for(const h of i){const f=new Ko(r,a),p=new nn(r);f.children.add(p),d.items.add(f),p.set({isToggleable:!0,label:h.title,role:"menuitemradio",class:h.class}),p.delegate("execute").to(a),p.on("execute",()=>{const g=h.model==="paragraph"?"paragraph":"heading";e.execute(g,{value:h.model}),e.editing.view.focus()}),h.model==="paragraph"?(p.bind("isOn").to(c,"value"),u.push(c)):p.bind("isOn").to(l,"value",g=>g===h.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),a})}}class AI extends H{static get requires(){return[mK,bK]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vK extends Ze{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=wK(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("horizontalLine");e.insertObject(i,null,null,{setSelection:"after"})})}}function wK(n,e,t){const i=_K(n,t);return e.checkChild(i,"horizontalLine")}function _K(n,e){const i=kb(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}class yK extends H{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:r})=>r.createEmptyElement("hr")}),s.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:r})=>{const a=i("Horizontal line"),l=r.createContainerElement("div",null,r.createEmptyElement("hr"));return r.addClass("ck-horizontal-line",l),r.setCustomProperty("hr",!0,l),kK(l,r,a)}}),s.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new vK(e))}}function kK(n,e,t){return e.setCustomProperty("horizontalLine",!0,n),yb(n,e,{label:t})}class CK extends H{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("horizontalLine",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(nn))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("horizontalLine"),o=new e(t.locale),r=i.t;return o.set({label:r("Horizontal line"),icon:he.horizontalLine}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("horizontalLine"),t.editing.view.focus()}),o}}class PI extends H{static get requires(){return[yK,CK,hu]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function EK(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function Qk(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function OI(n,e){const t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?i&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function Ib(n,e){const t=en(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function dh(n){return n&&n.endsWith("px")?parseInt(n):null}function hh(n){const e=dh(n.getStyle("width")),t=dh(n.getStyle("height"));return!!(e&&t)}const xK=/^(image|image-inline)$/;class Pn extends H{_domEmitter=new(vi());static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null,s={}){const o=this.editor,r=o.model,a=r.document.selection,l=MI(o,t||a,i);e={...Object.fromEntries(a.getAttributes()),...e};for(const c in e)r.schema.checkAttribute(l,c)||delete e[c];return r.change(c=>{const{setImageSizes:u=!0}=s,d=c.createElement(l,e);return r.insertObject(d,t,null,{setSelection:"on",findOptimalPosition:!t&&l!="imageInline"?"auto":void 0}),d.parent?(u&&this.setImageNaturalSizeAttributes(d),d):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(i=>{const s=new ue.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(i.batch,o=>{o.setAttribute("width",s.naturalWidth,e),o.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:xK})}isImageAllowed(){const t=this.editor.model.document.selection;return TK(this.editor,t)&&SK(t)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),yb(e,t,{label:()=>{const r=this.findViewImgElement(e).getAttribute("alt");return r?`${r} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Dt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function TK(n,e){if(MI(n,e,null)=="imageBlock"){const i=IK(e,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function SK(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function IK(n,e){const i=kb(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function MI(n,e,t){const i=n.model.schema,s=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":e.is("selection")?Ib(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const AK=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class RI extends H{static get requires(){return[Eb,Pn,Tb,vs]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const s=t.selection.getFirstRange(),o=Wt.fromPosition(s.start);o.stickiness="toPrevious";const r=Wt.fromPosition(s.end);r.stickiness="toNext",t.once("change:data",()=>{this._embedImageBetweenPositions(o,r),o.detach(),r.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(ue.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,t){const i=this.editor,s=new Vn(e,t),o=s.getWalker({ignoreElementEnd:!0}),r=Object.fromEntries(i.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let l="";for(const c of o)c.item.is("$textProxy")&&(l+=c.item.data);if(l=l.trim(),!l.match(AK)){s.detach();return}this._positionToInsert=Wt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!i.commands.get("insertImage").isEnabled){s.detach();return}i.model.change(d=>{this._timeoutId=null,d.remove(s),s.detach();let h;this._positionToInsert.root.rootName!=="$graveyard"&&(h=this._positionToInsert.toPosition()),a.insertImage({...r,src:l},h),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get("Delete").requestUndoOnBackspace()},100)}}class PK extends Ze{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=t.model,o=i.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",e.newValue,o)})}}class OK extends H{static get requires(){return[Pn]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new PK(this.editor))}}class MK extends me{focusTracker;keystrokes;labeledInput;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e){super(e);const t=this.locale.t;this.focusTracker=new tn,this.keystrokes=new gn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),he.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),he.cancel,"ck-button-cancel","cancel"),this._focusables=new wi,this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),lu({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,s){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createLabeledInputView(){const e=this.locale.t,t=new al(this.locale,du);return t.label=e("Text alternative"),t}}function RK(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const i=Ab(n);e.updatePosition(i)}}function Ab(n){const e=n.editing.view,t=li.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class BK extends H{_balloon;_form;static get requires(){return[Rc]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{const s=e.commands.get("imageTextAlternative"),o=new Ne(i);return o.set({label:t("Change image text alternative"),icon:he.textAlternative,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>!!r),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(mf(MK))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,r)=>{this._hideForm(!0),r()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(i.selection)?this._isVisible&&RK(e):this._hideForm(!0)}),au({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:Ab(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class BI extends H{static get requires(){return[OK,BK]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function LK(n){const e=(t,i,s)=>{if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const o=n.findViewImgElement(i.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,i.modelCursor),a=en(r.modelRange.getItems());if(!a){s.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i)};return t=>{t.on("element:figure",e)}}function LI(n,e){const t=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),l=n.findViewImgElement(a);s.attributeNewValue===null?(r.removeAttribute("srcset",l),r.removeAttribute("sizes",l)):s.attributeNewValue&&(r.setAttribute("srcset",s.attributeNewValue,l),r.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${e}`,t)}}function fh(n,e,t){const i=(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)};return s=>{s.on(`attribute:${t}:${e}`,i)}}class Pb extends ws{observe(e){this.listenTo(e,"load",(t,i)=>{const s=i.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}class NK extends Ze{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&Ue("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&Ue("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=at(e.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);s.insertImage({...r,...o},c,e.imageType)}else s.insertImage({...r,...o},null,e.imageType)})}}class VK extends Ze{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",e.source,t),this.cleanupImage(s,t),i.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}class NI extends H{static get requires(){return[Pn]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(Pb),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new NK(e),s=new VK(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",s),e.commands.add("imageInsert",i)}}class VI extends H{static get requires(){return[Pn]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:r=>hh(r)?dh(r.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:r=>hh(r)?dh(r.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(r=>{o(r,"width","width",!0),o(r,"height","height",!0)}),t.conversion.for("dataDowncast").add(r=>{o(r,"width","width",!1),o(r,"height","height",!1)});function o(r,a,l,c){r.on(`attribute:${a}:${e}`,(u,d,h)=>{if(!h.consumable.consume(d.item,u.name))return;const f=h.writer,p=h.mapper.toViewElement(d.item),g=i.findViewImgElement(p);if(d.attributeNewValue!==null?f.setAttribute(l,d.attributeNewValue,g):f.removeAttribute(l,g),d.item.hasAttribute("sources"))return;const y=d.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!y&&!c)return;const k=d.item.getAttribute("width"),v=d.item.getAttribute("height");k&&v&&f.setStyle("aspect-ratio",`${k}/${v}`,g)})}}}class DI extends Ze{_modelElementName;constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(i):this.isEnabled=t.isBlockImage(i)}execute(e={}){const t=this.editor,i=this.editor.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(i.document.selection),r=Object.fromEntries(o.getAttributes());return!r.src&&!r.uploadId?null:i.change(a=>{const{setImageSizes:l=!0}=e,c=Array.from(i.markers).filter(h=>h.getRange().containsItem(o)),u=s.insertImage(r,i.createSelection(o,"on"),this._modelElementName,{setImageSizes:l});if(!u)return null;const d=a.createRangeOn(u);for(const h of c){const f=h.getRange(),p=f.root.rootName!="$graveyard"?f.getJoined(d,!0):d;a.updateMarker(h,{range:p})}return{oldElement:o,newElement:u}})}}class FI extends H{static get requires(){return[Pn]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(o,r,a)=>{if(!a.consumable.test(r.item,o.name)||!r.item.is("element","imageBlock")&&!r.item.is("element","imageInline"))return;a.consumable.consume(r.item,o.name);const l=a.writer,c=a.mapper.toViewElement(r.item),u=i.findViewImgElement(c);r.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${r.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const e=this.editor,t=e.model,i=e.editing,s=i.view,o=e.plugins.get("ImageUtils");s.addObserver(Pb),this.listenTo(s.document,"imageLoaded",(r,a)=>{const l=s.domConverter.mapDomToView(a.target);if(!l)return;const c=o.getImageWidgetFromImageView(l);if(!c)return;const u=i.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}class $I extends H{static get requires(){return[NI,VI,Pn,FI,Xi]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new DI(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>Qk(r)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(Qk(r),r,t("image widget"))}),i.for("downcast").add(fh(s,"imageBlock","src")).add(fh(s,"imageBlock","alt")).add(LI(s,"imageBlock")),i.for("upcast").elementToElement({view:OI(e,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(LK(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isInlineImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Ib(t.schema,u)==="imageBlock"){const d=new pf(i.document),h=l.map(f=>d.createElement("figure",{class:"image"},f));a.content=d.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(u)})})}}class DK extends me{focusTracker;keystrokes;_focusables;_focusCycler;children;constructor(e,t=[]){super(e),this.focusTracker=new tn,this.keystrokes=new gn,this._focusables=new wi,this.children=this.createCollection(),this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const i of t)this.children.add(i),this._focusables.add(i),i instanceof nz&&this._focusables.addMany(i.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),lu({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class pu extends H{static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Pn]}dropdownView;_integrations=new Map;constructor(e){super(e),e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=i.isImage(t.getSelectedElement())});const s=r=>this._createToolbarComponent(r),o=r=>this._createMenuBarComponent(r);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:t,buttonViewCreator:i,formViewCreator:s,menuBarButtonViewCreator:o,requiresForm:r=!1}){this._integrations.has(e)&&Ue("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:i,menuBarButtonViewCreator:o,formViewCreator:s,requiresForm:r})}_createToolbarComponent(e){const t=this.editor,i=e.t,s=this._prepareIntegrations();if(!s.length)return null;let o;const r=s[0];if(s.length==1){if(!r.requiresForm)return r.buttonViewCreator(!0);o=r.buttonViewCreator(!0)}else{const c=r.buttonViewCreator(!1);o=new vf(e,c),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",u=>i(u?"Replace image":"Insert image"))}const a=this.dropdownView=es(e,o),l=s.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),a.once("change:isOpen",()=>{const c=s.map(({formViewCreator:d})=>d(s.length==1)),u=new DK(t.locale,c);a.panelView.children.add(u)}),a}_createMenuBarComponent(e){const t=e.t,i=this._prepareIntegrations();if(!i.length)return null;let s;const o=i[0];if(i.length==1)s=o.menuBarButtonViewCreator(!0);else{s=new Ei(e);const r=new Do(e);s.panelView.children.add(r),s.buttonView.set({icon:he.image,label:t("Image")});for(const a of i){const l=new Ko(e,s),c=a.menuBarButtonViewCreator(!1);l.children.add(c),r.items.add(l)}}return s}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),i=[];if(!t.length)return Ue("image-insert-integrations-not-specified"),i;for(const s of t){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||Ue("image-insert-unknown-integration",{item:s});continue}i.push(this._integrations.get(s))}return i.length||Ue("image-insert-integrations-not-registered"),i}}class FK extends H{static get requires(){return[$I,hu,BI,pu]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class $K extends H{static get requires(){return[NI,VI,Pn,FI,Xi]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new DI(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(EK(r),r,t("image widget"))}),i.for("downcast").add(fh(s,"imageInline","src")).add(fh(s,"imageInline","alt")).add(LI(s,"imageInline")),i.for("upcast").elementToElement({view:OI(e,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(r,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(s.isBlockImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();const u=t.createSelection(c);if(Ib(t.schema,u)==="imageInline"){const d=new pf(i.document),h=l.map(f=>f.childCount===1?(Array.from(f.getAttributes()).forEach(p=>d.setAttribute(...p,s.findViewImgElement(f))),f.getChild(0)):f);a.content=d.createDocumentFragment(h)}}),this.listenTo(o,"contentInsertion",(r,a)=>{a.method==="paste"&&t.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&s.setImageNaturalSizeAttributes(u)})})}}class UK extends H{static get requires(){return[$K,hu,BI,pu]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class HK extends H{static get requires(){return[FK,UK]}static get pluginName(){return"Image"}static get isOfficialPlugin(){return!0}}class UI extends H{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[Pn]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),i=e.getFirstPosition().findAncestor("caption");return i&&t.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}class jK extends Ze{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),i=e.plugins.get("ImageUtils");if(!e.plugins.has($I)){this.isEnabled=!1,this.value=!1;return}const s=e.model.document.selection,o=s.getSelectedElement();if(!o){const r=t.getCaptionFromModelSelection(s);this.isEnabled=!!r,this.value=!!r;return}this.isEnabled=i.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,t)})}_showImageCaption(e,t){const s=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),r=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const l=o._getSavedCaption(a);r.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const c=l||e.createElement("caption");e.append(c,a),t&&e.setSelection(c,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,s=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let r=i.getSelectedElement(),a;r?a=o.getCaptionFromImageModelElement(r):(a=o.getCaptionFromModelSelection(i),r=a.parent),s._saveCaption(r,a),e.setSelection(r,"on"),e.remove(a)}}class zK extends H{static get requires(){return[Pn,UI]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}_savedCaptionsMap;constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new jK(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:r=>s.matchImageCaptionViewElement(r),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>i.isBlockImage(r.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>{if(!i.isBlockImage(r.parent))return null;const l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),l.placeholder=o("Enter image caption"),b5({view:t,element:l,keepOnFocus:!0});const c=r.parent.getAttribute("alt"),u=c?o("Caption for image: %0",[c]):o("Caption for the image");return vq(l,a,{label:u})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),s=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),r=a=>{if(!a.return)return;const{oldElement:l,newElement:c}=a.return;/* istanbul ignore if: paranoid check -- @preserve */if(!l)return;if(t.isBlockImage(l)){const d=i.getCaptionFromImageModelElement(l);if(d){this._saveCaption(c,d);return}}const u=this._getSavedCaption(l);u&&this._saveCaption(c,u)};s&&this.listenTo(s,"execute",r,{priority:"low"}),o&&this.listenTo(o,"execute",r,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?bt.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const r of o){if(r.attributeKey!=="alt")continue;const a=r.range.start.nodeAfter;if(i.isBlockImage(a)){const l=s.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}}class WK extends H{static get requires(){return[UI]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageCaptionUtils"),s=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const r=e.commands.get("toggleImageCaption"),a=new Ne(o);return a.set({icon:he.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),a.bind("label").to(r,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=i.getCaptionFromModelSelection(e.model.document.selection);if(l){const c=e.editing.mapper.toViewElement(l);t.scrollToTheSelection(),t.change(u=>{u.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}}class qK extends H{static get requires(){return[zK,WK]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function HI(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function GK(n){return new Promise((e,t)=>{const i=n.getAttribute("src");fetch(i).then(s=>s.blob()).then(s=>{const o=jI(s,i),a=`image.${o.replace("image/","")}`,l=new File([s],a,{type:o});e(l)}).catch(s=>s&&s.name==="TypeError"?XK(i).then(e).catch(t):t(s))})}function KK(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function jI(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function XK(n){return ZK(n).then(e=>{const t=jI(e,n),s=`image.${t.replace("image/","")}`;return new File([e],s,{type:t})})}function ZK(n){return new Promise((e,t)=>{const i=ue.document.createElement("img");i.addEventListener("load",()=>{const s=ue.document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s.toBlob(r=>r?e(r):t())}),i.addEventListener("error",()=>t()),i.src=n})}class JK extends H{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),r=HI(o),a=new e(t.locale),l=i.t;return a.set({acceptedType:o.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:he.imageUpload}),a.bind("isEnabled").to(s),a.on("done",(c,u)=>{const d=Array.from(u).filter(h=>r.test(h.type));d.length&&(t.execute("uploadImage",{file:d}),t.editing.view.focus())}),a}_createToolbarButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),s=this._createButton(sk);return s.tooltip=!0,s.bind("label").to(t,"isImageSelected",i,"isAccessAllowed",(o,r)=>e(r?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(sk);return i.withText=!0,i.bind("label").to(t,"isImageSelected",s=>e(s?"Replace from computer":"Upload from computer")),i.on("execute",()=>{t.dropdownView.isOpen=!1}),i}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createButton(WS);switch(i.withText=!0,e){case"standalone":i.label=t("Image from computer");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("From computer");break}return i}}class YK extends H{static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}placeholder;constructor(e){super(e),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}uploadStatusChange=(e,t,i)=>{const s=this.editor,o=t.item,r=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;const a=s.plugins.get("ImageUtils"),l=s.plugins.get(vr),c=r?t.attributeNewValue:null,u=this.placeholder,d=s.editing.mapper.toViewElement(o),h=i.writer;if(c=="reading"){e2(d,h),t2(a,u,d,h);return}if(c=="uploading"){const f=l.loaders.get(r);e2(d,h),f?(n2(d,h),eX(d,h,f,s.editing.view),oX(a,d,h,f)):t2(a,u,d,h);return}c=="complete"&&l.loaders.get(r)&&nX(d,h,s.editing.view),tX(d,h),n2(d,h),QK(d,h)}}function e2(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function QK(n,e){e.removeClass("ck-appear",n)}function t2(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);const s=n.findViewImgElement(t);s.getAttribute("src")!==e&&i.setAttribute("src",e,s),zI(t,"placeholder")||i.insert(i.createPositionAfter(s),sX(i))}function n2(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),WI(n,e,"placeholder")}function eX(n,e,t,i){const s=iX(e);e.insert(e.createPositionAt(n,"end"),s),t.on("change:uploadedPercent",(o,r,a)=>{i.change(l=>{l.setStyle("width",a+"%",s)})})}function tX(n,e){WI(n,e,"progressBar")}function nX(n,e,t){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),i),setTimeout(()=>{t.change(s=>s.remove(s.createRangeOn(i)))},3e3)}function iX(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function sX(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function zI(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function WI(n,e,t){const i=zI(n,t);i&&e.remove(e.createRangeOn(i))}function oX(n,e,t,i){if(i.data){const s=n.findViewImgElement(e);t.setAttribute("src",i.data,s)}}class rX extends Ze{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=at(e.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(r,o,c)}else this._uploadImage(r,o)})}_uploadImage(e,t,i){const s=this.editor,r=s.plugins.get(vr).createLoader(e),a=s.plugins.get("ImageUtils");r&&a.insertImage({...t,uploadId:r.id},i)}}class aX extends H{static get requires(){return[vr,pk,Xi,Pn]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}_uploadImageElements;constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,i=e.conversion,s=e.plugins.get(vr),o=e.plugins.get("ImageUtils"),r=e.plugins.get("ClipboardPipeline"),a=HI(e.config.get("image.upload.types")),l=new rX(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(c,u)=>{if(lX(u.dataTransfer))return;const d=Array.from(u.dataTransfer.files).filter(f=>f?a.test(f.type):!1);if(!d.length)return;if(c.stop(),e.model.change(f=>{u.targetRanges&&f.setSelection(u.targetRanges.map(p=>e.editing.mapper.toModelRange(p))),e.execute("uploadImage",{file:d})}),!e.commands.get("uploadImage").isAccessAllowed){const f=e.plugins.get("Notification"),p=e.locale.t;f.showWarning(p("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(r,"inputTransformation",(c,u)=>{const d=Array.from(e.editing.view.createRangeIn(u.content)).map(f=>f.item).filter(f=>KK(o,f)&&!f.getAttribute("uploadProcessed")).map(f=>({promise:GK(f),imageElement:f}));if(!d.length)return;const h=new pf(e.editing.view.document);for(const f of d){h.setAttribute("uploadProcessed",!0,f.imageElement);const p=s.createLoader(f.promise);p&&(h.setAttribute("src","",f.imageElement),h.setAttribute("uploadId",p.id,f.imageElement))}}),e.editing.view.document.on("dragover",(c,u)=>{u.preventDefault()}),t.on("change",()=>{const c=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),u=new Set;for(const d of c)if(d.type=="insert"&&d.name!="$text"){const h=d.position.nodeAfter,f=d.position.root.rootName=="$graveyard";for(const p of cX(e,h)){const g=p.getAttribute("uploadId");if(!g)continue;const y=s.loaders.get(g);y&&(f?u.has(g)||y.abort():(u.add(g),this._uploadImageElements.set(g,p),y.status=="idle"&&this._readAndUpload(y)))}}}),this.on("uploadComplete",(c,{imageElement:u,data:d})=>{const h=d.urls?d.urls:d;this.editor.model.change(f=>{f.setAttribute("src",h.default,u),this._parseAndSetSrcsetAttributeOnImage(h,u,f),o.setImageNaturalSizeAttributes(u)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,i=t.model,s=t.locale.t,o=t.plugins.get(vr),r=t.plugins.get(pk),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{const u=e.upload(),d=l.get(e.id);/* istanbul ignore next -- @preserve */if(ke.isSafari){const h=t.editing.mapper.toViewElement(d),f=a.findViewImgElement(h);t.editing.view.once("render",()=>{if(!f.parent)return;const p=t.editing.view.domConverter.mapViewToDom(f.parent);if(!p)return;const g=p.style.display;p.style.display="none",p._ckHack=p.offsetHeight,p.style.display=g})}return t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Uploading image")),i.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",d)}),u}).then(u=>{i.enqueueChange({isUndoable:!1},d=>{const h=l.get(e.id);d.setAttribute("uploadStatus","complete",h),t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Image upload complete")),this.fire("uploadComplete",{data:u,imageElement:h})}),c()}).catch(u=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&r.showWarning(u,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},d=>{d.remove(l.get(e.id))}),c()});function c(){i.enqueueChange({isUndoable:!1},u=>{const d=l.get(e.id);u.removeAttribute("uploadId",d),u.removeAttribute("uploadStatus",d),l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let s=0;const o=Object.keys(e).filter(r=>{const a=parseInt(r,10);if(!isNaN(a))return s=Math.max(s,a),!0}).map(r=>`${e[r]} ${r}w`).join(", ");if(o!=""){const r={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(r.width=s),i.setAttributes(r,t)}}}function lX(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function cX(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}class qI extends H{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[aX,JK,YK]}}class uX extends me{urlInputView;keystrokes;constructor(e){super(e),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new gn,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-image-insert-url"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,t=e.t,i=new al(e,du);return i.bind("label").to(this,"isImageSelected",s=>t(s?"Update image URL":"Insert image via URL")),i.bind("isEnabled").to(this),i.fieldView.inputMode="url",i.fieldView.placeholder="https://example.com/image.png",i.fieldView.bind("value").to(this,"imageURLInputValue",s=>s||""),i.fieldView.on("input",()=>{this.imageURLInputValue=i.fieldView.element.value.trim()}),i}focus(){this.urlInputView.focus()}}class dX extends H{_imageInsertUI;_formView;static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[pu,Vi]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const t=new e(this.editor.locale);return t.icon=he.imageUrl,t.on("execute",()=>{this._showModal()}),t}_createToolbarButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Ne);return t.tooltip=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert image via URL")),t}_createDropdownButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Ne);return t.withText=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert via URL")),t}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createInsertUrlButton(nn);switch(i.withText=!0,e){case"standalone":i.label=t("Image via URL");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("Via URL");break}return i}_createInsertUrlView(){const e=this.editor,t=e.locale,i=e.commands.get("replaceImageSource"),s=e.commands.get("insertImage"),o=new uX(t);return o.bind("isImageSelected").to(this._imageInsertUI),o.bind("isEnabled").toMany([s,i],"isEnabled",(...r)=>r.some(a=>a)),o}_showModal(){const e=this.editor,i=e.locale.t,s=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const o=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=o.value||"",s.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?i("Update image URL"):i("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:i("Cancel"),withText:!0,onExecute:()=>s.hide()},{label:i("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class hX extends H{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[dX,pu]}}class GI extends H{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[qI,hX,pu]}}class fX extends Ze{refresh(){const e=this.editor,i=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils"),o=s.getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},o&&i.change(r=>{r.setAttribute("resizedWidth",e.width,o),r.removeAttribute("resizedHeight",o),s.setImageNaturalSizeAttributes(o)})}}class KI extends H{static get requires(){return[Pn]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new fX(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(r.item);r.attributeNewValue!==null?(l.setStyle("width",r.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),t.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${e}`,(o,r,a)=>{if(!a.consumable.consume(r.item,o.name))return;const l=a.writer,c=a.mapper.toViewElement(r.item),u=e==="imageInline"?i.findViewImgElement(c):c;r.attributeNewValue!==null?l.setStyle("height",r.attributeNewValue,u):l.removeStyle("height",u)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>hh(s)?null:s.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>hh(s)?null:s.getStyle("height")}})}}const im={small:he.objectSizeSmall,medium:he.objectSizeMedium,large:he.objectSizeLarge,custom:he.objectSizeCustom,original:he.objectSizeFull};class pX extends H{static get requires(){return[KI]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}_resizeUnit;constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:s,icon:o}=e;t.ui.componentFactory.add(i,r=>{const a=new Ne(r),l=t.commands.get("resizeImage"),c=this._getOptionLabelValue(e,!0);if(!im[o])throw new P("imageresizebuttons-missing-icon",t,e);if(a.set({label:c,icon:im[o],tooltip:c,isToggleable:!0}),a.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&Il(e)){const u=t.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{u._showForm(this._resizeUnit)})}else{const u=s?s+this._resizeUnit:null;a.bind("isOn").to(l,"value",Ig(u)),this.listenTo(a,"execute",()=>{t.execute("resizeImage",{width:u})})}return a})}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,s=e.find(r=>!r.value),o=r=>{const a=t.commands.get("resizeImage"),l=es(r,RS),c=l.buttonView,u=i("Resize image");return c.set({tooltip:u,commandValue:s.value,icon:im.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button",ariaLabel:u,ariaLabelledBy:void 0}),c.bind("label").to(a,"value",d=>d&&d.width?d.width:this._getOptionLabelValue(s)),l.bind("isEnabled").to(this),uu(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list"),role:"menu"}),this.listenTo(l,"execute",d=>{"onClick"in d.source?d.source.onClick():(t.execute(d.source.commandName,{width:d.source.commandValue}),t.editing.view.focus())}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){const i=this.editor.t;return e.label?e.label:t?Il(e)?i("Custom image size"):e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):Il(e)?i("Custom"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const{editor:i}=this,s=new zn,o=e.map(r=>Il(r)?{...r,valueWithUnits:"custom"}:r.value?{...r,valueWithUnits:`${r.value}${this._resizeUnit}`}:{...r,valueWithUnits:null});for(const r of o){let a=null;if(i.plugins.has("ImageCustomResizeUI")&&Il(r)){const l=i.plugins.get("ImageCustomResizeUI");a={type:"button",model:new Da({label:this._getOptionLabelValue(r),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{l._showForm(this._resizeUnit)}})};const c=UN(o,"valueWithUnits");a.model.bind("isOn").to(t,"value",mX(c))}else a={type:"button",model:new Da({commandName:"resizeImage",commandValue:r.valueWithUnits,label:this._getOptionLabelValue(r),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(t,"value",Ig(r.valueWithUnits));a.model.bind("isEnabled").to(t,"isEnabled"),s.add(a)}return s}}function Il(n){return n.value==="custom"}function Ig(n){return e=>{const t=e;return n===null&&t===n?!0:t!==null&&t.width===n}}function mX(n){return e=>!n.some(t=>Ig(t)(e))}const gX="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",sm="image_resized";class bX extends H{static get requires(){return[em,Pn]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils");t.addObserver(Pb),this.listenTo(t.document,"imageLoaded",(s,o)=>{if(!o.target.matches(gX))return;const r=e.editing.view.domConverter,a=r.domToView(o.target),l=i.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(em).getResizerByViewElement(l);if(c){c.redraw();return}const u=e.editing.mapper,d=u.toModelElement(l);c=e.plugins.get(em).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:e,getHandleHost(h){return h.querySelector("img")},getResizeHost(){return r.mapViewToDom(u.toViewElement(d))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(h){t.change(f=>{f.removeClass(sm,l)}),e.execute("resizeImage",{width:h})}}),c.on("updateSize",()=>{l.hasClass(sm)||t.change(f=>{f.addClass(sm,l)});const h=d.name==="imageInline"?a:l;h.getStyle("height")&&t.change(f=>{f.removeStyle("height",h)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function XI(n){if(!n)return null;const[,e,t]=n.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:t}}function ZI(n,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/n*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JI(n){const{editing:e}=n,i=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!i)return null;const s=e.mapper.toViewElement(i),o=e.view.domConverter.mapViewToDom(s);return{model:i,view:s,dom:o}}function vX(n,e){const t=JI(n);if(!t)return null;const i=XI(t.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===e)return i;const s=Cb(t.dom),o={value:new Te(t.dom).width};return ZI(s,o,e)}class wX extends me{focusTracker;keystrokes;unit;labeledInput;saveButtonView;cancelButtonView;_focusables;_focusCycler;_validators;constructor(e,t,i){super(e);const s=this.locale.t;this.focusTracker=new tn,this.keystrokes=new gn,this.unit=t,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(s("Save"),he.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(s("Cancel"),he.cancel,"ck-button-cancel","cancel"),this._focusables=new wi,this._validators=i,this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),lu({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,s){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createLabeledInputView(){const e=this.locale.t,t=new al(this.locale,Pz);return t.label=e("Resize image (in %0)",this.unit),t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){const{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}}function _X(n,e){const t=JI(n);if(!t)return null;const i=Cb(t.dom),s=XI(window.getComputedStyle(t.dom).minWidth)||{value:1},o=Math.max(.1,ZI(i,s,e).value);return{unit:e,lower:o,upper:e==="px"?i:100}}class yX extends H{_balloon;_form;static get requires(){return[Rc]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(mf(wX))(t.locale,e,kX(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(i,s)=>{this._hideForm(!0),s()}),au({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const t=this.editor,i=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:Ab(t)});const s=vX(t,e),o=s?s.value.toFixed(1):"",r=_X(t,e);i.fieldView.value=i.fieldView.element.value=o,r&&Object.assign(i.fieldView,{min:r.lower.toFixed(1),max:Math.ceil(r.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function kX(n){const e=n.t;return[t=>{if(t.rawSize.trim()==="")return e("The value must not be empty.");if(t.parsedSize===null)return e("The value should be a plain number.")}]}class CX extends H{static get requires(){return[KI,bX,yX,pX]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class EX extends Ze{_defaultStyles;_styles;constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(const s of i.modelElements)this._defaultStyles[s]=i.name;return[i.name,i]}))}refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled?i.hasAttribute("imageStyle")?this.value=i.getAttribute("imageStyle"):this.value=this._defaultStyles[i.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils");i.change(o=>{const r=e.value,{setImageSizes:a=!0}=e;let l=s.getClosestSelectedImageElement(i.document.selection);r&&this.shouldConvertImageType(r,l)&&(this.editor.execute(s.isBlockImage(l)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),l=s.getClosestSelectedImageElement(i.document.selection)),!r||this._styles.get(r).isDefault?o.removeAttribute("imageStyle",l):o.setAttribute("imageStyle",r,l),a&&s.setImageNaturalSizeAttributes(l)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}const vd={get inline(){return{name:"inline",title:"In line",icon:he.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:he.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:he.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:he.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:he.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:he.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:he.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:he.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},YI={full:he.objectFullWidth,left:he.objectBlockLeft,right:he.objectBlockRight,center:he.objectCenter,inlineLeft:he.objectLeft,inlineRight:he.objectRight,inline:he.objectInline},QI=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function xX(n){return(n.configuredStyles.options||[]).map(i=>IX(i)).filter(i=>AX(i,n))}function TX(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function SX(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...QI]:[]}function IX(n){return typeof n=="string"?vd[n]?n={...vd[n]}:n={name:n}:n=PX(vd[n.name],n),typeof n.icon=="string"&&(n.icon=YI[n.icon]||n.icon),n}function AX(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:i,name:s}=n;if(!i||!i.length||!s)return e4({style:n}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!i.some(r=>o.includes(r)))return Ue("image-style-missing-dependency",{style:n,missingPlugins:i.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function PX(n,e){const t={...e};for(const i in n)Object.prototype.hasOwnProperty.call(e,i)||(t[i]=n[i]);return t}function e4(n){Ue("image-style-configuration-definition-invalid",n)}var Ag={normalizeStyles:xX,getDefaultStylesConfiguration:TX,getDefaultDropdownDefinitions:SX,warnInvalidStyle:e4,DEFAULT_OPTIONS:vd,DEFAULT_ICONS:YI,DEFAULT_DROPDOWN_DEFINITIONS:QI};function OX(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=i2(t.attributeNewValue,n),o=i2(t.attributeOldValue,n),r=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function MX(n){const e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,i,s)=>{if(!i.modelRange)return;const o=i.viewItem,r=en(i.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of e[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function i2(n,e){for(const t of e)if(t.name===n)return t}class t4 extends H{static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Pn]}normalizedStyles;init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=Ag,i=this.editor,s=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(s,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:o}),this._setupConversion(s,o),this._setupPostFixer(),i.commands.add("imageStyle",new EX(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,s=i.model.schema,o=OX(this.normalizedStyles),r=MX(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(Pn),s=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let r=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!i.isImage(l))continue;const c=l.getAttribute("imageStyle");if(!c)continue;const u=s.get(c);(!u||!u.modelElements.includes(l.name))&&(o.removeAttribute("imageStyle",l),r=!0)}return r})}}class RX extends H{static get requires(){return[t4]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=e.get("ImageStyleEditing"),s=s2(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const r of s)this._createButton(r);const o=s2([...t.filter(pt),...Ag.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const r of o)this._createDropdown(r,s)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,s=>{let o;const{defaultItem:r,items:a,title:l}=e,c=a.filter(f=>t.find(({name:p})=>o2(p)===f)).map(f=>{const p=i.create(f);return f===r&&(o=p),p});a.length!==c.length&&Ag.warnInvalidStyle({dropdown:e});const u=es(s,vf),d=u.buttonView,h=d.arrowView;return wf(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:r2(l,o.label),class:null,tooltip:!0}),h.unbind("label"),h.set({label:l}),d.bind("icon").toMany(c,"isOn",(...f)=>{const p=f.findIndex(xo);return p<0?o.icon:c[p].icon}),d.bind("label").toMany(c,"isOn",(...f)=>{const p=f.findIndex(xo);return r2(l,p<0?o.label:c[p].label)}),d.bind("isOn").toMany(c,"isOn",(...f)=>f.some(xo)),d.bind("class").toMany(c,"isOn",(...f)=>f.some(xo)?"ck-splitbutton_flatten":void 0),d.on("execute",()=>{c.some(({isOn:f})=>f)?u.isOpen=!u.isOpen:o.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...f)=>f.some(xo)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(o2(t),i=>{const s=this.editor.commands.get("imageStyle"),o=new Ne(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function s2(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function o2(n){return`imageStyle:${n}`}function r2(n,e){return(n?n+": ":"")+e}class BX extends H{static get requires(){return[t4,RX]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class LX extends H{static get requires(){return[Mk,Pn]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Mk),s=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:NX(e.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function NX(n){return n.map(e=>pt(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VX{_definitions=new Set;get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,s)=>{if(!s.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||s.schema.isInline(i.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(r.getFirstRange(),l):o.wrap(s.mapper.toViewRange(i.range),l):o.unwrap(s.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:s,mapper:o})=>{const r=o.toViewElement(i.item),a=Array.from(r.getChildren()).find(l=>l.is("element","a"));if(a)for(const l of this._definitions){const c=Ys(l.attributes);if(l.callback(i.attributeNewValue)){for(const[u,d]of c)u==="class"?s.addClass(d,a):s.setAttribute(u,d,a);l.classes&&s.addClass(l.classes,a);for(const u in l.styles)s.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?s.removeClass(d,a):s.removeAttribute(u,a);l.classes&&s.removeClass(l.classes,a);for(const u in l.styles)s.removeStyle(u,a)}}})}}}const DX=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,FX="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",$X=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,UX=/^((\w+:(\/{2,})?)|(\W))/i,HX=["https?","ftps?","mailto"],Ju="Ctrl+K";function jX(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function a2(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function n4(n,e=HX){const t=String(n),i=e.join("|"),s=new RegExp(`${FX.replace("<protocols>",i)}`,"i");return zX(t,s)?t:"#"}function zX(n,e){return!!n.replace(DX,"").match(e)}function WX(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>("label"in i&&t[i.label]&&(i.label=t[i.label]),i)),e}function qX(n){const e=[];if(n)for(const[t,i]of Object.entries(n)){const s=Object.assign({},i,{id:`link${a9(t)}`});e.push(s)}return e}function Pg(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function GX(n){return $X.test(n)}function Ob(n,e){const t=GX(n)?"mailto:":e,i=!!t&&!i4(n);return n&&i?t+n:n}function i4(n){return UX.test(n)}function l2(n){window.open(n,"_blank","noopener")}class KX extends Ze{manualDecorators=new zn;automaticDecorators=new VX;restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||en(t.getSelectedBlocks());Pg(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const i=this.editor.model,s=i.document.selection,o=[],r=[];for(const a in t)t[a]?o.push(a):r.push(a);i.change(a=>{if(s.isCollapsed){const l=s.getFirstPosition();if(s.hasAttribute("linkHref")){const c=c2(s);let u=_f(l,"linkHref",s.getAttribute("linkHref"),i);s.getAttribute("linkHref")===c&&(u=this._updateLinkContent(i,a,u,e)),a.setAttribute("linkHref",e,u),o.forEach(d=>{a.setAttribute(d,!0,u)}),r.forEach(d=>{a.removeAttribute(d,u)}),a.setSelection(a.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const c=Ys(s.getAttributes());c.set("linkHref",e),o.forEach(d=>{c.set(d,!0)});const{end:u}=i.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...o,...r].forEach(c=>{a.removeSelectionAttribute(c)})}else{const l=i.schema.getValidRanges(s.getRanges(),"linkHref"),c=[];for(const d of s.getSelectedBlocks())i.schema.checkAttribute(d,"linkHref")&&c.push(a.createRangeOn(d));const u=c.slice();for(const d of l)this._isRangeToUpdate(d,c)&&u.push(d);for(const d of u){let h=d;if(u.length===1){const f=c2(s);s.getAttribute("linkHref")===f&&(h=this._updateLinkContent(i,a,d,e),a.setSelection(a.createSelection(h)))}a.setAttribute("linkHref",e,h),o.forEach(f=>{a.setAttribute(f,!0,h)}),r.forEach(f=>{a.removeAttribute(f,h)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,s=i.getSelectedElement();return Pg(s,t.schema)?s.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}_updateLinkContent(e,t,i,s){const o=t.createText(s,{linkHref:s});return e.insertContent(o,i)}}function c2(n){if(n.isCollapsed){const e=n.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(n.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}class XX extends Ze{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();Pg(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,s=e.commands.get("link");t.change(o=>{const r=i.isCollapsed?[_f(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)o.removeAttribute(l.id,a)})}}class ZX extends tt(){id;defaultValue;label;attributes;classes;styles;constructor({id:e,label:t,attributes:i,classes:s,styles:o,defaultValue:r}){super(),this.id=e,this.set("value",void 0),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const JX="ck-link_selected",u2="automatic",YX="manual",QX=/^(https?:)?\/\//;class s4 extends H{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[_k,YS,Xi]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:a2}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,r)=>a2(n4(o,t),r)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new KX(e)),e.commands.add("unlink",new XX(e));const i=WX(e.t,qX(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(o=>o.mode===u2)),this._enableManualDecorators(i.filter(o=>o.mode===YX)),e.plugins.get(_k).registerAttribute("linkHref"),qW(e,"linkHref","a",JX),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,s=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:u2,callback:o=>!!o&&QX.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&t.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,s=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const r=new ZX(o);s.add(r),t.conversion.for("downcast").attributeToElement({model:r.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){const d=l.createAttributeElement("a",r.attributes,{priority:5});r.classes&&l.addClass(r.classes,d);for(const h in r.styles)l.setStyle(h,r.styles[h],d);return l.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...r._createPattern()},model:{key:r.id}})})}_enableLinkOpen(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",(s,o)=>{if(!(ke.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(s.stop(),o.preventDefault(),l2(l))},{context:"$capture"}),this.listenTo(i,"keydown",(s,o)=>{const a=e.commands.get("link").value;a&&o.keyCode===Re.enter&&o.altKey&&(s.stop(),l2(a))})}_enableSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection;this.listenTo(i,"change:attribute",(s,{attributeKeys:o})=>{!o.includes("linkHref")||i.hasAttribute("linkHref")||t.change(r=>{eZ(r,tZ(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{t.change(r=>{const a=r.createRangeIn(o.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=Ob(l.getAttribute("linkHref"),i);r.setAttribute("linkHref",c,l)}})})}}function eZ(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function tZ(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}class nZ extends me{focusTracker=new tn;keystrokes=new gn;urlInputView;saveButtonView;cancelButtonView;_manualDecoratorSwitches;children;_validators;_focusables=new wi;_focusCycler;constructor(e,t,i){super(e);const s=e.t;this._validators=i,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(s("Save"),he.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(s("Cancel"),he.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),lu({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,t=new al(this.locale,du);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,i,s){const o=new Ne(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const i of e.manualDecorators){const s=new hb(this.locale);s.set({name:i.id,label:i.label,withText:!0}),s.bind("isOn").toMany([i,e],"value",(o,r)=>r===void 0&&o===void 0?!!i.defaultValue:!!o),s.on("execute",()=>{i.set("value",!s.isOn)}),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const i=new me;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var iZ='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class sZ extends me{focusTracker=new tn;keystrokes=new gn;previewButtonView;unlinkButtonView;editButtonView;_focusables=new wi;_focusCycler;_linkConfig;constructor(e,t={}){super(e);const i=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(i("Unlink"),iZ,"unlink"),this.editButtonView=this._createButton(i("Edit link"),he.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new Qi({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){const s=new Ne(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,i),s}_createPreviewButton(){const e=new Ne(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",s=>s&&n4(s,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||i("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}var oZ='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const ss="link-ui";class rZ extends H{actionsView=null;formView=null;_balloon;static get requires(){return[Rc]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver(NU),this._balloon=e.plugins.get(Rc),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:ss,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:ss,view:(i,{writer:s})=>{if(!i.markerRange.isCollapsed)return null;const o=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:Ju},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new sZ(e.locale,e.config.get("link")),i=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,r)=>{this._hideUI(),r()}),t.keystrokes.set(Ju,(o,r)=>{this._addFormView(),r()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),s=new(mf(nZ))(e.locale,t,aZ(e));return s.urlInputView.fieldView.bind("value").to(t,"value"),s.urlInputView.bind("isEnabled").to(t,"isEnabled"),s.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(s,"submit",()=>{if(s.isValid()){const{value:o}=s.urlInputView.fieldView.element,r=Ob(o,i);e.execute("link",r,s.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(s.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(o,r)=>{this._closeFormView(),r()}),s}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton(Ne);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(nn);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("link"),o=new e(t.locale),r=i.t;return o.set({label:r("Link"),icon:oZ,keystroke:Ju,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",a=>!!a),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(Ju,(i,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),au({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),s=r();const o=()=>{const a=this._getSelectedLinkElement(),l=r();i&&!a||!i&&l!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,s=l};function r(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,i=e.document;let s;if(t.markers.has(ss)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(ss)),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));s=e.domConverter.viewRangeToDom(r)}else s=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Dt(i))return om(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),o=om(s.start),r=om(s.end);return!o||o!=r?null:e.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(ss))t.updateMarker(ss,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(ss,{usingOperation:!1,affectsData:!1,range:t.createRange(s,i.end)})}else t.addMarker(ss,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(ss)&&e.change(t=>{t.removeMarker(ss)})}}function om(n){return n.getAncestors().find(e=>jX(e))||null}function aZ(n){const e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!t&&!i.url.length)return e("Link URL must not be empty.")}]}const lZ=4,o4=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),cZ=2;class uZ extends H{static get requires(){return[vs,s4]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?_f(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const s=this.editor.model,o=s.document.selection,r=o.getFirstPosition(),a=o.getLastPosition();let l=t.getJoined(this._expandLinkRange(s,r)||t);l&&(l=l.getJoined(this._expandLinkRange(s,a)||t)),l&&(l.start.isBefore(r)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){const e=this.editor,t=e.model,i=t.document.selection,s=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");s.on("inputTransformation",(r,a)=>{if(!this.isEnabled||!o.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(o4);u&&u[2]===c&&(t.change(d=>{this._selectEntireLinks(d,l),o.execute(c)}),r.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new WW(e.model,i=>{if(!dZ(i))return;const s=d2(i.substr(0,i.length-1));if(s)return{url:s}});t.on("matched:data",(i,s)=>{const{batch:o,range:r,url:a}=s;if(!o.isTyping)return;const l=r.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const o=t.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:s}=eI(e,t),o=d2(i);if(o){const r=t.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(e,t){const i=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=Ob(e,s);!this.isEnabled||!hZ(t,i)||!i4(o)||fZ(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const i=this.editor.model,s=this.editor.plugins.get("Delete");i.enqueueChange(o=>{o.setAttribute("linkHref",e,t),i.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function dZ(n){return n.length>lZ&&n[n.length-1]===" "&&n[n.length-2]!==" "}function d2(n){const e=o4.exec(n);return e?e[cZ]:null}function hZ(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function fZ(n){const e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}class r4 extends H{static get requires(){return[s4,rZ,uZ]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pi{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=at(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const s=new this(e,t)[Symbol.iterator]();return en(s)}*[Symbol.iterator](){const e=[];for(const{node:t}of mu(this._getStartNode(),this._isForward?"forward":"backward")){const i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(s=>t.getAttribute(s)!==this._startElement.getAttribute(s)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*mu(n,e="forward"){const t=e=="forward",i=[];let s=null;for(;Qt(n);){let o=null;if(s){const r=n.getAttribute("listIndent"),a=s.getAttribute("listIndent");r>a?i[a]=s:r<a?(o=i[r],i.length=r):o=s}yield{node:n,previous:s,previousNodeInList:o},s=n,n=t?n.nextSibling:n.previousSibling}}class pZ{_listHead;constructor(e){this._listHead=e}[Symbol.iterator](){return mu(this._listHead,"forward")}}class Fa{static next(){return Ai()}}function Qt(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function Mb(n,e={}){return[...Fo(n,{...e,direction:"backward"}),...Fo(n,{...e,direction:"forward"})]}function Fo(n,e={}){const t=e.direction=="forward",i=Array.from(new Pi(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?i:i.reverse()}function mZ(n){return Array.from(new Pi(n,{direction:"forward",higherIndent:!0}))}function a4(n,e){const t=new Pi(n,{sameIndent:!0,sameAttributes:"listType",...e}),i=new Pi(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...i]}function xr(n){return!Pi.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function h2(n){return!Pi.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function gu(n,e={}){n=at(n);const t=e.withNested!==!1,i=new Set;for(const s of n)for(const o of Mb(s,{higherIndent:t}))i.add(o);return $r(i)}function gZ(n){n=at(n);const e=new Set;for(const t of n)for(const i of a4(t))e.add(i);return $r(e)}function Rb(n,e){const t=Fo(n,{direction:"forward"}),i=Fa.next();for(const s of t)e.setAttribute("listItemId",i,s);return t}function Og(n,e,t){const i={};for(const[o,r]of e.getAttributes())o.startsWith("list")&&(i[o]=r);const s=Fo(n,{direction:"forward"});for(const o of s)t.setAttributes(i,o);return s}function Mg(n,e,{expand:t,indentBy:i=1}={}){n=at(n);const s=t?gu(n):n;for(const o of s){const r=o.getAttribute("listIndent")+i;r<0?Cf(o,e):e.setAttribute("listIndent",r,o)}return s}function bZ(n,e){n=at(n);const t=gu(n),i=new Set,s=Math.min(...t.map(r=>r.getAttribute("listIndent"))),o=new Map;for(const r of t)o.set(r,Pi.first(r,{lowerIndent:!0}));for(const r of t){if(i.has(r))continue;i.add(r);const a=r.getAttribute("listIndent")-1;if(a<0){Cf(r,e);continue}if(r.getAttribute("listIndent")==s){const l=_Z(r,o.get(r),e);for(const c of l)i.add(c);if(l.length)continue}e.setAttribute("listIndent",a,r)}return $r(i)}function Cf(n,e){n=at(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function Lc(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function vZ(n,e){const t=[];let i=Number.POSITIVE_INFINITY;for(const{node:s}of mu(n.nextSibling,"forward")){const o=s.getAttribute("listIndent");if(o==0)break;o<i&&(i=o);const r=o-i;e.setAttribute("listIndent",r,s),t.push(s)}return t}function $r(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function Nc(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function rm(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function wZ(n){return n=="numbered"||n=="customNumbered"}function _Z(n,e,t){return Fo(e,{direction:"forward"}).pop().index>n.index?Og(n,e,t):[]}class f2 extends Ze{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=p2(e.document.selection);e.change(i=>{const s=[];Lc(t)&&!xr(t[0])?(this._direction=="forward"&&s.push(...Mg(t,i)),s.push(...Rb(t[0],i))):this._direction=="forward"?s.push(...Mg(t,i,{expand:!0})):s.push(...bZ(t,i));for(const o of s){if(!o.hasAttribute("listType"))continue;const r=Pi.first(o,{sameIndent:!0});r&&i.setAttribute("listType",r.getAttribute("listType"),o)}this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",$r(new Set(e)))}_checkEnabled(){let e=p2(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||Lc(e)&&!xr(e[0]))return!0;e=gu(e),t=e[0];const i=Pi.first(t,{sameIndent:!0});return i?i.getAttribute("listType")==t.getAttribute("listType"):!1}}function p2(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!Qt(i));return t!=-1&&(e.length=t),e}class Yu extends Ze{type;_listWalkerOptions;constructor(e,t,i={}){super(e),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,s=Nc(t),o=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||rm(a,t.schema)),r=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(r){const l=o[o.length-1],c=Fo(l,{direction:"forward"}),u=[];c.length>1&&u.push(...Rb(c[1],a)),u.push(...Cf(o,a)),u.push(...vZ(l,a)),this._fireAfterExecute(u)}else if((s||i.selection.isCollapsed)&&Qt(o[0])){const l=a4(s||o[0],this._listWalkerOptions);for(const c of l)a.setAttributes({...e.additionalAttributes,listType:this.type},c);this._fireAfterExecute(l)}else{const l=[];for(const c of o)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&rm(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:Fa.next(),listType:this.type},c),l.push(c);else for(const u of gu(c,{withNested:!1}))u.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},u),l.push(u));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",$r(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=Array.from(i.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const o of s)if(t.checkAttribute(o,"listType")||rm(o,t))return!0;return!1}}class m2 extends Ze{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,i=t.document.selection,s=[];t.change(o=>{const{firstElement:r,lastElement:a}=this._getMergeSubjectElements(i,e),l=r.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),u=a.getAttribute("listItemId");if(l!=c){const d=mZ(a);s.push(...Mg([a,...d],o,{indentBy:l-c,expand:l<c}))}if(e){let d=i;i.isCollapsed&&(d=o.createSelection(o.createRange(o.createPositionAt(r,"end"),o.createPositionAt(a,0)))),t.deleteContent(d,{doNotResetEntireContent:i.isCollapsed});const h=d.getLastPosition().parent,f=h.nextSibling;s.push(h),f&&f!==a&&f.getAttribute("listItemId")==u&&s.push(...Og(f,h,o))}else s.push(...Og(a,r,o));this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",$r(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,i=Nc(e);if(t.isCollapsed||i){const s=i||t.getFirstPosition().parent;if(!Qt(s))return!1;const o=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!o||Lc([s,o]))return!1}else{const s=t.getLastPosition(),o=t.getFirstPosition();if(s.parent===o.parent||!Qt(s.parent))return!1}return!0}_getMergeSubjectElements(e,t){const i=this.editor.model,s=Nc(i);let o,r;if(e.isCollapsed||s){const a=s||e.getFirstPosition().parent,l=xr(a);this._direction=="backward"?(r=a,l&&!t?o=Pi.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,r=a.nextSibling)}else o=e.getFirstPosition().parent,r=e.getLastPosition().parent;return{firstElement:o,lastElement:r}}}class g2 extends Ze{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const i=Rb(this._getStartBlock(),t);this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",$r(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&Qt(t)&&!xr(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}class yZ extends H{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return gZ(e)}isFirstBlockOfListItem(e){return xr(e)}isListItemBlock(e){return Qt(e)}expandListBlocksToCompleteItems(e,t={}){return gu(e,t)}isNumberedListType(e){return wZ(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kZ(n){return n.is("element","ol")||n.is("element","ul")}function Rg(n){return n.is("element","li")}function CZ(n){let e=0,t=n.parent;for(;t;){if(Rg(t))e++;else{const i=t.previousSibling;i&&Rg(i)&&e++}t=t.parent}return e}function EZ(n,e,t,i=c4(t,e)){return n.createAttributeElement(l4(t),null,{priority:2*e/100-100,id:i})}function xZ(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function l4(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function c4(n,e){return`list-${n}-${e}`}function Fi(n,e){const t=n.nodeBefore;if(Qt(t)){let i=t;for(const{node:s}of mu(i,"backward"))if(i=s,e.has(i))return;e.set(t,i)}else{const i=n.nodeAfter;Qt(i)&&e.set(i,i)}}function TZ(n,e){let t=0,i=-1,s=null,o=!1;for(const{node:r}of n){const a=r.getAttribute("listIndent");if(a>t){let l;s===null?(s=a-t,l=t):(s>a&&(s=a),l=a-s),l>i+1&&(l=i+1),e.setAttribute("listIndent",l,r),o=!0,i=l}else s=null,t=a+1,i=a}return o}function SZ(n,e,t){const i=new Set;let s=!1;for(const{node:o}of n){if(i.has(o))continue;let r=o.getAttribute("listType"),a=o.getAttribute("listItemId");if(e.has(a)&&(a=Fa.next()),e.add(a),o.is("element","listItem")){o.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,o),s=!0);continue}for(const l of Fo(o,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=r&&(a=Fa.next(),r=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,l),s=!0)}return s}function IZ(){return(n,e,t)=>{const{writer:i,schema:s}=t;if(!e.modelRange)return;const o=Array.from(e.modelRange.getItems({shallow:!0})).filter(d=>s.checkAttribute(d,"listItemId"));if(!o.length)return;const r=Fa.next(),a=CZ(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=o[0].getAttribute("listType");c&&(l=c);const u={listItemId:r,listIndent:a,listType:l};for(const d of o)d.hasAttribute("listItemId")||i.setAttributes(u,d);o.length>1&&o[1].getAttribute("listItemId")!=u.listItemId&&t.keepEmptyElement(o[0])}}function AZ(n,e,t,i){return()=>{const a=n.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")Fi(d.position,c),d.attributes.has("listItemId")?u.add(d.position.nodeAfter):Fi(d.position.getShiftedBy(d.length),c);else if(d.type=="remove"&&d.attributes.has("listItemId"))Fi(d.position,c);else if(d.type=="attribute"){const h=d.range.start.nodeAfter;t.includes(d.attributeKey)?(Fi(d.range.start,c),d.attributeNewValue===null?(Fi(d.range.start.getShiftedBy(1),c),o(h)&&l.push(h)):u.add(h)):Qt(h)&&o(h)&&l.push(h)}for(const d of c.values())l.push(...s(d,u));for(const d of new Set(l))e.reconvertItem(d)};function s(a,l){const c=[],u=new Set,d=[];for(const{node:h,previous:f}of mu(a,"forward")){if(u.has(h))continue;const p=h.getAttribute("listIndent");f&&p<f.getAttribute("listIndent")&&(d.length=p+1),d[p]=Object.fromEntries(Array.from(h.getAttributes()).filter(([y])=>t.includes(y)));const g=Fo(h,{direction:"forward"});for(const y of g)u.add(y),(o(y,g)||r(y,d,l))&&c.push(y)}return c}function o(a,l){const c=e.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=d4(a,t,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function r(a,l,c){if(c.has(a))return!1;const u=e.mapper.toViewElement(a);let d=l.length-1;for(let h=u.parent;!h.is("editableElement");h=h.parent){const f=Rg(h),p=kZ(h);if(!p&&!f)continue;const g=`checkAttributes:${f?"item":"list"}`;if(i.fire(g,{viewElement:h,modelAttributes:l[d]}))break;if(p&&(d--,d<0))return!1}return!0}}function b2(n,e,t,{dataPipeline:i}={}){const s=NZ(n);return(o,r,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=r.item;if(!n.includes(r.attributeKey)||!s(d,u))return;const h=OZ(d,c,t);u4(h,l,c),BZ(h,l);const f=RZ(d,h,e,l,{dataPipeline:i});LZ(d,f,e,l)}}function PZ(n){return(e,t,i)=>{const{writer:s,mapper:o}=i,r=e.name.split(":")[1];if(!n.checkAttribute(r,"listItemId"))return;const a=o.toViewPosition(t.position),l=t.position.getShiftedBy(t.length),c=o.toViewPosition(l,{isPhantom:!0}),d=s.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&u4(d,s,o)}}function v2(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!d4(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function OZ(n,e,t){const i=t.createRangeOn(n);return e.toViewRange(i).getTrimmed().end.nodeBefore}function MZ(n,e){return(t,i)=>{if(i.modelPosition.offset>0)return;const s=i.modelPosition.parent;if(!Qt(s)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(s)))return;const o=i.mapper.toViewElement(s),r=e.createRangeIn(o),a=r.getWalker();let l=r.start;for(const{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}i.viewPosition=l}}function u4(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const i=[];s(e.createPositionBefore(n).getWalker({direction:"backward"})),s(e.createRangeIn(n).getWalker());for(const o of i)e.remove(o);function s(o){for(const{item:r}of o){if(r.is("element")&&t.toModelElement(r))break;r.is("element")&&r.getCustomProperty("listItemMarker")&&i.push(r)}}}function RZ(n,e,t,i,{dataPipeline:s}){let o=i.createRangeOn(e);if(!xr(n))return o;for(const r of t){if(r.scope!="itemMarker")continue;const a=r.createElement(i,n,{dataPipeline:s});if(!a||(i.setCustomProperty("listItemMarker",!0,a),r.canInjectMarkerIntoElement&&r.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(e,0),a):(i.insert(o.start,a),o=i.createRange(i.createPositionBefore(a),i.createPositionAfter(e))),!r.createWrapperElement||!r.canWrapElement))continue;const l=r.createWrapperElement(i,n,{dataPipeline:s});i.setCustomProperty("listItemWrapper",!0,l),r.canWrapElement(n)?o=i.wrap(o,l):(o=i.wrap(i.createRangeOn(a),l),o=i.createRange(o.start,i.createPositionAfter(e)))}return o}function BZ(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const i=t.parent;e.unwrap(e.createRangeOn(n),t),t=i}}function LZ(n,e,t,i){if(!n.hasAttribute("listIndent"))return;const s=n.getAttribute("listIndent");let o=n;for(let r=s;r>=0;r--){const a=xZ(i,r,o.getAttribute("listItemId")),l=EZ(i,r,o.getAttribute("listType"));for(const c of t)(c.scope=="list"||c.scope=="item")&&o.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,o.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=i.wrap(e,a),e=i.wrap(e,l),r==0||(o=Pi.first(o,{lowerIndent:!0}),!o))break}}function NZ(n){return(e,t)=>{const i=[];for(const s of n)e.hasAttribute(s)&&i.push(`attribute:${s}`);return i.every(s=>t.test(e,s)!==!1)?(i.forEach(s=>t.consume(e,s)),!0):!1}}function d4(n,e,t=Mb(n)){if(!Qt(n))return!1;for(const i of n.getAttributeKeys())if(!i.startsWith("selection:")&&!e.includes(i))return!1;return t.length<2}const wd=["listType","listIndent","listItemId"];class VZ extends H{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[yf,vs,yZ,Xi]}constructor(e){super(e),e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new P("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:wd}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of wd)t.schema.setAttributeProperties(s,{copyOnReplace:!0});e.commands.add("numberedList",new Yu(e,"numbered")),e.commands.add("bulletedList",new Yu(e,"bulleted")),e.commands.add("customNumberedList",new Yu(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Yu(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new f2(e,"forward")),e.commands.add("outdentList",new f2(e,"backward")),e.commands.add("splitListItemBefore",new g2(e,"before")),e.commands.add("splitListItemAfter",new g2(e,"after")),i&&(e.commands.add("mergeListItemBackward",new m2(e,"backward")),e.commands.add("mergeListItemForward",new m2(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const t=this.editor.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...wd,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(s,o)=>{const r=e.model.document.selection;Nc(e.model)||e.model.change(()=>{const a=r.getFirstPosition();if(r.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;const l=a.parent;if(!Qt(l))return;if(!Pi.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)h2(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:w2(e.model,"backward")})}o.preventDefault(),s.stop()}else{if(r.isCollapsed&&!r.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:w2(e.model,"forward")}),o.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,i=e.commands,s=i.get("enter");this.listenTo(e.editing.view.document,"enter",(o,r)=>{const a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&Qt(l)&&l.isEmpty&&!r.isSoft){const c=xr(l),u=h2(l);c&&u?(e.execute("outdentList"),r.preventDefault(),o.stop()):c&&!u?(e.execute("splitListItemAfter"),r.preventDefault(),o.stop()):u&&(e.execute("splitListItemBefore"),r.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const o=i.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;Mb(a).length===2&&o.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{const s=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(e.execute(s),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,i=this.getListAttributeNames(),s=e.config.get("list.multiBlock"),o=s?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(o,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(o,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",IZ())}),s||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:v2(i),converterPriority:"high"}).add(a=>{a.on("attribute",b2(i,this._downcastStrategies,t)),a.on("remove",PZ(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:v2(i,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",b2(i,this._downcastStrategies,t,{dataPipeline:!0}))});const r=MZ(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",r),e.data.mapper.on("modelToViewPosition",r),this.listenTo(t.document,"change:data",AZ(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=l4(c.listType)||l.id!=c4(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>DZ(e,i,t,this)),this.on("postFixer",(i,{listNodes:s,writer:o})=>{i.return=TZ(s,o)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:s,writer:o,seenIds:r})=>{i.return=SZ(s,r,o)||i.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",FZ(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,s)=>{e.change(o=>{const r=Array.from(s.content.getChildren()),a=r[r.length-1];if(r.length>1&&a.is("element")&&a.isEmpty&&r.slice(0,-1).every(Qt)&&o.remove(a),s.method=="copy"||s.method=="cut"){const l=Array.from(s.content.getChildren());Lc(l)&&Cf(l,o)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function DZ(n,e,t,i){const s=n.document.differ.getChanges(),o=new Map,r=i.editor.config.get("list.multiBlock");let a=!1;for(const c of s){if(c.type=="insert"&&c.name!="$text"){const u=c.position.nodeAfter;if(!n.schema.checkAttribute(u,"listItemId"))for(const d of Array.from(u.getAttributeKeys()))t.includes(d)&&(e.removeAttribute(d,u),a=!0);Fi(c.position,o),c.attributes.has("listItemId")||Fi(c.position.getShiftedBy(c.length),o);for(const{item:d,previousPosition:h}of n.createRangeIn(u))Qt(d)&&Fi(h,o)}else c.type=="remove"?Fi(c.position,o):c.type=="attribute"&&t.includes(c.attributeKey)&&(Fi(c.range.start,o),c.attributeNewValue===null&&Fi(c.range.start.getShiftedBy(1),o));if(!r&&c.type=="attribute"&&wd.includes(c.attributeKey)){const u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(e.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(e.rename(u,"listItem"),a=!0)}}const l=new Set;for(const c of o.values())a=i.fire("postFixer",{listNodes:new pZ(c),listHead:c,writer:e,seenIds:l})||a;return a}function FZ(n){return(e,[t,i])=>{const s=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!s.length)return;const r=(i?n.createSelection(i):n.document.selection).getFirstPosition();let a;if(Qt(r.parent))a=r.parent;else if(Qt(r.nodeBefore))a=r.nodeBefore;else return;n.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=s[0].getAttribute("listIndent")||0,h=Math.max(u-d,0);for(const f of s){const p=Qt(f);a.is("element","listItem")&&f.is("element","paragraph")&&l.rename(f,"listItem"),l.setAttributes({listIndent:(p?f.getAttribute("listIndent"):0)+h,listItemId:p?f.getAttribute("listItemId"):Fa.next(),listType:c},f)}})}}function w2(n,e){const t=n.document.selection;if(!t.isCollapsed)return!Nc(n);if(e==="forward")return!0;const s=t.getFirstPosition().parent,o=s.previousSibling;return n.schema.isObject(o)?!1:o.isEmpty?!0:Lc([s,o])}function _2(n,e,t,i){n.ui.componentFactory.add(e,()=>{const s=y2(Ne,n,e,t,i);return s.set({tooltip:!0,isToggleable:!0}),s}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{const s=y2(nn,n,e,t,i);return s.set({role:"menuitemcheckbox",isToggleable:!0}),s})}function y2(n,e,t,i,s){const o=e.commands.get(t),r=new n(e.locale);return r.set({label:i,icon:s}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",()=>{e.execute(t),e.editing.view.focus()}),r}class $Z extends H{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||_2(this.editor,"numberedList",e("Numbered List"),he.numberedList),this.editor.ui.componentFactory.has("bulletedList")||_2(this.editor,"bulletedList",e("Bulleted List"),he.bulletedList)}}class h4 extends H{static get requires(){return[VZ,$Z]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}const UZ=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of UZ);function f4(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let cl=f4();function HZ(n){cl=n}const jZ=/[&<>"']/,zZ=/[&<>"']/g,WZ=/[<>"']|&(?!#?\w+;)/,qZ=/[<>"']|&(?!#?\w+;)/g,GZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k2=n=>GZ[n];function on(n,e){if(e){if(jZ.test(n))return n.replace(zZ,k2)}else if(WZ.test(n))return n.replace(qZ,k2);return n}const KZ=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function p4(n){return n.replace(KZ,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const XZ=/(^|[^\[])\^/g;function lt(n,e){n=n.source||n,e=e||"";const t={replace:(i,s)=>(s=s.source||s,s=s.replace(XZ,"$1"),n=n.replace(i,s),t),getRegex:()=>new RegExp(n,e)};return t}const ZZ=/[^\w:]/g,JZ=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function C2(n,e,t){if(n){let i;try{i=decodeURIComponent(p4(t)).replace(ZZ,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!JZ.test(t)&&(t=tJ(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Qu={},YZ=/^[^:]+:\/*[^/]*$/,QZ=/^([^:]+:)[\s\S]*$/,eJ=/^([^:]+:\/*[^/]*)[\s\S]*$/;function tJ(n,e){Qu[" "+n]||(YZ.test(n)?Qu[" "+n]=n+"/":Qu[" "+n]=_d(n,"/",!0)),n=Qu[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(QZ,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(eJ,"$1")+e:n+e}const ph={exec:function(){}};function ts(n){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function E2(n,e){const t=n.replace(/\|/g,(o,r,a)=>{let l=!1,c=r;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/);let s=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;s<i.length;s++)i[s]=i[s].trim().replace(/\\\|/g,"|");return i}function _d(n,e,t){const i=n.length;if(i===0)return"";let s=0;for(;s<i;){const o=n.charAt(i-s-1);if(o===e&&!t)s++;else if(o!==e&&t)s++;else break}return n.substr(0,i-s)}function nJ(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let i=0,s=0;for(;s<t;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])i++;else if(n[s]===e[1]&&(i--,i<0))return s;return-1}function m4(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x2(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function T2(n,e,t,i){const s=e.href,o=e.title?on(e.title):null,r=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:s,title:o,text:r,tokens:i.inlineTokens(r,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:s,title:o,text:on(r)}}function iJ(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(s=>{const o=s.match(/^\s+/);if(o===null)return s;const[r]=o;return r.length>=i.length?s.slice(i.length):s}).join(`
`)}let Bb=class{constructor(e){this.options=e||cl}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:_d(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],s=iJ(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const o=_d(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}const s={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,s,o,r,a,l,c,u,d,h,f,p,g=t[1].trim();const y=g.length>1,k={type:"list",raw:"",ordered:y,start:y?+g.slice(0,-1):"",loose:!1,items:[]};g=y?`\\d{1,9}\\${g.slice(-1)}`:`\\${g}`,this.options.pedantic&&(g=y?g:"[*+-]");const v=new RegExp(`^( {0,3}${g})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(p=!1,!(!(t=v.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),u=t[2].split(`
`,1)[0],d=e.split(`
`,1)[0],this.options.pedantic?(r=2,f=u.trimLeft()):(r=t[2].search(/[^ ]/),r=r>4?1:r,f=u.slice(r),r+=t[1].length),l=!1,!u&&/^ *$/.test(d)&&(i+=d+`
`,e=e.substring(d.length+1),p=!0),!p){const w=new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(h=e.split(`
`,1)[0],u=h,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!w.test(u));){if(u.search(/[^ ]/)>=r||!u.trim())f+=`
`+u.slice(r);else if(!l)f+=`
`+u;else break;!l&&!u.trim()&&(l=!0),i+=h+`
`,e=e.substring(h.length+1)}}k.loose||(c?k.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(f),s&&(o=s[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,""))),k.items.push({type:"list_item",raw:i,task:!!s,checked:o,loose:!1,text:f}),k.raw+=i}k.items[k.items.length-1].raw=i.trimRight(),k.items[k.items.length-1].text=f.trimRight(),k.raw=k.raw.trimRight();const b=k.items.length;for(a=0;a<b;a++){this.lexer.state.top=!1,k.items[a].tokens=this.lexer.blockTokens(k.items[a].text,[]);const w=k.items[a].tokens.filter(E=>E.type==="space"),C=w.every(E=>{const I=E.raw.split("");let x=0;for(const _ of I)if(_===`
`&&(x+=1),x>1)return!0;return!1});!k.loose&&w.length&&C&&(k.loose=!0,k.items[a].loose=!0)}return k}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):on(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:E2(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let s=i.align.length,o,r,a,l;for(o=0;o<s;o++)/^ *-+: *$/.test(i.align[o])?i.align[o]="right":/^ *:-+: *$/.test(i.align[o])?i.align[o]="center":/^ *:-+ *$/.test(i.align[o])?i.align[o]="left":i.align[o]=null;for(s=i.rows.length,o=0;o<s;o++)i.rows[o]=E2(i.rows[o],i.header.length).map(c=>({text:c}));for(s=i.header.length,r=0;r<s;r++)i.header[r].tokens=[],this.lexer.inlineTokens(i.header[r].text,i.header[r].tokens);for(s=i.rows.length,r=0;r<s;r++)for(l=i.rows[r],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){const t=this.rules.block.text.exec(e);if(t){const i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:on(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):on(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const r=_d(i.slice(0,-1),"\\");if((i.length-r.length)%2===0)return}else{const r=nJ(t[2],"()");if(r>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],o="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);r&&(s=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(i)?s=s.slice(1):s=s.slice(1,-1)),T2(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let s=(i[2]||i[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s||!s.href){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return T2(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&i.match(/[\p{L}\p{N}]/u))return;const o=s[1]||s[2]||"";if(!o||o&&(i===""||this.rules.inline.punctuation.exec(i))){const r=s[0].length-1;let a,l,c=r,u=0;const d=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+r);(s=d.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=a.length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&r%3&&!((r+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(r,l)%2){const f=e.slice(1,r+s.index+l);return{type:"em",raw:e.slice(0,r+s.index+l+1),text:f,tokens:this.lexer.inlineTokens(f,[])}}const h=e.slice(2,r+s.index+l-1);return{type:"strong",raw:e.slice(0,r+s.index+l+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const s=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return s&&o&&(i=i.substring(1,i.length-1)),i=on(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let s,o;return i[2]==="@"?(s=on(this.options.mangle?t(i[1]):i[1]),o="mailto:"+s):(s=on(i[1]),o=s),{type:"link",raw:i[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let s,o;if(i[2]==="@")s=on(this.options.mangle?t(i[0]):i[0]),o="mailto:"+s;else{let r;do r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(r!==i[0]);s=on(i[0]),i[1]==="www."?o="http://"+s:o=s}return{type:"link",raw:i[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):on(i[0]):i[0]:s=on(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:s}}}};const _e={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ph,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};_e._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;_e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;_e.def=lt(_e.def).replace("label",_e._label).replace("title",_e._title).getRegex();_e.bullet=/(?:[*+-]|\d{1,9}[.)])/;_e.listItemStart=lt(/^( *)(bull) */).replace("bull",_e.bullet).getRegex();_e.list=lt(_e.list).replace(/bull/g,_e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_e.def.source+")").getRegex();_e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";_e._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;_e.html=lt(_e.html,"i").replace("comment",_e._comment).replace("tag",_e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();_e.paragraph=lt(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.blockquote=lt(_e.blockquote).replace("paragraph",_e.paragraph).getRegex();_e.normal=ts({},_e);_e.gfm=ts({},_e.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});_e.gfm.table=lt(_e.gfm.table).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.gfm.paragraph=lt(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",_e.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex();_e.pedantic=ts({},_e.normal,{html:lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ph,paragraph:lt(_e.normal._paragraph).replace("hr",_e.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const fe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ph,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ph,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};fe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";fe.punctuation=lt(fe.punctuation).replace(/punctuation/g,fe._punctuation).getRegex();fe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;fe.escapedEmSt=/\\\*|\\_/g;fe._comment=lt(_e._comment).replace("(?:-->|$)","-->").getRegex();fe.emStrong.lDelim=lt(fe.emStrong.lDelim).replace(/punct/g,fe._punctuation).getRegex();fe.emStrong.rDelimAst=lt(fe.emStrong.rDelimAst,"g").replace(/punct/g,fe._punctuation).getRegex();fe.emStrong.rDelimUnd=lt(fe.emStrong.rDelimUnd,"g").replace(/punct/g,fe._punctuation).getRegex();fe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;fe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;fe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;fe.autolink=lt(fe.autolink).replace("scheme",fe._scheme).replace("email",fe._email).getRegex();fe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;fe.tag=lt(fe.tag).replace("comment",fe._comment).replace("attribute",fe._attribute).getRegex();fe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;fe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;fe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;fe.link=lt(fe.link).replace("label",fe._label).replace("href",fe._href).replace("title",fe._title).getRegex();fe.reflink=lt(fe.reflink).replace("label",fe._label).replace("ref",_e._label).getRegex();fe.nolink=lt(fe.nolink).replace("ref",_e._label).getRegex();fe.reflinkSearch=lt(fe.reflinkSearch,"g").replace("reflink",fe.reflink).replace("nolink",fe.nolink).getRegex();fe.normal=ts({},fe);fe.pedantic=ts({},fe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:lt(/^!?\[(label)\]\((.*?)\)/).replace("label",fe._label).getRegex(),reflink:lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fe._label).getRegex()});fe.gfm=ts({},fe.normal,{escape:lt(fe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});fe.gfm.url=lt(fe.gfm.url,"i").replace("email",fe.gfm._extended_email).getRegex();fe.breaks=ts({},fe.gfm,{br:lt(fe.br).replace("{2,}","*").getRegex(),text:lt(fe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function sJ(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function S2(n){let e="",t,i;const s=n.length;for(t=0;t<s;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class Qs{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||cl,this.options.tokenizer=this.options.tokenizer||new Bb,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:_e.normal,inline:fe.normal};this.options.pedantic?(t.block=_e.pedantic,t.inline=fe.pedantic):this.options.gfm&&(t.block=_e.gfm,this.options.breaks?t.inline=fe.breaks:t.inline=fe.gfm),this.tokenizer.rules=t}static get rules(){return{block:_e,inline:fe}}static lex(e,t){return new Qs(t).lex(e)}static lexInline(e,t){return new Qs(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,s,o,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){s=t[t.length-1],r&&s.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,s,o,r=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+x2("a",a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+x2("a",a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),s=t[t.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),s=t[t.length-1],s&&i.type==="text"&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,r,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,S2)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,S2))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let h;this.options.extensions.startInline.forEach(function(f){h=f.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(o,sJ)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class Lb{constructor(e){this.options=e||cl}code(e,t,i){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(e,s);o!=null&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+on(s,!0)+'">'+(i?e:on(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:on(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){const s=t?"ol":"ul",o=t&&i!==1?' start="'+i+'"':"";return"<"+s+o+`>
`+e+"</"+s+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=C2(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<a href="'+on(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>",s}image(e,t,i){if(e=C2(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let s='<img src="'+e+'" alt="'+i+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class g4{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class b4{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,s=0;if(this.seen.hasOwnProperty(i)){s=this.seen[e];do s++,i=e+"-"+s;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=s,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}}class eo{constructor(e){this.options=e||cl,this.options.renderer=this.options.renderer||new Lb,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new g4,this.slugger=new b4}static parse(e,t){return new eo(t).parse(e)}static parseInline(e,t){return new eo(t).parseInline(e)}parse(e,t=!0){let i="",s,o,r,a,l,c,u,d,h,f,p,g,y,k,v,b,w,C,E;const I=e.length;for(s=0;s<I;s++){if(f=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(E=this.options.extensions.renderers[f.type].call({parser:this},f),E!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))){i+=E||"";continue}switch(f.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(f.tokens),f.depth,p4(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(f.text,f.lang,f.escaped);continue}case"table":{for(d="",u="",a=f.header.length,o=0;o<a;o++)u+=this.renderer.tablecell(this.parseInline(f.header[o].tokens),{header:!0,align:f.align[o]});for(d+=this.renderer.tablerow(u),h="",a=f.rows.length,o=0;o<a;o++){for(c=f.rows[o],u="",l=c.length,r=0;r<l;r++)u+=this.renderer.tablecell(this.parseInline(c[r].tokens),{header:!1,align:f.align[r]});h+=this.renderer.tablerow(u)}i+=this.renderer.table(d,h);continue}case"blockquote":{h=this.parse(f.tokens),i+=this.renderer.blockquote(h);continue}case"list":{for(p=f.ordered,g=f.start,y=f.loose,a=f.items.length,h="",o=0;o<a;o++)v=f.items[o],b=v.checked,w=v.task,k="",v.task&&(C=this.renderer.checkbox(b),y?v.tokens.length>0&&v.tokens[0].type==="paragraph"?(v.tokens[0].text=C+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&v.tokens[0].tokens[0].type==="text"&&(v.tokens[0].tokens[0].text=C+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:C}):k+=C),k+=this.parse(v.tokens,y),h+=this.renderer.listitem(k,w,b);i+=this.renderer.list(h,p,g);continue}case"html":{i+=this.renderer.html(f.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{for(h=f.tokens?this.parseInline(f.tokens):f.text;s+1<I&&e[s+1].type==="text";)f=e[++s],h+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);i+=t?this.renderer.paragraph(h):h;continue}default:{const x='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(x);return}else throw new Error(x)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",s,o,r;const a=e.length;for(s=0;s<a;s++){if(o=e[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(r=this.options.extensions.renderers[o.type].call({parser:this},o),r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){i+=r||"";continue}switch(o.type){case"escape":{i+=t.text(o.text);break}case"html":{i+=t.html(o.text);break}case"link":{i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{i+=t.image(o.href,o.title,o.text);break}case"strong":{i+=t.strong(this.parseInline(o.tokens,t));break}case"em":{i+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{i+=t.codespan(o.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(o.tokens,t));break}case"text":{i+=t.text(o.text);break}default:{const l='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}}function xe(n,e,t){if(typeof n>"u"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=ts({},xe.defaults,e||{}),m4(e),t){const i=e.highlight;let s;try{s=Qs.lex(n,e)}catch(a){return t(a)}const o=function(a){let l;if(!a)try{e.walkTokens&&xe.walkTokens(s,e.walkTokens),l=eo.parse(s,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!s.length))return o();let r=0;xe.walkTokens(s,function(a){a.type==="code"&&(r++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return o(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),r--,r===0&&o()})},0))}),r===0&&o();return}try{const i=Qs.lex(n,e);return e.walkTokens&&xe.walkTokens(i,e.walkTokens),eo.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+on(i.message+"",!0)+"</pre>";throw i}}xe.options=xe.setOptions=function(n){return ts(xe.defaults,n),HZ(xe.defaults),xe};xe.getDefaults=f4;xe.defaults=cl;xe.use=function(...n){const e=ts({},...n),t=xe.defaults.extensions||{renderers:{},childTokens:{}};let i;n.forEach(s=>{if(s.extensions&&(i=!0,s.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const r=t.renderers?t.renderers[o.name]:null;r?t.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=r.apply(this,a)),l}:t.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)})),s.renderer){const o=xe.defaults.renderer||new Lb;for(const r in s.renderer){const a=o[r];o[r]=(...l)=>{let c=s.renderer[r].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.renderer=o}if(s.tokenizer){const o=xe.defaults.tokenizer||new Bb;for(const r in s.tokenizer){const a=o[r];o[r]=(...l)=>{let c=s.tokenizer[r].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.tokenizer=o}if(s.walkTokens){const o=xe.defaults.walkTokens;e.walkTokens=function(r){s.walkTokens.call(this,r),o&&o.call(this,r)}}i&&(e.extensions=t),xe.setOptions(e)})};xe.walkTokens=function(n,e){for(const t of n)switch(e.call(xe,t),t.type){case"table":{for(const i of t.header)xe.walkTokens(i.tokens,e);for(const i of t.rows)for(const s of i)xe.walkTokens(s.tokens,e);break}case"list":{xe.walkTokens(t.items,e);break}default:xe.defaults.extensions&&xe.defaults.extensions.childTokens&&xe.defaults.extensions.childTokens[t.type]?xe.defaults.extensions.childTokens[t.type].forEach(function(i){xe.walkTokens(t[i],e)}):t.tokens&&xe.walkTokens(t.tokens,e)}};xe.parseInline=function(n,e){if(typeof n>"u"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=ts({},xe.defaults,e||{}),m4(e);try{const t=Qs.lexInline(n,e);return e.walkTokens&&xe.walkTokens(t,e.walkTokens),eo.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+on(t.message+"",!0)+"</pre>";throw t}};xe.Parser=eo;xe.parser=eo.parse;xe.Renderer=Lb;xe.TextRenderer=g4;xe.Lexer=Qs;xe.lexer=Qs.lex;xe.Tokenizer=Bb;xe.Slugger=b4;xe.parse=xe;xe.options;xe.setOptions;xe.use;xe.walkTokens;xe.parseInline;eo.parse;Qs.lex;var Nb=typeof window<"u"?window:{};function oJ(){var n=Nb.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}function rJ(){var n=function(){};return aJ()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function aJ(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch{Nb.ActiveXObject&&(n=!0)}return n}oJ()?Nb.DOMParser:rJ();/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function I2(n,e){const t=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=s.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(s.item),c=[...l.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(c);const u=n.getMediaViewElement(a,r,e);a.insert(a.createPositionAt(l,0),u)};return i=>{i.on("attribute:url:media",t)}}function lJ(n,e,t){return e.setCustomProperty("media",!0,n),yb(n,e,{label:t})}function A2(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function P2(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function v4(n,e,t,i){n.change(s=>{const o=s.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}class cJ extends Ze{refresh(){const e=this.editor.model,t=e.document.selection,i=P2(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=dJ(t)||uJ(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,s=P2(i);s?t.change(o=>{o.setAttribute("url",e,s)}):v4(t,e,i,!0)}}function uJ(n,e){let i=kb(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function dJ(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}var hJ='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const fJ="0 0 64 42";class pJ{locale;providerDefinitions;constructor(e,t){const i=t.providers,s=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(s).filter(a=>{const l=a.name;return l?!o.has(l):(Ue("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=r}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new O2(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,s=at(t.url);for(const o of s){const r=this._getUrlMatches(e,o);if(r)return new O2(this.locale,e,r,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let s=e.replace(/^https?:\/\//,"");return i=s.match(t),i||(s=s.replace(/^www\./,""),i=s.match(t),i)?i:null}}class O2{url;_locale;_match;_previewRenderer;constructor(e,t,i,s){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=s}getViewElement(e,t){const i={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const o=this._getPreviewHtml(t);s=e.createRawElement("div",i,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(i.url=this.url),s=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new _s,t=this._locale.t;return e.content=hJ,e.viewBox=fJ,new ti({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}class mh extends H{static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}registry;constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const i=t[1],s=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new pJ(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new cJ(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url");return A2(c,a,u,{elementName:r,renderMediaPreview:!!u&&o})}}),s.for("dataDowncast").add(I2(a,{elementName:r,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url"),d=A2(c,a,u,{elementName:r,renderForEditingView:!0});return lJ(d,c,i("media widget"))}}),s.for("editingDowncast").add(I2(a,{elementName:r,renderForEditingView:!0})),s.for("upcast").elementToElement({view:l=>["oembed",r].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{const u=l.getAttribute("url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{const u=l.getAttribute("data-oembed-url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).add(l=>{const c=(u,d,h)=>{if(!h.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:f,modelCursor:p}=h.convertChildren(d.viewItem,d.modelCursor);d.modelRange=f,d.modelCursor=p,en(f.getItems())||h.consumable.revert(d.viewItem,{name:!0,classes:"media"})};l.on("element:figure",c)})}}const mJ=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class gJ extends H{static get requires(){return[Eb,vs,Tb]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const o=t.selection.getFirstRange(),r=Wt.fromPosition(o.start);r.stickiness="toPrevious";const a=Wt.fromPosition(o.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(r,a),r.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(ue.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,s=i.plugins.get(mh).registry,o=new Vn(e,t),r=o.getWalker({ignoreElementEnd:!0});let a="";for(const c of r)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(mJ)){o.detach();return}if(!s.hasMedia(a)){o.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=Wt.fromPosition(e),this._timeoutId=ue.window.setTimeout(()=>{i.model.change(c=>{this._timeoutId=null,c.remove(o),o.detach();let u=null;this._positionToInsert.root.rootName!=="$graveyard"&&(u=this._positionToInsert),v4(i.model,a,u,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(vs).requestUndoOnBackspace()},100)}}class bJ extends me{focusTracker;keystrokes;urlInputView;_validators;_urlInputViewInfoDefault;_urlInputViewInfoTip;constructor(e,t){super(t),this.focusTracker=new tn,this.keystrokes=new gn,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),lu({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new al(this.locale,du),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}}var vJ='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class wJ extends H{static get requires(){return[mh,Vi]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}_formView;init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton(Ne);return i.tooltip=!0,i.label=t("Insert media"),i}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton(nn);return i.label=t("Media"),i})}_createDialogButton(e){const t=this.editor,i=new e(t.locale),s=t.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return i.icon=vJ,i.bind("isEnabled").to(s,"isEnabled"),i.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),i}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.commands.get("mediaEmbed"),s=e.locale.t;if(!this._formView){const o=e.plugins.get(mh).registry;this._formView=new(mf(bJ))(_J(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:s("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:s("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}}function _J(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}class w4 extends H{static get requires(){return[mh,wJ,gJ,hu]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */Re.arrowup,Re.arrowdown,Re.esc;Re.enter,Re.tab;var am={exports:{}},lm={exports:{}},cm={};/**
* @vue/compiler-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const $a=Symbol(""),Ta=Symbol(""),Ef=Symbol(""),Vc=Symbol(""),Vb=Symbol(""),$o=Symbol(""),Db=Symbol(""),Fb=Symbol(""),xf=Symbol(""),Tf=Symbol(""),ul=Symbol(""),Sf=Symbol(""),$b=Symbol(""),If=Symbol(""),Af=Symbol(""),Pf=Symbol(""),Of=Symbol(""),Mf=Symbol(""),Rf=Symbol(""),Ub=Symbol(""),Hb=Symbol(""),bu=Symbol(""),Dc=Symbol(""),Bf=Symbol(""),Lf=Symbol(""),Ua=Symbol(""),dl=Symbol(""),Nf=Symbol(""),gh=Symbol(""),_4=Symbol(""),bh=Symbol(""),Fc=Symbol(""),y4=Symbol(""),k4=Symbol(""),Vf=Symbol(""),C4=Symbol(""),E4=Symbol(""),Df=Symbol(""),jb=Symbol(""),Tr={[$a]:"Fragment",[Ta]:"Teleport",[Ef]:"Suspense",[Vc]:"KeepAlive",[Vb]:"BaseTransition",[$o]:"openBlock",[Db]:"createBlock",[Fb]:"createElementBlock",[xf]:"createVNode",[Tf]:"createElementVNode",[ul]:"createCommentVNode",[Sf]:"createTextVNode",[$b]:"createStaticVNode",[If]:"resolveComponent",[Af]:"resolveDynamicComponent",[Pf]:"resolveDirective",[Of]:"resolveFilter",[Mf]:"withDirectives",[Rf]:"renderList",[Ub]:"renderSlot",[Hb]:"createSlots",[bu]:"toDisplayString",[Dc]:"mergeProps",[Bf]:"normalizeClass",[Lf]:"normalizeStyle",[Ua]:"normalizeProps",[dl]:"guardReactiveProps",[Nf]:"toHandlers",[gh]:"camelize",[_4]:"capitalize",[bh]:"toHandlerKey",[Fc]:"setBlockTracking",[y4]:"pushScopeId",[k4]:"popScopeId",[Vf]:"withCtx",[C4]:"unref",[E4]:"isRef",[Df]:"withMemo",[jb]:"isMemoSame"};function x4(n){Object.getOwnPropertySymbols(n).forEach(e=>{Tr[e]=n[e]})}const yJ={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},kJ={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},CJ={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},EJ={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},sn={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function T4(n,e=""){return{type:0,source:e,children:n,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:sn}}function Ha(n,e,t,i,s,o,r,a=!1,l=!1,c=!1,u=sn){return n&&(a?(n.helper($o),n.helper(Ar(n.inSSR,c))):n.helper(Ir(n.inSSR,c)),r&&n.helper(Mf)),{type:13,tag:e,props:t,children:i,patchFlag:s,dynamicProps:o,directives:r,isBlock:a,disableTracking:l,isComponent:c,loc:u}}function Mo(n,e=sn){return{type:17,loc:e,elements:n}}function di(n,e=sn){return{type:15,loc:e,properties:n}}function Ht(n,e){return{type:16,loc:sn,key:Ee(n)?Pe(n,!0):n,value:e}}function Pe(n,e=!1,t=sn,i=0){return{type:4,loc:t,content:n,isStatic:e,constType:e?3:i}}function xJ(n,e){return{type:5,loc:e,content:Ee(n)?Pe(n,!1,e):n}}function xi(n,e=sn){return{type:8,loc:e,children:n}}function qt(n,e=[],t=sn){return{type:14,loc:t,callee:n,arguments:e}}function Sr(n,e=void 0,t=!1,i=!1,s=sn){return{type:18,params:n,returns:e,newline:t,isSlot:i,loc:s}}function vh(n,e,t,i=!0){return{type:19,test:n,consequent:e,alternate:t,newline:i,loc:sn}}function S4(n,e,t=!1,i=!1){return{type:20,index:n,value:e,needPauseTracking:t,inVOnce:i,needArraySpread:!1,loc:sn}}function I4(n){return{type:21,body:n,loc:sn}}function TJ(n){return{type:22,elements:n,loc:sn}}function SJ(n,e,t){return{type:23,test:n,consequent:e,alternate:t,loc:sn}}function IJ(n,e){return{type:24,left:n,right:e,loc:sn}}function AJ(n){return{type:25,expressions:n,loc:sn}}function PJ(n){return{type:26,returns:n,loc:sn}}function Ir(n,e){return n||e?xf:Tf}function Ar(n,e){return n||e?Db:Fb}function Ff(n,{helper:e,removeHelper:t,inSSR:i}){n.isBlock||(n.isBlock=!0,t(Ir(i,n.isComponent)),e($o),e(Ar(i,n.isComponent)))}const M2=new Uint8Array([123,123]),R2=new Uint8Array([125,125]);function B2(n){return n>=97&&n<=122||n>=65&&n<=90}function ri(n){return n===32||n===10||n===9||n===12||n===13}function lo(n){return n===47||n===62||ri(n)}function wh(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}const wn={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class OJ{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=M2,this.delimiterClose=R2,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=M2,this.delimiterClose=R2}getPos(e){let t=1,i=e+1;for(let s=this.newlines.length-1;s>=0;s--){const o=this.newlines[s];if(e>o){t=s+2,i=e-o;break}}return{column:i,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const t=this.index+1-this.delimiterOpen.length;t>this.sectionStart&&this.cbs.ontext(this.sectionStart,t),this.state=3,this.sectionStart=t}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(!(t?lo(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!t){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||ri(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const i=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=i}this.sectionStart=t+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===wn.TitleEnd||this.currentSequence===wn.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===wn.Cdata[this.sequenceIndex]?++this.sequenceIndex===wn.Cdata.length&&(this.state=28,this.currentSequence=wn.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(t===10&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===wn.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):B2(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){lo(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(lo(e)){const t=this.buffer.slice(this.sectionStart,this.index);t!=="template"&&this.enterRCDATA(wh("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){ri(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=B2(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||ri(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):ri(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):ri(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||lo(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||lo(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||lo(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||lo(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||lo(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):ri(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):ri(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){ri(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=wn.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===wn.ScriptEnd[3]?this.startSpecial(wn.ScriptEnd,4):e===wn.StyleEnd[3]?this.startSpecial(wn.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===wn.TitleEnd[3]?this.startSpecial(wn.TitleEnd,4):e===wn.TextareaEnd[3]?this.startSpecial(wn.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);switch(t===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(t);break}case 2:{this.stateInterpolationOpen(t);break}case 3:{this.stateInterpolation(t);break}case 4:{this.stateInterpolationClose(t);break}case 31:{this.stateSpecialStartSequence(t);break}case 32:{this.stateInRCDATA(t);break}case 26:{this.stateCDATASequence(t);break}case 19:{this.stateInAttrValueDoubleQuotes(t);break}case 12:{this.stateInAttrName(t);break}case 13:{this.stateInDirName(t);break}case 14:{this.stateInDirArg(t);break}case 15:{this.stateInDynamicDirArg(t);break}case 16:{this.stateInDirModifier(t);break}case 28:{this.stateInCommentLike(t);break}case 27:{this.stateInSpecialComment(t);break}case 11:{this.stateBeforeAttrName(t);break}case 6:{this.stateInTagName(t);break}case 34:{this.stateInSFCRootTagName(t);break}case 9:{this.stateInClosingTagName(t);break}case 5:{this.stateBeforeTagName(t);break}case 17:{this.stateAfterAttrName(t);break}case 20:{this.stateInAttrValueSingleQuotes(t);break}case 18:{this.stateBeforeAttrValue(t);break}case 8:{this.stateBeforeClosingTagName(t);break}case 10:{this.stateAfterClosingTagName(t);break}case 29:{this.stateBeforeSpecialS(t);break}case 30:{this.stateBeforeSpecialT(t);break}case 21:{this.stateInAttrValueNoQuotes(t);break}case 7:{this.stateInSelfClosingTag(t);break}case 23:{this.stateInDeclaration(t);break}case 22:{this.stateBeforeDeclaration(t);break}case 25:{this.stateBeforeComment(t);break}case 24:{this.stateInProcessingInstruction(t);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===wn.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}const MJ={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},RJ={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:n=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${n}.sync\` should be changed to \`v-model:${n}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function Bg(n,{compatConfig:e}){const t=e&&e[n];return n==="MODE"?t||3:t}function wr(n,e){const t=Bg("MODE",e),i=Bg(n,e);return t===3?i===!0:i!==!1}function ja(n,e,t,...i){return wr(n,e)}function BJ(n,e,t,...i){if(Bg(n,e)==="suppress-warning")return;const{message:o,link:r}=RJ[n],a=`(deprecation ${n}) ${typeof o=="function"?o(...i):o}${r?`
  Details: ${r}`:""}`,l=new SyntaxError(a);l.code=n,t&&(l.loc=t),e.onWarn(l)}function zb(n){throw n}function A4(n){}function _t(n,e,t,i){const s=`https://vuejs.org/error-reference/#compiler-${n}`,o=new SyntaxError(String(s));return o.code=n,o.loc=e,o}const LJ={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},NJ={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function VJ(n,e,t=!1,i=[],s=Object.create(null)){}function DJ(n,e,t){return!1}function FJ(n,e){if(n&&(n.type==="ObjectProperty"||n.type==="ArrayPattern")){let t=e.length;for(;t--;){const i=e[t];if(i.type==="AssignmentExpression")return!0;if(i.type!=="ObjectProperty"&&!i.type.endsWith("Pattern"))break}}return!1}function $J(n){let e=n.length;for(;e--;){const t=n[e];if(t.type==="NewExpression")return!0;if(t.type!=="MemberExpression")break}return!1}function UJ(n,e){for(const t of n.params)for(const i of ds(t))e(i)}function P4(n,e){const t=n.type==="SwitchCase"?n.consequent:n.body;for(const i of t)if(i.type==="VariableDeclaration"){if(i.declare)continue;for(const s of i.declarations)for(const o of ds(s.id))e(o)}else if(i.type==="FunctionDeclaration"||i.type==="ClassDeclaration"){if(i.declare||!i.id)continue;e(i.id)}else HJ(i)?jJ(i,!0,e):i.type==="SwitchStatement"&&zJ(i,!0,e)}function HJ(n){return n.type==="ForOfStatement"||n.type==="ForInStatement"||n.type==="ForStatement"}function jJ(n,e,t){const i=n.type==="ForStatement"?n.init:n.left;if(i&&i.type==="VariableDeclaration"&&(i.kind==="var"?e:!e))for(const s of i.declarations)for(const o of ds(s.id))t(o)}function zJ(n,e,t){for(const i of n.cases){for(const s of i.consequent)if(s.type==="VariableDeclaration"&&(s.kind==="var"?e:!e))for(const o of s.declarations)for(const r of ds(o.id))t(r);P4(i,t)}}function ds(n,e=[]){switch(n.type){case"Identifier":e.push(n);break;case"MemberExpression":let t=n;for(;t.type==="MemberExpression";)t=t.object;e.push(t);break;case"ObjectPattern":for(const i of n.properties)i.type==="RestElement"?ds(i.argument,e):ds(i.value,e);break;case"ArrayPattern":n.elements.forEach(i=>{i&&ds(i,e)});break;case"RestElement":ds(n.argument,e);break;case"AssignmentPattern":ds(n.left,e);break}return e}const WJ=n=>/Function(?:Expression|Declaration)$|Method$/.test(n.type),O4=n=>n&&(n.type==="ObjectProperty"||n.type==="ObjectMethod")&&!n.computed,qJ=(n,e)=>O4(e)&&e.key===n,M4=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function R4(n){return M4.includes(n.type)?R4(n.expression):n}const Dn=n=>n.type===4&&n.isStatic;function Wb(n){switch(n){case"Teleport":case"teleport":return Ta;case"Suspense":case"suspense":return Ef;case"KeepAlive":case"keep-alive":return Vc;case"BaseTransition":case"base-transition":return Vb}}const GJ=/^$|^\d|[^\$\w\xA0-\uFFFF]/,vu=n=>!GJ.test(n),qb=/[A-Za-z_$\xA0-\uFFFF]/,KJ=/[\.\?\w$\xA0-\uFFFF]/,XJ=/\s+[.[]\s*|\s*[.[]\s+/g,B4=n=>n.type===4?n.content:n.loc.source,L4=n=>{const e=B4(n).trim().replace(XJ,a=>a.trim());let t=0,i=[],s=0,o=0,r=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(t){case 0:if(l==="[")i.push(t),t=1,s++;else if(l==="(")i.push(t),t=2,o++;else if(!(a===0?qb:KJ).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(i.push(t),t=3,r=l):l==="["?s++:l==="]"&&(--s||(t=i.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")i.push(t),t=3,r=l;else if(l==="(")o++;else if(l===")"){if(a===e.length-1)return!1;--o||(t=i.pop())}break;case 3:l===r&&(t=i.pop(),r=null);break}}return!s&&!o},ZJ=rn,Gb=L4,JJ=/^\s*(?:async\s*)?(?:\([^)]*?\)|[\w$_]+)\s*(?::[^=]+)?=>|^\s*(?:async\s+)?function(?:\s+[\w$]+)?\s*\(/,N4=n=>JJ.test(B4(n)),YJ=rn,V4=N4;function QJ(n,e,t=e.length){return D4({offset:n.offset,line:n.line,column:n.column},e,t)}function D4(n,e,t=e.length){let i=0,s=-1;for(let o=0;o<t;o++)e.charCodeAt(o)===10&&(i++,s=o);return n.offset+=t,n.line+=i,n.column=s===-1?n.column+t:t-s,n}function eY(n,e){if(!n)throw new Error(e||"unexpected compiler condition")}function Nn(n,e,t=!1){for(let i=0;i<n.props.length;i++){const s=n.props[i];if(s.type===7&&(t||s.exp)&&(Ee(e)?s.name===e:e.test(s.name)))return s}}function wu(n,e,t=!1,i=!1){for(let s=0;s<n.props.length;s++){const o=n.props[s];if(o.type===6){if(t)continue;if(o.name===e&&(o.value||i))return o}else if(o.name==="bind"&&(o.exp||i)&&So(o.arg,e))return o}}function So(n,e){return!!(n&&Dn(n)&&n.content===e)}function F4(n){return n.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function yd(n){return n.type===5||n.type===2}function Lg(n){return n.type===7&&n.name==="pre"}function Kb(n){return n.type===7&&n.name==="slot"}function za(n){return n.type===1&&n.tagType===3}function $c(n){return n.type===1&&n.tagType===2}const tY=new Set([Ua,dl]);function $4(n,e=[]){if(n&&!Ee(n)&&n.type===14){const t=n.callee;if(!Ee(t)&&tY.has(t))return $4(n.arguments[0],e.concat(n))}return[n,e]}function Uc(n,e,t){let i,s=n.type===13?n.props:n.arguments[2],o=[],r;if(s&&!Ee(s)&&s.type===14){const a=$4(s);s=a[0],o=a[1],r=o[o.length-1]}if(s==null||Ee(s))i=di([e]);else if(s.type===14){const a=s.arguments[0];!Ee(a)&&a.type===15?L2(e,a)||a.properties.unshift(e):s.callee===Nf?i=qt(t.helper(Dc),[di([e]),s]):s.arguments.unshift(di([e])),!i&&(i=s)}else s.type===15?(L2(e,s)||s.properties.unshift(e),i=s):(i=qt(t.helper(Dc),[di([e]),s]),r&&r.callee===dl&&(r=o[o.length-2]));n.type===13?r?r.arguments[0]=i:n.props=i:r?r.arguments[0]=i:n.arguments[2]=i}function L2(n,e){let t=!1;if(n.key.type===4){const i=n.key.content;t=e.properties.some(s=>s.key.type===4&&s.key.content===i)}return t}function Wa(n,e){return`_${e}_${n.replace(/[^\w]/g,(t,i)=>t==="-"?"_":n.charCodeAt(i).toString())}`}function Bi(n,e){if(!n||Object.keys(e).length===0)return!1;switch(n.type){case 1:for(let t=0;t<n.props.length;t++){const i=n.props[t];if(i.type===7&&(Bi(i.arg,e)||Bi(i.exp,e)))return!0}return n.children.some(t=>Bi(t,e));case 11:return Bi(n.source,e)?!0:n.children.some(t=>Bi(t,e));case 9:return n.branches.some(t=>Bi(t,e));case 10:return Bi(n.condition,e)?!0:n.children.some(t=>Bi(t,e));case 4:return!n.isStatic&&vu(n.content)&&!!e[n.content];case 8:return n.children.some(t=>Xe(t)&&Bi(t,e));case 5:case 12:return Bi(n.content,e);case 2:case 3:case 20:return!1;default:return!1}}function U4(n){return n.type===14&&n.callee===Df?n.arguments[1].returns:n}const H4=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,j4={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:or,isPreTag:or,isIgnoreNewlineTag:or,isCustomElement:or,onError:zb,onWarn:A4,comments:!1,prefixIdentifiers:!1};let Je=j4,Hc=null,js="",yn=null,Fe=null,qn="",Is=-1,sr=-1,Xb=0,Co=!1,Ng=null;const St=[],Bt=new OJ(St,{onerr:Es,ontext(n,e){ed(un(n,e),n,e)},ontextentity(n,e,t){ed(n,e,t)},oninterpolation(n,e){if(Co)return ed(un(n,e),n,e);let t=n+Bt.delimiterOpen.length,i=e-Bt.delimiterClose.length;for(;ri(js.charCodeAt(t));)t++;for(;ri(js.charCodeAt(i-1));)i--;let s=un(t,i);s.includes("&")&&(s=Je.decodeEntities(s,!1)),Vg({type:5,content:Cd(s,!1,Nt(t,i)),loc:Nt(n,e)})},onopentagname(n,e){const t=un(n,e);yn={type:1,tag:t,ns:Je.getNamespace(t,St[0],Je.ns),tagType:0,props:[],children:[],loc:Nt(n-1,e),codegenNode:void 0}},onopentagend(n){V2(n)},onclosetag(n,e){const t=un(n,e);if(!Je.isVoidTag(t)){let i=!1;for(let s=0;s<St.length;s++)if(St[s].tag.toLowerCase()===t.toLowerCase()){i=!0,s>0&&Es(24,St[0].loc.start.offset);for(let r=0;r<=s;r++){const a=St.shift();kd(a,e,r<s)}break}i||Es(23,z4(n,60))}},onselfclosingtag(n){const e=yn.tag;yn.isSelfClosing=!0,V2(n),St[0]&&St[0].tag===e&&kd(St.shift(),n)},onattribname(n,e){Fe={type:6,name:un(n,e),nameLoc:Nt(n,e),value:void 0,loc:Nt(n)}},ondirname(n,e){const t=un(n,e),i=t==="."||t===":"?"bind":t==="@"?"on":t==="#"?"slot":t.slice(2);if(!Co&&i===""&&Es(26,n),Co||i==="")Fe={type:6,name:t,nameLoc:Nt(n,e),value:void 0,loc:Nt(n)};else if(Fe={type:7,name:i,rawName:t,exp:void 0,arg:void 0,modifiers:t==="."?[Pe("prop")]:[],loc:Nt(n)},i==="pre"){Co=Bt.inVPre=!0,Ng=yn;const s=yn.props;for(let o=0;o<s.length;o++)s[o].type===7&&(s[o]=hY(s[o]))}},ondirarg(n,e){if(n===e)return;const t=un(n,e);if(Co&&!Lg(Fe))Fe.name+=t,ar(Fe.nameLoc,e);else{const i=t[0]!=="[";Fe.arg=Cd(i?t:t.slice(1,-1),i,Nt(n,e),i?3:0)}},ondirmodifier(n,e){const t=un(n,e);if(Co&&!Lg(Fe))Fe.name+="."+t,ar(Fe.nameLoc,e);else if(Fe.name==="slot"){const i=Fe.arg;i&&(i.content+="."+t,ar(i.loc,e))}else{const i=Pe(t,!0,Nt(n,e));Fe.modifiers.push(i)}},onattribdata(n,e){qn+=un(n,e),Is<0&&(Is=n),sr=e},onattribentity(n,e,t){qn+=n,Is<0&&(Is=e),sr=t},onattribnameend(n){const e=Fe.loc.start.offset,t=un(e,n);Fe.type===7&&(Fe.rawName=t),yn.props.some(i=>(i.type===7?i.rawName:i.name)===t)&&Es(2,e)},onattribend(n,e){if(yn&&Fe){if(ar(Fe.loc,e),n!==0)if(qn.includes("&")&&(qn=Je.decodeEntities(qn,!0)),Fe.type===6)Fe.name==="class"&&(qn=q4(qn).trim()),n===1&&!qn&&Es(13,e),Fe.value={type:2,content:qn,loc:n===1?Nt(Is,sr):Nt(Is-1,sr+1)},Bt.inSFCRoot&&yn.tag==="template"&&Fe.name==="lang"&&qn&&qn!=="html"&&Bt.enterRCDATA(wh("</template"),0);else{let t=0;Fe.exp=Cd(qn,!1,Nt(Is,sr),0,t),Fe.name==="for"&&(Fe.forParseResult=iY(Fe.exp));let i=-1;Fe.name==="bind"&&(i=Fe.modifiers.findIndex(s=>s.content==="sync"))>-1&&ja("COMPILER_V_BIND_SYNC",Je,Fe.loc,Fe.arg.loc.source)&&(Fe.name="model",Fe.modifiers.splice(i,1))}(Fe.type!==7||Fe.name!=="pre")&&yn.props.push(Fe)}qn="",Is=sr=-1},oncomment(n,e){Je.comments&&Vg({type:3,content:un(n,e),loc:Nt(n-4,e+3)})},onend(){const n=js.length;for(let e=0;e<St.length;e++)kd(St[e],n-1),Es(24,St[e].loc.start.offset)},oncdata(n,e){St[0].ns!==0?ed(un(n,e),n,e):Es(1,n-9)},onprocessinginstruction(n){(St[0]?St[0].ns:Je.ns)===0&&Es(21,n-1)}}),N2=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,nY=/^\(|\)$/g;function iY(n){const e=n.loc,t=n.content,i=t.match(H4);if(!i)return;const[,s,o]=i,r=(d,h,f=!1)=>{const p=e.start.offset+h,g=p+d.length;return Cd(d,!1,Nt(p,g),0,f?1:0)},a={source:r(o.trim(),t.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=s.trim().replace(nY,"").trim();const c=s.indexOf(l),u=l.match(N2);if(u){l=l.replace(N2,"").trim();const d=u[1].trim();let h;if(d&&(h=t.indexOf(d,c+l.length),a.key=r(d,h,!0)),u[2]){const f=u[2].trim();f&&(a.index=r(f,t.indexOf(f,a.key?h+d.length:c+l.length),!0))}}return l&&(a.value=r(l,c,!0)),a}function un(n,e){return js.slice(n,e)}function V2(n){Bt.inSFCRoot&&(yn.innerLoc=Nt(n+1,n+1)),Vg(yn);const{tag:e,ns:t}=yn;t===0&&Je.isPreTag(e)&&Xb++,Je.isVoidTag(e)?kd(yn,n):(St.unshift(yn),(t===1||t===2)&&(Bt.inXML=!0)),yn=null}function ed(n,e,t){{const o=St[0]&&St[0].tag;o!=="script"&&o!=="style"&&n.includes("&")&&(n=Je.decodeEntities(n,!1))}const i=St[0]||Hc,s=i.children[i.children.length-1];s&&s.type===2?(s.content+=n,ar(s.loc,t)):i.children.push({type:2,content:n,loc:Nt(e,t)})}function kd(n,e,t=!1){t?ar(n.loc,z4(e,60)):ar(n.loc,sY(e,62)+1),Bt.inSFCRoot&&(n.children.length?n.innerLoc.end=Ve({},n.children[n.children.length-1].loc.end):n.innerLoc.end=Ve({},n.innerLoc.start),n.innerLoc.source=un(n.innerLoc.start.offset,n.innerLoc.end.offset));const{tag:i,ns:s,children:o}=n;if(Co||(i==="slot"?n.tagType=2:D2(n)?n.tagType=3:rY(n)&&(n.tagType=1)),Bt.inRCDATA||(n.children=W4(o)),s===0&&Je.isIgnoreNewlineTag(i)){const r=o[0];r&&r.type===2&&(r.content=r.content.replace(/^\r?\n/,""))}s===0&&Je.isPreTag(i)&&Xb--,Ng===n&&(Co=Bt.inVPre=!1,Ng=null),Bt.inXML&&(St[0]?St[0].ns:Je.ns)===0&&(Bt.inXML=!1);{const r=n.props;if(!Bt.inSFCRoot&&wr("COMPILER_NATIVE_TEMPLATE",Je)&&n.tag==="template"&&!D2(n)){const l=St[0]||Hc,c=l.children.indexOf(n);l.children.splice(c,1,...n.children)}const a=r.find(l=>l.type===6&&l.name==="inline-template");a&&ja("COMPILER_INLINE_TEMPLATE",Je,a.loc)&&n.children.length&&(a.value={type:2,content:un(n.children[0].loc.start.offset,n.children[n.children.length-1].loc.end.offset),loc:a.loc})}}function sY(n,e){let t=n;for(;js.charCodeAt(t)!==e&&t<js.length-1;)t++;return t}function z4(n,e){let t=n;for(;js.charCodeAt(t)!==e&&t>=0;)t--;return t}const oY=new Set(["if","else","else-if","for","slot"]);function D2({tag:n,props:e}){if(n==="template"){for(let t=0;t<e.length;t++)if(e[t].type===7&&oY.has(e[t].name))return!0}return!1}function rY({tag:n,props:e}){if(Je.isCustomElement(n))return!1;if(n==="component"||aY(n.charCodeAt(0))||Wb(n)||Je.isBuiltInComponent&&Je.isBuiltInComponent(n)||Je.isNativeTag&&!Je.isNativeTag(n))return!0;for(let t=0;t<e.length;t++){const i=e[t];if(i.type===6){if(i.name==="is"&&i.value){if(i.value.content.startsWith("vue:"))return!0;if(ja("COMPILER_IS_ON_ELEMENT",Je,i.loc))return!0}}else if(i.name==="bind"&&So(i.arg,"is")&&ja("COMPILER_IS_ON_ELEMENT",Je,i.loc))return!0}return!1}function aY(n){return n>64&&n<91}const lY=/\r\n/g;function W4(n){const e=Je.whitespace!=="preserve";let t=!1;for(let i=0;i<n.length;i++){const s=n[i];if(s.type===2)if(Xb)s.content=s.content.replace(lY,`
`);else if(cY(s.content)){const o=n[i-1]&&n[i-1].type,r=n[i+1]&&n[i+1].type;!o||!r||e&&(o===3&&(r===3||r===1)||o===1&&(r===3||r===1&&uY(s.content)))?(t=!0,n[i]=null):s.content=" "}else e&&(s.content=q4(s.content))}return t?n.filter(Boolean):n}function cY(n){for(let e=0;e<n.length;e++)if(!ri(n.charCodeAt(e)))return!1;return!0}function uY(n){for(let e=0;e<n.length;e++){const t=n.charCodeAt(e);if(t===10||t===13)return!0}return!1}function q4(n){let e="",t=!1;for(let i=0;i<n.length;i++)ri(n.charCodeAt(i))?t||(e+=" ",t=!0):(e+=n[i],t=!1);return e}function Vg(n){(St[0]||Hc).children.push(n)}function Nt(n,e){return{start:Bt.getPos(n),end:e==null?e:Bt.getPos(e),source:e==null?e:un(n,e)}}function dY(n){return Nt(n.start.offset,n.end.offset)}function ar(n,e){n.end=Bt.getPos(e),n.source=un(n.start.offset,e)}function hY(n){const e={type:6,name:n.rawName,nameLoc:Nt(n.loc.start.offset,n.loc.start.offset+n.rawName.length),value:void 0,loc:n.loc};if(n.exp){const t=n.exp.loc;t.end.offset<n.loc.end.offset&&(t.start.offset--,t.start.column--,t.end.offset++,t.end.column++),e.value={type:2,content:n.exp.content,loc:t}}return e}function Cd(n,e=!1,t,i=0,s=0){return Pe(n,e,t,i)}function Es(n,e,t){Je.onError(_t(n,Nt(e,e)))}function fY(){Bt.reset(),yn=null,Fe=null,qn="",Is=-1,sr=-1,St.length=0}function Zb(n,e){if(fY(),js=n,Je=Ve({},j4),e){let s;for(s in e)e[s]!=null&&(Je[s]=e[s])}Bt.mode=Je.parseMode==="html"?1:Je.parseMode==="sfc"?2:0,Bt.inXML=Je.ns===1||Je.ns===2;const t=e&&e.delimiters;t&&(Bt.delimiterOpen=wh(t[0]),Bt.delimiterClose=wh(t[1]));const i=Hc=T4([],n);return Bt.parse(js),i.loc=Nt(0,n.length),i.children=W4(i.children),Hc=null,i}function pY(n,e){Ed(n,void 0,e,!!G4(n))}function G4(n){const e=n.children.filter(t=>t.type!==3);return e.length===1&&e[0].type===1&&!$c(e[0])?e[0]:null}function Ed(n,e,t,i=!1,s=!1){const{children:o}=n,r=[];for(let u=0;u<o.length;u++){const d=o[u];if(d.type===1&&d.tagType===0){const h=i?0:Yn(d,t);if(h>0){if(h>=2){d.codegenNode.patchFlag=-1,r.push(d);continue}}else{const f=d.codegenNode;if(f.type===13){const p=f.patchFlag;if((p===void 0||p===512||p===1)&&X4(d,t)>=2){const g=Z4(d);g&&(f.props=t.hoist(g))}f.dynamicProps&&(f.dynamicProps=t.hoist(f.dynamicProps))}}}else if(d.type===12&&(i?0:Yn(d,t))>=2){d.codegenNode.type===14&&d.codegenNode.arguments.length>0&&d.codegenNode.arguments.push("-1"),r.push(d);continue}if(d.type===1){const h=d.tagType===1;h&&t.scopes.vSlot++,Ed(d,n,t,!1,s),h&&t.scopes.vSlot--}else if(d.type===11)Ed(d,n,t,d.children.length===1,!0);else if(d.type===9)for(let h=0;h<d.branches.length;h++)Ed(d.branches[h],n,t,d.branches[h].children.length===1,s)}let a=!1;if(r.length===o.length&&n.type===1){if(n.tagType===0&&n.codegenNode&&n.codegenNode.type===13&&le(n.codegenNode.children))n.codegenNode.children=l(Mo(n.codegenNode.children)),a=!0;else if(n.tagType===1&&n.codegenNode&&n.codegenNode.type===13&&n.codegenNode.children&&!le(n.codegenNode.children)&&n.codegenNode.children.type===15){const u=c(n.codegenNode,"default");u&&(u.returns=l(Mo(u.returns)),a=!0)}else if(n.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!le(e.codegenNode.children)&&e.codegenNode.children.type===15){const u=Nn(n,"slot",!0),d=u&&u.arg&&c(e.codegenNode,u.arg);d&&(d.returns=l(Mo(d.returns)),a=!0)}}if(!a)for(const u of r)u.codegenNode=t.cache(u.codegenNode);function l(u){const d=t.cache(u);return d.needArraySpread=!0,d}function c(u,d){if(u.children&&!le(u.children)&&u.children.type===15){const h=u.children.properties.find(f=>f.key===d||f.key.content===d);return h&&h.value}}r.length&&t.transformHoist&&t.transformHoist(o,t,n)}function Yn(n,e){const{constantCache:t}=e;switch(n.type){case 1:if(n.tagType!==0)return 0;const i=t.get(n);if(i!==void 0)return i;const s=n.codegenNode;if(s.type!==13||s.isBlock&&n.tag!=="svg"&&n.tag!=="foreignObject"&&n.tag!=="math")return 0;if(s.patchFlag===void 0){let r=3;const a=X4(n,e);if(a===0)return t.set(n,0),0;a<r&&(r=a);for(let l=0;l<n.children.length;l++){const c=Yn(n.children[l],e);if(c===0)return t.set(n,0),0;c<r&&(r=c)}if(r>1)for(let l=0;l<n.props.length;l++){const c=n.props[l];if(c.type===7&&c.name==="bind"&&c.exp){const u=Yn(c.exp,e);if(u===0)return t.set(n,0),0;u<r&&(r=u)}}if(s.isBlock){for(let l=0;l<n.props.length;l++)if(n.props[l].type===7)return t.set(n,0),0;e.removeHelper($o),e.removeHelper(Ar(e.inSSR,s.isComponent)),s.isBlock=!1,e.helper(Ir(e.inSSR,s.isComponent))}return t.set(n,r),r}else return t.set(n,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Yn(n.content,e);case 4:return n.constType;case 8:let o=3;for(let r=0;r<n.children.length;r++){const a=n.children[r];if(Ee(a)||Hn(a))continue;const l=Yn(a,e);if(l===0)return 0;l<o&&(o=l)}return o;case 20:return 2;default:return 0}}const mY=new Set([Bf,Lf,Ua,dl]);function K4(n,e){if(n.type===14&&!Ee(n.callee)&&mY.has(n.callee)){const t=n.arguments[0];if(t.type===4)return Yn(t,e);if(t.type===14)return K4(t,e)}return 0}function X4(n,e){let t=3;const i=Z4(n);if(i&&i.type===15){const{properties:s}=i;for(let o=0;o<s.length;o++){const{key:r,value:a}=s[o],l=Yn(r,e);if(l===0)return l;l<t&&(t=l);let c;if(a.type===4?c=Yn(a,e):a.type===14?c=K4(a,e):c=0,c===0)return c;c<t&&(t=c)}}return t}function Z4(n){const e=n.codegenNode;if(e.type===13)return e.props}function J4(n,{filename:e="",prefixIdentifiers:t=!1,hoistStatic:i=!1,hmr:s=!1,cacheHandlers:o=!1,nodeTransforms:r=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:c=rn,isCustomElement:u=rn,expressionPlugins:d=[],scopeId:h=null,slotted:f=!0,ssr:p=!1,inSSR:g=!1,ssrCssVars:y="",bindingMetadata:k=De,inline:v=!1,isTS:b=!1,onError:w=zb,onWarn:C=A4,compatConfig:E}){const I=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),x={filename:e,selfName:I&&Wo(ft(I[1])),prefixIdentifiers:t,hoistStatic:i,hmr:s,cacheHandlers:o,nodeTransforms:r,directiveTransforms:a,transformHoist:l,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:d,scopeId:h,slotted:f,ssr:p,inSSR:g,ssrCssVars:y,bindingMetadata:k,inline:v,isTS:b,onError:w,onWarn:C,compatConfig:E,root:n,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:n,childIndex:0,inVOnce:!1,helper(_){const S=x.helpers.get(_)||0;return x.helpers.set(_,S+1),_},removeHelper(_){const S=x.helpers.get(_);if(S){const R=S-1;R?x.helpers.set(_,R):x.helpers.delete(_)}},helperString(_){return`_${Tr[x.helper(_)]}`},replaceNode(_){x.parent.children[x.childIndex]=x.currentNode=_},removeNode(_){const S=x.parent.children,R=_?S.indexOf(_):x.currentNode?x.childIndex:-1;!_||_===x.currentNode?(x.currentNode=null,x.onNodeRemoved()):x.childIndex>R&&(x.childIndex--,x.onNodeRemoved()),x.parent.children.splice(R,1)},onNodeRemoved:rn,addIdentifiers(_){},removeIdentifiers(_){},hoist(_){Ee(_)&&(_=Pe(_)),x.hoists.push(_);const S=Pe(`_hoisted_${x.hoists.length}`,!1,_.loc,2);return S.hoisted=_,S},cache(_,S=!1,R=!1){const B=S4(x.cached.length,_,S,R);return x.cached.push(B),B}};return x.filters=new Set,x}function Y4(n,e){const t=J4(n,e);_u(n,t),e.hoistStatic&&pY(n,t),e.ssr||gY(n,t),n.helpers=new Set([...t.helpers.keys()]),n.components=[...t.components],n.directives=[...t.directives],n.imports=t.imports,n.hoists=t.hoists,n.temps=t.temps,n.cached=t.cached,n.transformed=!0,n.filters=[...t.filters]}function gY(n,e){const{helper:t}=e,{children:i}=n;if(i.length===1){const s=G4(n);if(s&&s.codegenNode){const o=s.codegenNode;o.type===13&&Ff(o,e),n.codegenNode=o}else n.codegenNode=i[0]}else if(i.length>1){let s=64;n.codegenNode=Ha(e,t($a),void 0,n.children,s,void 0,void 0,!0,void 0,!1)}}function bY(n,e){let t=0;const i=()=>{t--};for(;t<n.children.length;t++){const s=n.children[t];Ee(s)||(e.grandParent=e.parent,e.parent=n,e.childIndex=t,e.onNodeRemoved=i,_u(s,e))}}function _u(n,e){e.currentNode=n;const{nodeTransforms:t}=e,i=[];for(let o=0;o<t.length;o++){const r=t[o](n,e);if(r&&(le(r)?i.push(...r):i.push(r)),e.currentNode)n=e.currentNode;else return}switch(n.type){case 3:e.ssr||e.helper(ul);break;case 5:e.ssr||e.helper(bu);break;case 9:for(let o=0;o<n.branches.length;o++)_u(n.branches[o],e);break;case 10:case 11:case 1:case 0:bY(n,e);break}e.currentNode=n;let s=i.length;for(;s--;)i[s]()}function Jb(n,e){const t=Ee(n)?i=>i===n:i=>n.test(i);return(i,s)=>{if(i.type===1){const{props:o}=i;if(i.tagType===3&&o.some(Kb))return;const r=[];for(let a=0;a<o.length;a++){const l=o[a];if(l.type===7&&t(l.name)){o.splice(a,1),a--;const c=e(i,l,s);c&&r.push(c)}}return r}}}const $f="/*@__PURE__*/",Q4=n=>`${Tr[n]}: _${Tr[n]}`;function vY(n,{mode:e="function",prefixIdentifiers:t=e==="module",sourceMap:i=!1,filename:s="template.vue.html",scopeId:o=null,optimizeImports:r=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:u=!1,isTS:d=!1,inSSR:h=!1}){const f={mode:e,prefixIdentifiers:t,sourceMap:i,filename:s,scopeId:o,optimizeImports:r,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:u,isTS:d,inSSR:h,source:n.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(g){return`_${Tr[g]}`},push(g,y=-2,k){f.code+=g},indent(){p(++f.indentLevel)},deindent(g=!1){g?--f.indentLevel:p(--f.indentLevel)},newline(){p(f.indentLevel)}};function p(g){f.push(`
`+"  ".repeat(g),0)}return f}function eA(n,e={}){const t=vY(n,e);e.onContextCreated&&e.onContextCreated(t);const{mode:i,push:s,prefixIdentifiers:o,indent:r,deindent:a,newline:l,scopeId:c,ssr:u}=t,d=Array.from(n.helpers),h=d.length>0,f=!o&&i!=="module";wY(n,t);const g=u?"ssrRender":"render",k=(u?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${g}(${k}) {`),r(),f&&(s("with (_ctx) {"),r(),h&&(s(`const { ${d.map(Q4).join(", ")} } = _Vue
`,-1),l())),n.components.length&&(um(n.components,"component",t),(n.directives.length||n.temps>0)&&l()),n.directives.length&&(um(n.directives,"directive",t),n.temps>0&&l()),n.filters&&n.filters.length&&(l(),um(n.filters,"filter",t),l()),n.temps>0){s("let ");for(let v=0;v<n.temps;v++)s(`${v>0?", ":""}_temp${v}`)}return(n.components.length||n.directives.length||n.temps)&&(s(`
`,0),l()),u||s("return "),n.codegenNode?An(n.codegenNode,t):s("null"),f&&(a(),s("}")),a(),s("}"),{ast:n,code:t.code,preamble:"",map:t.map?t.map.toJSON():void 0}}function wY(n,e){const{ssr:t,prefixIdentifiers:i,push:s,newline:o,runtimeModuleName:r,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,c=a,u=Array.from(n.helpers);if(u.length>0&&(s(`const _Vue = ${c}
`,-1),n.hoists.length)){const d=[xf,Tf,ul,Sf,$b].filter(h=>u.includes(h)).map(Q4).join(", ");s(`const { ${d} } = _Vue
`,-1)}_Y(n.hoists,e),o(),s("return ")}function um(n,e,{helper:t,push:i,newline:s,isTS:o}){const r=t(e==="filter"?Of:e==="component"?If:Pf);for(let a=0;a<n.length;a++){let l=n[a];const c=l.endsWith("__self");c&&(l=l.slice(0,-6)),i(`const ${Wa(l,e)} = ${r}(${JSON.stringify(l)}${c?", true":""})${o?"!":""}`),a<n.length-1&&s()}}function _Y(n,e){if(!n.length)return;e.pure=!0;const{push:t,newline:i}=e;i();for(let s=0;s<n.length;s++){const o=n[s];o&&(t(`const _hoisted_${s+1} = `),An(o,e),i())}e.pure=!1}function Yb(n,e){const t=n.length>3||!1;e.push("["),t&&e.indent(),yu(n,e,t),t&&e.deindent(),e.push("]")}function yu(n,e,t=!1,i=!0){const{push:s,newline:o}=e;for(let r=0;r<n.length;r++){const a=n[r];Ee(a)?s(a,-3):le(a)?Yb(a,e):An(a,e),r<n.length-1&&(t?(i&&s(","),o()):i&&s(", "))}}function An(n,e){if(Ee(n)){e.push(n,-3);return}if(Hn(n)){e.push(e.helper(n));return}switch(n.type){case 1:case 9:case 11:An(n.codegenNode,e);break;case 2:yY(n,e);break;case 4:tA(n,e);break;case 5:kY(n,e);break;case 12:An(n.codegenNode,e);break;case 8:nA(n,e);break;case 3:EY(n,e);break;case 13:xY(n,e);break;case 14:SY(n,e);break;case 15:IY(n,e);break;case 17:AY(n,e);break;case 18:PY(n,e);break;case 19:OY(n,e);break;case 20:MY(n,e);break;case 21:yu(n.body,e,!0,!1);break}}function yY(n,e){e.push(JSON.stringify(n.content),-3,n)}function tA(n,e){const{content:t,isStatic:i}=n;e.push(i?JSON.stringify(t):t,-3,n)}function kY(n,e){const{push:t,helper:i,pure:s}=e;s&&t($f),t(`${i(bu)}(`),An(n.content,e),t(")")}function nA(n,e){for(let t=0;t<n.children.length;t++){const i=n.children[t];Ee(i)?e.push(i,-3):An(i,e)}}function CY(n,e){const{push:t}=e;if(n.type===8)t("["),nA(n,e),t("]");else if(n.isStatic){const i=vu(n.content)?n.content:JSON.stringify(n.content);t(i,-2,n)}else t(`[${n.content}]`,-3,n)}function EY(n,e){const{push:t,helper:i,pure:s}=e;s&&t($f),t(`${i(ul)}(${JSON.stringify(n.content)})`,-3,n)}function xY(n,e){const{push:t,helper:i,pure:s}=e,{tag:o,props:r,children:a,patchFlag:l,dynamicProps:c,directives:u,isBlock:d,disableTracking:h,isComponent:f}=n;let p;l&&(p=String(l)),u&&t(i(Mf)+"("),d&&t(`(${i($o)}(${h?"true":""}), `),s&&t($f);const g=d?Ar(e.inSSR,f):Ir(e.inSSR,f);t(i(g)+"(",-2,n),yu(TY([o,r,a,p,c]),e),t(")"),d&&t(")"),u&&(t(", "),An(u,e),t(")"))}function TY(n){let e=n.length;for(;e--&&n[e]==null;);return n.slice(0,e+1).map(t=>t||"null")}function SY(n,e){const{push:t,helper:i,pure:s}=e,o=Ee(n.callee)?n.callee:i(n.callee);s&&t($f),t(o+"(",-2,n),yu(n.arguments,e),t(")")}function IY(n,e){const{push:t,indent:i,deindent:s,newline:o}=e,{properties:r}=n;if(!r.length){t("{}",-2,n);return}const a=r.length>1||!1;t(a?"{":"{ "),a&&i();for(let l=0;l<r.length;l++){const{key:c,value:u}=r[l];CY(c,e),t(": "),An(u,e),l<r.length-1&&(t(","),o())}a&&s(),t(a?"}":" }")}function AY(n,e){Yb(n.elements,e)}function PY(n,e){const{push:t,indent:i,deindent:s}=e,{params:o,returns:r,body:a,newline:l,isSlot:c}=n;c&&t(`_${Tr[Vf]}(`),t("(",-2,n),le(o)?yu(o,e):o&&An(o,e),t(") => "),(l||a)&&(t("{"),i()),r?(l&&t("return "),le(r)?Yb(r,e):An(r,e)):a&&An(a,e),(l||a)&&(s(),t("}")),c&&(n.isNonScopedSlot&&t(", undefined, true"),t(")"))}function OY(n,e){const{test:t,consequent:i,alternate:s,newline:o}=n,{push:r,indent:a,deindent:l,newline:c}=e;if(t.type===4){const d=!vu(t.content);d&&r("("),tA(t,e),d&&r(")")}else r("("),An(t,e),r(")");o&&a(),e.indentLevel++,o||r(" "),r("? "),An(i,e),e.indentLevel--,o&&c(),o||r(" "),r(": ");const u=s.type===19;u||e.indentLevel++,An(s,e),u||e.indentLevel--,o&&l(!0)}function MY(n,e){const{push:t,helper:i,indent:s,deindent:o,newline:r}=e,{needPauseTracking:a,needArraySpread:l}=n;l&&t("[...("),t(`_cache[${n.index}] || (`),a&&(s(),t(`${i(Fc)}(-1`),n.inVOnce&&t(", true"),t("),"),r(),t("(")),t(`_cache[${n.index}] = `),An(n.value,e),a&&(t(`).cacheIndex = ${n.index},`),r(),t(`${i(Fc)}(1),`),r(),t(`_cache[${n.index}]`),o()),t(")"),l&&t(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const RY=(n,e)=>{if(n.type===5)n.content=xd(n.content,e);else if(n.type===1){const t=Nn(n,"memo");for(let i=0;i<n.props.length;i++){const s=n.props[i];if(s.type===7&&s.name!=="for"){const o=s.exp,r=s.arg;o&&o.type===4&&!(s.name==="on"&&r)&&!(t&&r&&r.type===4&&r.content==="key")&&(s.exp=xd(o,e,s.name==="slot")),r&&r.type===4&&!r.isStatic&&(s.arg=xd(r,e))}}}};function xd(n,e,t=!1,i=!1,s=Object.create(e.identifiers)){return n}function iA(n){return Ee(n)?n:n.type===4?n.content:n.children.map(iA).join("")}const BY=Jb(/^(?:if|else|else-if)$/,(n,e,t)=>sA(n,e,t,(i,s,o)=>{const r=t.parent.children;let a=r.indexOf(i),l=0;for(;a-->=0;){const c=r[a];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(o)i.codegenNode=$2(s,l,t);else{const c=LY(i.codegenNode);c.alternate=$2(s,l+i.branches.length-1,t)}}}));function sA(n,e,t,i){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const s=e.exp?e.exp.loc:n.loc;t.onError(_t(28,e.loc)),e.exp=Pe("true",!1,s)}if(e.name==="if"){const s=F2(n,e),o={type:9,loc:dY(n.loc),branches:[s]};if(t.replaceNode(o),i)return i(o,s,!0)}else{const s=t.parent.children;let o=s.indexOf(n);for(;o-->=-1;){const r=s[o];if(r&&r.type===3){t.removeNode(r);continue}if(r&&r.type===2&&!r.content.trim().length){t.removeNode(r);continue}if(r&&r.type===9){(e.name==="else-if"||e.name==="else")&&r.branches[r.branches.length-1].condition===void 0&&t.onError(_t(30,n.loc)),t.removeNode();const a=F2(n,e);r.branches.push(a);const l=i&&i(r,a,!1);_u(a,t),l&&l(),t.currentNode=null}else t.onError(_t(30,n.loc));break}}}function F2(n,e){const t=n.tagType===3;return{type:10,loc:n.loc,condition:e.name==="else"?void 0:e.exp,children:t&&!Nn(n,"for")?n.children:[n],userKey:wu(n,"key"),isTemplateIf:t}}function $2(n,e,t){return n.condition?vh(n.condition,U2(n,e,t),qt(t.helper(ul),['""',"true"])):U2(n,e,t)}function U2(n,e,t){const{helper:i}=t,s=Ht("key",Pe(`${e}`,!1,sn,2)),{children:o}=n,r=o[0];if(o.length!==1||r.type!==1)if(o.length===1&&r.type===11){const l=r.codegenNode;return Uc(l,s,t),l}else return Ha(t,i($a),di([s]),o,64,void 0,void 0,!0,!1,!1,n.loc);else{const l=r.codegenNode,c=U4(l);return c.type===13&&Ff(c,t),Uc(c,s,t),l}}function LY(n){for(;;)if(n.type===19)if(n.alternate.type===19)n=n.alternate;else return n;else n.type===20&&(n=n.value)}const NY=Jb("for",(n,e,t)=>{const{helper:i,removeHelper:s}=t;return oA(n,e,t,o=>{const r=qt(i(Rf),[o.source]),a=za(n),l=Nn(n,"memo"),c=wu(n,"key",!1,!0);c&&c.type;let u=c&&(c.type===6?c.value?Pe(c.value.content,!0):void 0:c.exp);const d=c&&u?Ht("key",u):null,h=o.source.type===4&&o.source.constType>0,f=h?64:c?128:256;return o.codegenNode=Ha(t,i($a),void 0,r,f,void 0,void 0,!0,!h,!1,n.loc),()=>{let p;const{children:g}=o,y=g.length!==1||g[0].type!==1,k=$c(n)?n:a&&n.children.length===1&&$c(n.children[0])?n.children[0]:null;if(k?(p=k.codegenNode,a&&d&&Uc(p,d,t)):y?p=Ha(t,i($a),d?di([d]):void 0,n.children,64,void 0,void 0,!0,void 0,!1):(p=g[0].codegenNode,a&&d&&Uc(p,d,t),p.isBlock!==!h&&(p.isBlock?(s($o),s(Ar(t.inSSR,p.isComponent))):s(Ir(t.inSSR,p.isComponent))),p.isBlock=!h,p.isBlock?(i($o),i(Ar(t.inSSR,p.isComponent))):i(Ir(t.inSSR,p.isComponent))),l){const v=Sr(_h(o.parseResult,[Pe("_cached")]));v.body=I4([xi(["const _memo = (",l.exp,")"]),xi(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${t.helperString(jb)}(_cached, _memo)) return _cached`]),xi(["const _item = ",p]),Pe("_item.memo = _memo"),Pe("return _item")]),r.arguments.push(v,Pe("_cache"),Pe(String(t.cached.length))),t.cached.push(null)}else r.arguments.push(Sr(_h(o.parseResult),p,!0))}})});function oA(n,e,t,i){if(!e.exp){t.onError(_t(31,e.loc));return}const s=e.forParseResult;if(!s){t.onError(_t(32,e.loc));return}Qb(s);const{addIdentifiers:o,removeIdentifiers:r,scopes:a}=t,{source:l,value:c,key:u,index:d}=s,h={type:11,loc:e.loc,source:l,valueAlias:c,keyAlias:u,objectIndexAlias:d,parseResult:s,children:za(n)?n.children:[n]};t.replaceNode(h),a.vFor++;const f=i&&i(h);return()=>{a.vFor--,f&&f()}}function Qb(n,e){n.finalized||(n.finalized=!0)}function _h({value:n,key:e,index:t},i=[]){return VY([n,e,t,...i])}function VY(n){let e=n.length;for(;e--&&!n[e];);return n.slice(0,e+1).map((t,i)=>t||Pe("_".repeat(i+1),!1))}const H2=Pe("undefined",!1),rA=(n,e)=>{if(n.type===1&&(n.tagType===1||n.tagType===3)){const t=Nn(n,"slot");if(t)return t.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},DY=(n,e)=>{let t;if(za(n)&&n.props.some(Kb)&&(t=Nn(n,"for"))){const i=t.forParseResult;if(i){Qb(i);const{value:s,key:o,index:r}=i,{addIdentifiers:a,removeIdentifiers:l}=e;return s&&a(s),o&&a(o),r&&a(r),()=>{s&&l(s),o&&l(o),r&&l(r)}}}},FY=(n,e,t,i)=>Sr(n,t,!1,!0,t.length?t[0].loc:i);function aA(n,e,t=FY){e.helper(Vf);const{children:i,loc:s}=n,o=[],r=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=Nn(n,"slot",!0);if(l){const{arg:y,exp:k}=l;y&&!Dn(y)&&(a=!0),o.push(Ht(y||Pe("default",!0),t(k,void 0,i,s)))}let c=!1,u=!1;const d=[],h=new Set;let f=0;for(let y=0;y<i.length;y++){const k=i[y];let v;if(!za(k)||!(v=Nn(k,"slot",!0))){k.type!==3&&d.push(k);continue}if(l){e.onError(_t(37,v.loc));break}c=!0;const{children:b,loc:w}=k,{arg:C=Pe("default",!0),exp:E,loc:I}=v;let x;Dn(C)?x=C?C.content:"default":a=!0;const _=Nn(k,"for"),S=t(E,_,b,w);let R,B;if(R=Nn(k,"if"))a=!0,r.push(vh(R.exp,td(C,S,f++),H2));else if(B=Nn(k,/^else(?:-if)?$/,!0)){let F=y,ee;for(;F--&&(ee=i[F],!(ee.type!==3&&Dg(ee))););if(ee&&za(ee)&&Nn(ee,/^(?:else-)?if$/)){let K=r[r.length-1];for(;K.alternate.type===19;)K=K.alternate;K.alternate=B.exp?vh(B.exp,td(C,S,f++),H2):td(C,S,f++)}else e.onError(_t(30,B.loc))}else if(_){a=!0;const F=_.forParseResult;F?(Qb(F),r.push(qt(e.helper(Rf),[F.source,Sr(_h(F),td(C,S),!0)]))):e.onError(_t(32,_.loc))}else{if(x){if(h.has(x)){e.onError(_t(38,I));continue}h.add(x),x==="default"&&(u=!0)}o.push(Ht(C,S))}}if(!l){const y=(k,v)=>{const b=t(k,void 0,v,s);return e.compatConfig&&(b.isNonScopedSlot=!0),Ht("default",b)};c?d.length&&d.some(k=>Dg(k))&&(u?e.onError(_t(39,d[0].loc)):o.push(y(void 0,d))):o.push(y(void 0,i))}const p=a?2:Td(n.children)?3:1;let g=di(o.concat(Ht("_",Pe(p+"",!1))),s);return r.length&&(g=qt(e.helper(Hb),[g,Mo(r)])),{slots:g,hasDynamicSlots:a}}function td(n,e,t){const i=[Ht("name",n),Ht("fn",e)];return t!=null&&i.push(Ht("key",Pe(String(t),!0))),di(i)}function Td(n){for(let e=0;e<n.length;e++){const t=n[e];switch(t.type){case 1:if(t.tagType===2||Td(t.children))return!0;break;case 9:if(Td(t.branches))return!0;break;case 10:case 11:if(Td(t.children))return!0;break}}return!1}function Dg(n){return n.type!==2&&n.type!==12?!0:n.type===2?!!n.content.trim():Dg(n.content)}const lA=new WeakMap,cA=(n,e)=>function(){if(n=e.currentNode,!(n.type===1&&(n.tagType===0||n.tagType===1)))return;const{tag:i,props:s}=n,o=n.tagType===1;let r=o?uA(n,e):`"${i}"`;const a=Xe(r)&&r.callee===Af;let l,c,u=0,d,h,f,p=a||r===Ta||r===Ef||!o&&(i==="svg"||i==="foreignObject"||i==="math");if(s.length>0){const g=e0(n,e,void 0,o,a);l=g.props,u=g.patchFlag,h=g.dynamicPropNames;const y=g.directives;f=y&&y.length?Mo(y.map(k=>dA(k,e))):void 0,g.shouldUseBlock&&(p=!0)}if(n.children.length>0)if(r===Vc&&(p=!0,u|=1024),o&&r!==Ta&&r!==Vc){const{slots:y,hasDynamicSlots:k}=aA(n,e);c=y,k&&(u|=1024)}else if(n.children.length===1&&r!==Ta){const y=n.children[0],k=y.type,v=k===5||k===8;v&&Yn(y,e)===0&&(u|=1),v||k===2?c=y:c=n.children}else c=n.children;h&&h.length&&(d=UY(h)),n.codegenNode=Ha(e,r,l,c,u===0?void 0:u,d,f,!!p,!1,o,n.loc)};function uA(n,e,t=!1){let{tag:i}=n;const s=Fg(i),o=wu(n,"is",!1,!0);if(o)if(s||wr("COMPILER_IS_ON_ELEMENT",e)){let a;if(o.type===6?a=o.value&&Pe(o.value.content,!0):(a=o.exp,a||(a=Pe("is",!1,o.arg.loc))),a)return qt(e.helper(Af),[a])}else o.type===6&&o.value.content.startsWith("vue:")&&(i=o.value.content.slice(4));const r=Wb(i)||e.isBuiltInComponent(i);return r?(t||e.helper(r),r):(e.helper(If),e.components.add(i),Wa(i,"component"))}function e0(n,e,t=n.props,i,s,o=!1){const{tag:r,loc:a,children:l}=n;let c=[];const u=[],d=[],h=l.length>0;let f=!1,p=0,g=!1,y=!1,k=!1,v=!1,b=!1,w=!1;const C=[],E=S=>{c.length&&(u.push(di(j2(c),a)),c=[]),S&&u.push(S)},I=()=>{e.scopes.vFor>0&&c.push(Ht(Pe("ref_for",!0),Pe("true")))},x=({key:S,value:R})=>{if(Dn(S)){const B=S.content,F=jo(B);if(F&&(!i||s)&&B.toLowerCase()!=="onclick"&&B!=="onUpdate:modelValue"&&!$s(B)&&(v=!0),F&&$s(B)&&(w=!0),F&&R.type===14&&(R=R.arguments[0]),R.type===20||(R.type===4||R.type===8)&&Yn(R,e)>0)return;B==="ref"?g=!0:B==="class"?y=!0:B==="style"?k=!0:B!=="key"&&!C.includes(B)&&C.push(B),i&&(B==="class"||B==="style")&&!C.includes(B)&&C.push(B)}else b=!0};for(let S=0;S<t.length;S++){const R=t[S];if(R.type===6){const{loc:B,name:F,nameLoc:ee,value:K}=R;let G=!0;if(F==="ref"&&(g=!0,I()),F==="is"&&(Fg(r)||K&&K.content.startsWith("vue:")||wr("COMPILER_IS_ON_ELEMENT",e)))continue;c.push(Ht(Pe(F,!0,ee),Pe(K?K.content:"",G,K?K.loc:B)))}else{const{name:B,arg:F,exp:ee,loc:K,modifiers:G}=R,oe=B==="bind",Y=B==="on";if(B==="slot"){i||e.onError(_t(40,K));continue}if(B==="once"||B==="memo"||B==="is"||oe&&So(F,"is")&&(Fg(r)||wr("COMPILER_IS_ON_ELEMENT",e))||Y&&o)continue;if((oe&&So(F,"key")||Y&&h&&So(F,"vue:before-update"))&&(f=!0),oe&&So(F,"ref")&&I(),!F&&(oe||Y)){if(b=!0,ee)if(oe){if(E(),wr("COMPILER_V_BIND_OBJECT_ORDER",e)){u.unshift(ee);continue}I(),E(),u.push(ee)}else E({type:14,loc:K,callee:e.helper(Nf),arguments:i?[ee]:[ee,"true"]});else e.onError(_t(oe?34:35,K));continue}oe&&G.some(zt=>zt.content==="prop")&&(p|=32);const je=e.directiveTransforms[B];if(je){const{props:zt,needRuntime:Et}=je(R,n,e);!o&&zt.forEach(x),Y&&F&&!Dn(F)?E(di(zt,a)):c.push(...zt),Et&&(d.push(R),Hn(Et)&&lA.set(R,Et))}else qC(B)||(d.push(R),h&&(f=!0))}}let _;if(u.length?(E(),u.length>1?_=qt(e.helper(Dc),u,a):_=u[0]):c.length&&(_=di(j2(c),a)),b?p|=16:(y&&!i&&(p|=2),k&&!i&&(p|=4),C.length&&(p|=8),v&&(p|=32)),!f&&(p===0||p===32)&&(g||w||d.length>0)&&(p|=512),!e.inSSR&&_)switch(_.type){case 15:let S=-1,R=-1,B=!1;for(let K=0;K<_.properties.length;K++){const G=_.properties[K].key;Dn(G)?G.content==="class"?S=K:G.content==="style"&&(R=K):G.isHandlerKey||(B=!0)}const F=_.properties[S],ee=_.properties[R];B?_=qt(e.helper(Ua),[_]):(F&&!Dn(F.value)&&(F.value=qt(e.helper(Bf),[F.value])),ee&&(k||ee.value.type===4&&ee.value.content.trim()[0]==="["||ee.value.type===17)&&(ee.value=qt(e.helper(Lf),[ee.value])));break;case 14:break;default:_=qt(e.helper(Ua),[qt(e.helper(dl),[_])]);break}return{props:_,directives:d,patchFlag:p,dynamicPropNames:C,shouldUseBlock:f}}function j2(n){const e=new Map,t=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.key.type===8||!s.key.isStatic){t.push(s);continue}const o=s.key.content,r=e.get(o);r?(o==="style"||o==="class"||jo(o))&&$Y(r,s):(e.set(o,s),t.push(s))}return t}function $Y(n,e){n.value.type===17?n.value.elements.push(e.value):n.value=Mo([n.value,e.value],n.loc)}function dA(n,e){const t=[],i=lA.get(n);i?t.push(e.helperString(i)):(e.helper(Pf),e.directives.add(n.name),t.push(Wa(n.name,"directive")));const{loc:s}=n;if(n.exp&&t.push(n.exp),n.arg&&(n.exp||t.push("void 0"),t.push(n.arg)),Object.keys(n.modifiers).length){n.arg||(n.exp||t.push("void 0"),t.push("void 0"));const o=Pe("true",!1,s);t.push(di(n.modifiers.map(r=>Ht(r,o)),s))}return Mo(t,n.loc)}function UY(n){let e="[";for(let t=0,i=n.length;t<i;t++)e+=JSON.stringify(n[t]),t<i-1&&(e+=", ");return e+"]"}function Fg(n){return n==="component"||n==="Component"}const HY=(n,e)=>{if($c(n)){const{children:t,loc:i}=n,{slotName:s,slotProps:o}=hA(n,e),r=[e.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let a=2;o&&(r[2]=o,a=3),t.length&&(r[3]=Sr([],t,!1,!1,i),a=4),e.scopeId&&!e.slotted&&(a=5),r.splice(a),n.codegenNode=qt(e.helper(Ub),r,i)}};function hA(n,e){let t='"default"',i;const s=[];for(let o=0;o<n.props.length;o++){const r=n.props[o];if(r.type===6)r.value&&(r.name==="name"?t=JSON.stringify(r.value.content):(r.name=ft(r.name),s.push(r)));else if(r.name==="bind"&&So(r.arg,"name")){if(r.exp)t=r.exp;else if(r.arg&&r.arg.type===4){const a=ft(r.arg.content);t=r.exp=Pe(a,!1,r.arg.loc)}}else r.name==="bind"&&r.arg&&Dn(r.arg)&&(r.arg.content=ft(r.arg.content)),s.push(r)}if(s.length>0){const{props:o,directives:r}=e0(n,e,s,!1,!1);i=o,r.length&&e.onError(_t(36,r[0].loc))}return{slotName:t,slotProps:i}}const t0=(n,e,t,i)=>{const{loc:s,modifiers:o,arg:r}=n;!n.exp&&!o.length&&t.onError(_t(35,s));let a;if(r.type===4)if(r.isStatic){let d=r.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const h=e.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?hr(ft(d)):`on:${d}`;a=Pe(h,!0,r.loc)}else a=xi([`${t.helperString(bh)}(`,r,")"]);else a=r,a.children.unshift(`${t.helperString(bh)}(`),a.children.push(")");let l=n.exp;l&&!l.content.trim()&&(l=void 0);let c=t.cacheHandlers&&!l&&!t.inVOnce;if(l){const d=Gb(l),h=!(d||V4(l)),f=l.content.includes(";");(h||c&&d)&&(l=xi([`${h?"$event":"(...args)"} => ${f?"{":"("}`,l,f?"}":")"]))}let u={props:[Ht(a,l||Pe("() => {}",!1,s))]};return i&&(u=i(u)),c&&(u.props[0].value=t.cache(u.props[0].value)),u.props.forEach(d=>d.key.isHandlerKey=!0),u},fA=(n,e,t)=>{const{modifiers:i,loc:s}=n,o=n.arg;let{exp:r}=n;return r&&r.type===4&&!r.content.trim()&&(r=void 0),o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=o.content?`${o.content} || ""`:'""'),i.some(a=>a.content==="camel")&&(o.type===4?o.isStatic?o.content=ft(o.content):o.content=`${t.helperString(gh)}(${o.content})`:(o.children.unshift(`${t.helperString(gh)}(`),o.children.push(")"))),t.inSSR||(i.some(a=>a.content==="prop")&&z2(o,"."),i.some(a=>a.content==="attr")&&z2(o,"^")),{props:[Ht(o,r)]}},z2=(n,e)=>{n.type===4?n.isStatic?n.content=e+n.content:n.content=`\`${e}\${${n.content}}\``:(n.children.unshift(`'${e}' + (`),n.children.push(")"))},jY=(n,e)=>{if(n.type===0||n.type===1||n.type===11||n.type===10)return()=>{const t=n.children;let i,s=!1;for(let o=0;o<t.length;o++){const r=t[o];if(yd(r)){s=!0;for(let a=o+1;a<t.length;a++){const l=t[a];if(yd(l))i||(i=t[o]=xi([r],r.loc)),i.children.push(" + ",l),t.splice(a,1),a--;else{i=void 0;break}}}}if(!(!s||t.length===1&&(n.type===0||n.type===1&&n.tagType===0&&!n.props.find(o=>o.type===7&&!e.directiveTransforms[o.name])&&n.tag!=="template")))for(let o=0;o<t.length;o++){const r=t[o];if(yd(r)||r.type===8){const a=[];(r.type!==2||r.content!==" ")&&a.push(r),!e.ssr&&Yn(r,e)===0&&a.push("1"),t[o]={type:12,content:r,loc:r.loc,codegenNode:qt(e.helper(Sf),a)}}}}},W2=new WeakSet,zY=(n,e)=>{if(n.type===1&&Nn(n,"once",!0))return W2.has(n)||e.inVOnce||e.inSSR?void 0:(W2.add(n),e.inVOnce=!0,e.helper(Fc),()=>{e.inVOnce=!1;const t=e.currentNode;t.codegenNode&&(t.codegenNode=e.cache(t.codegenNode,!0,!0))})},n0=(n,e,t)=>{const{exp:i,arg:s}=n;if(!i)return t.onError(_t(41,n.loc)),nd();const o=i.loc.source.trim(),r=i.type===4?i.content:o,a=t.bindingMetadata[o];if(a==="props"||a==="props-aliased")return t.onError(_t(44,i.loc)),nd();if(!r.trim()||!Gb(i))return t.onError(_t(42,i.loc)),nd();const l=s||Pe("modelValue",!0),c=s?Dn(s)?`onUpdate:${ft(s.content)}`:xi(['"onUpdate:" + ',s]):"onUpdate:modelValue";let u;const d=t.isTS?"($event: any)":"$event";u=xi([`${d} => ((`,i,") = $event)"]);const h=[Ht(l,n.exp),Ht(c,u)];if(n.modifiers.length&&e.tagType===1){const f=n.modifiers.map(g=>g.content).map(g=>(vu(g)?g:JSON.stringify(g))+": true").join(", "),p=s?Dn(s)?`${s.content}Modifiers`:xi([s,' + "Modifiers"']):"modelModifiers";h.push(Ht(p,Pe(`{ ${f} }`,!1,n.loc,2)))}return nd(h)};function nd(n=[]){return{props:n}}const WY=/[\w).+\-_$\]]/,qY=(n,e)=>{wr("COMPILER_FILTERS",e)&&(n.type===5?yh(n.content,e):n.type===1&&n.props.forEach(t=>{t.type===7&&t.name!=="for"&&t.exp&&yh(t.exp,e)}))};function yh(n,e){if(n.type===4)q2(n,e);else for(let t=0;t<n.children.length;t++){const i=n.children[t];typeof i=="object"&&(i.type===4?q2(i,e):i.type===8?yh(n,e):i.type===5&&yh(i.content,e))}}function q2(n,e){const t=n.content;let i=!1,s=!1,o=!1,r=!1,a=0,l=0,c=0,u=0,d,h,f,p,g=[];for(f=0;f<t.length;f++)if(h=d,d=t.charCodeAt(f),i)d===39&&h!==92&&(i=!1);else if(s)d===34&&h!==92&&(s=!1);else if(o)d===96&&h!==92&&(o=!1);else if(r)d===47&&h!==92&&(r=!1);else if(d===124&&t.charCodeAt(f+1)!==124&&t.charCodeAt(f-1)!==124&&!a&&!l&&!c)p===void 0?(u=f+1,p=t.slice(0,f).trim()):y();else{switch(d){case 34:s=!0;break;case 39:i=!0;break;case 96:o=!0;break;case 40:c++;break;case 41:c--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let k=f-1,v;for(;k>=0&&(v=t.charAt(k),v===" ");k--);(!v||!WY.test(v))&&(r=!0)}}p===void 0?p=t.slice(0,f).trim():u!==0&&y();function y(){g.push(t.slice(u,f).trim()),u=f+1}if(g.length){for(f=0;f<g.length;f++)p=GY(p,g[f],e);n.content=p,n.ast=void 0}}function GY(n,e,t){t.helper(Of);const i=e.indexOf("(");if(i<0)return t.filters.add(e),`${Wa(e,"filter")}(${n})`;{const s=e.slice(0,i),o=e.slice(i+1);return t.filters.add(s),`${Wa(s,"filter")}(${n}${o!==")"?","+o:o}`}}const G2=new WeakSet,KY=(n,e)=>{if(n.type===1){const t=Nn(n,"memo");return!t||G2.has(n)||e.inSSR?void 0:(G2.add(n),()=>{const i=n.codegenNode||e.currentNode.codegenNode;i&&i.type===13&&(n.tagType!==1&&Ff(i,e),n.codegenNode=qt(e.helper(Df),[t.exp,Sr(void 0,i),"_cache",String(e.cached.length)]),e.cached.push(null))})}},pA=(n,e)=>{if(n.type===1){for(const t of n.props)if(t.type===7&&t.name==="bind"&&!t.exp){const i=t.arg;if(i.type!==4||!i.isStatic)e.onError(_t(52,i.loc)),t.exp=Pe("",!0,i.loc);else{const s=ft(i.content);(qb.test(s[0])||s[0]==="-")&&(t.exp=Pe(s,!1,i.loc))}}}};function mA(n){return[[pA,zY,BY,KY,NY,qY,HY,cA,rA,jY],{on:t0,bind:fA,model:n0}]}function gA(n,e={}){const t=e.onError||zb,i=e.mode==="module";e.prefixIdentifiers===!0?t(_t(47)):i&&t(_t(48));const s=!1;e.cacheHandlers&&t(_t(49)),e.scopeId&&!i&&t(_t(50));const o=Ve({},e,{prefixIdentifiers:s}),r=Ee(n)?Zb(n,o):n,[a,l]=mA();return Y4(r,Ve({},o,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:Ve({},l,e.directiveTransforms||{})})),eA(r,o)}const XY={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},bA=()=>({props:[]});/**
* @vue/compiler-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const i0=Symbol(""),s0=Symbol(""),o0=Symbol(""),r0=Symbol(""),kh=Symbol(""),a0=Symbol(""),l0=Symbol(""),c0=Symbol(""),u0=Symbol(""),d0=Symbol("");x4({[i0]:"vModelRadio",[s0]:"vModelCheckbox",[o0]:"vModelText",[r0]:"vModelSelect",[kh]:"vModelDynamic",[a0]:"withModifiers",[l0]:"withKeys",[c0]:"vShow",[u0]:"Transition",[d0]:"TransitionGroup"});let ta;function ZY(n,e=!1){return ta||(ta=document.createElement("div")),e?(ta.innerHTML=`<div foo="${n.replace(/"/g,"&quot;")}">`,ta.children[0].getAttribute("foo")):(ta.innerHTML=n,ta.textContent)}const h0={parseMode:"html",isVoidTag:YC,isNativeTag:n=>XC(n)||ZC(n)||JC(n),isPreTag:n=>n==="pre",isIgnoreNewlineTag:n=>n==="pre"||n==="textarea",decodeEntities:ZY,isBuiltInComponent:n=>{if(n==="Transition"||n==="transition")return u0;if(n==="TransitionGroup"||n==="transition-group")return d0},getNamespace(n,e,t){let i=e?e.ns:t;if(e&&i===2)if(e.tag==="annotation-xml"){if(n==="svg")return 1;e.props.some(s=>s.type===6&&s.name==="encoding"&&s.value!=null&&(s.value.content==="text/html"||s.value.content==="application/xhtml+xml"))&&(i=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&n!=="mglyph"&&n!=="malignmark"&&(i=0);else e&&i===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(i=0);if(i===0){if(n==="svg")return 1;if(n==="math")return 2}return i}},vA=n=>{n.type===1&&n.props.forEach((e,t)=>{e.type===6&&e.name==="style"&&e.value&&(n.props[t]={type:7,name:"bind",arg:Pe("style",!0,e.loc),exp:JY(e.value.content,e.loc),modifiers:[],loc:e.loc})})},JY=(n,e)=>{const t=o1(n);return Pe(JSON.stringify(t),!1,e,3)};function zs(n,e){return _t(n,e)}const YY={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},QY={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},eQ=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(zs(53,s)),e.children.length&&(t.onError(zs(54,s)),e.children.length=0),{props:[Ht(Pe("innerHTML",!0,s),i||Pe("",!0))]}},tQ=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(zs(55,s)),e.children.length&&(t.onError(zs(56,s)),e.children.length=0),{props:[Ht(Pe("textContent",!0),i?Yn(i,t)>0?i:qt(t.helperString(bu),[i],s):Pe("",!0))]}},nQ=(n,e,t)=>{const i=n0(n,e,t);if(!i.props.length||e.tagType===1)return i;n.arg&&t.onError(zs(58,n.arg.loc));const{tag:s}=e,o=t.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||o){let r=o0,a=!1;if(s==="input"||o){const l=wu(e,"type");if(l){if(l.type===7)r=kh;else if(l.value)switch(l.value.content){case"radio":r=i0;break;case"checkbox":r=s0;break;case"file":a=!0,t.onError(zs(59,n.loc));break}}else F4(e)&&(r=kh)}else s==="select"&&(r=r0);a||(i.needRuntime=t.helper(r))}else t.onError(zs(57,n.loc));return i.props=i.props.filter(r=>!(r.key.type===4&&r.key.content==="modelValue")),i},iQ=ln("passive,once,capture"),sQ=ln("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),oQ=ln("left,right"),wA=ln("onkeyup,onkeydown,onkeypress"),rQ=(n,e,t,i)=>{const s=[],o=[],r=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&ja("COMPILER_V_ON_NATIVE",t)||iQ(l)?r.push(l):oQ(l)?Dn(n)?wA(n.content.toLowerCase())?s.push(l):o.push(l):(s.push(l),o.push(l)):sQ(l)?o.push(l):s.push(l)}return{keyModifiers:s,nonKeyModifiers:o,eventOptionModifiers:r}},K2=(n,e)=>Dn(n)&&n.content.toLowerCase()==="onclick"?Pe(e,!0):n.type!==4?xi(["(",n,`) === "onClick" ? "${e}" : (`,n,")"]):n,aQ=(n,e,t)=>t0(n,e,t,i=>{const{modifiers:s}=n;if(!s.length)return i;let{key:o,value:r}=i.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:c}=rQ(o,s,t,n.loc);if(l.includes("right")&&(o=K2(o,"onContextmenu")),l.includes("middle")&&(o=K2(o,"onMouseup")),l.length&&(r=qt(t.helper(a0),[r,JSON.stringify(l)])),a.length&&(!Dn(o)||wA(o.content.toLowerCase()))&&(r=qt(t.helper(l0),[r,JSON.stringify(a)])),c.length){const u=c.map(Wo).join("");o=Dn(o)?Pe(`${o.content}${u}`,!0):xi(["(",o,`) + "${u}"`])}return{props:[Ht(o,r)]}}),lQ=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(zs(61,s)),{props:[],needRuntime:t.helper(c0)}},cQ=(n,e)=>{n.type===1&&n.tagType===0&&(n.tag==="script"||n.tag==="style")&&e.removeNode()},_A=[vA],yA={cloak:bA,html:eQ,text:tQ,model:nQ,on:aQ,show:lQ};function uQ(n,e={}){return gA(n,Ve({},h0,e,{nodeTransforms:[cQ,..._A,...e.nodeTransforms||[]],directiveTransforms:Ve({},yA,e.directiveTransforms||{}),transformHoist:null}))}function dQ(n,e={}){return Zb(n,Ve({},h0,e))}const hQ=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:Vb,BindingTypes:XY,CAMELIZE:gh,CAPITALIZE:_4,CREATE_BLOCK:Db,CREATE_COMMENT:ul,CREATE_ELEMENT_BLOCK:Fb,CREATE_ELEMENT_VNODE:Tf,CREATE_SLOTS:Hb,CREATE_STATIC:$b,CREATE_TEXT:Sf,CREATE_VNODE:xf,CompilerDeprecationTypes:MJ,ConstantTypes:EJ,DOMDirectiveTransforms:yA,DOMErrorCodes:YY,DOMErrorMessages:QY,DOMNodeTransforms:_A,ElementTypes:CJ,ErrorCodes:LJ,FRAGMENT:$a,GUARD_REACTIVE_PROPS:dl,IS_MEMO_SAME:jb,IS_REF:E4,KEEP_ALIVE:Vc,MERGE_PROPS:Dc,NORMALIZE_CLASS:Bf,NORMALIZE_PROPS:Ua,NORMALIZE_STYLE:Lf,Namespaces:yJ,NodeTypes:kJ,OPEN_BLOCK:$o,POP_SCOPE_ID:k4,PUSH_SCOPE_ID:y4,RENDER_LIST:Rf,RENDER_SLOT:Ub,RESOLVE_COMPONENT:If,RESOLVE_DIRECTIVE:Pf,RESOLVE_DYNAMIC_COMPONENT:Af,RESOLVE_FILTER:Of,SET_BLOCK_TRACKING:Fc,SUSPENSE:Ef,TELEPORT:Ta,TO_DISPLAY_STRING:bu,TO_HANDLERS:Nf,TO_HANDLER_KEY:bh,TRANSITION:u0,TRANSITION_GROUP:d0,TS_NODE_TYPES:M4,UNREF:C4,V_MODEL_CHECKBOX:s0,V_MODEL_DYNAMIC:kh,V_MODEL_RADIO:i0,V_MODEL_SELECT:r0,V_MODEL_TEXT:o0,V_ON_WITH_KEYS:l0,V_ON_WITH_MODIFIERS:a0,V_SHOW:c0,WITH_CTX:Vf,WITH_DIRECTIVES:Mf,WITH_MEMO:Df,advancePositionWithClone:QJ,advancePositionWithMutation:D4,assert:eY,baseCompile:gA,baseParse:Zb,buildDirectiveArgs:dA,buildProps:e0,buildSlots:aA,checkCompatEnabled:ja,compile:uQ,convertToBlock:Ff,createArrayExpression:Mo,createAssignmentExpression:IJ,createBlockStatement:I4,createCacheExpression:S4,createCallExpression:qt,createCompilerError:_t,createCompoundExpression:xi,createConditionalExpression:vh,createDOMCompilerError:zs,createForLoopParams:_h,createFunctionExpression:Sr,createIfStatement:SJ,createInterpolation:xJ,createObjectExpression:di,createObjectProperty:Ht,createReturnStatement:PJ,createRoot:T4,createSequenceExpression:AJ,createSimpleExpression:Pe,createStructuralDirectiveTransform:Jb,createTemplateLiteral:TJ,createTransformContext:J4,createVNodeCall:Ha,errorMessages:NJ,extractIdentifiers:ds,findDir:Nn,findProp:wu,forAliasRE:H4,generate:eA,generateCodeFrame:GC,getBaseTransformPreset:mA,getConstantType:Yn,getMemoedVNodeCall:U4,getVNodeBlockHelper:Ar,getVNodeHelper:Ir,hasDynamicKeyVBind:F4,hasScopeRef:Bi,helperNameMap:Tr,injectProp:Uc,isCoreComponent:Wb,isFnExpression:V4,isFnExpressionBrowser:N4,isFnExpressionNode:YJ,isFunctionType:WJ,isInDestructureAssignment:FJ,isInNewExpression:$J,isMemberExpression:Gb,isMemberExpressionBrowser:L4,isMemberExpressionNode:ZJ,isReferencedIdentifier:DJ,isSimpleIdentifier:vu,isSlotOutlet:$c,isStaticArgOf:So,isStaticExp:Dn,isStaticProperty:O4,isStaticPropertyKey:qJ,isTemplateNode:za,isText:yd,isVPre:Lg,isVSlot:Kb,locStub:sn,noopDirectiveTransform:bA,parse:dQ,parserOptions:h0,processExpression:xd,processFor:oA,processIf:sA,processSlotOutlet:hA,registerRuntimeHelpers:x4,resolveComponentType:uA,stringifyExpression:iA,toValidAssetId:Wa,trackSlotScopes:rA,trackVForSlotScopes:DY,transform:Y4,transformBind:fA,transformElement:cA,transformExpression:RY,transformModel:n0,transformOn:t0,transformStyle:vA,transformVBindShorthand:pA,traverseNode:_u,unwrapTSNode:R4,validFirstIdentCharRE:qb,walkBlockDeclarations:P4,walkFunctionParams:UJ,walkIdentifiers:VJ,warnDeprecation:BJ},Symbol.toStringTag,{value:"Module"})),fQ=lb(hQ),pQ=lb(y8),mQ=lb(d7);/**
* vue v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var X2;function gQ(){return X2||(X2=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=fQ,t=pQ,i=mQ;function s(l){var c=Object.create(null);if(l)for(var u in l)c[u]=l[u];return c.default=l,Object.freeze(c)}var o=s(t);const r=Object.create(null);function a(l,c){if(!i.isString(l))if(l.nodeType)l=l.innerHTML;else return i.NOOP;const u=i.genCacheKey(l,c),d=r[u];if(d)return d;if(l[0]==="#"){const g=document.querySelector(l);l=g?g.innerHTML:""}const h=i.extend({hoistStatic:!0,onError:void 0,onWarn:i.NOOP},c);!h.isCustomElement&&typeof customElements<"u"&&(h.isCustomElement=g=>!!customElements.get(g));const{code:f}=e.compile(l,h),p=new Function("Vue",f)(o);return p._rc=!0,r[u]=p}t.registerRuntimeCompiler(a),n.compile=a,Object.keys(t).forEach(function(l){l!=="default"&&!Object.prototype.hasOwnProperty.call(n,l)&&(n[l]=t[l])})})(cm)),cm}var Z2;function bQ(){return Z2||(Z2=1,lm.exports=gQ()),lm.exports}/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */var J2;function vQ(){return J2||(J2=1,(function(n,e){(function(t,i){n.exports=i(bQ())})(self,t=>(()=>{var i={976:a=>{a.exports=t}},s={};function o(a){var l=s[a];if(l!==void 0)return l.exports;var c=s[a]={exports:{}};return i[a](c,c.exports,o),c.exports}o.d=(a,l)=>{for(var c in l)o.o(l,c)&&!o.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},o.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l);var r={};return(()=>{o.d(r,{default:()=>Ot});var a=o(976);const l=function(Z){var Be=typeof Z;return Z!=null&&(Be=="object"||Be=="function")},c=typeof Uu=="object"&&Uu&&Uu.Object===Object&&Uu;var u=typeof self=="object"&&self&&self.Object===Object&&self;const d=c||u||Function("return this")(),h=function(){return d.Date.now()};var f=/\s/;const p=function(Z){for(var Be=Z.length;Be--&&f.test(Z.charAt(Be)););return Be};var g=/^\s+/;const y=function(Z){return Z&&Z.slice(0,p(Z)+1).replace(g,"")},k=d.Symbol;var v=Object.prototype,b=v.hasOwnProperty,w=v.toString,C=k?k.toStringTag:void 0;const E=function(Z){var Be=b.call(Z,C),mt=Z[C];try{Z[C]=void 0;var xt=!0}catch{}var $=w.call(Z);return xt&&(Be?Z[C]=mt:delete Z[C]),$};var I=Object.prototype.toString;const x=function(Z){return I.call(Z)};var _=k?k.toStringTag:void 0;const S=function(Z){return Z==null?Z===void 0?"[object Undefined]":"[object Null]":_&&_ in Object(Z)?E(Z):x(Z)},R=function(Z){return Z!=null&&typeof Z=="object"},B=function(Z){return typeof Z=="symbol"||R(Z)&&S(Z)=="[object Symbol]"};var F=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,K=/^0o[0-7]+$/i,G=parseInt;const oe=function(Z){if(typeof Z=="number")return Z;if(B(Z))return NaN;if(l(Z)){var Be=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=l(Be)?Be+"":Be}if(typeof Z!="string")return Z===0?Z:+Z;Z=y(Z);var mt=ee.test(Z);return mt||K.test(Z)?G(Z.slice(2),mt?2:8):F.test(Z)?NaN:+Z};var Y=Math.max,je=Math.min;const zt=function(Z,Be,mt){var xt,$,ce,ie,de,Se,Ye=0,T=!1,A=!1,N=!0;if(typeof Z!="function")throw new TypeError("Expected a function");function W(j){var ge=xt,re=$;return xt=$=void 0,Ye=j,ie=Z.apply(re,ge)}function U(j){return Ye=j,de=setTimeout(ne,Be),T?W(j):ie}function q(j){var ge=j-Se;return Se===void 0||ge>=Be||ge<0||A&&j-Ye>=ce}function ne(){var j=h();if(q(j))return Q(j);de=setTimeout(ne,(function(ge){var re=Be-(ge-Se);return A?je(re,ce-(ge-Ye)):re})(j))}function Q(j){return de=void 0,N&&xt?W(j):(xt=$=void 0,ie)}function J(){var j=h(),ge=q(j);if(xt=arguments,$=this,Se=j,ge){if(de===void 0)return U(Se);if(A)return clearTimeout(de),de=setTimeout(ne,Be),W(Se)}return de===void 0&&(de=setTimeout(ne,Be)),ie}return Be=oe(Be)||0,l(mt)&&(T=!0,ce=(A="maxWait"in mt)?Y(oe(mt.maxWait)||0,Be):ce,N="trailing"in mt?!!mt.trailing:N),J.cancel=function(){de!==void 0&&clearTimeout(de),Ye=0,xt=Se=$=de=void 0},J.flush=function(){return de===void 0?ie:Q(h())},J},Et=(0,a.defineComponent)({name:"Ckeditor",model:{prop:"modelValue",event:"update:modelValue"},props:{editor:{type:Function,required:!0},config:{type:Object,default:()=>({})},modelValue:{type:String,default:""},tagName:{type:String,default:"div"},disabled:{type:Boolean,default:!1},disableTwoWayDataBinding:{type:Boolean,default:!1}},emits:["ready","destroy","blur","focus","input","update:modelValue"],data:()=>({instance:null,lastEditorData:null}),watch:{modelValue(Z){this.instance&&Z!==this.lastEditorData&&this.instance.data.set(Z)},disabled(Z){Z?this.instance.enableReadOnlyMode("Integration Sample"):this.instance.disableReadOnlyMode("Integration Sample")}},created(){const{CKEDITOR_VERSION:Z}=window;if(Z){const[Be]=Z.split(".").map(Number);Be<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')},mounted(){const Z=Object.assign({},this.config);this.modelValue&&(Z.initialData=this.modelValue),this.editor.create(this.$el,Z).then(Be=>{this.instance=(0,a.markRaw)(Be),this.setUpEditorEvents(),this.modelValue!==Z.initialData&&Be.data.set(this.modelValue),this.disabled&&Be.enableReadOnlyMode("Integration Sample"),this.$emit("ready",Be)}).catch(Be=>{console.error(Be)})},beforeUnmount(){this.instance&&(this.instance.destroy(),this.instance=null),this.$emit("destroy",this.instance)},methods:{setUpEditorEvents(){const Z=this.instance,Be=zt(mt=>{if(this.disableTwoWayDataBinding)return;const xt=this.lastEditorData=Z.data.get();this.$emit("update:modelValue",xt,mt,Z),this.$emit("input",xt,mt,Z)},300,{leading:!0});Z.model.document.on("change:data",Be),Z.editing.view.document.on("focus",mt=>{this.$emit("focus",mt,Z)}),Z.editing.view.document.on("blur",mt=>{this.$emit("blur",mt,Z)})}},render(){return(0,a.h)(this.tagName)}});if(!a.version||!a.version.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const Ot={install(Z){Z.component("Ckeditor",Et)},component:Et}})(),r=r.default})())})(am)),am.exports}var wQ=vQ();const _Q={__name:"Editor-no",setup(n){const e=X("<p>Hello world!</p>"),t=it(()=>({licenseKey:"GPL",plugins:[kI,nI,iI,II,fu,lI,AI,h4,r4,w4,sI,fS,PI,RI,GI,wI,tI,XS],language:{ui:"ar",content:"ar"},toolbar:["bold","italic","|","fontBackgroundColor","link","|","bulletedList","numberedList"]}));return(i,s)=>(O(),$n(pe(wQ.Ckeditor),{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),editor:pe(_I),config:t.value},null,8,["modelValue","editor","config"]))}},yQ=Object.freeze(Object.defineProperty({__proto__:null,default:_Q},Symbol.toStringTag,{value:"Module"}));/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kQ={ar:{dictionary:{"Words: %0":": %0","Characters: %0":": %0","Widget toolbar":"  ","Insert paragraph before block":"   ","Insert paragraph after block":"   ","Press Enter to type after or press Shift + Enter to type before the widget":"  Enter       Shift + Enter   ","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"        (  :     )","Insert a new paragraph directly after a widget":"      ","Insert a new paragraph directly before a widget":"      ","Move the caret to allow typing directly before a widget":"       ","Move the caret to allow typing directly after a widget":"       ","Move focus from an editable area back to the parent widget":"         ","Upload in progress":" ",Undo:"",Redo:"","Rich Text Editor":" ","Edit block":" ","Click to edit block":"   ","Drag to move":" ",Next:"",Previous:"","Editor toolbar":"  ","Dropdown toolbar":"   ","Dropdown menu":" ",Black:"","Dim grey":" ",Grey:"","Light grey":" ",White:"",Red:"",Orange:"",Yellow:"","Light green":" ",Green:"",Aquamarine:" ",Turquoise:"","Light blue":" ",Blue:"",Purple:"","Editor block content toolbar":"    ","Editor contextual toolbar":"   ",HEX:"  ","No results found":"    ","No searchable items":"     ","Editor dialog":" ",Close:"","Help Contents. To close this dialog press ESC.":" .       ESC.","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"          .","(may require <kbd>Fn</kbd>)":"(  <kbd> Fn</kbd>)",Accessibility:" ","Accessibility help":"  ","Press %0 for help.":"  %0   .","Move focus in and out of an active dialog window":"      ",MENU_BAR_MENU_FILE:"",MENU_BAR_MENU_EDIT:"",MENU_BAR_MENU_VIEW:"",MENU_BAR_MENU_INSERT:"",MENU_BAR_MENU_FORMAT:"",MENU_BAR_MENU_TOOLS:"",MENU_BAR_MENU_HELP:"",MENU_BAR_MENU_TEXT:"",MENU_BAR_MENU_FONT:"","Editor menu bar":"  ",'Please enter a valid color (e.g. "ff0000").':'    (   "ff0000").',"Insert table":" ","Header column":" ","Insert column left":"   ","Insert column right":"   ","Delete column":" ","Select column":" ",Column:"","Header row":" ","Insert row below":"  ","Insert row above":"  ","Delete row":" ","Select row":" ",Row:"","Merge cell up":"  ","Merge cell right":"  ","Merge cell down":"  ","Merge cell left":"  ","Split cell vertically":"   ","Split cell horizontally":"   ","Merge cells":" ","Table toolbar":"  ","Table properties":" ","Cell properties":" ",Border:"",Style:"",Width:"",Height:"",Color:"",Background:"",Padding:"",Dimensions:"","Table cell text alignment":"   ",Alignment:"","Horizontal text alignment toolbar":"    ","Vertical text alignment toolbar":"    ","Table alignment toolbar":"   ",None:" ",Solid:"",Dotted:"",Dashed:"",Double:"",Groove:" ",Ridge:" ",Inset:"",Outset:"","Align cell text to the left":"     ","Align cell text to the center":"     ","Align cell text to the right":"     ","Justify cell text":"  ","Align cell text to the top":"     ","Align cell text to the middle":"     ","Align cell text to the bottom":"    ","Align table to the left":"    ","Center table":"    ","Align table to the right":"    ",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'   .  "#FF0000"  "rgb(255,0,0)"  "".','The value is invalid. Try "10px" or "2em" or simply "2".':'   .  "10px"  "2em"  "2" .',"Enter table caption":"   ","Keystrokes that can be used in a table cell":"       ","Move the selection to the next cell":"    ","Move the selection to the previous cell":"    ","Insert a new table row (when in the last cell of a table)":"     (    )","Navigate through the table":"  ",Table:"",Styles:"","Multiple styles":" ","Block styles":" ","Text styles":" ","Special characters":" ",Category:"",All:"",Arrows:"",Currency:"",Latin:"",Mathematical:"",Text:"","leftwards simple arrow":"    ","rightwards simple arrow":"    ","upwards simple arrow":"    ","downwards simple arrow":"    ","leftwards double arrow":"   ","rightwards double arrow":"   ","upwards double arrow":"   ","downwards double arrow":"   ","leftwards dashed arrow":"   ","rightwards dashed arrow":"   ","upwards dashed arrow":"   ","downwards dashed arrow":"   ","leftwards arrow to bar":"     ","rightwards arrow to bar":"     ","upwards arrow to bar":"    ","downwards arrow to bar":"    ","up down arrow with base":"     ","back with leftwards arrow above":'""    ',"end with leftwards arrow above":'""    ',"on with exclamation mark with left right arrow above":'""       ',"soon with rightwards arrow above":'""    ',"top with upwards arrow above":'" "   ',"Dollar sign":" ","Euro sign":" ","Yen sign":" ","Pound sign":" ","Cent sign":" ","Euro-currency sign":"  ","Colon sign":" ","Cruzeiro sign":" ","French franc sign":"  ","Lira sign":" ","Currency sign":" ","Bitcoin sign":" ","Mill sign":" ","Naira sign":" ","Peseta sign":" ","Rupee sign":" ","Won sign":" ","New sheqel sign":"  ","Dong sign":" ","Kip sign":" ","Tugrik sign":" ","Drachma sign":" ","German penny sign":"  ","Peso sign":" ","Guarani sign":" ","Austral sign":" ","Hryvnia sign":" ","Cedi sign":" ","Livre tournois sign":"  ","Spesmilo sign":" ","Tenge sign":" ","Indian rupee sign":"  ","Turkish lira sign":"  ","Nordic mark sign":"  ","Manat sign":" ","Ruble sign":" ","Latin capital letter a with macron":" a      ","Latin small letter a with macron":" a      ","Latin capital letter a with breve":" a      ","Latin small letter a with breve":" a      ","Latin capital letter a with ogonek":" a      ","Latin small letter a with ogonek":" a      ","Latin capital letter c with acute":" c       ","Latin small letter c with acute":" c       ","Latin capital letter c with circumflex":" c       ","Latin small letter c with circumflex":" c       ","Latin capital letter c with dot above":" c     ","Latin small letter c with dot above":" c     ","Latin capital letter c with caron":" c      ","Latin small letter c with caron":" c      ","Latin capital letter d with caron":" d      ","Latin small letter d with caron":" d      ","Latin capital letter d with stroke":" d     ","Latin small letter d with stroke":" d     ","Latin capital letter e with macron":" e      ","Latin small letter e with macron":" e      ","Latin capital letter e with breve":" e      ","Latin small letter e with breve":" e      ","Latin capital letter e with dot above":" e     ","Latin small letter e with dot above":" e     ","Latin capital letter e with ogonek":" e      ","Latin small letter e with ogonek":" e      ","Latin capital letter e with caron":" e      ","Latin small letter e with caron":" e      ","Latin capital letter g with circumflex":" g       ","Latin small letter g with circumflex":" g       ","Latin capital letter g with breve":" g      ","Latin small letter g with breve":" g      ","Latin capital letter g with dot above":" g     ","Latin small letter g with dot above":" g     ","Latin capital letter g with cedilla":" g      ","Latin small letter g with cedilla":" g      ","Latin capital letter h with circumflex":" h       ","Latin small letter h with circumflex":" h       ","Latin capital letter h with stroke":" h     ","Latin small letter h with stroke":" h     ","Latin capital letter i with tilde":" i     ","Latin small letter i with tilde":" i     ","Latin capital letter i with macron":" i      ","Latin small letter i with macron":" i      ","Latin capital letter i with breve":" i      ","Latin small letter i with breve":" i      ","Latin capital letter i with ogonek":" i      ","Latin small letter i with ogonek":" i      ","Latin capital letter i with dot above":" i     ","Latin small letter dotless i":" i    ","Latin capital ligature ij":" ij   ","Latin small ligature ij":" ij   ","Latin capital letter j with circumflex":" j       ","Latin small letter j with circumflex":" j       ","Latin capital letter k with cedilla":" k      ","Latin small letter k with cedilla":" k      ","Latin small letter kra":" kra  ","Latin capital letter l with acute":" l       ","Latin small letter l with acute":" l       ","Latin capital letter l with cedilla":" l      ","Latin small letter l with cedilla":" l      ","Latin capital letter l with caron":" l      ","Latin small letter l with caron":" l      ","Latin capital letter l with middle dot":" l      ","Latin small letter l with middle dot":" l      ","Latin capital letter l with stroke":" l     ","Latin small letter l with stroke":" l     ","Latin capital letter n with acute":" n       ","Latin small letter n with acute":" n       ","Latin capital letter n with cedilla":" n      ","Latin small letter n with cedilla":" n      ","Latin capital letter n with caron":" n      ","Latin small letter n with caron":" n      ","Latin small letter n preceded by apostrophe":" n      ","Latin capital letter eng":" eng  ","Latin small letter eng":" eng  ","Latin capital letter o with macron":" o      ","Latin small letter o with macron":" o      ","Latin capital letter o with breve":" o      ","Latin small letter o with breve":" o      ","Latin capital letter o with double acute":" o        ","Latin small letter o with double acute":" o        ","Latin capital ligature oe":" oe   ","Latin small ligature oe":" oe   ","Latin capital letter r with acute":" r       ","Latin small letter r with acute":` r       
`,"Latin capital letter r with cedilla":" r      ","Latin small letter r with cedilla":" r      ","Latin capital letter r with caron":" r      ","Latin small letter r with caron":" r      ","Latin capital letter s with acute":" s       ","Latin small letter s with acute":" s       ","Latin capital letter s with circumflex":" s       ","Latin small letter s with circumflex":" s       ","Latin capital letter s with cedilla":" s      ","Latin small letter s with cedilla":" s      ","Latin capital letter s with caron":" s      ","Latin small letter s with caron":" s      ","Latin capital letter t with cedilla":" t      ","Latin small letter t with cedilla":" t      ","Latin capital letter t with caron":" t      ","Latin small letter t with caron":" t      ","Latin capital letter t with stroke":" t     ","Latin small letter t with stroke":" t     ","Latin capital letter u with tilde":" u     ","Latin small letter u with tilde":" u     ","Latin capital letter u with macron":" u      ","Latin small letter u with macron":" u      ","Latin capital letter u with breve":" u      ","Latin small letter u with breve":" u      ","Latin capital letter u with ring above":" u     ","Latin small letter u with ring above":" u     ","Latin capital letter u with double acute":" u        ","Latin small letter u with double acute":" u        ","Latin capital letter u with ogonek":" u      ","Latin small letter u with ogonek":" u      ","Latin capital letter w with circumflex":" w       ","Latin small letter w with circumflex":" w       ","Latin capital letter y with circumflex":" y       ","Latin small letter y with circumflex":" y       ","Latin capital letter y with diaeresis":" y     ","Latin capital letter z with acute":" z       ","Latin small letter z with acute":" z       ","Latin capital letter z with dot above":" z     ","Latin small letter z with dot above":" z     ","Latin capital letter z with caron":" z      ","Latin small letter z with caron":" z      ","Latin small letter long s":' "s "  ',"Less-than sign":"  ","Greater-than sign":"  ","Less-than or equal to":"   ","Greater-than or equal to":"   ","En dash":" ","Em dash":" ",Macron:"  ",Overline:"  ","Degree sign":" ","Minus sign":" ","Plus-minus sign":"  ","Division sign":" ","Fraction slash":" ","Multiplication sign":" ","Latin small letter f with hook":" f     ",Integral:" ","N-ary summation":"  N",Infinity:"   ","Square root":" ","Tilde operator":" ","Approximately equal to":" ","Almost equal to":"  ","Not equal to":" ","Identical to":" ","Element of":" ","Not an element of":"  ","Contains as member":" ","N-ary product":"  N","Logical and":"and ","Logical or":"or ","Not sign":" Not ",Intersection:"",Union:"","Partial differential":" ","For all":" ","There exists":"  ","Empty set":" ",Nabla:" ","Asterisk operator":"  ()","Proportional to":" ",Angle:" ","Vulgar fraction one quarter":"  ","Vulgar fraction one half":"  ","Vulgar fraction three quarters":"   ","Single left-pointing angle quotation mark":"       ","Single right-pointing angle quotation mark":"       ","Left-pointing double angle quotation mark":"       ","Right-pointing double angle quotation mark":"       ","Left single quotation mark":"     ","Right single quotation mark":"     ","Left double quotation mark":"     ","Right double quotation mark":"     ","Single low-9 quotation mark":"  9  ","Double low-9 quotation mark":"  9  ","Inverted exclamation mark":"  ","Inverted question mark":"  ","Two dot leader":"  ","Horizontal ellipsis":"  ","Double dagger":"  ","Per mille sign":' " "',"Per ten thousand sign":' " 10 "',"Double exclamation mark":"  ","Question exclamation mark":"  ","Exclamation question mark":"    ","Double question mark":"  ","Copyright sign":' "  "',"Registered sign":' ""',"Trade mark sign":"  ","Section sign":" ","Paragraph sign":" ","Reversed paragraph sign":"  ",Source:"","Show source":" ","Show blocks":" ","Select all":" ","Disable editing":" ","Enable editing":" ","Previous editable region":"  ","Next editable region":"  ","Navigate editable regions":"   ","Remove Format":" ","Page break":" ","media widget":" ","Media URL":" URL ","Paste the media URL in the input.":"  URL    .","Tip: Paste the URL into the content to embed faster.":":   URL     .","The URL must not be empty.":"     URL .","This media URL is not supported.":" URL    .","Insert media":" ",Media:"","Media toolbar":"  ","Open media in new tab":"     ","Numbered List":" ","Bulleted List":" ","To-do List":" ","Bulleted list styles toolbar":"     ","Numbered list styles toolbar":"    ","Toggle the disc list style":"   ","Toggle the circle list style":"   ","Toggle the square list style":"   ","Toggle the decimal list style":"    ","Toggle the decimal with leading zero list style":"      ","Toggle the lowerroman list style":"     ","Toggle the upperroman list style":"     ","Toggle the lowerlatin list style":"     ","Toggle the upperlatin list style":"     ",Disc:"",Circle:"",Square:"",Decimal:" ","Decimal with leading zero":"     ","Lowerroman":"  ","Upper-roman":"  ","Lower-latin":"  ","Upper-latin":"  ","List properties":" ","Start at":" ","Invalid start index value.":"    .","Start index must be greater than 0.":"         0.","Reversed order":"  ","Keystrokes that can be used in a list":"      ","Increase list item indent":"    ","Decrease list item indent":"    ","Entering a to-do list":"  ","Leaving a to-do list":"  ",Unlink:" ",Link:"","Link URL":" ","Link URL must not be empty.":"     .","Link image":" ","Edit link":" ","Open link in new tab":"    ","This link has no URL":"     ","Open in a new tab":"   ",Downloadable:" ","Create link":"  ","Move out of a link":"  ",Language:"","Choose language":" ","Remove language":" ","Increase indent":"  ","Decrease indent":"  ","image widget":" ","Wrap text":" ","Break text":" ","In line":"  ","Side image":" ","Full size image":"  ","Left aligned image":"  ","Centered image":" ","Right aligned image":"  ","Change image text alternative":"   ","Text alternative":" ","Enter image caption":"  ","Insert image":" ","Replace image":" ","Upload from computer":"   ","Replace from computer":"  ","Upload image from computer":"   ","Image from computer":"   ","From computer":" ","Replace image from computer":"   ","Upload failed":" ","You have no image upload permissions.":"    .","Image toolbar":"  ","Resize image":"  ","Resize image to %0":"    %0","Resize image to the original size":"     ","Resize image (in %0)":"   ( %0 )",Original:" ","Custom image size":"  ",Custom:"","Image resize list":"   ","Insert image via URL":"    URL","Insert via URL":"  URL","Image via URL":"  URL","Via URL":" URL","Update image URL":" URL   ","Caption for the image":"  ","Caption for image: %0":"  : %0","The value must not be empty.":"    .","The value should be a plain number.":"     .","Uploading image":"  ","Image upload complete":"  ","Error during image upload":"    ",Image:"","HTML object":" HTML","Insert HTML":" HTML","HTML snippet":"   HTML","Paste raw HTML here...":"  HTML  ...","Edit source":" ","Save changes":" ","No preview available":"  ","Empty snippet content":"  ","Horizontal line":" ","Yellow marker":" ","Green marker":" ","Pink marker":" ","Blue marker":" ","Red pen":" ","Green pen":" ","Remove highlight":" ",Highlight:"","Text highlight toolbar":"   ",Heading:"","Choose heading":" ","Heading 1":" 1","Heading 2":" 2","Heading 3":" 3","Heading 4":" 4","Heading 5":" 5","Heading 6":" 6","Type your title":" ","Type or paste your content here.":"    .","Font Size":" ",Tiny:"",Small:"",Big:"",Huge:"","Font Family":" ",Default:"","Font Color":" ","Font Background Color":"  ","Document colors":" ","Find and replace":" ","Find in text":"  ...",Find:"","Previous result":" ","Next result":" ",Replace:"","Replace all":" ","Match case":"  ","Whole words only":"  ","Replace with":" ...","Text to find must not be empty.":"         .","Tip: Find some text first in order to replace it.":":          . ","Advanced options":" ","Find in the document":"  ","Insert a soft break (a <code>&lt;br&gt;</code> element)":"    ( <code>&lt;br&gt;</code>)","Insert a hard break (a new paragraph)":"    ( )",Cancel:"",Clear:"","Remove color":" ","Restore default":" ",Save:"","Show more items":"   ","%0 of %1":"%0  %1","Cannot upload file:":"   :","Rich Text Editor. Editing area: %0":"  .  : %0","Insert with file manager":"   ","Replace with file manager":"  ","Insert image with file manager":"    ","Replace image with file manager":"   ",File:"","With file manager":"  ","Toggle caption off":"  ","Toggle caption on":"  ","Content editing keystrokes":"   ","These keyboard shortcuts allow for quick access to content editing features.":"          .","User interface and content navigation keystrokes":"      ","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"           CKEditor 5.","Close contextual balloons, dropdowns, and dialogs":"      ","Open the accessibility help dialog":"      ","Move focus between form fields (inputs, buttons, etc.)":"     (    )","Move focus to the menu bar, navigate between menu bars":"        ","Move focus to the toolbar, navigate between toolbars":"        ","Navigate through the toolbar or menu bar":"      ","Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content.":"                  .",Accept:"",Paragraph:"","Color picker":"  ","Insert code block":"   ","Plain text":" ","Leaving %0 code snippet":"   %0","Entering %0 code snippet":"   %0","Entering code snippet":"  ","Leaving code snippet":"  ","Code block":"  ","Copy selected content":"  ","Paste content":" ","Paste content as plain text":"   ","Insert image or file":"   ","Could not obtain resized image URL.":"    URL     ","Selecting resized image failed":"      ","Could not insert image at the current position.":"     .","Inserting image failed":"   ","Open file manager":"  ","Cannot determine a category for the uploaded file.":"      ","Cannot access default workspace.":"      .","You have no image editing permissions.":"    .","Edit image":" ","Processing the edited image.":"  .","Server failed to process the image.":"    .","Failed to determine category of edited image.":"       .","Block quote":"",Bold:"",Italic:"",Underline:" ",Code:" ",Strikethrough:" ",Subscript:" ",Superscript:" ","Italic text":" ","Move out of an inline code style":"     ","Bold text":" ","Underline text":" ","Strikethrough text":"   ","Saving changes":"  ","Revert autoformatting action":"    ","Align left":" ","Align right":" ","Align center":"  ",Justify:"","Text alignment":" ","Text alignment toolbar":"   "},getPluralForm(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5}}},CQ={__name:"Editor",props:el({name:String,label:String,placeholder:String,toolbar:Array,modelType:String,modelId:Number,mediaCollection:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=UE("ckeditor"),t=it(()=>({placeholder:s.placeholder??"",plugins:[kI,nI,iI,II,fu,lI,AI,h4,r4,w4,sI,HK,qI,CX,BX,LX,qK,fS,PI,RI,GI,wI,tI,XS],language:{ui:"ar",content:"ar"},translations:[kQ],toolbar:{items:s.toolbar},heading:{options:[{model:"paragraph",title:"Paragraph",class:""},{model:"heading1",view:"h1",title:"Heading 1",class:"h1"},{model:"heading2",view:"h2",title:"Heading 2",class:"h2"},{model:"heading3",view:"h3",title:"Heading 3",class:"h3"}]},image:{resizeOptions:[{name:"resizeImage:original",label:"Default image width",value:null},{name:"resizeImage:50",label:"50% page width",value:"50"},{name:"resizeImage:75",label:"75% page width",value:"75"}],toolbar:["imageTextAlternative","toggleImageCaption","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},mediaEmbed:{previewsInData:!0},simpleUpload:{uploadUrl:"/admin/upload-media",withCredentials:!0,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,modelType:s.modelType,modelId:s.modelId,mediaCollection:s.mediaCollection}}}));Ct(()=>{_I.create(e.value,t.value).then(o=>{o.model.document.on("change:data",()=>{i.value=o.getData()})})});const i=tl(n,"modelValue"),s=n;return(o,r)=>{const a=we("UiField");return O(),$n(a,{name:n.name,label:n.label},{default:Le(()=>[vt(m("textarea",{ref_key:"ckeditor",ref:e,dir:"auto",placeholder:"  .. ",class:"w-fullx !whitespace-pre-wrap","onUpdate:modelValue":r[0]||(r[0]=l=>i.value=l)},null,512),[[Vt,i.value]])]),_:1},8,["name","label"])}}},EQ=Object.freeze(Object.defineProperty({__proto__:null,default:CQ},Symbol.toStringTag,{value:"Module"}));(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function xQ(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}function dm(){}Object.assign(dm,{default:dm,register:dm,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(n){const e=(this.document||this.ownerDocument).querySelectorAll(n);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(n){const e=document.createDocumentFragment();Array.isArray(n)||(n=[n]),n.forEach(t=>{const i=t instanceof Node;e.appendChild(i?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(n){n=arguments.length===0?!0:!!n;const e=this.parentNode,t=window.getComputedStyle(e,null),i=parseInt(t.getPropertyValue("border-top-width")),s=parseInt(t.getPropertyValue("border-left-width")),o=this.offsetTop-e.offsetTop<e.scrollTop,r=this.offsetTop-e.offsetTop+this.clientHeight-i>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-s>e.scrollLeft+e.clientWidth,c=o&&!r;(o||r)&&n&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-i+this.clientHeight/2),(a||l)&&n&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-s+this.clientWidth/2),(o||r||a||l)&&!n&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(n){const e=Date.now();return setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(n){clearTimeout(n)};let TQ=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var kA=(n=>(n.VERBOSE="VERBOSE",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR",n))(kA||{});const Ae={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46},SQ={LEFT:0};function ku(n,e,t="log",i,s="color: inherit"){if(!("console"in window)||!window.console[t])return;const o=["info","log","warn","error"].includes(t),r=[];switch(ku.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!o||n)return;break}i&&r.push(i);const a="Editor.js 2.31.0";n&&(o?(r.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,s),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{o?i?console[t](`${e} %o`,...r):console[t](e,...r):console[t](e)}catch{}}ku.logLevel="VERBOSE";function IQ(n){ku.logLevel=n}const et=ku.bind(window,!1),ki=ku.bind(window,!0);function Pr(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Pt(n){return Pr(n)==="function"||Pr(n)==="asyncfunction"}function mn(n){return Pr(n)==="object"}function to(n){return Pr(n)==="string"}function AQ(n){return Pr(n)==="boolean"}function Y2(n){return Pr(n)==="number"}function Q2(n){return Pr(n)==="undefined"}function Oi(n){return n?Object.keys(n).length===0&&n.constructor===Object:!0}function CA(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}async function PQ(n,e=()=>{},t=()=>{}){async function i(s,o,r){try{await s.function(s.data),await o(Q2(s.data)?{}:s.data)}catch{r(Q2(s.data)?{}:s.data)}}return n.reduce(async(s,o)=>(await s,i(o,e,t)),Promise.resolve())}function EA(n){return Array.prototype.slice.call(n)}function Ch(n,e){return function(){const t=this,i=arguments;window.setTimeout(()=>n.apply(t,i),e)}}function OQ(n){return n.name.split(".").pop()}function MQ(n){return/^[-\w]+\/([-+\w]+|\*)$/.test(n)}function eC(n,e,t){let i;return(...s)=>{const o=this,r=()=>{i=null,n.apply(o,s)};window.clearTimeout(i),i=window.setTimeout(r,e)}}function $g(n,e,t=void 0){let i,s,o,r=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),r=null,o=n.apply(i,s),r||(i=s=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return i=this,s=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=c,o=n.apply(i,s),r||(i=s=null)):!r&&t.trailing!==!1&&(r=setTimeout(l,u)),o}}function RQ(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(n[e]=!0),n}function Eh(n){return n[0].toUpperCase()+n.slice(1)}function Ug(n,...e){if(!e.length)return n;const t=e.shift();if(mn(n)&&mn(t))for(const i in t)mn(t[i])?(n[i]||Object.assign(n,{[i]:{}}),Ug(n[i],t[i])):Object.assign(n,{[i]:t[i]});return Ug(n,...e)}function f0(n){const e=RQ();return n=n.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),e.mac?n=n.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function BQ(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function LQ(){return TQ(10)}function NQ(n){window.open(n,"_blank")}function VQ(n=""){return`${n}${Math.floor(Math.random()*1e8).toString(16)}`}function Hg(n,e,t){const i=`${e} is deprecated and will be removed in the next major release. Please use the ${t} instead.`;n&&ki(i,"warn")}function hl(n,e,t){const i=t.value?"value":"get",s=t[i],o=`#${e}Cache`;if(t[i]=function(...r){return this[o]===void 0&&(this[o]=s.apply(this,...r)),this[o]},i==="get"&&t.set){const r=t.set;t.set=function(a){delete n[o],r.apply(this,a)}}return t}const xA=650;function fl(){return window.matchMedia(`(max-width: ${xA}px)`).matches}const jg=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function DQ(n,e){const t=Array.isArray(n)||mn(n),i=Array.isArray(e)||mn(e);return t||i?JSON.stringify(n)===JSON.stringify(e):n===e}class D{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,i={}){const s=document.createElement(e);if(Array.isArray(t)){const o=t.filter(r=>r!==void 0);s.classList.add(...o)}else t&&s.classList.add(t);for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o]);return s}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(i=>e.appendChild(i)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(i=>e.prepend(i))):e.prepend(t)}static swap(e,t){const i=document.createElement("div"),s=e.parentNode;s.insertBefore(i,e),s.insertBefore(e,t),s.insertBefore(t,i),s.removeChild(i)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return EA(e.querySelectorAll(D.allInputsSelector)).reduce((t,i)=>D.isNativeInput(i)||D.containsOnlyInlineElements(i)?[...t,i]:[...t,...D.getDeepestBlockElements(i)],[])}static getDeepestNode(e,t=!1){const i=t?"lastChild":"firstChild",s=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[i]){let o=e[i];if(D.isSingleTag(o)&&!D.isNativeInput(o)&&!D.isLineBreakTag(o))if(o[s])o=o[s];else if(o.parentNode[s])o=o.parentNode[s];else return o.parentNode;return this.getDeepestNode(o,t)}return e}static isElement(e){return Y2(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return Y2(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(D.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=D.isContentEditable(e);return t}static isNodeEmpty(e,t){let i;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?i=e.value:i=e.textContent.replace("",""),t&&(i=i.replace(new RegExp(t,"g"),"")),i.length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,t){const i=[e];for(;i.length>0;)if(e=i.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&i.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=D.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return D.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;to(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const i=s=>!D.blockElements.includes(s.tagName.toLowerCase())&&Array.from(s.children).every(i);return Array.from(t.children).every(i)}static getDeepestBlockElements(e){return D.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,i)=>[...t,...D.getDeepestBlockElements(i)],[])}static getHolder(e){return to(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,o=t.top+s,r=t.left+i;return{top:o,left:r,bottom:o+t.height,right:r+t.width}}static getNodeByOffset(e,t){let i=0,s=null;const o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let r=o.nextNode();for(;r;){const c=r.textContent,u=c===null?0:c.length;if(s=r,i+u>=t)break;i+=u,r=o.nextNode()}if(!s)return{node:null,offset:0};const a=s.textContent;if(a===null||a.length===0)return{node:null,offset:0};const l=Math.min(t-i,a.length);return{node:s,offset:l}}}function FQ(n){return!/[^\t\n\r ]/.test(n)}function $Q(n){const e=window.getComputedStyle(n),t=parseFloat(e.fontSize),i=parseFloat(e.lineHeight)||t*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),r=parseFloat(e.marginTop),a=t*.8,l=(i-t)/2;return r+o+s+l+a}function TA(n){n.dataset.empty=D.isEmpty(n)?"true":"false"}const UQ={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},HQ={Text:"",Link:"",Bold:"",Italic:""},jQ={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},zQ={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},SA={ui:UQ,toolNames:HQ,tools:jQ,blockTunes:zQ},IA=class ha{static ui(e,t){return ha._t(e,t)}static t(e,t){return ha._t(e,t)}static setDictionary(e){ha.currentDictionary=e}static _t(e,t){const i=ha.getNamespace(e);return!i||!i[t]?t:i[t]}static getNamespace(e){return e.split(".").reduce((t,i)=>!t||!Object.keys(t).length?{}:t[i],ha.currentDictionary)}};IA.currentDictionary=SA;let Fn=IA;class AA extends Error{}let Cu=class{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const i=s=>{const o=t(s),r=this.subscribers[e].indexOf(i);return r!==-1&&this.subscribers[e].splice(r,1),o};this.subscribers[e].push(i)}emit(e,t){Oi(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((i,s)=>{const o=s(i);return o!==void 0?o:i},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let i=0;i<this.subscribers[e].length;i++)if(this.subscribers[e][i]===t){delete this.subscribers[e][i];break}}destroy(){this.subscribers={}}};function Os(n){Object.setPrototypeOf(this,{get id(){return n.id},get name(){return n.name},get config(){return n.config},get holder(){return n.holder},get isEmpty(){return n.isEmpty},get selected(){return n.selected},set stretched(e){n.stretched=e},get stretched(){return n.stretched},get focusable(){return n.focusable},call(e,t){return n.call(e,t)},save(){return n.save()},validate(e){return n.validate(e)},dispatchChange(){n.dispatchChange()},getActiveToolboxEntry(){return n.getActiveToolboxEntry()}})}let Eu=class{constructor(){this.allListeners=[]}on(e,t,i,s=!1){const o=VQ("l"),r={id:o,element:e,eventType:t,handler:i,options:s};if(!this.findOne(e,t,i))return this.allListeners.push(r),e.addEventListener(t,i,s),o}off(e,t,i,s){const o=this.findAll(e,t,i);o.forEach((r,a)=>{const l=this.allListeners.indexOf(o[a]);l>-1&&(this.allListeners.splice(l,1),r.element.removeEventListener(r.eventType,r.handler,r.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,i){const s=this.findAll(e,t,i);return s.length>0?s[0]:null}findAll(e,t,i){let s;const o=e?this.findByEventTarget(e):[];return e&&t&&i?s=o.filter(r=>r.eventType===t&&r.handler===i):e&&t?s=o.filter(r=>r.eventType===t):s=o,s}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}},qe=class PA{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new Eu,this.readOnlyMutableListeners={on:(i,s,o,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(i,s,o,r))},clearAll:()=>{for(const i of this.mutableListenerIds)this.listeners.offById(i);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===PA)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},Ce=class mo{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?D.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(mo.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let i=null;return t&&t instanceof Element&&(i=t.closest(`.${mo.CSS.editorZone}`)),i?i.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let i=null;return t&&t instanceof Element&&(i=t.closest(`.${mo.CSS.editorZone}`)),i?i.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!mo.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,i={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),i.x=t.boundingLeft,i.y=t.boundingTop,i.width=t.boundingWidth,i.height=t.boundingHeight,i;if(!window.getSelection)return et("Method window.getSelection is not supported","warn"),i;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return et("Method SelectionUtils.rangeCount is not supported","warn"),i;if(e.rangeCount===0)return i;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(i=t.getBoundingClientRect()),i.x===0&&i.y===0){const s=document.createElement("span");if(s.getBoundingClientRect){s.appendChild(document.createTextNode("")),t.insertNode(s),i=s.getBoundingClientRect();const o=s.parentNode;o.removeChild(s),o.normalize()}}return i}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const i=document.createRange(),s=window.getSelection();return D.isNativeInput(e)?D.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(i.setStart(e,t),i.setEnd(e,t),s.removeAllRanges(),s.addRange(i),i.getBoundingClientRect())}static isRangeInsideContainer(e){const t=mo.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=mo.range;if(e===null)return;const t=D.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return D.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=D.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=mo.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,i=10){const s=window.getSelection();let o=null;return!s||!s.anchorNode||!s.focusNode?null:([s.anchorNode,s.focusNode].forEach(r=>{let a=i;for(;a>0&&r.parentNode&&!(r.tagName===e&&(o=r,t&&r.classList&&!r.classList.contains(t)&&(o=null),o));)r=r.parentNode,a--}),o)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const i=document.createRange();i.selectNodeContents(e),t.addRange(i)}};function WQ(n,e){const{type:t,target:i,addedNodes:s,removedNodes:o}=n;return n.type==="attributes"&&n.attributeName==="data-empty"?!1:!!(e.contains(i)||t==="childList"&&(Array.from(s).some(r=>r===e)||Array.from(o).some(r=>r===e)))}const zg="redactor dom changed",OA="block changed",MA="fake cursor is about to be toggled",RA="fake cursor have been set",zc="editor mobile layout toggled";function Wg(n,e){if(!n.conversionConfig)return!1;const t=n.conversionConfig[e];return Pt(t)||to(t)}function xh(n,e){return Wg(n.tool,e)}function BA(n,e){return Object.entries(n).some(([t,i])=>e[t]&&DQ(e[t],i))}async function LA(n,e){const t=(await n.save()).data,i=e.find(s=>s.name===n.name);return i!==void 0&&!Wg(i,"export")?[]:e.reduce((s,o)=>{if(!Wg(o,"import")||o.toolbox===void 0)return s;const r=o.toolbox.filter(a=>{if(Oi(a)||a.icon===void 0)return!1;if(a.data!==void 0){if(BA(a.data,t))return!1}else if(o.name===n.name)return!1;return!0});return s.push({...o,toolbox:r}),s},[])}function tC(n,e){return n.mergeable?n.name===e.name?!0:xh(e,"export")&&xh(n,"import"):!1}function qQ(n,e){const t=e?.export;return Pt(t)?t(n):to(t)?n[t]:(t!==void 0&&et("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function nC(n,e,t){const i=e?.import;return Pt(i)?i(n,t):to(i)?{[i]:n}:(i!==void 0&&et("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var It=(n=>(n.Default="default",n.Separator="separator",n.Html="html",n))(It||{}),Bs=(n=>(n.APPEND_CALLBACK="appendCallback",n.RENDERED="rendered",n.MOVED="moved",n.UPDATED="updated",n.REMOVED="removed",n.ON_PASTE="onPaste",n))(Bs||{});let Fs=class go extends Cu{constructor({id:e=LQ(),data:t,tool:i,readOnly:s,tunesData:o},r){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(a=void 0)=>{const l=a===void 0,c=a instanceof InputEvent;!l&&!c&&this.detectToolRootChange(a);let u;l||c?u=!0:u=!(a.length>0&&a.every(d=>{const{addedNodes:h,removedNodes:f,target:p}=d;return[...Array.from(h),...Array.from(f),p].some(g=>(D.isElement(g)||(g=g.parentElement),g&&g.closest('[data-mutation-free="true"]')!==null))})),u&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=i.name,this.id=e,this.settings=i.settings,this.config=i.settings.config||{},this.editorEventBus=r||null,this.blockAPI=new Os(this),this.tool=i,this.toolInstance=i.create(t,this.blockAPI,s),this.tunes=i.tunes,this.composeTunes(o),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=D.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(i=>i===e||i.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!Oi(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return Pt(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=D.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var t,i;this.holder.classList.toggle(go.CSS.selected,e);const s=e===!0&&Ce.isRangeInsideContainer(this.holder),o=e===!1&&Ce.isFakeCursorInsideContainer(this.holder);(s||o)&&((t=this.editorEventBus)==null||t.emit(MA,{state:e}),s?Ce.addFakeCursor():Ce.removeFakeCursor(this.holder),(i=this.editorEventBus)==null||i.emit(RA,{state:e}))}get selected(){return this.holder.classList.contains(go.CSS.selected)}set stretched(e){this.holder.classList.toggle(go.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(go.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(go.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(Pt(this.toolInstance[e])){e==="appendCallback"&&et("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(i){et(`Error during '${e}' call: ${i.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([o,r])=>{if(Pt(r.save))try{t[o]=r.save()}catch(a){et(`Tune ${r.constructor.name} save method throws an Error %o`,"warn",a)}});const i=window.performance.now();let s;return Promise.resolve(e).then(o=>(s=window.performance.now(),{id:this.id,tool:this.name,data:o,tunes:t,time:s-i})).catch(o=>{et(`Saving process for ${this.name} tool failed due to the ${o}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=[],t=[],i=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return D.isElement(i)?e.push({type:It.Html,element:i}):Array.isArray(i)?e.push(...i):e.push(i),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(s=>s.render()).forEach(s=>{D.isElement(s)?t.push({type:It.Html,element:s}):Array.isArray(s)?t.push(...s):t.push(s)}),{toolTunes:e,commonTunes:t}}updateCurrentInput(){this.currentInput=D.isNativeInput(document.activeElement)||!Ce.anchorNode?document.activeElement:Ce.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),Pt(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data,i=e;return i?.find(s=>BA(s.data,t))}async exportDataAsString(){const e=await this.data;return qQ(e,this.tool.conversionConfig)}compose(){const e=D.make("div",go.CSS.wrapper),t=D.make("div",go.CSS.content),i=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=i,t.appendChild(this.toolRenderedElement);let s=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(o=>{if(Pt(o.wrap))try{s=o.wrap(s)}catch(r){et(`Tune ${o.constructor.name} wrap method throws an Error %o`,"warn",r)}}),e.appendChild(s),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,i])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=i)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),D.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),D.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:i}=t;i.some(s=>WQ(s,this.toolRenderedElement))&&this.didMutated(i)},(e=this.editorEventBus)==null||e.on(zg,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(zg,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const i=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=i}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(TA)}};class GQ extends qe{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},i={},s,o,r,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:e,data:t,index:s,needToFocus:o,replace:r});return new Os(l)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new Fs({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t,i)=>{const{BlockManager:s}=this.Editor,o=s.getBlockById(e);if(o===void 0)throw new Error(`Block with id "${e}" not found`);const r=await s.update(o,t,i);return new Os(r)},this.convert=async(e,t,i)=>{var s,o;const{BlockManager:r,Tools:a}=this.Editor,l=r.getBlockById(e);if(!l)throw new Error(`Block with id "${e}" not found`);const c=a.blockTools.get(l.name),u=a.blockTools.get(t);if(!u)throw new Error(`Block Tool with type "${t}" not found`);const d=((s=c?.conversionConfig)==null?void 0:s.export)!==void 0,h=((o=u.conversionConfig)==null?void 0:o.import)!==void 0;if(d&&h){const f=await r.convert(l,t,i);return new Os(f)}else{const f=[d?!1:Eh(l.name),h?!1:Eh(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${l.name}" to "${t}" is not possible. ${f} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const i=e.map(({id:s,type:o,data:r})=>this.Editor.BlockManager.composeBlock({id:s,tool:o||this.config.defaultBlock,data:r}));return this.Editor.BlockManager.insertMany(i,t),i.map(s=>new Os(s))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){ki("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){ki("There is no block at index `"+e+"`","warn");return}return new Os(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(ki("There is no block with id `"+e+"`","warn"),null):new Os(t)}getBlockByElement(e){const t=this.Editor.BlockManager.getBlock(e);if(t===void 0){ki("There is no block corresponding to element `"+e+"`","warn");return}return new Os(t)}swap(e,t){et("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){ki(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}async renderFromHTML(e){return await this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){Hg(!0,"blocks.stretchBlock()","BlockAPI");const i=this.Editor.BlockManager.getBlockByIndex(e);i&&(i.stretched=t)}insertNewBlock(){et("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}function KQ(n,e){return typeof n=="number"?e.BlockManager.getBlockByIndex(n):typeof n=="string"?e.BlockManager.getBlockById(n):e.BlockManager.getBlockById(n.id)}class XQ extends qe{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,i=0)=>{const s=KQ(e,this.Editor);return s===void 0?!1:(this.Editor.Caret.setToBlock(s,t,i),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class ZQ extends qe{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}let JQ=class NA extends qe{static getNamespace(e,t){return t?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{ki("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,t){return Object.assign(this.methods,{t:i=>Fn.t(NA.getNamespace(e,t),i)})}};class YQ extends qe{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,t)})}}class QQ extends qe{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class eee extends qe{get methods(){return{on:(e,t,i,s)=>this.on(e,t,i,s),off:(e,t,i,s)=>this.off(e,t,i,s),offById:e=>this.offById(e)}}on(e,t,i,s){return this.listeners.on(e,t,i,s)}off(e,t,i,s){this.listeners.off(e,t,i,s)}offById(e){this.listeners.offById(e)}}var VA={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(window,function(){return(function(t){var i={};function s(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=i,s.d=function(o,r,a){s.o(o,r)||Object.defineProperty(o,r,{enumerable:!0,get:a})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,r){if(1&r&&(o=s(o)),8&r||4&r&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&r&&typeof o!="string")for(var l in o)s.d(a,l,(function(c){return o[c]}).bind(null,l));return a},s.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(r,"a",r),r},s.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},s.p="/",s(s.s=0)})([function(t,i,s){s(1),t.exports=(function(){var o=s(6),r="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=o.getWrapper(),document.body.appendChild(a)})();var c=null,u=l.time||8e3;switch(l.type){case"confirm":c=o.confirm(l);break;case"prompt":c=o.prompt(l);break;default:c=o.alert(l),window.setTimeout(function(){c.remove()},u)}a.appendChild(c),c.classList.add(r)}}}})()},function(t,i,s){var o=s(2);typeof o=="string"&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s(4)(o,r),o.locals&&(t.exports=o.locals)},function(t,i,s){(t.exports=s(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,i){t.exports=function(s){var o=[];return o.toString=function(){return this.map(function(r){var a=(function(l,c){var u=l[1]||"",d=l[3];if(!d)return u;if(c&&typeof btoa=="function"){var h=(p=d,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */"),f=d.sources.map(function(g){return"/*# sourceURL="+d.sourceRoot+g+" */"});return[u].concat(f).concat([h]).join(`
`)}var p;return[u].join(`
`)})(r,s);return r[2]?"@media "+r[2]+"{"+a+"}":a}).join("")},o.i=function(r,a){typeof r=="string"&&(r=[[null,r,""]]);for(var l={},c=0;c<this.length;c++){var u=this[c][0];typeof u=="number"&&(l[u]=!0)}for(c=0;c<r.length;c++){var d=r[c];typeof d[0]=="number"&&l[d[0]]||(a&&!d[2]?d[2]=a:a&&(d[2]="("+d[2]+") and ("+a+")"),o.push(d))}},o}},function(t,i,s){var o,r,a={},l=(o=function(){return window&&document&&document.all&&!window.atob},function(){return r===void 0&&(r=o.apply(this,arguments)),r}),c=(function(x){var _={};return function(S){if(typeof S=="function")return S();if(_[S]===void 0){var R=(function(B){return document.querySelector(B)}).call(this,S);if(window.HTMLIFrameElement&&R instanceof window.HTMLIFrameElement)try{R=R.contentDocument.head}catch{R=null}_[S]=R}return _[S]}})(),u=null,d=0,h=[],f=s(5);function p(x,_){for(var S=0;S<x.length;S++){var R=x[S],B=a[R.id];if(B){B.refs++;for(var F=0;F<B.parts.length;F++)B.parts[F](R.parts[F]);for(;F<R.parts.length;F++)B.parts.push(w(R.parts[F],_))}else{var ee=[];for(F=0;F<R.parts.length;F++)ee.push(w(R.parts[F],_));a[R.id]={id:R.id,refs:1,parts:ee}}}}function g(x,_){for(var S=[],R={},B=0;B<x.length;B++){var F=x[B],ee=_.base?F[0]+_.base:F[0],K={css:F[1],media:F[2],sourceMap:F[3]};R[ee]?R[ee].parts.push(K):S.push(R[ee]={id:ee,parts:[K]})}return S}function y(x,_){var S=c(x.insertInto);if(!S)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var R=h[h.length-1];if(x.insertAt==="top")R?R.nextSibling?S.insertBefore(_,R.nextSibling):S.appendChild(_):S.insertBefore(_,S.firstChild),h.push(_);else if(x.insertAt==="bottom")S.appendChild(_);else{if(typeof x.insertAt!="object"||!x.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var B=c(x.insertInto+" "+x.insertAt.before);S.insertBefore(_,B)}}function k(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x);var _=h.indexOf(x);_>=0&&h.splice(_,1)}function v(x){var _=document.createElement("style");return x.attrs.type===void 0&&(x.attrs.type="text/css"),b(_,x.attrs),y(x,_),_}function b(x,_){Object.keys(_).forEach(function(S){x.setAttribute(S,_[S])})}function w(x,_){var S,R,B,F;if(_.transform&&x.css){if(!(F=_.transform(x.css)))return function(){};x.css=F}if(_.singleton){var ee=d++;S=u||(u=v(_)),R=I.bind(null,S,ee,!1),B=I.bind(null,S,ee,!0)}else x.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(S=(function(K){var G=document.createElement("link");return K.attrs.type===void 0&&(K.attrs.type="text/css"),K.attrs.rel="stylesheet",b(G,K.attrs),y(K,G),G})(_),R=(function(K,G,oe){var Y=oe.css,je=oe.sourceMap,zt=G.convertToAbsoluteUrls===void 0&&je;(G.convertToAbsoluteUrls||zt)&&(Y=f(Y)),je&&(Y+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(je))))+" */");var Et=new Blob([Y],{type:"text/css"}),Ot=K.href;K.href=URL.createObjectURL(Et),Ot&&URL.revokeObjectURL(Ot)}).bind(null,S,_),B=function(){k(S),S.href&&URL.revokeObjectURL(S.href)}):(S=v(_),R=(function(K,G){var oe=G.css,Y=G.media;if(Y&&K.setAttribute("media",Y),K.styleSheet)K.styleSheet.cssText=oe;else{for(;K.firstChild;)K.removeChild(K.firstChild);K.appendChild(document.createTextNode(oe))}}).bind(null,S),B=function(){k(S)});return R(x),function(K){if(K){if(K.css===x.css&&K.media===x.media&&K.sourceMap===x.sourceMap)return;R(x=K)}else B()}}t.exports=function(x,_){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(_=_||{}).attrs=typeof _.attrs=="object"?_.attrs:{},_.singleton||typeof _.singleton=="boolean"||(_.singleton=l()),_.insertInto||(_.insertInto="head"),_.insertAt||(_.insertAt="bottom");var S=g(x,_);return p(S,_),function(R){for(var B=[],F=0;F<S.length;F++){var ee=S[F];(K=a[ee.id]).refs--,B.push(K)}for(R&&p(g(R,_),_),F=0;F<B.length;F++){var K;if((K=B[F]).refs===0){for(var G=0;G<K.parts.length;G++)K.parts[G]();delete a[K.id]}}}};var C,E=(C=[],function(x,_){return C[x]=_,C.filter(Boolean).join(`
`)});function I(x,_,S,R){var B=S?"":R.css;if(x.styleSheet)x.styleSheet.cssText=E(_,B);else{var F=document.createTextNode(B),ee=x.childNodes;ee[_]&&x.removeChild(ee[_]),ee.length?x.insertBefore(F,ee[_]):x.appendChild(F)}}},function(t,i){t.exports=function(s){var o=typeof window<"u"&&window.location;if(!o)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var r=o.protocol+"//"+o.host,a=r+o.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var u,d=c.trim().replace(/^"(.*)"$/,function(h,f){return f}).replace(/^'(.*)'$/,function(h,f){return f});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(d)?l:(u=d.indexOf("//")===0?d:d.indexOf("/")===0?r+d:a+d.replace(/^\.\//,""),"url("+JSON.stringify(u)+")")})}},function(t,i,s){var o,r,a,l,c,u,d,h,f;t.exports=(o="cdx-notifies",r="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",u="cdx-notify__input",d="cdx-notify__button",h="cdx-notify__btns-wrapper",{alert:f=function(p){var g=document.createElement("DIV"),y=document.createElement("DIV"),k=p.message,v=p.style;return g.classList.add(r),v&&g.classList.add(r+"--"+v),g.innerHTML=k,y.classList.add(a),y.addEventListener("click",g.remove.bind(g)),g.appendChild(y),g},confirm:function(p){var g=f(p),y=document.createElement("div"),k=document.createElement("button"),v=document.createElement("button"),b=g.querySelector("."+a),w=p.cancelHandler,C=p.okHandler;return y.classList.add(h),k.innerHTML=p.okText||"Confirm",v.innerHTML=p.cancelText||"Cancel",k.classList.add(d),v.classList.add(d),k.classList.add(l),v.classList.add(c),w&&typeof w=="function"&&(v.addEventListener("click",w),b.addEventListener("click",w)),C&&typeof C=="function"&&k.addEventListener("click",C),k.addEventListener("click",g.remove.bind(g)),v.addEventListener("click",g.remove.bind(g)),y.appendChild(k),y.appendChild(v),g.appendChild(y),g},prompt:function(p){var g=f(p),y=document.createElement("div"),k=document.createElement("button"),v=document.createElement("input"),b=g.querySelector("."+a),w=p.cancelHandler,C=p.okHandler;return y.classList.add(h),k.innerHTML=p.okText||"Ok",k.classList.add(d),k.classList.add(l),v.classList.add(u),p.placeholder&&v.setAttribute("placeholder",p.placeholder),p.default&&(v.value=p.default),p.inputType&&(v.type=p.inputType),w&&typeof w=="function"&&b.addEventListener("click",w),C&&typeof C=="function"&&k.addEventListener("click",function(){C(v.value)}),k.addEventListener("click",g.remove.bind(g)),y.appendChild(v),y.appendChild(k),g.appendChild(y),g},getWrapper:function(){var p=document.createElement("DIV");return p.classList.add(o),p}})}])})})(VA);var tee=VA.exports;const nee=Uf(tee);class iee{show(e){nee.show(e)}}class see extends qe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new iee}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class oee extends qe{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var DA={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(jc,function(){function t(d){var h=d.tags,f=Object.keys(h),p=f.map(function(g){return typeof h[g]}).every(function(g){return g==="object"||g==="boolean"||g==="function"});if(!p)throw new Error("The configuration was invalid");this.config=d}var i=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(d){return i.indexOf(d.nodeName)!==-1}var o=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(d){return o.indexOf(d.nodeName)!==-1}t.prototype.clean=function(d){const h=document.implementation.createHTMLDocument(),f=h.createElement("div");return f.innerHTML=d,this._sanitize(h,f),f.innerHTML},t.prototype._sanitize=function(d,h){var f=a(d,h),p=f.firstChild();if(p)do{if(p.nodeType===Node.TEXT_NODE)if(p.data.trim()===""&&(p.previousElementSibling&&s(p.previousElementSibling)||p.nextElementSibling&&s(p.nextElementSibling))){h.removeChild(p),this._sanitize(d,h);break}else continue;if(p.nodeType===Node.COMMENT_NODE){h.removeChild(p),this._sanitize(d,h);break}var g=r(p),y;g&&(y=Array.prototype.some.call(p.childNodes,s));var k=!!h.parentNode,v=s(h)&&s(p)&&k,b=p.nodeName.toLowerCase(),w=l(this.config,b,p),C=g&&y;if(C||c(p,w)||!this.config.keepNestedBlockElements&&v){if(!(p.nodeName==="SCRIPT"||p.nodeName==="STYLE"))for(;p.childNodes.length>0;)h.insertBefore(p.childNodes[0],p);h.removeChild(p),this._sanitize(d,h);break}for(var E=0;E<p.attributes.length;E+=1){var I=p.attributes[E];u(I,w,p)&&(p.removeAttribute(I.name),E=E-1)}this._sanitize(d,p)}while(p=f.nextSibling())};function a(d,h){return d.createTreeWalker(h,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function l(d,h,f){return typeof d.tags[h]=="function"?d.tags[h](f):d.tags[h]}function c(d,h){return typeof h>"u"?!0:typeof h=="boolean"?!h:!1}function u(d,h,f){var p=d.name.toLowerCase();return h===!0?!1:typeof h[p]=="function"?!h[p](d.value,f):typeof h[p]>"u"||h[p]===!1?!0:typeof h[p]=="string"?h[p]!==d.value:!1}return t})})(DA);var ree=DA.exports;const aee=Uf(ree);function p0(n,e){return n.map(t=>{const i=Pt(e)?e(t.tool):e;return Oi(i)||(t.data=m0(t.data,i)),t})}function hs(n,e={}){const t={tags:e};return new aee(t).clean(n)}function m0(n,e){return Array.isArray(n)?lee(n,e):mn(n)?cee(n,e):to(n)?uee(n,e):n}function lee(n,e){return n.map(t=>m0(t,e))}function cee(n,e){const t={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const s=n[i],o=dee(e[i])?e[i]:e;t[i]=m0(s,o)}return t}function uee(n,e){return mn(e)?hs(n,e):e===!1?hs(n,{}):n}function dee(n){return mn(n)||AQ(n)||Pt(n)}class hee extends qe{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return hs(e,t)}}class fee extends qe{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(ki(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class pee extends qe{constructor(){super(...arguments),this.selectionUtils=new Ce}get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,t){return this.selectionUtils.findParentTag(e,t)}expandToTag(e){this.selectionUtils.expandToTag(e)}}class mee extends qe{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}}class gee extends qe{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class bee extends qe{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ki("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ki("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var FA={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(n,e){(function(t,i){n.exports=i()})(window,function(){return(function(t){var i={};function s(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=i,s.d=function(o,r,a){s.o(o,r)||Object.defineProperty(o,r,{enumerable:!0,get:a})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,r){if(1&r&&(o=s(o)),8&r||4&r&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&r&&typeof o!="string")for(var l in o)s.d(a,l,(function(c){return o[c]}).bind(null,l));return a},s.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(r,"a",r),r},s.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},s.p="",s(s.s=0)})([function(t,i,s){t.exports=s(1)},function(t,i,s){s.r(i),s.d(i,"default",function(){return o});class o{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const u=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(u.hidingDelay&&(this.hidingDelay=u.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),u.placement){case"top":this.placeTop(a,u);break;case"left":this.placeLeft(a,u);break;case"right":this.placeRight(a,u);break;case"bottom":default:this.placeBottom(a,u)}u&&u.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},u.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,c){a.addEventListener("mouseenter",()=>{this.show(a,l,c)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=s(2),c=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,c)}placeBottom(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,d=c.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",u,d)}placeTop(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,d=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",u,d)}placeLeft(a,l){const c=a.getBoundingClientRect(),u=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,d=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",u,d)}placeRight(a,l){const c=a.getBoundingClientRect(),u=c.right+this.offsetRight+l.marginRight,d=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",u,d)}applyPlacement(a,l,c){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=c+"px"}make(a,l=null,c={}){const u=document.createElement(a);Array.isArray(l)?u.classList.add(...l):l&&u.classList.add(l);for(const d in c)c.hasOwnProperty(d)&&(u[d]=c[d]);return u}append(a,l){Array.isArray(l)?l.forEach(c=>a.appendChild(c)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(c=>a.prepend(c)):a.prepend(l)}}},function(t,i){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(FA);var vee=FA.exports;const wee=Uf(vee);let qi=null;function g0(){qi||(qi=new wee)}function _ee(n,e,t){g0(),qi?.show(n,e,t)}function Th(n=!1){g0(),qi?.hide(n)}function Sh(n,e,t){g0(),qi?.onHover(n,e,t)}function yee(){qi?.destroy(),qi=null}class kee extends qe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,i)=>this.show(e,t,i),hide:()=>this.hide(),onHover:(e,t,i)=>this.onHover(e,t,i)}}show(e,t,i){_ee(e,t,i)}hide(){Th()}onHover(e,t,i){Sh(e,t,i)}}class Cee extends qe{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function $A(n,e){const t={};return Object.entries(n).forEach(([i,s])=>{if(mn(s)){const o=e?`${e}.${i}`:i;Object.values(s).every(r=>to(r))?t[i]=o:t[i]=$A(s,o);return}t[i]=s}),t}const hi=$A(SA);function Eee(n,e){const t={};return Object.keys(n).forEach(i=>{const s=e[i];s!==void 0?t[s]=n[i]:t[i]=n[i]}),t}const UA=class Fl{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(Fl.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Fl.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=e===Fl.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),e===Fl.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,D.canSetCaret(this.items[t])&&Ch(()=>Ce.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};UA.directions={RIGHT:"right",LEFT:"left"};let Al=UA,Ih=class qg{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(!(!this.isEventReadyForHandling(t)||t.shiftKey===!0))switch(qg.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case Ae.TAB:this.handleTabPress(t);break;case Ae.LEFT:case Ae.UP:this.flipLeft();break;case Ae.RIGHT:case Ae.DOWN:this.flipRight();break;case Ae.ENTER:this.handleEnterPress(t);break}},this.iterator=new Al(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||qg.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[Ae.TAB,Ae.LEFT,Ae.RIGHT,Ae.ENTER,Ae.UP,Ae.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Al.directions.LEFT:Al.directions.RIGHT){case Al.directions.RIGHT:this.flipRight();break;case Al.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),Pt(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};const xee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',Tee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',See='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',Iee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',Aee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Pee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Oee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Mee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',iC='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Ree='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Bee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',HA='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',Lee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Nee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Vee='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',Dee="__",Fee="--";function Xo(n){return(e,t)=>[[n,e].filter(i=>!!i).join(Dee),t].filter(i=>!!i).join(Fee)}const Pl=Xo("ce-hint"),Ol={root:Pl(),alignedStart:Pl(null,"align-left"),alignedCenter:Pl(null,"align-center"),title:Pl("title"),description:Pl("description")};class $ee{constructor(e){this.nodes={root:D.make("div",[Ol.root,e.alignment==="center"?Ol.alignedCenter:Ol.alignedStart]),title:D.make("div",Ol.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=D.make("div",Ol.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}let b0=class{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){Th()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,t;this.params!==void 0&&"onActivate"in this.params&&((t=(e=this.params).onActivate)==null||t.call(e,this.params))}addHint(e,t){const i=new $ee(t);Sh(e,i.getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}};const oi=Xo("ce-popover-item"),Mt={container:oi(),active:oi(null,"active"),disabled:oi(null,"disabled"),focused:oi(null,"focused"),hidden:oi(null,"hidden"),confirmationState:oi(null,"confirmation"),noHover:oi(null,"no-hover"),noFocus:oi(null,"no-focus"),title:oi("title"),secondaryTitle:oi("secondary-title"),icon:oi("icon"),iconTool:oi("icon","tool"),iconChevronRight:oi("icon","chevron-right"),wobbleAnimation:Xo("wobble")()};let lr=class extends b0{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var i;(i=this.nodes.root)==null||i.classList.remove(Mt.noFocus)},this.removeSpecialHoverBehavior=()=>{var i;(i=this.nodes.root)==null||i.classList.remove(Mt.noHover)},this.onErrorAnimationEnd=()=>{var i,s;(i=this.nodes.icon)==null||i.classList.remove(Mt.wobbleAnimation),(s=this.nodes.icon)==null||s.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(Mt.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;(t=this.nodes.root)==null||t.classList.toggle(Mt.active,e)}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(Mt.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var i,s;const o=t?.wrapperTag||"div",r=D.make(o,Mt.container,{type:o==="button"?"button":void 0});return e.name&&(r.dataset.itemName=e.name),this.nodes.icon=D.make("div",[Mt.icon,Mt.iconTool],{innerHTML:e.icon||Oee}),r.appendChild(this.nodes.icon),e.title!==void 0&&r.appendChild(D.make("div",Mt.title,{innerHTML:e.title||""})),e.secondaryLabel&&r.appendChild(D.make("div",Mt.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&r.appendChild(D.make("div",[Mt.icon,Mt.iconChevronRight],{innerHTML:Iee})),this.isActive&&r.classList.add(Mt.active),e.isDisabled&&r.classList.add(Mt.disabled),e.hint!==void 0&&((i=t?.hint)==null?void 0:i.enabled)!==!1&&this.addHint(r,{...e.hint,position:((s=t?.hint)==null?void 0:s.position)||"right"}),r}enableConfirmationMode(e){if(this.nodes.root===null)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},i=this.make(t);this.nodes.root.innerHTML=i.innerHTML,this.nodes.root.classList.add(Mt.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Mt.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,i;(e=this.nodes.root)==null||e.classList.add(Mt.noHover),(t=this.nodes.root)==null||t.classList.add(Mt.noFocus),(i=this.nodes.root)==null||i.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if(!("confirmation"in e)||e.confirmation===void 0)try{(t=e.onActivate)==null||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,t,i;(e=this.nodes.icon)!=null&&e.classList.contains(Mt.wobbleAnimation)||((t=this.nodes.icon)==null||t.classList.add(Mt.wobbleAnimation),(i=this.nodes.icon)==null||i.addEventListener("animationend",this.onErrorAnimationEnd))}};const hm=Xo("ce-popover-item-separator"),fm={container:hm(),line:hm("line"),hidden:hm(null,"hidden")};class jA extends b0{constructor(){super(),this.nodes={root:D.make("div",fm.container),line:D.make("div",fm.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(fm.hidden,e)}}var ps=(n=>(n.Closed="closed",n.ClosedOnActivate="closed-on-activate",n))(ps||{});const On=Xo("ce-popover"),Ft={popover:On(),popoverContainer:On("container"),popoverOpenTop:On(null,"open-top"),popoverOpenLeft:On(null,"open-left"),popoverOpened:On(null,"opened"),search:On("search"),nothingFoundMessage:On("nothing-found-message"),nothingFoundMessageDisplayed:On("nothing-found-message","displayed"),items:On("items"),overlay:On("overlay"),overlayHidden:On("overlay","hidden"),popoverNested:On(null,"nested"),getPopoverNestedClass:n=>On(null,`nested-level-${n.toString()}`),popoverInline:On(null,"inline"),popoverHeader:On("header")};var Sa=(n=>(n.NestingLevel="--nesting-level",n.PopoverHeight="--popover-height",n.InlinePopoverWidth="--inline-popover-width",n.TriggerItemLeft="--trigger-item-left",n.TriggerItemTop="--trigger-item-top",n))(Sa||{});const sC=Xo("ce-popover-item-html"),oC={root:sC(),hidden:sC(null,"hidden")};let Wc=class extends b0{constructor(e,t){var i,s;super(e),this.nodes={root:D.make("div",oC.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((i=t?.hint)==null?void 0:i.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((s=t?.hint)==null?void 0:s.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(oC.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${D.allInputsSelector}`);return Array.from(e)}};class zA extends Cu{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new Eu,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=D.make("div",[Ft.popoverContainer]),this.nodes.nothingFoundMessage=D.make("div",[Ft.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=D.make("div",[Ft.items]),this.items.forEach(i=>{const s=i.getElement();s!==null&&this.nodes.items.appendChild(s)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",i=>this.handleClick(i)),this.nodes.popover=D.make("div",[Ft.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof lr)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(Ft.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(Ft.popoverOpened),this.nodes.popover.classList.remove(Ft.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit(ps.Closed)}destroy(){var e;this.items.forEach(t=>t.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const t=this.items.find(i=>i.name===e);this.handleItemClick(t)}buildItems(e){return e.map(t=>{switch(t.type){case It.Separator:return new jA;case It.Html:return new Wc(t,this.itemsRenderParams[It.Html]);default:return new lr(t,this.itemsRenderParams[It.Default])}})}getTargetItem(e){return this.items.filter(t=>t instanceof lr||t instanceof Wc).find(t=>{const i=t.getElement();return i===null?!1:e.composedPath().includes(i)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(t=>t!==e).forEach(t=>t.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(ps.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);t!==void 0&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof lr&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const t=this.itemsDefault.filter(i=>i.toggle===e.toggle);if(t.length===1){e.toggleActive();return}t.forEach(i=>{i.toggleActive(i===e)})}}}var Ah=(n=>(n.Search="search",n))(Ah||{});const pm=Xo("cdx-search-field"),mm={wrapper:pm(),icon:pm("icon"),input:pm("input")};class Uee extends Cu{constructor({items:e,placeholder:t}){super(),this.listeners=new Eu,this.items=e,this.wrapper=D.make("div",mm.wrapper);const i=D.make("div",mm.icon,{innerHTML:Lee});this.input=D.make("input",mm.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(i),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(Ah.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(Ah.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t,i;const s=((t=e.title)==null?void 0:t.toLowerCase())||"",o=(i=this.searchQuery)==null?void 0:i.toLowerCase();return o!==void 0?s.includes(o):!1}}var Hee=Object.defineProperty,jee=Object.getOwnPropertyDescriptor,zee=(n,e,t,i)=>{for(var s=jee(e,t),o=n.length-1,r;o>=0;o--)(r=n[o])&&(s=r(e,t,s)||s);return s&&Hee(e,t,s),s};const WA=class qA extends zA{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var i;super.hide(),this.destroyNestedPopoverIfExists(),(i=this.flipper)==null||i.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const i=this.itemsDefault.find(s=>s.isFocused);i?.onFocus()},this.onSearch=i=>{var s;const o=i.query==="",r=i.items.length===0;this.items.forEach(l=>{let c=!1;l instanceof lr?c=!i.items.includes(l):(l instanceof jA||l instanceof Wc)&&(c=r||!o),l.toggleHidden(c)}),this.toggleNothingFoundMessage(r);const a=i.query===""?this.flippableElements:i.items.map(l=>l.getElement());(s=this.flipper)!=null&&s.isActivated&&(this.flipper.deactivate(),this.flipper.activate(a))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(Ft.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",i=>this.handleHover(i)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new Ih({items:this.flippableElements,focusedItemClass:Mt.focused,allowedKeys:[Ae.TAB,Ae.UP,Ae.DOWN,Ae.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(Sa.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(Ft.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(Ft.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);t!==void 0&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const i=t.getElement(),s=(i?i.offsetTop:0)-this.scrollTop,o=this.offsetTop+s;e.style.setProperty(Sa.TriggerItemTop,o+"px")}destroyNestedPopoverIfExists(){var e,t;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off(ps.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(t=this.nestedPopoverTriggerItem)==null||t.onChildrenClose())}showNestedPopoverForItem(e){var t;this.nestedPopover=new qA({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(ps.ClosedOnActivate,this.hide);const i=this.nestedPopover.getElement();return this.nodes.popover.appendChild(i),this.setTriggerItemPosition(i,e),i.style.setProperty(Sa.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(t=this.flipper)==null||t.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),i=this.size.height,s=e.top+i,o=e.top-i,r=Math.min(window.innerHeight,t.bottom);return o<t.top||s<=r}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),i=this.size.width,s=e.right+i,o=e.left-i,r=Math.min(window.innerWidth,t.right);return o<t.left||s<=r}get size(){var e;const t={height:0,width:0};if(this.nodes.popover===null)return t;const i=this.nodes.popover.cloneNode(!0);i.style.visibility="hidden",i.style.position="absolute",i.style.top="-1000px",i.classList.add(Ft.popoverOpened),(e=i.querySelector("."+Ft.popoverNested))==null||e.remove(),document.body.appendChild(i);const s=i.querySelector("."+Ft.popoverContainer);return t.height=s.offsetHeight,t.width=s.offsetWidth,i.remove(),t}get flippableElements(){return this.items.map(e=>{if(e instanceof lr)return e.getElement();if(e instanceof Wc)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new Uee({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(Ah.Search,this.onSearch);const e=this.search.getElement();e.classList.add(Ft.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(Ft.nothingFoundMessageDisplayed,e)}};zee([hl],WA.prototype,"size");let v0=WA;class Wee extends v0{constructor(e){const t=!fl();super({...e,class:Ft.popoverInline},{[It.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:t}},[It.Html]:{hint:{position:"top",alignment:"center",enabled:t}}}),this.items.forEach(i=>{!(i instanceof lr)&&!(i instanceof Wc)||i.hasChildren&&i.isChildrenOpen&&this.showNestedItems(i)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(Sa.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,t){const i=t.getElement(),s=i?i.offsetLeft:0,o=this.offsetLeft+s;e.style.setProperty(Sa.TriggerItemLeft,o+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const t=super.showNestedPopoverForItem(e);return t.getElement().classList.add(Ft.getPopoverNestedClass(t.nestingLevel)),t}handleItemClick(e){var t;e!==this.nestedPopoverTriggerItem&&((t=this.nestedPopoverTriggerItem)==null||t.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const GA=class $l{constructor(){this.scrollPosition=null}lock(){jg?this.lockHard():document.body.classList.add($l.CSS.scrollLocked)}unlock(){jg?this.unlockHard():document.body.classList.remove($l.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add($l.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove($l.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};GA.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let qee=GA;const gm=Xo("ce-popover-header"),bm={root:gm(),text:gm("text"),backButton:gm("back-button")};class Gee{constructor({text:e,onBackButtonClick:t}){this.listeners=new Eu,this.text=e,this.onBackButtonClick=t,this.nodes={root:D.make("div",[bm.root]),backButton:D.make("button",[bm.backButton]),text:D.make("div",[bm.text])},this.nodes.backButton.innerHTML=See,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class Kee{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}let KA=class extends zA{constructor(e){super(e,{[It.Default]:{hint:{enabled:!1}},[It.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new qee,this.history=new Kee,this.isHidden=!0,this.nodes.overlay=D.make("div",[Ft.overlay,Ft.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(Ft.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(Ft.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),t!==void 0){this.header=new Gee({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const i=this.header.getElement();i!==null&&this.nodes.popoverContainer.insertBefore(i,this.nodes.popoverContainer.firstChild)}this.items.forEach(i=>{var s;return(s=i.getElement())==null?void 0:s.remove()}),this.items=this.buildItems(e),this.items.forEach(i=>{var s;const o=i.getElement();o!==null&&((s=this.nodes.items)==null||s.appendChild(o))})}};class Xee extends qe{constructor(){super(...arguments),this.opened=!1,this.selection=new Ce,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,Ce.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(ps.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=D.make("div",[this.CSS.settings]),this.eventsDispatcher.on(zc,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(zc,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var t;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:i,commonTunes:s}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const o=fl()?KA:v0;this.popover=new o({searchable:!0,items:await this.getTunesItems(e,s,i),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Fn.ui(hi.ui.popover,"Nothing found"),search:Fn.ui(hi.ui.popover,"Filter")}}),this.popover.on(ps.Closed,this.onPopoverClose),(t=this.nodes.wrapper)==null||t.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,t,i){const s=[];i!==void 0&&i.length>0&&(s.push(...i),s.push({type:It.Separator}));const o=Array.from(this.Editor.Tools.blockTools.values()),r=(await LA(e,o)).reduce((a,l)=>(l.toolbox.forEach(c=>{a.push({icon:c.icon,title:Fn.t(hi.toolNames,c.title),name:l.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:u,Caret:d,Toolbar:h}=this.Editor,f=await u.convert(e,l.name,c.data);h.close(),d.setToBlock(f,d.positions.END)}})}),a),[]);return r.length>0&&(s.push({icon:HA,name:"convert-to",title:Fn.ui(hi.ui.popover,"Convert to"),children:{searchable:!0,items:r}}),s.push({type:It.Separator})),s.push(...t),s.map(a=>this.resolveTuneAliases(a))}resolveTuneAliases(e){if(e.type===It.Separator||e.type===It.Html)return e;const t=Eee(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}var XA={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(n,e){(function(t,i){n.exports=i()})(window,function(){return(function(t){var i={};function s(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=i,s.d=function(o,r,a){s.o(o,r)||Object.defineProperty(o,r,{enumerable:!0,get:a})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,r){if(1&r&&(o=s(o)),8&r||4&r&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&r&&typeof o!="string")for(var l in o)s.d(a,l,(function(c){return o[c]}).bind(null,l));return a},s.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(r,"a",r),r},s.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},s.p="",s(s.s=0)})([function(t,i,s){function o(l,c){for(var u=0;u<c.length;u++){var d=c[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function r(l,c,u){return c&&o(l.prototype,c),u&&o(l,u),l}s.r(i);var a=(function(){function l(c){var u=this;(function(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(d){u.execute(d)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return r(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(l,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var u=0;u<c.length;u++){c[u]=c[u].toUpperCase();var d=!1;for(var h in l.supportedCommands)if(l.supportedCommands[h].includes(c[u])){d=this.commands[h]=!0;break}d||(this.keys[c[u]]=!0)}for(var f in l.supportedCommands)this.commands[f]||(this.commands[f]=!1)}},{key:"execute",value:function(c){var u,d={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},h=!0;for(u in this.commands)this.commands[u]!==d[u]&&(h=!1);var f,p=!0;for(f in this.keys)p=p&&c.keyCode===l.keyCodes[f];h&&p&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l})();i.default=a}]).default})})(XA);var Zee=XA.exports;const Jee=Uf(Zee);class Yee{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Jee({name:e.name,on:e.on,callback:e.handler}),i=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...i,t])}remove(e,t){const i=this.findShortcut(e,t);if(!i)return;i.remove();const s=this.registeredShortcuts.get(e).filter(o=>o!==i);if(s.length===0){this.registeredShortcuts.delete(e);return}this.registeredShortcuts.set(e,s)}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:i})=>i===t)}}const qa=new Yee;var Qee=Object.defineProperty,ete=Object.getOwnPropertyDescriptor,ZA=(n,e,t,i)=>{for(var s=ete(e,t),o=n.length-1,r;o>=0;o--)(r=n[o])&&(s=r(e,t,s)||s);return s&&Qee(e,t,s),s},Sd=(n=>(n.Opened="toolbox-opened",n.Closed="toolbox-closed",n.BlockAdded="toolbox-block-added",n))(Sd||{});const w0=class JA extends Cu{constructor({api:e,tools:t,i18nLabels:i}){super(),this.opened=!1,this.listeners=new Eu,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=t,this.i18nLabels=i,this.enableShortcuts(),this.nodes={toolbox:D.make("div",JA.CSS.toolbox)},this.initPopover(),this.api.events.on(zc,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off(ps.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(zc,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=fl()?KA:v0;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(ps.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off(ps.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(t=>{t.toolbox&&e.push(t)}),e}get toolboxItemsToBeDisplayed(){const e=(t,i,s=!0)=>({icon:t.icon,title:Fn.t(hi.toolNames,t.title||Eh(i.name)),name:i.name,onActivate:()=>{this.toolButtonActivated(i.name,t.data)},secondaryLabel:i.shortcut&&s?f0(i.shortcut):""});return this.toolsToBeDisplayed.reduce((t,i)=>(Array.isArray(i.toolbox)?i.toolbox.forEach((s,o)=>{t.push(e(s,i,o===0))}):i.toolbox!==void 0&&t.push(e(i.toolbox,i)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)})}enableShortcutForTool(e,t){qa.add({name:t,on:this.api.ui.nodes.redactor,handler:async i=>{i.preventDefault();const s=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(s);if(o)try{const r=await this.api.blocks.convert(o.id,e);this.api.caret.setToBlock(r,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&qa.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(e,t){const i=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(i);if(!s)return;const o=s.isEmpty?i:i+1;let r;if(t){const l=await this.api.blocks.composeBlockData(e);r=Object.assign(l,t)}const a=this.api.blocks.insert(e,r,void 0,o,void 0,s.isEmpty);a.call(Bs.APPEND_CALLBACK),this.api.caret.setToBlock(o),this.emit("toolbox-block-added",{block:a}),this.api.toolbar.close()}};ZA([hl],w0.prototype,"toolsToBeDisplayed");ZA([hl],w0.prototype,"toolboxItemsToBeDisplayed");let tte=w0;const YA="block hovered";async function nte(n,e){const t=navigator.keyboard;if(!t)return e;try{return(await t.getLayoutMap()).get(n)||e}catch(i){return console.error(i),e}}class ite extends qe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){et("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){et("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){et("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:i}=this.Editor.UI;let s;const o=20,r=e.firstInput,a=t.getBoundingClientRect(),l=r!==void 0?r.getBoundingClientRect():null,c=l!==null?l.top-a.top:null,u=c!==null?c>o:void 0;if(i)s=t.offsetTop+t.offsetHeight;else if(r===void 0||u){const d=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);s=t.offsetTop+d}else{const d=$Q(r),h=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);s=t.offsetTop+d-h+8+c}this.nodes.wrapper.style.top=`${Math.floor(s)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(t=this.toolboxInstance)==null||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=D.make("div",this.CSS.toolbar),["content","actions"].forEach(o=>{this.nodes[o]=D.make("div",this.CSS[o])}),D.append(this.nodes.wrapper,this.nodes.content),D.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=D.make("div",this.CSS.plusButton,{innerHTML:Bee}),D.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Th(!0),this.plusButtonClicked()},!1);const e=D.make("div");e.appendChild(document.createTextNode(Fn.ui(hi.ui.toolbar.toolbox,"Add"))),e.appendChild(D.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),Sh(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=D.make("span",this.CSS.settingsToggler,{innerHTML:Ree}),D.append(this.nodes.actions,this.nodes.settingsToggler);const t=D.make("div"),i=D.text(Fn.ui(hi.ui.blockTunes.toggler,"Click to tune")),s=await nte("Slash","/");t.appendChild(i),t.appendChild(D.make("div",this.CSS.plusButtonShortcut,{textContent:f0(`CMD + ${s}`)})),Sh(this.nodes.settingsToggler,t,{hidingDelay:400}),D.append(this.nodes.actions,this.makeToolbox()),D.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),D.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new tte({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Fn.ui(hi.ui.popover,"Filter"),nothingFound:Fn.ui(hi.ui.popover,"Nothing found")}}),this.toolboxInstance.on(Sd.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Sd.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Sd.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:i}=this.Editor,s=t.getBlockById(e.id);s.inputs.length===0&&(s===t.lastBlock?(t.insertAtEnd(),i.setToBlock(t.lastBlock)):i.setToBlock(t.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),Th(!0)},!0),fl()||this.eventsDispatcher.on(YA,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var _r=(n=>(n[n.Block=0]="Block",n[n.Inline=1]="Inline",n[n.Tune=2]="Tune",n))(_r||{}),Id=(n=>(n.Shortcut="shortcut",n.Toolbox="toolbox",n.EnabledInlineTools="inlineToolbar",n.EnabledBlockTunes="tunes",n.Config="config",n))(Id||{}),QA=(n=>(n.Shortcut="shortcut",n.SanitizeConfig="sanitize",n))(QA||{}),fa=(n=>(n.IsEnabledLineBreaks="enableLineBreaks",n.Toolbox="toolbox",n.ConversionConfig="conversionConfig",n.IsReadOnlySupported="isReadOnlySupported",n.PasteConfig="pasteConfig",n))(fa||{}),Ph=(n=>(n.IsInline="isInline",n.Title="title",n.IsReadOnlySupported="isReadOnlySupported",n))(Ph||{}),Gg=(n=>(n.IsTune="isTune",n))(Gg||{});let _0=class{constructor({name:e,constructable:t,config:i,api:s,isDefault:o,isInternal:r=!1,defaultPlaceholder:a}){this.api=s,this.name=e,this.constructable=t,this.config=i,this.isDefault=o,this.isInternal=r,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(Pt(this.constructable.reset))return this.constructable.reset()}prepare(){if(Pt(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===_r.Inline}isBlock(){return this.type===_r.Block}isTune(){return this.type===_r.Tune}};class ste extends qe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=fl()?20:6,this.tools=new Map,window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,t;if(this.opened){for(const[i,s]of this.tools){const o=this.getToolShortcut(i.name);o!==void 0&&qa.remove(this.Editor.UI.nodes.redactor,o),Pt(s.clear)&&s.clear()}this.tools=new Map,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(t=this.popover)==null||t.destroy(),this.popover=null}}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=D.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),D.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy(),this.createToolsInstances();const t=await this.getPopoverItems();this.popover=new Wee({items:t,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Fn.ui(hi.ui.popover,"Nothing found"),search:Fn.ui(hi.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const t=Ce.rect,i=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),s={x:t.x-i.x,y:t.y+t.height-i.top+this.toolbarVerticalMargin};s.x+e+i.x>this.Editor.UI.contentRect.right&&(s.x=this.Editor.UI.contentRect.right-e-i.x),this.nodes.wrapper.style.left=Math.floor(s.x)+"px",this.nodes.wrapper.style.top=Math.floor(s.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],t=Ce.get(),i=Ce.text;if(!t||!t.anchorNode||t.isCollapsed||i.length<1)return!1;const s=D.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(s===null||t!==null&&e.includes(s.tagName))return!1;const o=this.Editor.BlockManager.getBlock(t.anchorNode);return!o||this.getTools().some(r=>o.tool.inlineTools.has(r.name))===!1?!1:s.closest("[contenteditable]")!==null}getTools(){const e=this.Editor.BlockManager.currentBlock;return e?Array.from(e.tool.inlineTools.values()).filter(t=>!(this.Editor.ReadOnly.isEnabled&&t.isReadOnlySupported!==!0)):[]}createToolsInstances(){this.tools=new Map,this.getTools().forEach(e=>{const t=e.create();this.tools.set(e,t)})}async getPopoverItems(){const e=[];let t=0;for(const[i,s]of this.tools){const o=await s.render(),r=this.getToolShortcut(i.name);if(r!==void 0)try{this.enableShortcuts(i.name,r)}catch{}const a=r!==void 0?f0(r):void 0,l=Fn.t(hi.toolNames,i.title||Eh(i.name));[o].flat().forEach(c=>{var u,d;const h={name:i.name,onActivate:()=>{this.toolClicked(s)},hint:{title:l,description:a}};if(D.isElement(c)){const f={...h,element:c,type:It.Html};if(Pt(s.renderActions)){const p=s.renderActions();f.children={isOpen:(u=s.checkState)==null?void 0:u.call(s,Ce.get()),isFlippable:!1,items:[{type:It.Html,element:p}]}}else(d=s.checkState)==null||d.call(s,Ce.get());e.push(f)}else if(c.type===It.Html)e.push({...h,...c,type:It.Html});else if(c.type===It.Separator)e.push({type:It.Separator});else{const f={...h,...c,type:It.Default};"children"in f&&t!==0&&e.push({type:It.Separator}),e.push(f),"children"in f&&t<this.tools.size-1&&e.push({type:It.Separator})}}),t++}return e}getToolShortcut(e){const{Tools:t}=this.Editor,i=t.inlineTools.get(e),s=t.internal.inlineTools;return Array.from(s.keys()).includes(e)?this.inlineTools[e][QA.Shortcut]:i?.shortcut}enableShortcuts(e,t){qa.add({name:t,handler:i=>{var s;const{currentBlock:o}=this.Editor.BlockManager;o&&o.tool.enabledInlineTools&&(i.preventDefault(),(s=this.popover)==null||s.activateItemByName(e))},on:document})}toolClicked(e){var t;const i=Ce.range;(t=e.surround)==null||t.call(e,i),this.checkToolsState()}checkToolsState(){var e;(e=this.tools)==null||e.forEach(t=>{var i;(i=t.checkState)==null||i.call(t,Ce.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,i])=>{e[t]=i.create()}),e}}function e3(){const n=window.getSelection();if(n===null)return[null,0];let e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],t=e.textContent.length)),[e,t])}function t3(n,e,t,i){const s=document.createRange();i==="left"?(s.setStart(n,0),s.setEnd(e,t)):(s.setStart(e,t),s.setEnd(n,n.childNodes.length));const o=s.cloneContents(),r=document.createElement("div");r.appendChild(o);const a=r.textContent||"";return FQ(a)}function Ad(n){const e=D.getDeepestNode(n);if(e===null||D.isEmpty(n))return!0;if(D.isNativeInput(e))return e.selectionEnd===0;if(D.isEmpty(n))return!0;const[t,i]=e3();return t===null?!1:t3(n,t,i,"left")}function Pd(n){const e=D.getDeepestNode(n,!0);if(e===null)return!0;if(D.isNativeInput(e))return e.selectionEnd===e.value.length;const[t,i]=e3();return t===null?!1:t3(n,t,i,"right")}var n3={},y0={},Hf={},Ur={},k0={},C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.allInputsSelector=ote;function ote(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=C0;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(k0);var Hr={},E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.isNativeInput=rte;function rte(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=E0;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(Hr);var i3={},x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.append=ate;function ate(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=x0;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(i3);var T0={},S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.blockElements=lte;function lte(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=S0;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(T0);var s3={},I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.calculateBaseline=cte;function cte(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),i=parseFloat(e.lineHeight)||t*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),r=parseFloat(e.marginTop),a=t*.8,l=(i-t)/2,c=r+o+s+l+a;return c}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=I0;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(s3);var o3={},A0={},P0={},O0={};Object.defineProperty(O0,"__esModule",{value:!0});O0.isContentEditable=ute;function ute(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=O0;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(P0);Object.defineProperty(A0,"__esModule",{value:!0});A0.canSetCaret=fte;var dte=Hr,hte=P0;function fte(n){var e=!0;if((0,dte.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,hte.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=A0;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(o3);var jf={},M0={};function pte(n,e,t){const i=t.value!==void 0?"value":"get",s=t[i],o=`#${e}Cache`;if(t[i]=function(...r){return this[o]===void 0&&(this[o]=s.apply(this,r)),this[o]},i==="get"&&t.set){const r=t.set;t.set=function(a){delete n[o],r.apply(this,a)}}return t}function r3(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function R0(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function mte(n){return!R0(n)}const gte=()=>typeof window<"u"&&window.navigator!==null&&R0(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function bte(n){const e=r3();return n=n.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function vte(n){return n[0].toUpperCase()+n.slice(1)}function wte(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),i=document.createRange();if(i.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(i),document.execCommand("copy"),document.body.removeChild(e)}function _te(n,e,t){let i;return(...s)=>{const o=this,r=()=>{i=void 0,t!==!0&&n.apply(o,s)},a=t===!0&&i!==void 0;window.clearTimeout(i),i=window.setTimeout(r,e),a&&n.apply(o,s)}}function Uo(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function yte(n){return Uo(n)==="boolean"}function a3(n){return Uo(n)==="function"||Uo(n)==="asyncfunction"}function kte(n){return a3(n)&&/^\s*class\s+/.test(n.toString())}function Cte(n){return Uo(n)==="number"}function Od(n){return Uo(n)==="object"}function Ete(n){return Promise.resolve(n)===n}function xte(n){return Uo(n)==="string"}function Tte(n){return Uo(n)==="undefined"}function Kg(n,...e){if(!e.length)return n;const t=e.shift();if(Od(n)&&Od(t))for(const i in t)Od(t[i])?(n[i]===void 0&&Object.assign(n,{[i]:{}}),Kg(n[i],t[i])):Object.assign(n,{[i]:t[i]});return Kg(n,...e)}function Ste(n,e,t){const i=`${e} is deprecated and will be removed in the next major release. Please use the ${t} instead.`;n&&console.warn(i)}function Ite(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function Ate(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const Pte={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},Ote={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let Mte=class{constructor(){this.completed=Promise.resolve()}add(n){return new Promise((e,t)=>{this.completed=this.completed.then(n).then(e).catch(t)})}};function Rte(n,e,t=void 0){let i,s,o,r=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),r=null,o=n.apply(i,s),r===null&&(i=s=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return i=this,s=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=c,o=n.apply(i,s),r===null&&(i=s=null)):!r&&t.trailing!==!1&&(r=setTimeout(l,u)),o}}const Bte=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:Mte,beautifyShortcut:bte,cacheable:pte,capitalize:vte,copyTextToClipboard:wte,debounce:_te,deepMerge:Kg,deprecationAssert:Ste,getUserOS:r3,getValidUrl:Ite,isBoolean:yte,isClass:kte,isEmpty:mte,isFunction:a3,isIosDevice:gte,isNumber:Cte,isObject:Od,isPrintableKey:Ate,isPromise:Ete,isString:xte,isUndefined:Tte,keyCodes:Pte,mouseButtons:Ote,notEmpty:R0,throttle:Rte,typeOf:Uo},Symbol.toStringTag,{value:"Module"})),B0=xQ(Bte);Object.defineProperty(M0,"__esModule",{value:!0});M0.containsOnlyInlineElements=Vte;var Lte=B0,Nte=T0;function Vte(n){var e;(0,Lte.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(i){return!(0,Nte.blockElements)().includes(i.tagName.toLowerCase())&&Array.from(i.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=M0;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(jf);var l3={},L0={},zf={},N0={};Object.defineProperty(N0,"__esModule",{value:!0});N0.make=Dte;function Dte(n,e,t){var i;e===void 0&&(e=null),t===void 0&&(t={});var s=document.createElement(n);if(Array.isArray(e)){var o=e.filter(function(a){return a!==void 0});(i=s.classList).add.apply(i,o)}else e!==null&&s.classList.add(e);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]);return s}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=N0;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})(zf);Object.defineProperty(L0,"__esModule",{value:!0});L0.fragmentToString=$te;var Fte=zf;function $te(n){var e=(0,Fte.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=L0;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(l3);var c3={},V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.getContentLength=Hte;var Ute=Hr;function Hte(n){var e,t;return(0,Ute.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=V0;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(c3);var D0={},F0={},rC=jc&&jc.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(F0,"__esModule",{value:!0});F0.getDeepestBlockElements=u3;var jte=jf;function u3(n){return(0,jte.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return rC(rC([],e,!0),u3(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=F0;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(D0);var d3={},$0={},Wf={},U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.isLineBreakTag=zte;function zte(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=U0;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Wf);var qf={},H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.isSingleTag=Wte;function Wte(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=H0;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(qf);Object.defineProperty($0,"__esModule",{value:!0});$0.getDeepestNode=h3;var qte=Hr,Gte=Wf,Kte=qf;function h3(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",i=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var s=n[t];if((0,Kte.isSingleTag)(s)&&!(0,qte.isNativeInput)(s)&&!(0,Gte.isLineBreakTag)(s))if(s[i])s=s[i];else if(s.parentNode!==null&&s.parentNode[i])s=s.parentNode[i];else return s.parentNode;return h3(s,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=$0;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(d3);var f3={},j0={},id=jc&&jc.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(j0,"__esModule",{value:!0});j0.findAllInputs=Qte;var Xte=jf,Zte=D0,Jte=k0,Yte=Hr;function Qte(n){return Array.from(n.querySelectorAll((0,Jte.allInputsSelector)())).reduce(function(e,t){return(0,Yte.isNativeInput)(t)||(0,Xte.containsOnlyInlineElements)(t)?id(id([],e,!0),[t],!1):id(id([],e,!0),(0,Zte.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=j0;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(f3);var p3={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.isCollapsedWhitespaces=ene;function ene(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=z0;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(p3);var W0={},q0={};Object.defineProperty(q0,"__esModule",{value:!0});q0.isElement=nne;var tne=B0;function nne(n){return(0,tne.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=q0;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(W0);var m3={},G0={},K0={},X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.isLeaf=ine;function ine(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=X0;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(K0);var Z0={},J0={};Object.defineProperty(J0,"__esModule",{value:!0});J0.isNodeEmpty=lne;var sne=Wf,one=W0,rne=Hr,ane=qf;function lne(n,e){var t="";return(0,ane.isSingleTag)(n)&&!(0,sne.isLineBreakTag)(n)?!1:((0,one.isElement)(n)&&(0,rne.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=J0;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(Z0);Object.defineProperty(G0,"__esModule",{value:!0});G0.isEmpty=dne;var cne=K0,une=Z0;function dne(n,e){n.normalize();for(var t=[n];t.length>0;){var i=t.shift();if(i){if(n=i,(0,cne.isLeaf)(n)&&!(0,une.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=G0;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(m3);var g3={},Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.isFragment=fne;var hne=B0;function fne(n){return(0,hne.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=Y0;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(g3);var b3={},Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.isHTMLString=mne;var pne=zf;function mne(n){var e=(0,pne.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=Q0;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(b3);var v3={},ev={};Object.defineProperty(ev,"__esModule",{value:!0});ev.offset=gne;function gne(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,s=e.top+i,o=e.left+t;return{top:s,left:o,bottom:s+e.height,right:o+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=ev;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(v3);var w3={},tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.prepend=bne;function bne(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=tv;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(w3);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=k0;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=Hr;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var i=i3;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return i.append}});var s=T0;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return s.blockElements}});var o=s3;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var r=o3;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return r.canSetCaret}});var a=jf;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=l3;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=c3;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var u=D0;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return u.getDeepestBlockElements}});var d=d3;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return d.getDeepestNode}});var h=f3;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return h.findAllInputs}});var f=p3;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return f.isCollapsedWhitespaces}});var p=P0;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return p.isContentEditable}});var g=W0;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return g.isElement}});var y=m3;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return y.isEmpty}});var k=g3;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return k.isFragment}});var v=b3;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return v.isHTMLString}});var b=K0;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return b.isLeaf}});var w=Z0;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return w.isNodeEmpty}});var C=Wf;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return C.isLineBreakTag}});var E=qf;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return E.isSingleTag}});var I=zf;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return I.make}});var x=v3;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return x.offset}});var _=w3;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return _.prepend}})})(Ur);var Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});Gf.getContenteditableSlice=wne;var vne=Ur;function wne(n,e,t,i,s){var o;s===void 0&&(s=!1);var r=document.createRange();if(i==="left"?(r.setStart(n,0),r.setEnd(e,t)):(r.setStart(e,t),r.setEnd(n,n.childNodes.length)),s===!0){var a=r.extractContents();return(0,vne.fragmentToString)(a)}var l=r.cloneContents(),c=document.createElement("div");c.appendChild(l);var u=(o=c.textContent)!==null&&o!==void 0?o:"";return u}Object.defineProperty(Hf,"__esModule",{value:!0});Hf.checkContenteditableSliceForEmptiness=kne;var _ne=Ur,yne=Gf;function kne(n,e,t,i){var s=(0,yne.getContenteditableSlice)(n,e,t,i);return(0,_ne.isCollapsedWhitespaces)(s)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkContenteditableSliceForEmptiness=void 0;var e=Hf;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(y0);var _3={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContenteditableSlice=void 0;var e=Gf;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(_3);var y3={},nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.focus=Ene;var Cne=Ur;function Ene(n,e){var t,i;if(e===void 0&&(e=!0),(0,Cne.isNativeInput)(n)){n.focus();var s=e?0:n.value.length;n.setSelectionRange(s,s)}else{var o=document.createRange(),r=window.getSelection();if(!r)return;var a=function(h){var f=document.createTextNode("");h.appendChild(f),o.setStart(f,0),o.setEnd(f,0)},l=function(h){return h!=null},c=n.childNodes,u=e?c[0]:c[c.length-1];if(l(u)){for(;l(u)&&u.nodeType!==Node.TEXT_NODE;)u=e?u.firstChild:u.lastChild;if(l(u)&&u.nodeType===Node.TEXT_NODE){var d=(i=(t=u.textContent)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0,s=e?0:d;o.setStart(u,s),o.setEnd(u,s)}else a(n)}else a(n);r.removeAllRanges(),r.addRange(o)}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;var e=nv;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return e.focus}})})(y3);var iv={},Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.getCaretNodeAndOffset=xne;function xne(){var n=window.getSelection();if(n===null)return[null,0];var e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaretNodeAndOffset=void 0;var e=Kf;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(iv);var k3={},Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.getRange=Tne;function Tne(){var n=window.getSelection();return n&&n.rangeCount?n.getRangeAt(0):null}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRange=void 0;var e=Xf;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(k3);var C3={},sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.isCaretAtEndOfInput=Ane;var aC=Ur,Sne=iv,Ine=y0;function Ane(n){var e=(0,aC.getDeepestNode)(n,!0);if(e===null)return!0;if((0,aC.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,Sne.getCaretNodeAndOffset)(),i=t[0],s=t[1];return i===null?!1:(0,Ine.checkContenteditableSliceForEmptiness)(n,i,s,"right")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtEndOfInput=void 0;var e=sv;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(C3);var E3={},ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.isCaretAtStartOfInput=Mne;var sd=Ur,Pne=Kf,One=Hf;function Mne(n){var e=(0,sd.getDeepestNode)(n);if(e===null||(0,sd.isEmpty)(n))return!0;if((0,sd.isNativeInput)(e))return e.selectionEnd===0;if((0,sd.isEmpty)(n))return!0;var t=(0,Pne.getCaretNodeAndOffset)(),i=t[0],s=t[1];return i===null?!1:(0,One.checkContenteditableSliceForEmptiness)(n,i,s,"left")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtStartOfInput=void 0;var e=ov;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(E3);var x3={},rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.save=Lne;var Rne=Ur,Bne=Xf;function Lne(){var n=(0,Bne.getRange)(),e=(0,Rne.make)("span");if(e.id="cursor",e.hidden=!0,!!n)return n.insertNode(e),function(){var t=window.getSelection();t&&(n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),setTimeout(function(){e.remove()},150))}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=void 0;var e=rv;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return e.save}})})(x3);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=n.isCaretAtStartOfInput=n.isCaretAtEndOfInput=n.getRange=n.getCaretNodeAndOffset=n.focus=n.getContenteditableSlice=n.checkContenteditableSliceForEmptiness=void 0;var e=y0;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=_3;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var i=y3;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return i.focus}});var s=iv;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return s.getCaretNodeAndOffset}});var o=k3;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return o.getRange}});var r=C3;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return r.isCaretAtEndOfInput}});var a=E3;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=x3;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return l.save}})})(n3);class Nne extends qe{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case Ae.BACKSPACE:this.backspace(e);break;case Ae.DELETE:this.delete(e);break;case Ae.ENTER:this.enter(e);break;case Ae.DOWN:case Ae.RIGHT:this.arrowRightAndDown(e);break;case Ae.UP:case Ae.LEFT:this.arrowLeftAndUp(e);break;case Ae.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&CA(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:i,Caret:s}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const o=i.removeSelectedBlocks(),r=i.insertDefaultBlockAtIndex(o,!0);s.setToBlock(r,s.positions.START),t.clearSelection(e)})}tabPressed(e){const{InlineToolbar:t,Caret:i}=this.Editor;t.opened||(e.shiftKey?i.navigatePrevious(!0):i.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){!this.Editor.UI.nodes.wrapper.contains(e.target)||!this.Editor.BlockManager.currentBlock.isEmpty||(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:t,UI:i}=this.Editor,s=t.currentBlock;if(s===void 0||s.tool.isLineBreaksEnabled||i.someToolbarOpened&&i.someFlipperButtonFocused||e.shiftKey&&!jg)return;let o=s;s.currentInput!==void 0&&Ad(s.currentInput)&&!s.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):s.currentInput&&Pd(s.currentInput)?o=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):o=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:i}=this.Editor,{currentBlock:s,previousBlock:o}=t;if(!(s===void 0||!Ce.isCollapsed||!s.currentInput||!Ad(s.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.firstInput){i.navigatePrevious();return}if(o!==null){if(o.isEmpty){t.removeBlock(o);return}if(s.isEmpty){t.removeBlock(s);const r=t.currentBlock;i.setToBlock(r,i.positions.END);return}tC(o,s)?this.mergeBlocks(o,s):i.setToBlock(o,i.positions.END)}}}delete(e){const{BlockManager:t,Caret:i}=this.Editor,{currentBlock:s,nextBlock:o}=t;if(!(!Ce.isCollapsed||!Pd(s.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.lastInput){i.navigateNext();return}if(o!==null){if(o.isEmpty){t.removeBlock(o);return}if(s.isEmpty){t.removeBlock(s),i.setToBlock(o,i.positions.START);return}tC(s,o)?this.mergeBlocks(s,o):i.setToBlock(o,i.positions.START)}}}mergeBlocks(e,t){const{BlockManager:i,Toolbar:s}=this.Editor;e.lastInput!==void 0&&(n3.focus(e.lastInput,!1),i.mergeBlocks(e,t).then(()=>{s.close()}))}arrowRightAndDown(e){const t=Ih.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Ae.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const{currentBlock:i}=this.Editor.BlockManager,s=(i?.currentInput!==void 0?Pd(i.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Ae.DOWN&&s){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===Ae.DOWN||e.keyCode===Ae.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}Ch(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Ih.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===Ae.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:t}=this.Editor.BlockManager,i=(t?.currentInput!==void 0?Ad(t.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===Ae.UP&&i){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===Ae.UP||e.keyCode===Ae.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}Ch(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===Ae.ENTER&&this.Editor.Toolbar.toolbox.opened,i=e.keyCode===Ae.ENTER&&this.Editor.BlockSettings.opened,s=e.keyCode===Ae.ENTER&&this.Editor.InlineToolbar.opened,o=e.keyCode===Ae.TAB;return!(e.shiftKey||o||t||i||s)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}let vm=class{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return EA(this.workingArea.children)}static set(e,t,i){return isNaN(Number(t))?(Reflect.set(e,t,i),!0):(e.insert(+t,i),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const i=this.blocks[t];D.swap(this.blocks[e].holder,i.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=i}move(e,t){const i=this.blocks.splice(t,1)[0],s=e-1,o=Math.max(0,s),r=this.blocks[o];e>0?this.insertToDOM(i,"afterend",r):this.insertToDOM(i,"beforebegin",r),this.blocks.splice(e,0,i);const a=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});i.call(Bs.MOVED,a)}insert(e,t,i=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),i&&(this.blocks[e].holder.remove(),this.blocks[e].call(Bs.REMOVED));const s=i?1:0;if(this.blocks.splice(e,s,t),e>0){const o=this.blocks[e-1];this.insertToDOM(t,"afterend",o)}else{const o=this.blocks[e+1];o?this.insertToDOM(t,"beforebegin",o):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const i=new DocumentFragment;for(const s of e)i.appendChild(s.holder);if(this.length>0){if(t>0){const s=Math.min(t-1,this.length-1);this.blocks[s].holder.after(i)}else t===0&&this.workingArea.prepend(i);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(i);e.forEach(s=>s.call(Bs.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(Bs.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(Bs.REMOVED)),this.blocks.length=0}insertAfter(e,t){const i=this.blocks.indexOf(e);this.insert(i+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,i){t?i.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(Bs.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}};const lC="block-removed",cC="block-added",Vne="block-moved",uC="block-changed";class Dne{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,i)=>{this.completed=this.completed.then(e).then(t).catch(i)})}}class Fne extends qe{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new vm(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:vm.set,get:vm.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:i=void 0,tunes:s={}}){const o=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),a=new Fs({id:i,data:t,tool:r,api:this.Editor.API,readOnly:o,tunesData:s},this.eventsDispatcher);return o||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:i={},index:s,needToFocus:o=!0,replace:r=!1,tunes:a={}}={}){let l=s;l===void 0&&(l=this.currentBlockIndex+(r?0:1));const c=this.composeBlock({id:e,tool:t,data:i,tunes:a});return r&&this.blockDidMutated(lC,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,c,r),this.blockDidMutated(cC,c,{index:l}),o?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t,i){if(!t&&!i)return e;const s=await e.data,o=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},s,t??{}),tunes:i??e.tunes}),r=this.getBlockIndex(e);return this._blocks.replace(r,o),this.blockDidMutated(uC,o,{index:r}),o}replace(e,t,i){const s=this.getBlockIndex(e);return this.insert({tool:t,data:i,index:s,replace:!0})}paste(e,t,i=!1){const s=this.insert({tool:e,replace:i});try{window.requestIdleCallback(()=>{s.call(Bs.ON_PASTE,t)})}catch(o){et(`${e}: onPaste callback call is failed`,"error",o)}return s}insertDefaultBlockAtIndex(e,t=!1){const i=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=i,this.blockDidMutated(cC,i,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,i}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){let i;if(e.name===t.name&&e.mergeable){const s=await t.data;if(Oi(s)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[o]=p0([s],e.tool.sanitizeConfig);i=o}else if(e.mergeable&&xh(t,"export")&&xh(e,"import")){const s=await t.exportDataAsString(),o=hs(s,e.tool.sanitizeConfig);i=nC(o,e.tool.conversionConfig)}i!==void 0&&(await e.mergeWith(i),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,t=!0){return new Promise(i=>{const s=this._blocks.indexOf(e);if(!this.validateIndex(s))throw new Error("Can't find a Block to remove");this._blocks.remove(s),e.destroy(),this.blockDidMutated(lC,e,{index:s}),this.currentBlockIndex>=s&&this.currentBlockIndex--,this.blocks.length?s===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),t&&this.insert()),i()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=D.make("div");t.appendChild(e);const i={text:D.isEmpty(t)?"":t.innerHTML};return this.insert({data:i})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){D.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,i=e.closest(`.${Fs.CSS.wrapper}`),s=t.indexOf(i);if(s>=0)return this._blocks[s]}setCurrentBlockByChildNode(e){D.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Fs.CSS.wrapper}`);if(!t)return;const i=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(i!=null&&i.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;D.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Fs.CSS.wrapper}`);return this.blocks.find(i=>i.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){et("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){et("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(Vne,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,i){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const s=this.Editor.Tools.blockTools.get(t);if(!s)throw new Error(`Could not convert Block. Tool ${t} not found.`);const o=await e.exportDataAsString(),r=hs(o,s.sanitizeConfig);let a=nC(r,s.conversionConfig,s.settings);return i&&(a=Object.assign(a,i)),this.replace(e,s.name,a)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const t=new Dne;[...this.blocks].forEach(i=>{t.add(async()=>{await this.removeBlock(i,!1)})}),await t.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",i=>{t.keydown(i)}),this.readOnlyMutableListeners.on(e.holder,"keyup",i=>{t.keyup(i)}),this.readOnlyMutableListeners.on(e.holder,"dragover",i=>{t.dragOver(i)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",i=>{t.dragLeave(i)}),e.on("didMutated",i=>this.blockDidMutated(uC,i,{index:this.getBlockIndex(i)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,i){const s=new CustomEvent(e,{detail:{target:new Os(t),...i}});return this.eventsDispatcher.emit(OA,{event:s}),t}}class $ne extends qe{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(i=>{i.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new Ce,qa.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:i}=this.Editor;if(i.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){Ce.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let i;isNaN(e)?i=t.currentBlock:i=t.getBlockByIndex(e),i.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:i,Caret:s,RectangleSelection:o}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,a=r&&CA(e.keyCode);if(this.anyBlockSelected&&r&&a&&!Ce.isSelectionExists){const l=i.removeSelectedBlocks();i.insertDefaultBlockAtIndex(l,!0),s.setToBlock(i.currentBlock),Ch(()=>{const c=e.key;s.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||o.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=D.make("div");this.selectedBlocks.forEach(o=>{const r=hs(o.holder.innerHTML,this.sanitizerConfig),a=D.make("p");a.innerHTML=r,t.appendChild(a)});const i=Array.from(t.childNodes).map(o=>o.textContent).join(`

`),s=t.innerHTML;return e.clipboardData.setData("text/plain",i),e.clipboardData.setData("text/html",s),Promise.all(this.selectedBlocks.map(o=>o.save())).then(o=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(o))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,i=t.getBlockByIndex(e);i!==void 0&&this.selectBlock(i)}selectBlock(e){this.selection.save(),Ce.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){qa.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),D.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target),i=t.inputs;if(i.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(i.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),Ce.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}let Une=class Xg extends qe{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,t=this.positions.DEFAULT,i=0){var s;const{BlockManager:o,BlockSelection:r}=this.Editor;if(r.clearSelection(),!e.focusable){(s=window.getSelection())==null||s.removeAllRanges(),r.selectBlock(e),o.currentBlock=e;return}let a;switch(t){case this.positions.START:a=e.firstInput;break;case this.positions.END:a=e.lastInput;break;default:a=e.currentInput}if(!a)return;let l,c=i;if(t===this.positions.START)l=D.getDeepestNode(a,!1),c=0;else if(t===this.positions.END)l=D.getDeepestNode(a,!0),c=D.getContentLength(l);else{const{node:u,offset:d}=D.getNodeByOffset(a,i);u?(l=u,c=d):(l=D.getDeepestNode(a,!1),c=0)}this.set(l,c),o.setCurrentBlockByChildNode(e.holder),o.currentBlock.currentInput=a}setToInput(e,t=this.positions.DEFAULT,i=0){const{currentBlock:s}=this.Editor.BlockManager,o=D.getDeepestNode(e);switch(t){case this.positions.START:this.set(o,0);break;case this.positions.END:this.set(o,D.getContentLength(o));break;default:i&&this.set(o,i)}s.currentInput=e}set(e,t=0){const{top:i,bottom:s}=Ce.setCursor(e,t),{innerHeight:o}=window;i<0?window.scrollBy(0,i-30):s>o&&window.scrollBy(0,s-o+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=Ce.get();if(e.rangeCount){const t=e.getRangeAt(0),i=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),i)if(D.isNativeInput(i)){const s=i,o=document.createDocumentFragment(),r=s.value.substring(0,s.selectionStart),a=s.value.substring(s.selectionStart);return o.textContent=a,s.value=r,o}else{const s=t.cloneRange();return s.selectNodeContents(i),s.setStart(t.endContainer,t.endOffset),s.extractContents()}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:i,nextBlock:s}=t;if(i===void 0)return!1;const{nextInput:o,currentInput:r}=i,a=r!==void 0?Pd(r):void 0;let l=s;const c=e||a||!i.focusable;if(o&&c)return this.setToInput(o,this.positions.START),!0;if(l===null){if(i.tool.isDefault||!c)return!1;l=t.insertAtEnd()}return c?(this.setToBlock(l,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:i}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:s,currentInput:o}=t,r=o!==void 0?Ad(o):void 0,a=e||r||!t.focusable;return s&&a?(this.setToInput(s,this.positions.END),!0):i!==null&&a?(this.setToBlock(i,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(Xg.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${Xg.CSS.shadowCaret}`);if(!t)return;new Ce().expandToTag(t);const i=document.createRange();i.selectNode(t),i.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),i=document.createElement("div"),s=Ce.get(),o=Ce.range;i.innerHTML=e,Array.from(i.childNodes).forEach(c=>t.appendChild(c)),t.childNodes.length===0&&t.appendChild(new Text);const r=t.lastChild;o.deleteContents(),o.insertNode(t);const a=document.createRange(),l=r.nodeType===Node.TEXT_NODE?r:r.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),s.removeAllRanges(),s.addRange(a)}};class Hne extends qe{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:i}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const s=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,o=t.getBlockByChildNode(e.target);if(!(!s||!o)&&o!==s){if(s===this.firstSelectedBlock){Ce.get().removeAllRanges(),s.selected=!0,o.selected=!0,i.clearCache();return}if(o===this.firstSelectedBlock){s.selected=!1,o.selected=!1,i.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(s,o),this.lastSelectedBlock=o}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==SQ.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:i}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,i.clearCache(),Ce.get().removeAllRanges());const s=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),o=t.blocks[s];o&&(this.lastSelectedBlock.selected!==o.selected?(o.selected=!0,i.clearCache()):(this.lastSelectedBlock.selected=!1,i.clearCache()),this.lastSelectedBlock=o,this.Editor.InlineToolbar.close(),o.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:i,Caret:s}=this.Editor,o=t.blocks.indexOf(this.firstSelectedBlock),r=t.blocks.indexOf(this.lastSelectedBlock);if(i.anyBlockSelected&&o>-1&&r>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case Ae.DOWN:case Ae.RIGHT:s.setToBlock(t.blocks[Math.max(o,r)],s.positions.END);break;case Ae.UP:case Ae.LEFT:s.setToBlock(t.blocks[Math.min(o,r)],s.positions.START);break;default:s.setToBlock(t.blocks[Math.max(o,r)],s.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;Ce.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:i,BlockSelection:s}=this.Editor,o=i.blocks.indexOf(e),r=i.blocks.indexOf(t),a=e.selected!==t.selected;for(let l=Math.min(o,r);l<=Math.max(o,r);l++){const c=i.blocks[l];c!==this.firstSelectedBlock&&c!==(a?e:t)&&(i.blocks[l].selected=!i.blocks[l].selected,s.clearCache())}}}class jne extends qe{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Paste:i,Caret:s}=this.Editor;e.preventDefault(),t.blocks.forEach(r=>{r.dropTarget=!1}),Ce.isAtEditor&&!Ce.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const o=t.setCurrentBlockByChildNode(e.target);if(o)this.Editor.Caret.setToBlock(o,s.positions.END);else{const r=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(r,s.positions.END)}await i.processDataTransfer(e.dataTransfer,!0)}processDragStart(){Ce.isAtEditor&&!Ce.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}const zne=180,Wne=400;class qne extends qe{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=Wne,this.mutationObserver=new MutationObserver(i=>{this.redactorChanged(i)}),this.eventsDispatcher.on(OA,i=>{this.particularBlockChanged(i.event)}),this.eventsDispatcher.on(MA,()=>{this.disable()}),this.eventsDispatcher.on(RA,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!Pt(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(zg,{mutations:e})}}const T3=class S3 extends qe{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!Pt(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){et(`Paste handling for ${e.name} Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:i}=this.Editor,s=t.setCurrentBlockByChildNode(e.target);!s||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||s&&this.exceptionList.includes(s.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),i.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:i}=this.Editor,s=e.types;if((s.includes?s.includes("Files"):s.contains("Files"))&&!Oi(this.toolsFiles)){await this.processFiles(e.files);return}const o=e.getData(this.MIME_TYPE),r=e.getData("text/plain");let a=e.getData("text/html");if(o)try{this.insertEditorJSData(JSON.parse(o));return}catch{}t&&r.trim()&&a.trim()&&(a="<p>"+(a.trim()?a:r)+"</p>");const l=Object.keys(this.toolsTags).reduce((d,h)=>(d[h.toLowerCase()]=this.toolsTags[h].sanitizationConfig??{},d),{}),c=Object.assign({},l,i.getAllInlineToolsSanitizeConfig(),{br:{}}),u=hs(a,c);!u.trim()||u.trim()===r||!D.isHTMLString(u)?await this.processText(r):await this.processText(u,!0)}async processText(e,t=!1){const{Caret:i,BlockManager:s}=this.Editor,o=t?this.processHTML(e):this.processPlain(e);if(!o.length)return;if(o.length===1){o[0].isBlock?this.processSingleBlock(o.pop()):this.processInlinePaste(o.pop());return}const r=s.currentBlock&&s.currentBlock.tool.isDefault&&s.currentBlock.isEmpty;o.map(async(a,l)=>this.insertBlock(a,l===0&&r)),s.currentBlock&&i.setToBlock(s.currentBlock,i.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return to(e)?[e]:mn(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const t=e.pasteConfig.tags||[],i=[];t.forEach(s=>{const o=this.collectTagNames(s);i.push(...o),o.forEach(r=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,r)){et(`Paste handler for ${e.name} Tool on ${r} tag is skipped because it is already used by ${this.toolsTags[r].tool.name} Tool.`,"warn");return}const a=mn(s)?s[r]:null;this.toolsTags[r.toUpperCase()]={tool:e,sanitizationConfig:a}})}),this.tagsByTool[e.name]=i.map(s=>s.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:t={}}=e.pasteConfig;let{extensions:i,mimeTypes:s}=t;!i&&!s||(i&&!Array.isArray(i)&&(et(`extensions property of the onDrop config for ${e.name} Tool should be an array`),i=[]),s&&!Array.isArray(s)&&(et(`mimeTypes property of the onDrop config for ${e.name} Tool should be an array`),s=[]),s&&(s=s.filter(o=>MQ(o)?!0:(et(`MIME type value ${o} for the ${e.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:i||[],mimeTypes:s||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||Oi(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([t,i])=>{i instanceof RegExp||et(`Pattern ${i} for ${e.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:i,tool:e})})}isNativeBehaviour(e){return D.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let i;i=await Promise.all(Array.from(e).map(o=>this.processFile(o))),i=i.filter(o=>!!o);const s=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;i.forEach((o,r)=>{t.paste(o.type,o.event,r===0&&s)})}async processFile(e){const t=OQ(e),i=Object.entries(this.toolsFiles).find(([o,{mimeTypes:r,extensions:a}])=>{const[l,c]=e.type.split("/"),u=a.find(h=>h.toLowerCase()===t.toLowerCase()),d=r.find(h=>{const[f,p]=h.split("/");return f===l&&(p===c||p==="*")});return!!u||!!d});if(!i)return;const[s]=i;return{event:this.composePasteEvent("file",{file:e}),type:s}}processHTML(e){const{Tools:t}=this.Editor,i=D.make("DIV");return i.innerHTML=e,this.getNodes(i).map(s=>{let o,r=t.defaultTool,a=!1;switch(s.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:o=D.make("div"),o.appendChild(s);break;case Node.ELEMENT_NODE:o=s,a=!0,this.toolsTags[o.tagName]&&(r=this.toolsTags[o.tagName].tool);break}const{tags:l}=r.pasteConfig||{tags:[]},c=l.reduce((h,f)=>(this.collectTagNames(f).forEach(p=>{const g=mn(f)?f[p]:null;h[p.toLowerCase()]=g||{}}),h),{}),u=Object.assign({},c,r.baseSanitizeConfig);if(o.tagName.toLowerCase()==="table"){const h=hs(o.outerHTML,u);o=D.make("div",void 0,{innerHTML:h}).firstChild}else o.innerHTML=hs(o.innerHTML,u);const d=this.composePasteEvent("tag",{data:o});return{content:o,isBlock:a,tool:r.name,event:d}}).filter(s=>{const o=D.isEmpty(s.content),r=D.isSingleTag(s.content);return!o||r})}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const i=t;return e.split(/\r?\n/).filter(s=>s.trim()).map(s=>{const o=D.make("div");o.textContent=s;const r=this.composePasteEvent("tag",{data:o});return{content:o,tool:i,isBlock:!1,event:r}})}async processSingleBlock(e){const{Caret:t,BlockManager:i}=this.Editor,{currentBlock:s}=i;if(!s||e.tool!==s.name||!D.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,s?.tool.isDefault&&s.isEmpty);return}t.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:t,Caret:i}=this.Editor,{content:s}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&s.textContent.length<S3.PATTERN_PROCESSING_MAX_LENGTH){const o=await this.processPattern(s.textContent);if(o){const r=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,a=t.paste(o.tool,o.event,r);i.setToBlock(a,i.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const o=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,hs(s.innerHTML,o))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find(i=>{const s=i.pattern.exec(e);return s?e===s.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:i,Caret:s}=this.Editor,{currentBlock:o}=i;let r;if(t&&o&&o.isEmpty){r=i.paste(e.tool,e.event,!0),s.setToBlock(r,s.positions.END);return}r=i.paste(e.tool,e.event),s.setToBlock(r,s.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:i,Tools:s}=this.Editor;p0(e,o=>s.blockTools.get(o).sanitizeConfig).forEach(({tool:o,data:r},a)=>{let l=!1;a===0&&(l=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const c=t.insert({tool:o,data:r,replace:l});i.setToBlock(c,i.positions.END)})}processElementNode(e,t,i){const s=Object.keys(this.toolsTags),o=e,{tool:r}=this.toolsTags[o.tagName]||{},a=this.tagsByTool[r?.name]||[],l=s.includes(o.tagName),c=D.blockElements.includes(o.tagName.toLowerCase()),u=Array.from(o.children).some(({tagName:h})=>s.includes(h)&&!a.includes(h)),d=Array.from(o.children).some(({tagName:h})=>D.blockElements.includes(h.toLowerCase()));if(!c&&!l&&!u)return i.appendChild(o),[...t,i];if(l&&!u||c&&!d&&!u)return[...t,i,o]}getNodes(e){const t=Array.from(e.childNodes);let i;const s=(o,r)=>{if(D.isEmpty(r)&&!D.isSingleTag(r))return o;const a=o[o.length-1];let l=new DocumentFragment;switch(a&&D.isFragment(a)&&(l=o.pop()),r.nodeType){case Node.ELEMENT_NODE:if(i=this.processElementNode(r,o,l),i)return i;break;case Node.TEXT_NODE:return l.appendChild(r),[...o,l];default:return[...o,l]}return[...o,...Array.from(r.childNodes).reduce(s,[])]};return t.reduce(s,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};T3.PATTERN_PROCESSING_MAX_LENGTH=450;let Gne=T3;class Kne extends qe{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,i=[];Array.from(t.entries()).forEach(([s,o])=>{o.isReadOnlySupported||i.push(s)}),this.toolsDontSupportReadOnly=i,this.config.readOnly&&i.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,t=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const i=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const o in this.Editor)this.Editor[o].toggleReadOnly&&this.Editor[o].toggleReadOnly(e);if(i===e)return this.readOnlyEnabled;if(t)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const s=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(s.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new AA(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}let Xne=class Md extends qe{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const i=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);i.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const s=[`.${Fs.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],o=i.closest("."+this.Editor.UI.CSS.editorWrapper),r=s.some(a=>!!i.closest(a));!o||r||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",$g(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",$g(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(D.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),i=D.make("div",Md.CSS.overlay,{}),s=D.make("div",Md.CSS.overlayContainer,{}),o=D.make("div",Md.CSS.rect,{});return s.appendChild(o),i.appendChild(s),t.appendChild(i),this.overlayRectangle=o,{container:t,overlay:i}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:i,index:s}=this.genInfoForMouseSelection(),o=this.startX>t&&this.mouseX>t,r=this.startX<i&&this.mouseX<i;this.rectCrossesBlocks=!(o||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),s!==void 0&&(this.trySelectNextBlock(s),this.inverseSelection(),Ce.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,i=document.elementFromPoint(e,t),s=this.Editor.BlockManager.getBlockByChildNode(i);let o;s!==void 0&&(o=this.Editor.BlockManager.blocks.findIndex(u=>u.holder===s.holder));const r=this.Editor.BlockManager.lastBlock.holder.querySelector("."+Fs.CSS.content),a=Number.parseInt(window.getComputedStyle(r).width,10)/2,l=e-a,c=e+a;return{index:o,leftPos:l,rightPos:c}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,i=this.stackOfSelected.length,s=1,o=-1,r=0;if(t)return;const a=this.stackOfSelected[i-1]-this.stackOfSelected[i-2]>0;let l=r;i>1&&(l=a?s:o);const c=e>this.stackOfSelected[i-1]&&l===s,u=e<this.stackOfSelected[i-1]&&l===o,d=!(c||u||l===r);if(!d&&(e>this.stackOfSelected[i-1]||this.stackOfSelected[i-1]===void 0)){let p=this.stackOfSelected[i-1]+1||e;for(p;p<=e;p++)this.addBlockInSelection(p);return}if(!d&&e<this.stackOfSelected[i-1]){for(let p=this.stackOfSelected[i-1]-1;p>=e;p--)this.addBlockInSelection(p);return}if(!d)return;let h=i-1,f;for(e>this.stackOfSelected[i-1]?f=()=>e>this.stackOfSelected[h]:f=()=>e<this.stackOfSelected[h];f();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[h]),this.stackOfSelected.pop(),h--}};class Zne extends qe{async render(e){return new Promise(t=>{const{Tools:i,BlockManager:s}=this.Editor;if(e.length===0)s.insert();else{const o=e.map(({type:r,data:a,tunes:l,id:c})=>{i.available.has(r)===!1&&(ki(`Tool ${r} is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(r,a,c),r=i.stubTool);let u;try{u=s.composeBlock({id:c,tool:r,data:a,tunes:l})}catch(d){et(`Block ${r} skipped because of plugins error`,"error",{data:a,error:d}),a=this.composeStubDataForTool(r,a,c),r=i.stubTool,u=s.composeBlock({id:c,tool:r,data:a,tunes:l})}return u});s.insertMany(o)}window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,i){const{Tools:s}=this.Editor;let o=e;if(s.unavailable.has(e)){const r=s.unavailable.get(e).toolbox;r!==void 0&&r[0].title!==void 0&&(o=r[0].title)}return{savedData:{id:i,type:e,data:t},title:o}}}class Jne extends qe{async save(){const{BlockManager:e,Tools:t}=this.Editor,i=e.blocks,s=[];try{i.forEach(a=>{s.push(this.getSavedData(a))});const o=await Promise.all(s),r=await p0(o,a=>t.blockTools.get(a).sanitizeConfig);return this.makeOutput(r)}catch(o){ki("Saving failed due to the Error %o","error",o)}}async getSavedData(e){const t=await e.save(),i=t&&await e.validate(t.data);return{...t,isValid:i}}makeOutput(e){const t=[];return e.forEach(({id:i,tool:s,data:o,tunes:r,isValid:a})=>{if(!a){et(`Block ${s} skipped because saved data is invalid`);return}if(s===this.Editor.Tools.stubTool){t.push(o);return}const l={id:i,type:s,data:o,...!Oi(r)&&{tunes:r}};t.push(l)}),{time:+new Date,blocks:t,version:"2.31.0"}}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Yne='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function Qne(n){const e=document.createElement("div");e.innerHTML=n.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class av{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:i,readOnly:s}){this.api=i,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:av.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=Qne(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:Yne,title:"Text"}}}class lv{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:xee,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}lv.isInline=!0;lv.title="Bold";class cv{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Mee,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}cv.isInline=!0;cv.title="Italic";class uv{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new Ce}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=iC,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=Nee,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=iC,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new Ce;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),et("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),i=e.substring(0,1)==="#",s=/^\/\/[^/\s]/.test(e);return!t&&!i&&!s&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}uv.isInline=!0;uv.title="Link";let I3=class{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=Ce.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(t===void 0)return[];const i=this.toolsAPI.getBlockTools(),s=await LA(t,i);if(s.length===0)return[];const o=s.reduce((c,u)=>{var d;return(d=u.toolbox)==null||d.forEach(h=>{c.push({icon:h.icon,title:Fn.t(hi.toolNames,h.title),name:u.name,closeOnActivate:!0,onActivate:async()=>{const f=await this.blocksAPI.convert(t.id,u.name,h.data);this.caretAPI.setToBlock(f,"end")}})}),c},[]),r=await t.getActiveToolboxEntry(),a=r!==void 0?r.icon:HA,l=!fl();return{icon:a,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:l,items:o,onOpen:()=>{l&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{l&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}};I3.isInline=!0;let A3=class{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=D.make("div",this.CSS.wrapper),t=Vee,i=D.make("div",this.CSS.info),s=D.make("div",this.CSS.title,{textContent:this.title}),o=D.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,i.appendChild(s),i.appendChild(o),e.appendChild(i),e}};A3.isReadOnlySupported=!0;class eie extends _0{constructor(){super(...arguments),this.type=_r.Inline}get title(){return this.constructable[Ph.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[Ph.IsReadOnlySupported]??!1}}class tie extends _0{constructor(){super(...arguments),this.type=_r.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}let as=class pa extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new pa(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new pa(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new pa(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new pa(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new pa(e)}};var nie=Object.defineProperty,iie=Object.getOwnPropertyDescriptor,P3=(n,e,t,i)=>{for(var s=iie(e,t),o=n.length-1,r;o>=0;o--)(r=n[o])&&(s=r(e,t,s)||s);return s&&nie(e,t,s),s};class dv extends _0{constructor(){super(...arguments),this.type=_r.Block,this.inlineTools=new as,this.tunes=new as}create(e,t,i){return new this.constructable({data:e,block:t,readOnly:i,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[fa.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[fa.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[fa.Toolbox],t=this.config[Id.Toolbox];if(!Oi(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((i,s)=>{const o=e[s];return o?{...o,...i}:i}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[fa.ConversionConfig]}get enabledInlineTools(){return this.config[Id.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[Id.EnabledBlockTunes]}get pasteConfig(){return this.constructable[fa.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(Oi(e))return t;const i={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];mn(o)?i[s]=Object.assign({},t,o):i[s]=o}return i}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}P3([hl],dv.prototype,"sanitizeConfig");P3([hl],dv.prototype,"baseSanitizeConfig");class sie{constructor(e,t,i){this.api=i,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:i=!1,...s}=this.config[e],o=this.getConstructor(t),r=t[Gg.IsTune];return new o({name:e,constructable:t,config:s,api:this.api.getMethodsForTool(e,r),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:i})}getConstructor(e){switch(!0){case e[Ph.IsInline]:return eie;case e[Gg.IsTune]:return tie;default:return dv}}}let O3=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Tee,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const i=t.holder,s=i.getBoundingClientRect();let o=Math.abs(window.innerHeight-i.offsetHeight);s.top<window.innerHeight&&(o=window.scrollY+i.offsetHeight),window.scrollTo(0,o),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};O3.isTune=!0;let M3=class{constructor({api:e}){this.api=e}render(){return{icon:Pee,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};M3.isTune=!0;let R3=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Aee,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),i=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!i)throw new Error("Unable to move Block up since it is already the first");const s=t.holder,o=i.holder,r=s.getBoundingClientRect(),a=o.getBoundingClientRect();let l;a.top>0?l=Math.abs(r.top)-Math.abs(a.top):l=Math.abs(r.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};R3.isTune=!0;var oie=Object.defineProperty,rie=Object.getOwnPropertyDescriptor,aie=(n,e,t,i)=>{for(var s=rie(e,t),o=n.length-1,r;o>=0;o--)(r=n[o])&&(s=r(e,t,s)||s);return s&&oie(e,t,s),s};let B3=class extends qe{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new as,this.toolsUnavailable=new as}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Ug({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new sie(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await PQ(t,i=>{this.toolPrepareMethodSuccess(i)},i=>{this.toolPrepareMethodFallback(i)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{Pt(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:I3,isInternal:!0},link:{class:uv,isInternal:!0},bold:{class:lv,isInternal:!0},italic:{class:cv,isInternal:!0},paragraph:{class:av,inlineToolbar:!0,isInternal:!0},stub:{class:A3,isInternal:!0},moveUp:{class:R3,isInternal:!0},delete:{class:M3,isInternal:!0},moveDown:{class:O3,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const i=["render"].filter(s=>!t.create()[s]);if(i.length){et(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",i),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([i,s])=>{t.push({function:Pt(s.class.prepare)?s.class.prepare:()=>{},data:{toolName:i,config:s.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new as(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new as(["convertTo",...e.enabledInlineTools].map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new as(e.enabledBlockTunes.map(i=>[i,this.blockTunes.get(i)]));e.tunes=new as([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new as(this.config.tunes.map(i=>[i,this.blockTunes.get(i)]));e.tunes=new as([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!Pt(t)&&!Pt(t.class))throw Error(`Tool ${e} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const e={};for(const t in this.config.tools)mn(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}};aie([hl],B3.prototype,"getAllInlineToolsSanitizeConfig");const lie=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`;class cie extends qe{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=null,this.resizeDebouncer=eC(()=>{this.windowResize()},200),this.selectionChangeDebounced=eC(()=>{this.selectionChanged()},zne),this.documentTouchedListener=e=>{this.documentTouched(e)}}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache!==null)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${Fs.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.unbindReadOnlySensitiveListeners():window.requestIdleCallback(()=>{this.bindReadOnlySensitiveListeners()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:i}=this.Editor;return!!(t.opened||i.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof Ih).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML="",this.unbindReadOnlyInsensitiveListeners()}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:i}=this.Editor;t.close(),i.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<xA;e!==this.isMobile&&this.eventsDispatcher.emit(zc,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=D.getHolder(this.config.holder),this.nodes.wrapper=D.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=D.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper),this.bindReadOnlyInsensitiveListeners()}loadStyles(){const e="editor-js-styles";if(D.get(e))return;const t=D.make("style",null,{id:e,textContent:lie.toString()});this.config.style&&!Oi(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),D.prepend(document.head,t)}bindReadOnlyInsensitiveListeners(){this.listeners.on(document,"selectionchange",this.selectionChangeDebounced),this.listeners.on(window,"resize",this.resizeDebouncer,{passive:!0}),this.listeners.on(this.nodes.redactor,"mousedown",this.documentTouchedListener,{capture:!0,passive:!0}),this.listeners.on(this.nodes.redactor,"touchstart",this.documentTouchedListener,{capture:!0,passive:!0})}unbindReadOnlyInsensitiveListeners(){this.listeners.off(document,"selectionchange",this.selectionChangeDebounced),this.listeners.off(window,"resize",this.resizeDebouncer),this.listeners.off(this.nodes.redactor,"mousedown",this.documentTouchedListener),this.listeners.off(this.nodes.redactor,"touchstart",this.documentTouchedListener)}bindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",$g(t=>{const i=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||i&&e!==i&&(e=i,this.eventsDispatcher.emit(YA,{block:this.Editor.BlockManager.getBlockByChildNode(i)}))},20),{passive:!0})}unbindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case Ae.ENTER:this.enterPressed(e);break;case Ae.BACKSPACE:case Ae.DELETE:this.backspacePressed(e);break;case Ae.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,i=e.target.closest(`.${this.CSS.editorWrapper}`),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&i===null){this.Editor.BlockEvents.keydown(e);return}i||t&&s||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:i,Caret:s}=this.Editor;if(i.anyBlockSelected&&!Ce.isSelectionExists){const o=t.removeSelectedBlocks(),r=t.insertDefaultBlockAtIndex(o,!0);s.setToBlock(r,s.positions.START),i.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:i}=this.Editor;if(this.someToolbarOpened)return;const s=t.currentBlockIndex>=0;if(i.anyBlockSelected&&!Ce.isSelectionExists){i.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&s&&e.target.tagName==="BODY"){const o=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(o),this.Editor.Toolbar.moveAndOpen(o)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,i;if(!e.isTrusted)return;const s=e.target;this.nodes.holder.contains(s)||Ce.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const o=(t=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:t.contains(s),r=(i=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:i.contains(s),a=o||r;if(this.Editor.BlockSettings.opened&&!a){this.Editor.BlockSettings.close();const l=this.Editor.BlockManager.getBlockByChildNode(s);this.Editor.Toolbar.moveAndOpen(l)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(i,s)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.ReadOnly.isEnabled||this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!Ce.isCollapsed)return;const t=e.target,i=e.metaKey||e.ctrlKey;if(D.isAnchor(t)&&i){e.stopImmediatePropagation(),e.stopPropagation();const s=t.getAttribute("href"),o=BQ(s);NQ(o);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),i=D.offset(t.holder).bottom,s=e.pageY,{BlockSelection:o}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!o.anyBlockSelected&&i<s){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:r,Caret:a,Toolbar:l}=this.Editor;(!r.lastBlock.tool.isDefault||!r.lastBlock.isEmpty)&&r.insertAtEnd(),a.setToTheLastBlock(),l.moveAndOpen(r.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,i=Ce.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&Ce.get().removeAllRanges(),!i){Ce.range||this.Editor.InlineToolbar.close();return}const s=i.closest(`.${Fs.CSS.content}`);(s===null||s.closest(`.${Ce.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(i)||this.Editor.InlineToolbar.close(),i.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(i),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(t){const i=t.target;TA(i)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}const uie={BlocksAPI:GQ,CaretAPI:XQ,EventsAPI:ZQ,I18nAPI:JQ,API:YQ,InlineToolbarAPI:QQ,ListenersAPI:eee,NotifierAPI:see,ReadOnlyAPI:oee,SanitizerAPI:hee,SaverAPI:fee,SelectionAPI:pee,ToolsAPI:mee,StylesAPI:gee,ToolbarAPI:bee,TooltipAPI:kee,UiAPI:Cee,BlockSettings:Xee,Toolbar:ite,InlineToolbar:ste,BlockEvents:Nne,BlockManager:Fne,BlockSelection:$ne,Caret:Une,CrossBlockSelection:Hne,DragNDrop:jne,ModificationsObserver:qne,Paste:Gne,ReadOnly:Kne,RectangleSelection:Xne,Renderer:Zne,Saver:Jne,Tools:B3,UI:cie};class die{constructor(e){this.moduleInstances={},this.eventsDispatcher=new Cu;let t,i;this.isReady=new Promise((s,o)=>{t=s,i=o}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:s,Caret:o,UI:r,ModificationsObserver:a}=this.moduleInstances;r.checkEmptiness(),a.enable(),this.configuration.autofocus===!0&&this.configuration.readOnly!==!0&&o.setToBlock(s.blocks[0],o.positions.START),t()}).catch(s=>{et(`Editor.js is not ready because of ${s}`,"error"),i(s)})}set configuration(e){var t,i;mn(e)?this.config={...e}:this.config={holder:e},Hg(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=kA.VERBOSE),IQ(this.config.logLevel),Hg(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const s={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(Oi(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[s]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&Fn.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((i=this.config.i18n)==null?void 0:i.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("holderId and holder param can't assign at the same time.");if(to(t)&&!D.get(t))throw Error(`element with ID ${t} is missing. Pass correct holder's ID.`);if(t&&mn(t)&&!D.isElement(t))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(i){if(i instanceof AA)throw new Error(i.message);et(`Module ${t} was skipped because of %o`,"warn",i)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(uie).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(i){et("[constructModules]",`Module ${e} skipped because`,"error",i)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const i in this.moduleInstances)i!==e&&(t[i]=this.moduleInstances[i]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class hie{static get version(){return"2.31.0"}constructor(e){let t=()=>{};mn(e)&&Pt(e.onReady)&&(t=e.onReady);const i=new die(e);this.isReady=i.isReady.then(()=>{this.exportAPI(i),t()})}exportAPI(e){const t=["configuration"],i=()=>{Object.values(e.moduleInstances).forEach(s=>{Pt(s.destroy)&&s.destroy(),s.listeners.removeAll()}),yee(),e=null;for(const s in this)Object.prototype.hasOwnProperty.call(this,s)&&delete this[s];Object.setPrototypeOf(this,null)};t.forEach(s=>{this[s]=e[s]}),this.destroy=i,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([s,o])=>{Object.entries(o).forEach(([r,a])=>{this[a]=e.moduleInstances.API.methods[s][r]})})}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:""}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const fie='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',dC='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',hC='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',fC='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',pie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',mie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',gie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',bie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',vie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',wie='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _ie(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var ht={},hv={},fv={};Object.defineProperty(fv,"__esModule",{value:!0});fv.allInputsSelector=yie;function yie(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=fv;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(hv);var jr={},pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.isNativeInput=kie;function kie(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=pv;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(jr);var L3={},mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.append=Cie;function Cie(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=mv;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(L3);var gv={},bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.blockElements=Eie;function Eie(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=bv;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(gv);var N3={},vv={};Object.defineProperty(vv,"__esModule",{value:!0});vv.calculateBaseline=xie;function xie(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),i=parseFloat(e.lineHeight)||t*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.borderTopWidth),r=parseFloat(e.marginTop),a=t*.8,l=(i-t)/2,c=r+o+s+l+a;return c}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=vv;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(N3);var V3={},wv={},_v={},yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.isContentEditable=Tie;function Tie(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=yv;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(_v);Object.defineProperty(wv,"__esModule",{value:!0});wv.canSetCaret=Aie;var Sie=jr,Iie=_v;function Aie(n){var e=!0;if((0,Sie.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,Iie.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=wv;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(V3);var Zf={},kv={};function Pie(n,e,t){const i=t.value!==void 0?"value":"get",s=t[i],o=`#${e}Cache`;if(t[i]=function(...r){return this[o]===void 0&&(this[o]=s.apply(this,r)),this[o]},i==="get"&&t.set){const r=t.set;t.set=function(a){delete n[o],r.apply(this,a)}}return t}function D3(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function Cv(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function Oie(n){return!Cv(n)}const Mie=()=>typeof window<"u"&&window.navigator!==null&&Cv(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Rie(n){const e=D3();return n=n.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function Bie(n){return n[0].toUpperCase()+n.slice(1)}function Lie(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),i=document.createRange();if(i.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(i),document.execCommand("copy"),document.body.removeChild(e)}function Nie(n,e,t){let i;return(...s)=>{const o=this,r=()=>{i=void 0,t!==!0&&n.apply(o,s)},a=t===!0&&i!==void 0;window.clearTimeout(i),i=window.setTimeout(r,e),a&&n.apply(o,s)}}function Ho(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Vie(n){return Ho(n)==="boolean"}function F3(n){return Ho(n)==="function"||Ho(n)==="asyncfunction"}function Die(n){return F3(n)&&/^\s*class\s+/.test(n.toString())}function Fie(n){return Ho(n)==="number"}function Rd(n){return Ho(n)==="object"}function $ie(n){return Promise.resolve(n)===n}function Uie(n){return Ho(n)==="string"}function Hie(n){return Ho(n)==="undefined"}function Zg(n,...e){if(!e.length)return n;const t=e.shift();if(Rd(n)&&Rd(t))for(const i in t)Rd(t[i])?(n[i]===void 0&&Object.assign(n,{[i]:{}}),Zg(n[i],t[i])):Object.assign(n,{[i]:t[i]});return Zg(n,...e)}function jie(n,e,t){const i=`${e} is deprecated and will be removed in the next major release. Please use the ${t} instead.`;n&&console.warn(i)}function zie(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function Wie(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const qie={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},Gie={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class Kie{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,i)=>{this.completed=this.completed.then(e).then(t).catch(i)})}}function Xie(n,e,t=void 0){let i,s,o,r=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),r=null,o=n.apply(i,s),r===null&&(i=s=null)};return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return i=this,s=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=c,o=n.apply(i,s),r===null&&(i=s=null)):!r&&t.trailing!==!1&&(r=setTimeout(l,u)),o}}const Zie=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:Kie,beautifyShortcut:Rie,cacheable:Pie,capitalize:Bie,copyTextToClipboard:Lie,debounce:Nie,deepMerge:Zg,deprecationAssert:jie,getUserOS:D3,getValidUrl:zie,isBoolean:Vie,isClass:Die,isEmpty:Oie,isFunction:F3,isIosDevice:Mie,isNumber:Fie,isObject:Rd,isPrintableKey:Wie,isPromise:$ie,isString:Uie,isUndefined:Hie,keyCodes:qie,mouseButtons:Gie,notEmpty:Cv,throttle:Xie,typeOf:Ho},Symbol.toStringTag,{value:"Module"})),Ev=_ie(Zie);Object.defineProperty(kv,"__esModule",{value:!0});kv.containsOnlyInlineElements=Qie;var Jie=Ev,Yie=gv;function Qie(n){var e;(0,Jie.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(i){return!(0,Yie.blockElements)().includes(i.tagName.toLowerCase())&&Array.from(i.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=kv;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Zf);var $3={},xv={},Jf={},Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.make=ese;function ese(n,e,t){var i;e===void 0&&(e=null),t===void 0&&(t={});var s=document.createElement(n);if(Array.isArray(e)){var o=e.filter(function(a){return a!==void 0});(i=s.classList).add.apply(i,o)}else e!==null&&s.classList.add(e);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]);return s}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=Tv;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})(Jf);Object.defineProperty(xv,"__esModule",{value:!0});xv.fragmentToString=nse;var tse=Jf;function nse(n){var e=(0,tse.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=xv;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})($3);var U3={},Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.getContentLength=sse;var ise=jr;function sse(n){var e,t;return(0,ise.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=Sv;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(U3);var Iv={},Av={},pC=Oh&&Oh.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Av,"__esModule",{value:!0});Av.getDeepestBlockElements=H3;var ose=Zf;function H3(n){return(0,ose.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return pC(pC([],e,!0),H3(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=Av;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(Iv);var j3={},Pv={},Yf={},Ov={};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.isLineBreakTag=rse;function rse(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=Ov;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Yf);var Qf={},Mv={};Object.defineProperty(Mv,"__esModule",{value:!0});Mv.isSingleTag=ase;function ase(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=Mv;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Qf);Object.defineProperty(Pv,"__esModule",{value:!0});Pv.getDeepestNode=z3;var lse=jr,cse=Yf,use=Qf;function z3(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",i=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var s=n[t];if((0,use.isSingleTag)(s)&&!(0,lse.isNativeInput)(s)&&!(0,cse.isLineBreakTag)(s))if(s[i])s=s[i];else if(s.parentNode!==null&&s.parentNode[i])s=s.parentNode[i];else return s.parentNode;return z3(s,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=Pv;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(j3);var W3={},Rv={},od=Oh&&Oh.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Rv,"__esModule",{value:!0});Rv.findAllInputs=mse;var dse=Zf,hse=Iv,fse=hv,pse=jr;function mse(n){return Array.from(n.querySelectorAll((0,fse.allInputsSelector)())).reduce(function(e,t){return(0,pse.isNativeInput)(t)||(0,dse.containsOnlyInlineElements)(t)?od(od([],e,!0),[t],!1):od(od([],e,!0),(0,hse.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=Rv;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(W3);var q3={},Bv={};Object.defineProperty(Bv,"__esModule",{value:!0});Bv.isCollapsedWhitespaces=gse;function gse(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=Bv;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(q3);var Lv={},Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.isElement=vse;var bse=Ev;function vse(n){return(0,bse.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=Nv;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(Lv);var G3={},Vv={},Dv={},Fv={};Object.defineProperty(Fv,"__esModule",{value:!0});Fv.isLeaf=wse;function wse(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=Fv;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(Dv);var $v={},Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.isNodeEmpty=Ese;var _se=Yf,yse=Lv,kse=jr,Cse=Qf;function Ese(n,e){var t="";return(0,Cse.isSingleTag)(n)&&!(0,_se.isLineBreakTag)(n)?!1:((0,yse.isElement)(n)&&(0,kse.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=Uv;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})($v);Object.defineProperty(Vv,"__esModule",{value:!0});Vv.isEmpty=Sse;var xse=Dv,Tse=$v;function Sse(n,e){n.normalize();for(var t=[n];t.length>0;){var i=t.shift();if(i){if(n=i,(0,xse.isLeaf)(n)&&!(0,Tse.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=Vv;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(G3);var K3={},Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.isFragment=Ase;var Ise=Ev;function Ase(n){return(0,Ise.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=Hv;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(K3);var X3={},jv={};Object.defineProperty(jv,"__esModule",{value:!0});jv.isHTMLString=Ose;var Pse=Jf;function Ose(n){var e=(0,Pse.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=jv;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(X3);var Z3={},zv={};Object.defineProperty(zv,"__esModule",{value:!0});zv.offset=Mse;function Mse(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,s=e.top+i,o=e.left+t;return{top:s,left:o,bottom:s+e.height,right:o+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=zv;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(Z3);var J3={},Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.prepend=Rse;function Rse(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=Wv;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(J3);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=hv;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=jr;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var i=L3;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return i.append}});var s=gv;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return s.blockElements}});var o=N3;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return o.calculateBaseline}});var r=V3;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return r.canSetCaret}});var a=Zf;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=$3;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var c=U3;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return c.getContentLength}});var u=Iv;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return u.getDeepestBlockElements}});var d=j3;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return d.getDeepestNode}});var h=W3;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return h.findAllInputs}});var f=q3;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return f.isCollapsedWhitespaces}});var p=_v;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return p.isContentEditable}});var g=Lv;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return g.isElement}});var y=G3;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return y.isEmpty}});var k=K3;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return k.isFragment}});var v=X3;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return v.isHTMLString}});var b=Dv;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return b.isLeaf}});var w=$v;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return w.isNodeEmpty}});var C=Yf;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return C.isLineBreakTag}});var E=Qf;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return E.isSingleTag}});var I=Jf;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return I.make}});var x=Z3;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return x.offset}});var _=J3;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return _.prepend}})})(ht);const Jn="cdx-list",Tn={wrapper:Jn,item:`${Jn}__item`,itemContent:`${Jn}__item-content`,itemChildren:`${Jn}__item-children`};let Y3=class bo{static get CSS(){return{...Tn,orderedList:`${Jn}-ordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=ht.make("ol",[bo.CSS.wrapper,bo.CSS.orderedList]):t=ht.make("ol",[bo.CSS.orderedList,bo.CSS.itemChildren]),t}renderItem(e,t){const i=ht.make("li",bo.CSS.item),s=ht.make("div",bo.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return i.appendChild(s),i}getItemContent(e){const t=e.querySelector(`.${bo.CSS.itemContent}`);return!t||ht.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}},Q3=class vo{static get CSS(){return{...Tn,unorderedList:`${Jn}-unordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=ht.make("ul",[vo.CSS.wrapper,vo.CSS.unorderedList]):t=ht.make("ul",[vo.CSS.unorderedList,vo.CSS.itemChildren]),t}renderItem(e,t){const i=ht.make("li",vo.CSS.item),s=ht.make("div",vo.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return i.appendChild(s),i}getItemContent(e){const t=e.querySelector(`.${vo.CSS.itemContent}`);return!t||ht.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}};function tr(n){return n.nodeType===Node.ELEMENT_NODE}var sc={},qv={},ep={},tp={};Object.defineProperty(tp,"__esModule",{value:!0});tp.getContenteditableSlice=Lse;var Bse=ht;function Lse(n,e,t,i,s){var o;s===void 0&&(s=!1);var r=document.createRange();if(i==="left"?(r.setStart(n,0),r.setEnd(e,t)):(r.setStart(e,t),r.setEnd(n,n.childNodes.length)),s===!0){var a=r.extractContents();return(0,Bse.fragmentToString)(a)}var l=r.cloneContents(),c=document.createElement("div");c.appendChild(l);var u=(o=c.textContent)!==null&&o!==void 0?o:"";return u}Object.defineProperty(ep,"__esModule",{value:!0});ep.checkContenteditableSliceForEmptiness=Dse;var Nse=ht,Vse=tp;function Dse(n,e,t,i){var s=(0,Vse.getContenteditableSlice)(n,e,t,i);return(0,Nse.isCollapsedWhitespaces)(s)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkContenteditableSliceForEmptiness=void 0;var e=ep;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(qv);var eP={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContenteditableSlice=void 0;var e=tp;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(eP);var tP={},Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.focus=$se;var Fse=ht;function $se(n,e){var t,i;if(e===void 0&&(e=!0),(0,Fse.isNativeInput)(n)){n.focus();var s=e?0:n.value.length;n.setSelectionRange(s,s)}else{var o=document.createRange(),r=window.getSelection();if(!r)return;var a=function(h,f){f===void 0&&(f=!1);var p=document.createTextNode("");f?h.insertBefore(p,h.firstChild):h.appendChild(p),o.setStart(p,0),o.setEnd(p,0)},l=function(h){return h!=null},c=n.childNodes,u=e?c[0]:c[c.length-1];if(l(u)){for(;l(u)&&u.nodeType!==Node.TEXT_NODE;)u=e?u.firstChild:u.lastChild;if(l(u)&&u.nodeType===Node.TEXT_NODE){var d=(i=(t=u.textContent)===null||t===void 0?void 0:t.length)!==null&&i!==void 0?i:0,s=e?0:d;o.setStart(u,s),o.setEnd(u,s)}else a(n,e)}else a(n);r.removeAllRanges(),r.addRange(o)}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;var e=Gv;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return e.focus}})})(tP);var Kv={},np={};Object.defineProperty(np,"__esModule",{value:!0});np.getCaretNodeAndOffset=Use;function Use(){var n=window.getSelection();if(n===null)return[null,0];var e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaretNodeAndOffset=void 0;var e=np;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(Kv);var nP={},ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.getRange=Hse;function Hse(){var n=window.getSelection();return n&&n.rangeCount?n.getRangeAt(0):null}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRange=void 0;var e=ip;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(nP);var iP={},Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.isCaretAtEndOfInput=Wse;var mC=ht,jse=Kv,zse=qv;function Wse(n){var e=(0,mC.getDeepestNode)(n,!0);if(e===null)return!0;if((0,mC.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,jse.getCaretNodeAndOffset)(),i=t[0],s=t[1];return i===null?!1:(0,zse.checkContenteditableSliceForEmptiness)(n,i,s,"right")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtEndOfInput=void 0;var e=Xv;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(iP);var sP={},Zv={};Object.defineProperty(Zv,"__esModule",{value:!0});Zv.isCaretAtStartOfInput=Kse;var rd=ht,qse=np,Gse=ep;function Kse(n){var e=(0,rd.getDeepestNode)(n);if(e===null||(0,rd.isEmpty)(n))return!0;if((0,rd.isNativeInput)(e))return e.selectionEnd===0;if((0,rd.isEmpty)(n))return!0;var t=(0,qse.getCaretNodeAndOffset)(),i=t[0],s=t[1];return i===null?!1:(0,Gse.checkContenteditableSliceForEmptiness)(n,i,s,"left")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtStartOfInput=void 0;var e=Zv;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(sP);var oP={},Jv={};Object.defineProperty(Jv,"__esModule",{value:!0});Jv.save=Jse;var Xse=ht,Zse=ip;function Jse(){var n=(0,Zse.getRange)(),e=(0,Xse.make)("span");if(e.id="cursor",e.hidden=!0,!!n)return n.insertNode(e),function(){var t=window.getSelection();t&&(n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),setTimeout(function(){e.remove()},150))}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=void 0;var e=Jv;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return e.save}})})(oP);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=n.isCaretAtStartOfInput=n.isCaretAtEndOfInput=n.getRange=n.getCaretNodeAndOffset=n.focus=n.getContenteditableSlice=n.checkContenteditableSliceForEmptiness=void 0;var e=qv;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=eP;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var i=tP;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return i.focus}});var s=Kv;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return s.getCaretNodeAndOffset}});var o=nP;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return o.getRange}});var r=iP;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return r.isCaretAtEndOfInput}});var a=sP;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=oP;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return l.save}})})(sc);class Xt{static get CSS(){return{...Tn,checklist:`${Jn}-checklist`,itemChecked:`${Jn}__checkbox--checked`,noHover:`${Jn}__checkbox--no-hover`,checkbox:`${Jn}__checkbox-check`,checkboxContainer:`${Jn}__checkbox`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?(t=ht.make("ul",[Xt.CSS.wrapper,Xt.CSS.checklist]),t.addEventListener("click",i=>{const s=i.target;if(s){const o=s.closest(`.${Xt.CSS.checkboxContainer}`);o&&o.contains(s)&&this.toggleCheckbox(o)}})):t=ht.make("ul",[Xt.CSS.checklist,Xt.CSS.itemChildren]),t}renderItem(e,t){const i=ht.make("li",[Xt.CSS.item,Xt.CSS.item]),s=ht.make("div",Xt.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()}),o=ht.make("span",Xt.CSS.checkbox),r=ht.make("div",Xt.CSS.checkboxContainer);return t.checked===!0&&r.classList.add(Xt.CSS.itemChecked),o.innerHTML=fie,r.appendChild(o),i.appendChild(r),i.appendChild(s),i}getItemContent(e){const t=e.querySelector(`.${Xt.CSS.itemContent}`);return!t||ht.isEmpty(t)?"":t.innerHTML}getItemMeta(e){const t=e.querySelector(`.${Xt.CSS.checkboxContainer}`);return{checked:t?t.classList.contains(Xt.CSS.itemChecked):!1}}composeDefaultMeta(){return{checked:!1}}toggleCheckbox(e){e.classList.toggle(Xt.CSS.itemChecked),e.classList.add(Xt.CSS.noHover),e.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(e),{once:!0})}removeSpecialHoverBehavior(e){e.classList.remove(Xt.CSS.noHover)}}function wm(n,e="after"){const t=[];let i;function s(o){switch(e){case"after":return o.nextElementSibling;case"before":return o.previousElementSibling}}for(i=s(n);i!==null;)t.push(i),i=s(i);return t.length!==0?t:null}function As(n,e=!0){let t=n;return n.classList.contains(Tn.item)&&(t=n.querySelector(`.${Tn.itemChildren}`)),t===null?[]:e?Array.from(t.querySelectorAll(`:scope > .${Tn.item}`)):Array.from(t.querySelectorAll(`.${Tn.item}`))}function Yse(n){return n.nextElementSibling===null}function Qse(n){return n.querySelector(`.${Tn.itemChildren}`)!==null}function wo(n){return n.querySelector(`.${Tn.itemChildren}`)}function _m(n){let e=n;n.classList.contains(Tn.item)&&(e=wo(n)),e!==null&&As(e).length===0&&e.remove()}function Bd(n){return n.querySelector(`.${Tn.itemContent}`)}function na(n,e=!0){const t=Bd(n);t&&sc.focus(t,e)}class ym{get currentItem(){const e=window.getSelection();if(!e)return null;let t=e.anchorNode;return!t||(tr(t)||(t=t.parentNode),!t)||!tr(t)?null:t.closest(`.${Tn.item}`)}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let t=e.parentNode,i=0;for(;t!==null&&t!==this.listWrapper;)tr(t)&&t.classList.contains(Tn.item)&&(i+=1),t=t.parentNode;return i+1}constructor({data:e,config:t,api:i,readOnly:s,block:o},r){this.config=t,this.data=e,this.readOnly=s,this.api=i,this.block=o,this.renderer=r}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":e.shiftKey||this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper}save(e){const t=e??this.listWrapper,i=r=>As(r).map(a=>{const l=wo(a),c=this.renderer.getItemContent(a),u=this.renderer.getItemMeta(a),d=l?i(l):[];return{content:c,meta:u,items:d}}),s=t?i(t):[];let o={style:this.data.style,meta:{},items:s};return this.data.style==="ordered"&&(o.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),o}static get pasteConfig(){return{tags:["OL","UL","LI"]}}merge(e){const t=this.block.holder.querySelectorAll(`.${Tn.item}`),i=t[t.length-1],s=Bd(i);if(i===null||s===null||(s.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const o=As(this.listWrapper);if(o.length===0)return;const r=o[o.length-1];let a=wo(r);const l=e.items.shift();l!==void 0&&(l.items.length!==0&&(a===null&&(a=this.renderer.renderWrapper(!1)),this.appendItems(l.items,a)),e.items.length>0&&this.appendItems(e.items,this.listWrapper))}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const i=this.listWrapper;i&&i.parentNode&&i.parentNode.replaceChild(this.render(),i)}pasteHandler(e){const{tagName:t}=e;let i="unordered",s;switch(t){case"OL":i="ordered",s="ol";break;case"UL":case"LI":i="unordered",s="ul"}const o={style:i,meta:{},items:[]};i==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const r=a=>Array.from(a.querySelectorAll(":scope > li")).map(l=>{const c=l.querySelector(`:scope > ${s}`),u=c?r(c):[];return{content:l.innerHTML??"",meta:{},items:u}});return o.items=r(e),o}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset",`item ${e-1}`),this.data.meta.start=e}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e}enterPressed(e){var t;const i=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||i===null)return;const s=((t=this.renderer)==null?void 0:t.getItemContent(i).trim().length)===0,o=i.parentNode===this.listWrapper,r=i.previousElementSibling===null,a=this.api.blocks.getCurrentBlockIndex();if(o&&s)if(Yse(i)&&!Qse(i)){r?this.convertItemToDefaultBlock(a,!0):this.convertItemToDefaultBlock();return}else{this.splitList(i);return}else if(s){this.unshiftItem(i);return}else this.splitItem(i)}backspace(e){var t;const i=this.currentItem;if(i!==null&&sc.isCaretAtStartOfInput(i)&&((t=window.getSelection())==null?void 0:t.isCollapsed)!==!1){if(e.stopPropagation(),i.parentNode===this.listWrapper&&i.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(i)}}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)}unshiftItem(e){if(!e.parentNode||!tr(e.parentNode))return;const t=e.parentNode.closest(`.${Tn.item}`);if(!t)return;let i=wo(e);if(e.parentElement===null)return;const s=wm(e);s!==null&&(i===null&&(i=this.renderer.renderWrapper(!1)),s.forEach(o=>{i.appendChild(o)}),e.appendChild(i)),t.after(e),na(e,!1),_m(t)}splitList(e){const t=As(e),i=this.block,s=this.api.blocks.getCurrentBlockIndex();if(t.length!==0){const l=t[0];this.unshiftItem(l),na(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(s);return}const o=wm(e);if(o===null)return;const r=this.renderer.renderWrapper(!0);o.forEach(l=>{r.appendChild(l)});const a=this.save(r);a.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(i?.name,a,this.config,s+1),this.convertItemToDefaultBlock(s+1),r.remove()}splitItem(e){const[t,i]=sc.getCaretNodeAndOffset();if(t===null)return;const s=Bd(e);let o;s===null?o="":o=sc.getContenteditableSlice(s,t,i,"right",!0);const r=wo(e),a=this.renderItem(o);e?.after(a),r&&a.appendChild(r),na(a)}mergeItemWithPrevious(e){const t=e.previousElementSibling,i=e.parentNode;if(i===null||!tr(i))return;const s=i.closest(`.${Tn.item}`);if(!t&&!s||t&&!tr(t))return;let o;if(t){const d=As(t,!1);d.length!==0&&d.length!==0?o=d[d.length-1]:o=t}else o=s;const r=this.renderer.getItemContent(e);if(!o)return;na(o,!1);const a=Bd(o);if(a===null)return;a.insertAdjacentHTML("beforeend",r);const l=As(e);if(l.length===0){e.remove(),_m(o);return}const c=t||s,u=wo(c)??this.renderer.renderWrapper(!1);t?l.forEach(d=>{u.appendChild(d)}):l.forEach(d=>{u.prepend(d)}),wo(c)===null&&o.appendChild(u),e.remove()}addTab(e){var t;e.stopPropagation(),e.preventDefault();const i=this.currentItem;if(!i)return;if(((t=this.config)==null?void 0:t.maxLevel)!==void 0){const r=this.currentItemLevel;if(r!==null&&r===this.config.maxLevel)return}const s=i.previousSibling;if(s===null||!tr(s))return;const o=wo(s);if(o)o.appendChild(i),As(i).forEach(r=>{o.appendChild(r)});else{const r=this.renderer.renderWrapper(!1);r.appendChild(i),As(i).forEach(a=>{r.appendChild(a)}),s.appendChild(r)}_m(i),na(i,!1)}convertItemToDefaultBlock(e,t){let i;const s=this.currentItem,o=s!==null?this.renderer.getItemContent(s):"";t===!0&&this.api.blocks.delete(),e!==void 0?i=this.api.blocks.insert(void 0,{text:o},void 0,e):i=this.api.blocks.insert(),s?.remove(),this.api.caret.setToBlock(i,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const t=As(e);if(t.length!==0){const r=t[0];this.unshiftItem(r),na(e)}const i=wm(e),s=this.api.blocks.getCurrentBlockIndex(),o=i===null;this.convertItemToDefaultBlock(s,o)}renderItem(e,t){const i=t??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof Y3:return this.renderer.renderItem(e,i);case this.renderer instanceof Q3:return this.renderer.renderItem(e,i);default:return this.renderer.renderItem(e,i)}}appendItems(e,t){e.forEach(i=>{var s;const o=this.renderItem(i.content,i.meta);if(t.appendChild(o),i.items.length){const r=(s=this.renderer)==null?void 0:s.renderWrapper(!1);this.appendItems(i.items,r),o.appendChild(r)}})}}const ia={wrapper:`${Jn}-start-with-field`,input:`${Jn}-start-with-field__input`,startWithElementWrapperInvalid:`${Jn}-start-with-field--invalid`};function eoe(n,{value:e,placeholder:t,attributes:i,sanitize:s}){const o=ht.make("div",ia.wrapper),r=ht.make("input",ia.input,{placeholder:t,tabIndex:-1,value:e});for(const a in i)r.setAttribute(a,i[a]);return o.appendChild(r),r.addEventListener("input",()=>{s!==void 0&&(r.value=s(r.value));const a=r.checkValidity();!a&&!o.classList.contains(ia.startWithElementWrapperInvalid)&&o.classList.add(ia.startWithElementWrapperInvalid),a&&o.classList.contains(ia.startWithElementWrapperInvalid)&&o.classList.remove(ia.startWithElementWrapperInvalid),a&&n(r.value)}),o}const Ml=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),gC=new Map([["numeric",pie],["lower-roman",mie],["upper-roman",gie],["lower-alpha",vie],["upper-alpha",bie]]);function toe(n){return n.replace(/\D+/g,"")}function noe(n){return typeof n.items[0]=="string"}function ioe(n){return!("meta"in n)}function soe(n){return typeof n.items[0]!="string"&&"text"in n.items[0]&&"checked"in n.items[0]&&typeof n.items[0].text=="string"&&typeof n.items[0].checked=="boolean"}function ooe(n){const e=[];return noe(n)?(n.items.forEach(t=>{e.push({content:t,meta:{},items:[]})}),{style:n.style,meta:{},items:e}):soe(n)?(n.items.forEach(t=>{e.push({content:t.text,meta:{checked:t.checked},items:[]})}),{style:"checklist",meta:{},items:e}):ioe(n)?{style:n.style,meta:{},items:n.items}:structuredClone(n)}class Mh{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:hC,title:"Unordered List",data:{style:"unordered"}},{icon:fC,title:"Ordered List",data:{style:"ordered"}},{icon:dC,title:"Checklist",data:{style:"checklist"}}]}static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>Mh.joinRecursive(e),import:(e,t)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:t?.defaultStyle!==void 0?t.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){var t;this.data.style=e,this.changeTabulatorByStyle();const i=this.list.render();(t=this.listElement)==null||t.replaceWith(i),this.listElement=i}constructor({data:e,config:t,api:i,readOnly:s,block:o}){var r;this.api=i,this.readOnly=s,this.config=t,this.block=o,this.defaultListStyle=((r=this.config)==null?void 0:r.defaultStyle)||"unordered",this.defaultCounterTypes=this.config.counterTypes||Array.from(Ml.values());const a={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?ooe(e):a,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()}static joinRecursive(e){return e.items.map(t=>`${t.content} ${Mh.joinRecursive(t)}`).join("")}render(){return this.listElement=this.list.render(),this.listElement}save(){return this.data=this.list.save(),this.data}merge(e){this.list.merge(e)}renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:hC,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:fC,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:dC,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const t=eoe(o=>this.changeStartWith(Number(o)),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:o=>toe(o)}),i=[{label:this.api.i18n.t("Start with"),icon:wie,children:{items:[{element:t,type:"html"}]}}],s={label:this.api.i18n.t("Counter type"),icon:gC.get(this.data.meta.counterType),children:{items:[]}};Ml.forEach((o,r)=>{const a=Ml.get(r);this.defaultCounterTypes.includes(a)&&s.children.items.push({title:this.api.i18n.t(r),icon:gC.get(a),isActive:this.data.meta.counterType===Ml.get(r),closeOnActivate:!0,onActivate:()=>{this.changeCounters(Ml.get(r))}})}),s.children.items.length>1&&i.push(s),e.push({type:"separator"},...i)}return e}onPaste(e){const{tagName:t}=e.detail.data;switch(t){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}pasteHandler(e){return this.list.pasteHandler(e)}changeCounters(e){var t;(t=this.list)==null||t.changeCounters(e),this.data.meta.counterType=e}changeStartWith(e){var t;(t=this.list)==null||t.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new ym({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new Y3(this.readOnly,this.config));break;case"unordered":this.list=new ym({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new Q3(this.readOnly,this.config));break;case"checklist":this.list=new ym({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new Xt(this.readOnly,this.config));break}}}const roe={__name:"Editorjs",props:{modelValue:{type:[Object,String],default:null},placeholder:String,readOnly:Boolean},emits:["update:modelValue"],setup(n,{emit:e}){const t=X(null),i=n,s=e;let o,r=!1;function a(){if(i.modelValue){if(typeof i.modelValue=="string"){o.blocks.renderFromHTML(i.modelValue);return}o.render(i.modelValue)}}function l(c,u){i.readOnly||(r=!0,o.save().then(d=>{console.log(u,"Saving completed: ",d),s("update:modelValue",d)}).catch(d=>{console.log(u,"Saving failed: ",d)}).finally(()=>{r=!1}))}return Ct(()=>{o=new hie({holder:t.value,placeholder:i.placeholder,inlineToolbar:["bold","italic","link"],tools:{list:Mh},readOnly:i.readOnly,minHeight:"auto",data:i.modelValue,onReady:a,onChange:l})}),In(()=>i.modelValue,()=>{r||a()}),Rr(()=>{}),(c,u)=>(O(),M("div",{class:"editorjs",ref_key:"htmlelement",ref:t},null,512))}},aoe=Object.freeze(Object.defineProperty({__proto__:null,default:roe},Symbol.toStringTag,{value:"Module"})),cn=sT("useErrorsStore",()=>{const n=X(null);return{errors:n,setErrors:t=>{n.value=t}}}),loe={class:"w-full bg-base-200/40 rounded-lg p-2"},coe={class:"flex items-center gap-x-2 w-full"},uoe={key:0,class:"label text-sm w-36 hidden sm:block"},doe={class:"w-full"},hoe={key:0,class:"text-red-500 text-xs ms-32 mt-2 inline-block"},foe={__name:"Field",props:{name:String,label:String},setup(n){const e=cn();return(t,i)=>(O(),M("div",loe,[m("label",coe,[n.label?(O(),M("span",uoe,te(n.label),1)):ae("",!0),m("div",doe,[x1(t.$slots,"default")])]),pe(e).errors&&pe(e).errors[n.name]?(O(),M("span",hoe,te(pe(e).errors[n.name][0]),1)):ae("",!0)]))}},poe=Object.freeze(Object.defineProperty({__proto__:null,default:foe},Symbol.toStringTag,{value:"Module"})),moe=["placeholder"],goe={__name:"Input",props:el({name:String,label:String,placeholder:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=cn(),t=tl(n,"modelValue");return(i,s)=>{const o=we("UiField");return O(),$n(o,{name:n.name,label:n.label},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),class:rt(["input w-full",{"input-error":pe(e).errors&&pe(e).errors[n.name]}]),placeholder:n.placeholder,type:"text"},null,10,moe),[[Vt,t.value]])]),_:1},8,["name","label"])}}},boe=Object.freeze(Object.defineProperty({__proto__:null,default:goe},Symbol.toStringTag,{value:"Module"})),voe={class:"w-full mt-1 flex items-center gap-2 flex-wrap"},woe=["value"],_oe={class:"capitalize text-xs lg:block hidden"},yoe={key:0,class:"text-xs text-gray-400 leading-2 p-1"},koe={__name:"PickColor",props:el(["name","options","themeOptions","options","label","placeholder","validationErrors","help","ltr","female"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=tl(n,"modelValue");return(t,i)=>{const s=we("UiField");return O(),M(Me,null,[i[1]||(i[1]=m("div",{class:"bg-slate-200 hover:bg-slate-100 border-slate-300 bg-gray-200 hover:bg-gray-100 border-gray-300 bg-zinc-200 hover:bg-zinc-100 border-zinc-300 bg-neutral-200 hover:bg-neutral-100 border-neutral-300 bg-stone-200 hover:bg-stone-100 border-stone-300 bg-red-200 hover:bg-red-100 border-red-300 bg-orange-200 hover:bg-orange-100 border-orange-300 bg-amber-200 hover:bg-amber-100 border-amber-300 bg-yellow-200 hover:bg-yellow-100 border-yellow-300 bg-lime-200 hover:bg-lime-100 border-lime-300 bg-green-200 hover:bg-green-100 border-green-300 bg-emerald-200 hover:bg-emerald-100 border-emerald-300 bg-teal-200 hover:bg-teal-100 border-teal-300 bg-cyan-200 hover:bg-cyan-100 border-cyan-300 bg-sky-200 hover:bg-sky-100 border-sky-300 bg-blue-200 hover:bg-blue-100 border-blue-300 bg-indigo-200 hover:bg-indigo-100 border-indigo-300 bg-violet-200 hover:bg-violet-100 border-violet-300 bg-purple-200 hover:bg-purple-100 border-purple-300 bg-fuchsia-200 hover:bg-fuchsia-100 border-fuchsia-300 bg-pink-200 hover:bg-pink-100 border-pink-300 bg-rose-200 hover:bg-rose-100 border-rose-300"},null,-1)),V(s,{label:n.label,name:n.name},{default:Le(()=>[m("div",voe,[(O(!0),M(Me,null,jt(n.options,(o,r)=>(O(),M("label",{class:rt(["input radio-input radio-input-sm w-fit cursor-pointer",`bg-${o}-200 hover:bg-${o}-100  border-${o}-300`]),key:r},[vt(m("input",{type:"radio",value:o,"onUpdate:modelValue":i[0]||(i[0]=a=>e.value=a),class:"radio radio-neutral radio-xs"},null,8,woe),[[ef,e.value]]),m("span",_oe,te(o),1)],2))),128)),n.help?(O(),M("div",yoe,te(n.help),1)):ae("",!0)])]),_:1},8,["label","name"])],64)}}},Coe=Object.freeze(Object.defineProperty({__proto__:null,default:koe},Symbol.toStringTag,{value:"Module"})),Eoe={class:""},xoe={for:"name",class:"block text-sm font-bold leading-5 text-gray-500 p-2 sm:w-48"},Toe={class:"w-full mt-1 flex items-center gap-2 flex-wrap"},Soe=["value","checked"],Ioe={class:"capitalize"},Aoe={key:0,class:"text-xs text-gray-400 leading-2 p-1"},Poe={__name:"RadioField",props:["modelValue","options","themeOptions","model","options","label","placeholder","validationErrors","help","ltr","female"],setup(n){return(e,t)=>(O(),M("div",Eoe,[m("label",xoe,te(n.label),1),m("div",Toe,[(O(!0),M(Me,null,jt(n.options,(i,s)=>(O(),M("label",{class:rt(["input radio-input w-fit cursor-pointer",{"bg-blue-200 hover:bg-blue-200  border-blue-300":n.modelValue==i}]),key:s},[m("input",{type:"radio",value:i,checked:n.modelValue==i,onChange:t[0]||(t[0]=o=>e.$emit("update:modelValue",o.target.value)),class:"radio radio-neutral radio-sm"},null,40,Soe),m("span",Ioe,te(i),1)],2))),128)),n.help?(O(),M("div",Aoe,te(n.help),1)):ae("",!0)])]))}},Ooe=Object.freeze(Object.defineProperty({__proto__:null,default:Poe},Symbol.toStringTag,{value:"Module"})),Moe=["placeholder"],Roe={__name:"Textarea",props:el({name:String,label:String,placeholder:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=cn(),t=tl(n,"modelValue");return(i,s)=>{const o=we("UiField");return O(),$n(o,{name:n.name,label:n.label},{default:Le(()=>[vt(m("textarea",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),class:rt(["textarea w-full",{"input-error":pe(e).errors&&pe(e).errors[n.name]}]),placeholder:n.placeholder,rows:"3",cols:"30"},null,10,Moe),[[Vt,t.value]])]),_:1},8,["name","label"])}}},Boe=Object.freeze(Object.defineProperty({__proto__:null,default:Roe},Symbol.toStringTag,{value:"Module"})),Loe={__name:"Toggle",props:el({name:String,label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=tl(n,"modelValue");return(t,i)=>{const s=we("UiField");return O(),$n(s,{name:n.name,label:n.label},{default:Le(()=>[m("label",{class:rt(["toggle toggle-lg",{"toggle-primary":e.value,"toggle-secondary":!e.value}])},[vt(m("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=o=>e.value=o)},null,512),[[eu,e.value]]),i[1]||(i[1]=m("svg",{"aria-label":"enabled",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},[m("path",{d:"M18 6 6 18"}),m("path",{d:"m6 6 12 12"})],-1)),i[2]||(i[2]=m("svg",{"aria-label":"disabled",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[m("g",{"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":"4",fill:"none",stroke:"currentColor"},[m("path",{d:"M20 6 9 17l-5-5"})])],-1))],2)]),_:1},8,["name","label"])}}},Noe=Object.freeze(Object.defineProperty({__proto__:null,default:Loe},Symbol.toStringTag,{value:"Module"})),Voe={for:"upload_avatar",class:"shrink-0 cursor-pointer"},Doe=["src"],Foe={key:0,class:"btn btn-xs mt-2"},rP={__name:"UploadAvatar",props:["preview","name"],emits:["update:modelValue"],setup(n,{emit:e}){cn();const t=e,i=n,s=X(i.preview);In(()=>i.preview,r=>{if(r){const a=s.value?.startsWith("blob:");!r.startsWith("blob:")&&(a||!s.value||s.value==="")&&(s.value=r)}else(!s.value||s.value.startsWith("blob:"))&&(s.value="")});const o=r=>{r.target.files[0]&&(s.value=URL.createObjectURL(r.target.files[0]),t("update:modelValue",r.target.files[0]))};return(r,a)=>{const l=we("UiField");return O(),$n(l,{class:"block cursor-pointer",for:"upload_avatar",name:n.name},{default:Le(()=>[m("label",Voe,[m("img",{id:"preview_img",class:"size-20 object-cover rounded-xl",src:s.value,alt:"Current profile photo"},null,8,Doe),s.value?(O(),M("span",Foe,"   ")):ae("",!0)]),m("input",{type:"file",onChange:o,class:"sr-only",id:"upload_avatar"},null,32)]),_:1},8,["name"])}}},$oe=Object.freeze(Object.defineProperty({__proto__:null,default:rP},Symbol.toStringTag,{value:"Module"})),Uoe={class:"space-y-2"},Hoe={key:0,class:"relative"},joe=["src"],zoe={key:1,class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors"},Woe={class:"mt-2"},qoe=["for"],Goe={class:"text-sm text-gray-600"},Koe=["id"],Xoe={key:2,class:"flex items-center gap-2 text-sm text-gray-600"},sp={__name:"UploadImage",props:{label:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:"  "},preview:{type:String,default:""},name:{type:String,required:!0},modelId:{type:[String,Number,null],required:!1},mediaCollection:{type:String,required:!0,default:"portfolio"}},emits:["update:modelValue","uploaded","update:removed","upload-start","upload-end"],setup(n,{emit:e}){const t=cn(),i=e,s=n,o=it(()=>`upload_image_${s.name.replace(/[^a-zA-Z0-9]/g,"_")}`),r=X(!1),a=X(s.preview),l=async u=>{const d=u.target.files[0];if(d){if(d.size>5*1024*1024){t.setErrors({[s.name]:["       5 "]});return}if(!d.type.startsWith("image/")){t.setErrors({[s.name]:["    "]});return}r.value=!0,i("upload-start");try{const h=new FormData;h.append("file",d),h.append("modelType","block"),h.append("mediaCollection",s.mediaCollection),h.append("modelId",s.modelId);const f=await He.post("/admin/upload-image",h,{headers:{"Content-Type":"multipart/form-data"}});f.data.success&&(i("update:modelValue",f.data.url),a.value=URL.createObjectURL(d))}catch(h){console.error("Upload error:",h),t.setErrors({[s.name]:["    "]})}finally{r.value=!1,i("upload-end")}}},c=()=>{a.value=null,i("update:modelValue",null),i("update:removed",!0)};return In(()=>s.preview,u=>{if(!u){const d=document.getElementById(o.value);d&&(d.value="")}}),(u,d)=>{const h=we("UiField");return O(),M("div",Uoe,[V(h,{name:n.name,label:n.label},{default:Le(()=>[a.value?(O(),M("div",Hoe,[m("img",{src:a.value,alt:"",class:"w-full min-h-32 max-h-56 object-cover rounded-lg border border-gray-200"},null,8,joe),m("button",{onClick:c,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors"},[...d[0]||(d[0]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(O(),M("div",zoe,[d[2]||(d[2]=m("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[m("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),m("div",Woe,[m("label",{for:o.value,class:"cursor-pointer"},[m("span",Goe,te(n.placeholder),1),m("input",{id:o.value,type:"file",onChange:l,class:"sr-only",accept:"image/*"},null,40,Koe)],8,qoe),d[1]||(d[1]=m("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG, GIF  5MB",-1))])])),r.value?(O(),M("div",Xoe,[...d[3]||(d[3]=[m("span",{class:"loading loading-spinner loading-sm"},null,-1),m("span",null,"  ...",-1)])])):ae("",!0)]),_:1},8,["name","label"])])}}},Zoe=Object.freeze(Object.defineProperty({__proto__:null,default:sp},Symbol.toStringTag,{value:"Module"}));/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const ma=typeof document<"u";function aP(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Joe(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&aP(n.default)}const Qe=Object.assign;function km(n,e){const t={};for(const i in e){const s=e[i];t[i]=Zi(s)?s.map(n):n(s)}return t}const oc=()=>{},Zi=Array.isArray;function bC(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}const lP=/#/g,Yoe=/&/g,Qoe=/\//g,ere=/=/g,tre=/\?/g,cP=/\+/g,nre=/%5B/g,ire=/%5D/g,uP=/%5E/g,sre=/%60/g,dP=/%7B/g,ore=/%7C/g,hP=/%7D/g,rre=/%20/g;function Yv(n){return n==null?"":encodeURI(""+n).replace(ore,"|").replace(nre,"[").replace(ire,"]")}function are(n){return Yv(n).replace(dP,"{").replace(hP,"}").replace(uP,"^")}function Jg(n){return Yv(n).replace(cP,"%2B").replace(rre,"+").replace(lP,"%23").replace(Yoe,"%26").replace(sre,"`").replace(dP,"{").replace(hP,"}").replace(uP,"^")}function lre(n){return Jg(n).replace(ere,"%3D")}function cre(n){return Yv(n).replace(lP,"%23").replace(tre,"%3F")}function ure(n){return cre(n).replace(Qoe,"%2F")}function qc(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const dre=/\/$/,hre=n=>n.replace(dre,"");function Cm(n,e,t="/"){let i,s={},o="",r="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(i=e.slice(0,l),o=e.slice(l,a>0?a:e.length),s=n(o.slice(1))),a>=0&&(i=i||e.slice(0,a),r=e.slice(a,e.length)),i=gre(i??e,t),{fullPath:i+o+r,path:i,query:s,hash:qc(r)}}function fre(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function vC(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function pre(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&Ga(e.matched[i],t.matched[s])&&fP(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ga(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function fP(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!mre(n[t],e[t]))return!1;return!0}function mre(n,e){return Zi(n)?wC(n,e):Zi(e)?wC(e,n):n===e}function wC(n,e){return Zi(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function gre(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let o=t.length-1,r,a;for(r=0;r<i.length;r++)if(a=i[r],a!==".")if(a==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+i.slice(r).join("/")}const co={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Yg=(function(n){return n.pop="pop",n.push="push",n})({}),Em=(function(n){return n.back="back",n.forward="forward",n.unknown="",n})({});function bre(n){if(!n)if(ma){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),hre(n)}const vre=/^[^#]+#/;function wre(n,e){return n.replace(vre,"#")+e}function _re(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const op=()=>({left:window.scrollX,top:window.scrollY});function yre(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=_re(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function _C(n,e){return(history.state?history.state.position-e:-1)+n}const Qg=new Map;function kre(n,e){Qg.set(n,e)}function Cre(n){const e=Qg.get(n);return Qg.delete(n),e}function Ere(n){return typeof n=="string"||n&&typeof n=="object"}function pP(n){return typeof n=="string"||typeof n=="symbol"}let Rt=(function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n})({});const mP=Symbol("");Rt.MATCHER_NOT_FOUND+"",Rt.NAVIGATION_GUARD_REDIRECT+"",Rt.NAVIGATION_ABORTED+"",Rt.NAVIGATION_CANCELLED+"",Rt.NAVIGATION_DUPLICATED+"";function Ka(n,e){return Qe(new Error,{type:n,[mP]:!0},e)}function xs(n,e){return n instanceof Error&&mP in n&&(e==null||!!(n.type&e))}const xre=["params","query","hash"];function Tre(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of xre)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}function Sre(n){const e={};if(n===""||n==="?")return e;const t=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<t.length;++i){const s=t[i].replace(cP," "),o=s.indexOf("="),r=qc(o<0?s:s.slice(0,o)),a=o<0?null:qc(s.slice(o+1));if(r in e){let l=e[r];Zi(l)||(l=e[r]=[l]),l.push(a)}else e[r]=a}return e}function yC(n){let e="";for(let t in n){const i=n[t];if(t=lre(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Zi(i)?i.map(s=>s&&Jg(s)):[i&&Jg(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function Ire(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Zi(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const Are=Symbol(""),kC=Symbol(""),rp=Symbol(""),Qv=Symbol(""),e1=Symbol("");function Rl(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Eo(n,e,t,i,s,o=r=>r()){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(Ka(Rt.NAVIGATION_ABORTED,{from:t,to:e})):h instanceof Error?l(h):Ere(h)?l(Ka(Rt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(r&&i.enterCallbacks[s]===r&&typeof h=="function"&&r.push(h),a())},u=o(()=>n.call(i&&i.instances[s],e,t,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function xm(n,e,t,i,s=o=>o()){const o=[];for(const r of n)for(const a in r.components){let l=r.components[a];if(!(e!=="beforeRouteEnter"&&!r.instances[a]))if(aP(l)){const c=(l.__vccOpts||l)[e];c&&o.push(Eo(c,t,i,r,a,s))}else{let c=l();o.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${r.path}"`);const d=Joe(u)?u.default:u;r.mods[a]=u,r.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Eo(h,t,i,r,a,s)()}))}}return o}function Pre(n,e){const t=[],i=[],s=[],o=Math.max(e.matched.length,n.matched.length);for(let r=0;r<o;r++){const a=e.matched[r];a&&(n.matched.find(c=>Ga(c,a))?i.push(a):t.push(a));const l=n.matched[r];l&&(e.matched.find(c=>Ga(c,l))||s.push(l))}return[t,i,s]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ore=()=>location.protocol+"//"+location.host;function gP(n,e){const{pathname:t,search:i,hash:s}=e,o=n.indexOf("#");if(o>-1){let r=s.includes(n.slice(o))?n.slice(o).length:1,a=s.slice(r);return a[0]!=="/"&&(a="/"+a),vC(a,"")}return vC(t,n)+i+s}function Mre(n,e,t,i){let s=[],o=[],r=null;const a=({state:h})=>{const f=gP(n,location),p=t.value,g=e.value;let y=0;if(h){if(t.value=f,e.value=h,r&&r===p){r=null;return}y=g?h.position-g.position:0}else i(f);s.forEach(k=>{k(t.value,p,{delta:y,type:Yg.pop,direction:y?y>0?Em.forward:Em.back:Em.unknown})})};function l(){r=t.value}function c(h){s.push(h);const f=()=>{const p=s.indexOf(h);p>-1&&s.splice(p,1)};return o.push(f),f}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(Qe({},h.state,{scroll:op()}),"")}}function d(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function CC(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?op():null}}function Rre(n){const{history:e,location:t}=window,i={value:gP(n,t)},s={value:e.state};s.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const d=n.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:Ore()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(f){console.error(f),t[u?"replace":"assign"](h)}}function r(l,c){o(l,Qe({},e.state,CC(s.value.back,l,s.value.forward,!0),c,{position:s.value.position}),!0),i.value=l}function a(l,c){const u=Qe({},s.value,e.state,{forward:l,scroll:op()});o(u.current,u,!0),o(l,Qe({},CC(i.value,l,null),{position:u.position+1},c),!1),i.value=l}return{location:i,state:s,push:a,replace:r}}function Bre(n){n=bre(n);const e=Rre(n),t=Mre(n,e.state,e.location,e.replace);function i(o,r=!0){r||t.pauseListeners(),history.go(o)}const s=Qe({location:"",base:n,go:i,createHref:wre.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let cr=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n})({});var Kt=(function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n})(Kt||{});const Lre={type:cr.Static,value:""},Nre=/[a-zA-Z0-9_]/;function Vre(n){if(!n)return[[]];if(n==="/")return[[Lre]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=Kt.Static,i=t;const s=[];let o;function r(){o&&s.push(o),o=[]}let a=0,l,c="",u="";function d(){c&&(t===Kt.Static?o.push({type:cr.Static,value:c}):t===Kt.Param||t===Kt.ParamRegExp||t===Kt.ParamRegExpEnd?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:cr.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==Kt.ParamRegExp){i=t,t=Kt.EscapeNext;continue}switch(t){case Kt.Static:l==="/"?(c&&d(),r()):l===":"?(d(),t=Kt.Param):h();break;case Kt.EscapeNext:h(),t=i;break;case Kt.Param:l==="("?t=Kt.ParamRegExp:Nre.test(l)?h():(d(),t=Kt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Kt.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=Kt.ParamRegExpEnd:u+=l;break;case Kt.ParamRegExpEnd:d(),t=Kt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===Kt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),r(),s}const EC="[^/]+?",Dre={sensitive:!1,strict:!1,start:!0,end:!0};var Bn=(function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n})(Bn||{});const Fre=/[.+*?^${}()[\]/\\]/g;function $re(n,e){const t=Qe({},Dre,e),i=[];let s=t.start?"^":"";const o=[];for(const c of n){const u=c.length?[]:[Bn.Root];t.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=Bn.Segment+(t.sensitive?Bn.BonusCaseSensitive:0);if(h.type===cr.Static)d||(s+="/"),s+=h.value.replace(Fre,"\\$&"),f+=Bn.Static;else if(h.type===cr.Param){const{value:p,repeatable:g,optional:y,regexp:k}=h;o.push({name:p,repeatable:g,optional:y});const v=k||EC;if(v!==EC){f+=Bn.BonusCustomRegExp;try{`${v}`}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+w.message)}}let b=g?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;d||(b=y&&c.length<2?`(?:/${b})`:"/"+b),y&&(b+="?"),s+=b,f+=Bn.Dynamic,y&&(f+=Bn.BonusOptional),g&&(f+=Bn.BonusRepeatable),v===".*"&&(f+=Bn.BonusWildcard)}u.push(f)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=Bn.BonusStrict}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const r=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(r),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=o[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===cr.Static)u+=f.value;else if(f.type===cr.Param){const{value:p,repeatable:g,optional:y}=f,k=p in c?c[p]:"";if(Zi(k)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=Zi(k)?k.join("/"):k;if(!v)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=v}}return u||"/"}return{re:r,score:i,keys:o,parse:a,stringify:l}}function Ure(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===Bn.Static+Bn.Segment?-1:1:n.length>e.length?e.length===1&&e[0]===Bn.Static+Bn.Segment?1:-1:0}function bP(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const o=Ure(i[t],s[t]);if(o)return o;t++}if(Math.abs(s.length-i.length)===1){if(xC(i))return 1;if(xC(s))return-1}return s.length-i.length}function xC(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const Hre={strict:!1,end:!0,sensitive:!1};function jre(n,e,t){const i=$re(Vre(n.path),t),s=Qe(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function zre(n,e){const t=[],i=new Map;e=bC(Hre,e);function s(d){return i.get(d)}function o(d,h,f){const p=!f,g=SC(d);g.aliasOf=f&&f.record;const y=bC(e,d),k=[g];if("alias"in d){const w=typeof d.alias=="string"?[d.alias]:d.alias;for(const C of w)k.push(SC(Qe({},g,{components:f?f.record.components:g.components,path:C,aliasOf:f?f.record:g})))}let v,b;for(const w of k){const{path:C}=w;if(h&&C[0]!=="/"){const E=h.record.path,I=E[E.length-1]==="/"?"":"/";w.path=h.record.path+(C&&I+C)}if(v=jre(w,h,y),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),p&&d.name&&!IC(v)&&r(d.name)),vP(v)&&l(v),g.children){const E=g.children;for(let I=0;I<E.length;I++)o(E[I],v,f&&f.children[I])}f=f||v}return b?()=>{r(b)}:oc}function r(d){if(pP(d)){const h=i.get(d);h&&(i.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(r),h.alias.forEach(r))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&i.delete(d.record.name),d.children.forEach(r),d.alias.forEach(r))}}function a(){return t}function l(d){const h=Gre(d,t);t.splice(h,0,d),d.record.name&&!IC(d)&&i.set(d.record.name,d)}function c(d,h){let f,p={},g,y;if("name"in d&&d.name){if(f=i.get(d.name),!f)throw Ka(Rt.MATCHER_NOT_FOUND,{location:d});y=f.record.name,p=Qe(TC(h.params,f.keys.filter(b=>!b.optional).concat(f.parent?f.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&TC(d.params,f.keys.map(b=>b.name))),g=f.stringify(p)}else if(d.path!=null)g=d.path,f=t.find(b=>b.re.test(g)),f&&(p=f.parse(g),y=f.record.name);else{if(f=h.name?i.get(h.name):t.find(b=>b.re.test(h.path)),!f)throw Ka(Rt.MATCHER_NOT_FOUND,{location:d,currentLocation:h});y=f.record.name,p=Qe({},h.params,d.params),g=f.stringify(p)}const k=[];let v=f;for(;v;)k.unshift(v.record),v=v.parent;return{name:y,path:g,params:p,matched:k,meta:qre(k)}}n.forEach(d=>o(d));function u(){t.length=0,i.clear()}return{addRoute:o,resolve:c,removeRoute:r,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function TC(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function SC(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:Wre(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Wre(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function IC(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function qre(n){return n.reduce((e,t)=>Qe(e,t.meta),{})}function Gre(n,e){let t=0,i=e.length;for(;t!==i;){const o=t+i>>1;bP(n,e[o])<0?i=o:t=o+1}const s=Kre(n);return s&&(i=e.lastIndexOf(s,i-1)),i}function Kre(n){let e=n;for(;e=e.parent;)if(vP(e)&&bP(n,e)===0)return e}function vP({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function AC(n){const e=Qn(rp),t=Qn(Qv),i=it(()=>{const l=pe(n.to);return e.resolve(l)}),s=it(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(Ga.bind(null,u));if(h>-1)return h;const f=PC(l[c-2]);return c>1&&PC(u)===f&&d[d.length-1].path!==f?d.findIndex(Ga.bind(null,l[c-2])):h}),o=it(()=>s.value>-1&&Yre(t.params,i.value.params)),r=it(()=>s.value>-1&&s.value===t.matched.length-1&&fP(t.params,i.value.params));function a(l={}){if(Jre(l)){const c=e[pe(n.replace)?"replace":"push"](pe(n.to)).catch(oc);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:it(()=>i.value.href),isActive:o,isExactActive:r,navigate:a}}function Xre(n){return n.length===1?n[0]:n}const Zre=Qa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:AC,setup(n,{slots:e}){const t=Za(AC(n)),{options:i}=Qn(rp),s=it(()=>({[OC(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[OC(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&Xre(e.default(t));return n.custom?o:Yh("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},o)}}}),wP=Zre;function Jre(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Yre(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!Zi(s)||s.length!==i.length||i.some((o,r)=>o!==s[r]))return!1}return!0}function PC(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const OC=(n,e,t)=>n??e??t,Qre=Qa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=Qn(e1),s=it(()=>n.route||i.value),o=Qn(kC,0),r=it(()=>{let c=pe(o);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=it(()=>s.value.matched[r.value]);Wl(kC,it(()=>r.value+1)),Wl(Are,a),Wl(e1,s);const l=X();return In(()=>[l.value,a.value,n.name],([c,u,d],[h,f,p])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Ga(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,d=a.value,h=d&&d.components[u];if(!h)return MC(t.default,{Component:h,route:c});const f=d.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=Yh(h,Qe({},p,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return MC(t.default,{Component:y,route:c})||y}}});function MC(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const eae=Qre;function tae(n){const e=zre(n.routes,n),t=n.parseQuery||Sre,i=n.stringifyQuery||yC,s=n.history,o=Rl(),r=Rl(),a=Rl(),l=p1(co);let c=co;ma&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=km.bind(null,$=>""+$),d=km.bind(null,ure),h=km.bind(null,qc);function f($,ce){let ie,de;return pP($)?(ie=e.getRecordMatcher($),de=ce):de=$,e.addRoute(de,ie)}function p($){const ce=e.getRecordMatcher($);ce&&e.removeRoute(ce)}function g(){return e.getRoutes().map($=>$.record)}function y($){return!!e.getRecordMatcher($)}function k($,ce){if(ce=Qe({},ce||l.value),typeof $=="string"){const A=Cm(t,$,ce.path),N=e.resolve({path:A.path},ce),W=s.createHref(A.fullPath);return Qe(A,N,{params:h(N.params),hash:qc(A.hash),redirectedFrom:void 0,href:W})}let ie;if($.path!=null)ie=Qe({},$,{path:Cm(t,$.path,ce.path).path});else{const A=Qe({},$.params);for(const N in A)A[N]==null&&delete A[N];ie=Qe({},$,{params:d(A)}),ce.params=d(ce.params)}const de=e.resolve(ie,ce),Se=$.hash||"";de.params=u(h(de.params));const Ye=fre(i,Qe({},$,{hash:are(Se),path:de.path})),T=s.createHref(Ye);return Qe({fullPath:Ye,hash:Se,query:i===yC?Ire($.query):$.query||{}},de,{redirectedFrom:void 0,href:T})}function v($){return typeof $=="string"?Cm(t,$,l.value.path):Qe({},$)}function b($,ce){if(c!==$)return Ka(Rt.NAVIGATION_CANCELLED,{from:ce,to:$})}function w($){return I($)}function C($){return w(Qe(v($),{replace:!0}))}function E($,ce){const ie=$.matched[$.matched.length-1];if(ie&&ie.redirect){const{redirect:de}=ie;let Se=typeof de=="function"?de($,ce):de;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=v(Se):{path:Se},Se.params={}),Qe({query:$.query,hash:$.hash,params:Se.path!=null?{}:$.params},Se)}}function I($,ce){const ie=c=k($),de=l.value,Se=$.state,Ye=$.force,T=$.replace===!0,A=E(ie,de);if(A)return I(Qe(v(A),{state:typeof A=="object"?Qe({},Se,A.state):Se,force:Ye,replace:T}),ce||ie);const N=ie;N.redirectedFrom=ce;let W;return!Ye&&pre(i,de,ie)&&(W=Ka(Rt.NAVIGATION_DUPLICATED,{to:N,from:de}),Et(de,de,!0,!1)),(W?Promise.resolve(W):S(N,de)).catch(U=>xs(U)?xs(U,Rt.NAVIGATION_GUARD_REDIRECT)?U:zt(U):Y(U,N,de)).then(U=>{if(U){if(xs(U,Rt.NAVIGATION_GUARD_REDIRECT))return I(Qe({replace:T},v(U.to),{state:typeof U.to=="object"?Qe({},Se,U.to.state):Se,force:Ye}),ce||N)}else U=B(N,de,!0,T,Se);return R(N,de,U),U})}function x($,ce){const ie=b($,ce);return ie?Promise.reject(ie):Promise.resolve()}function _($){const ce=Be.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext($):$()}function S($,ce){let ie;const[de,Se,Ye]=Pre($,ce);ie=xm(de.reverse(),"beforeRouteLeave",$,ce);for(const A of de)A.leaveGuards.forEach(N=>{ie.push(Eo(N,$,ce))});const T=x.bind(null,$,ce);return ie.push(T),xt(ie).then(()=>{ie=[];for(const A of o.list())ie.push(Eo(A,$,ce));return ie.push(T),xt(ie)}).then(()=>{ie=xm(Se,"beforeRouteUpdate",$,ce);for(const A of Se)A.updateGuards.forEach(N=>{ie.push(Eo(N,$,ce))});return ie.push(T),xt(ie)}).then(()=>{ie=[];for(const A of Ye)if(A.beforeEnter)if(Zi(A.beforeEnter))for(const N of A.beforeEnter)ie.push(Eo(N,$,ce));else ie.push(Eo(A.beforeEnter,$,ce));return ie.push(T),xt(ie)}).then(()=>($.matched.forEach(A=>A.enterCallbacks={}),ie=xm(Ye,"beforeRouteEnter",$,ce,_),ie.push(T),xt(ie))).then(()=>{ie=[];for(const A of r.list())ie.push(Eo(A,$,ce));return ie.push(T),xt(ie)}).catch(A=>xs(A,Rt.NAVIGATION_CANCELLED)?A:Promise.reject(A))}function R($,ce,ie){a.list().forEach(de=>_(()=>de($,ce,ie)))}function B($,ce,ie,de,Se){const Ye=b($,ce);if(Ye)return Ye;const T=ce===co,A=ma?history.state:{};ie&&(de||T?s.replace($.fullPath,Qe({scroll:T&&A&&A.scroll},Se)):s.push($.fullPath,Se)),l.value=$,Et($,ce,ie,T),zt()}let F;function ee(){F||(F=s.listen(($,ce,ie)=>{if(!mt.listening)return;const de=k($),Se=E(de,mt.currentRoute.value);if(Se){I(Qe(Se,{replace:!0,force:!0}),de).catch(oc);return}c=de;const Ye=l.value;ma&&kre(_C(Ye.fullPath,ie.delta),op()),S(de,Ye).catch(T=>xs(T,Rt.NAVIGATION_ABORTED|Rt.NAVIGATION_CANCELLED)?T:xs(T,Rt.NAVIGATION_GUARD_REDIRECT)?(I(Qe(v(T.to),{force:!0}),de).then(A=>{xs(A,Rt.NAVIGATION_ABORTED|Rt.NAVIGATION_DUPLICATED)&&!ie.delta&&ie.type===Yg.pop&&s.go(-1,!1)}).catch(oc),Promise.reject()):(ie.delta&&s.go(-ie.delta,!1),Y(T,de,Ye))).then(T=>{T=T||B(de,Ye,!1),T&&(ie.delta&&!xs(T,Rt.NAVIGATION_CANCELLED)?s.go(-ie.delta,!1):ie.type===Yg.pop&&xs(T,Rt.NAVIGATION_ABORTED|Rt.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),R(de,Ye,T)}).catch(oc)}))}let K=Rl(),G=Rl(),oe;function Y($,ce,ie){zt($);const de=G.list();return de.length?de.forEach(Se=>Se($,ce,ie)):console.error($),Promise.reject($)}function je(){return oe&&l.value!==co?Promise.resolve():new Promise(($,ce)=>{K.add([$,ce])})}function zt($){return oe||(oe=!$,ee(),K.list().forEach(([ce,ie])=>$?ie($):ce()),K.reset()),$}function Et($,ce,ie,de){const{scrollBehavior:Se}=n;if(!ma||!Se)return Promise.resolve();const Ye=!ie&&Cre(_C($.fullPath,0))||(de||!ie)&&history.state&&history.state.scroll||null;return Ya().then(()=>Se($,ce,Ye)).then(T=>T&&yre(T)).catch(T=>Y(T,$,ce))}const Ot=$=>s.go($);let Z;const Be=new Set,mt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:y,getRoutes:g,resolve:k,options:n,push:w,replace:C,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:o.add,beforeResolve:r.add,afterEach:a.add,onError:G.add,isReady:je,install($){$.component("RouterLink",wP),$.component("RouterView",eae),$.config.globalProperties.$router=mt,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>pe(l)}),ma&&!Z&&l.value===co&&(Z=!0,w(s.location).catch(de=>{}));const ce={};for(const de in co)Object.defineProperty(ce,de,{get:()=>l.value[de],enumerable:!0});$.provide(rp,mt),$.provide(Qv,f1(ce)),$.provide(e1,l);const ie=$.unmount;Be.add($),$.unmount=function(){Be.delete($),Be.size<1&&(c=co,F&&F(),F=null,l.value=co,Z=!1,oe=!1),ie()}}};function xt($){return $.reduce((ce,ie)=>ce.then(()=>_(ie)),Promise.resolve())}return mt}function _P(){return Qn(rp)}function yP(n){return Qn(Qv)}const nae={key:0,class:"max-w-7xl mx-auto py-4 flex items-center gap-4 px-1 xl:px-0 mt-4"},iae=["src"],sae={class:""},oae={class:"text-2xl font-bold"},rae={class:"text-sm text-gray-500"},aae={class:"lg:flex max-w-7xl mx-auto items-start px-1 xl:px-0 mt-3"},lae={class:"flex lg:flex-col lg:w-80 min-w-48 gap-px overflow-hidden mx-auto justify-between max-w-7xl overflow-x-auto text-start"},cae={class:"bg-white truncate lg:rounded-lg rounded-b-lg lg:-mr-1.5 p-6 min-h-[60vh] w-full relative"},uae={class:"hidden lg:block lg:px-5"},dae={class:"relative mx-auto border-gray-800 dark:border-gray-800 bg-gray-800 border-[10px] rounded-[2.5rem] h-[700px] w-[420px] [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",dir:"ltr"},hae={class:"h-[672px] overflow-hidden w-[398px] bg-white overflow-y-scroll rounded-[2rem] dark:bg-gray-800"},fae=["src"],pae={__name:"Home",setup(n){const e=Si();return(t,i)=>{const s=we("RouterLink"),o=we("RouterView");return O(),M("div",null,[pe(e)?.tenant?(O(),M("div",nae,[m("img",{src:pe(e)?.tenant?.logo,alt:"avatar",class:"size-16 rounded-2xl"},null,8,iae),m("div",sae,[m("h1",oae,te(pe(e)?.tenant?.name),1),m("p",rae,te(pe(e)?.tenant?.handle),1)])])):ae("",!0),m("div",aae,[m("nav",lae,[V(s,{to:{name:"home"},exactActiveClass:"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 flex flex-grow items-center gap-x-2 text-xs lg:rounded-s p-2.5 px-3 bg-base-100/50"},{default:Le(()=>[...i[0]||(i[0]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",fill:"none",class:"size-5",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M21 16.0909V11.0975C21 6.80891 21 4.6646 19.682 3.3323C18.364 2 16.2426 2 12 2C7.75736 2 5.63604 2 4.31802 3.3323C3 4.6646 3 6.80891 3 11.0975V16.0909C3 19.1875 3 20.7358 3.73411 21.4123C4.08421 21.735 4.52615 21.9377 4.99692 21.9915C5.98402 22.1045 7.13673 21.0849 9.44216 19.0458C10.4612 18.1445 10.9708 17.6938 11.5603 17.5751C11.8506 17.5166 12.1494 17.5166 12.4397 17.5751C13.0292 17.6938 13.5388 18.1445 14.5578 19.0458C16.8633 21.0849 18.016 22.1045 19.0031 21.9915C19.4739 21.9377 19.9158 21.735 20.2659 21.4123C21 20.7358 21 19.1875 21 16.0909Z",stroke:"#1C274D","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M15 6H9",stroke:"#1C274D","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.cta"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[1]||(i[1]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",fill:"none",class:"size-5",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M6.70399 3.5H17.5C18.9045 3.5 19.6067 3.5 20.1111 3.83706C20.3295 3.98298 20.517 4.17048 20.6629 4.38886C21 4.89331 21 5.59554 21 7C21 8.40446 21 9.10669 20.6629 9.61114C20.517 9.82952 20.3295 10.017 20.1111 10.1629C19.6067 10.5 18.9045 10.5 17.5 10.5H6.70399C6.04642 10.5 5.71764 10.5 5.41593 10.4018C5.28282 10.3585 5.15463 10.3013 5.03346 10.2312C4.75882 10.0723 4.53915 9.8277 4.09981 9.33844C3.24911 8.39107 2.82376 7.91738 2.72136 7.36381C2.67687 7.12331 2.67687 6.87669 2.72136 6.63619C2.82376 6.08262 3.24911 5.60894 4.09981 4.66156C4.53915 4.1723 4.75882 3.92767 5.03346 3.76879C5.15463 3.6987 5.28282 3.64152 5.41593 3.5982C5.71764 3.5 6.04642 3.5 6.70399 3.5Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M17.296 12.5H6.5C5.09554 12.5 4.39331 12.5 3.88886 12.8371C3.67048 12.983 3.48298 13.1705 3.33706 13.3889C3 13.8933 3 14.5955 3 16C3 17.4045 3 18.1067 3.33706 18.6111C3.48298 18.8295 3.67048 19.017 3.88886 19.1629C4.39331 19.5 5.09554 19.5 6.5 19.5H17.296C17.9536 19.5 18.2824 19.5 18.5841 19.4018C18.7172 19.3585 18.8454 19.3013 18.9665 19.2312C19.2412 19.0723 19.4608 18.8277 19.9002 18.3384C20.7509 17.3911 21.1762 16.9174 21.2786 16.3638C21.3231 16.1233 21.3231 15.8767 21.2786 15.6362C21.1762 15.0826 20.7509 14.6089 19.9002 13.6616C19.4608 13.1723 19.2412 12.9277 18.9665 12.7688C18.8454 12.6987 18.7172 12.6415 18.5841 12.5982C18.2824 12.5 17.9536 12.5 17.296 12.5Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M12.75 2C12.75 1.58579 12.4142 1.25 12 1.25C11.5858 1.25 11.25 1.58579 11.25 2H12.75ZM12.75 11C12.75 10.5858 12.4142 10.25 12 10.25C11.5858 10.25 11.25 10.5858 11.25 11H12.75ZM12.75 20C12.75 19.5858 12.4142 19.25 12 19.25C11.5858 19.25 11.25 19.5858 11.25 20H12.75ZM14 22.75C14.4142 22.75 14.75 22.4142 14.75 22C14.75 21.5858 14.4142 21.25 14 21.25V22.75ZM10 21.25C9.58579 21.25 9.25 21.5858 9.25 22C9.25 22.4142 9.58579 22.75 10 22.75V21.25ZM11.25 2V3H12.75V2H11.25ZM11.25 11V12H12.75V11H11.25ZM11.25 20V22H12.75V20H11.25ZM14 21.25H10V22.75H14V21.25Z",fill:"#1C274C"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.links"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[2]||(i[2]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M11.3357 5.47875L7.36344 9.00968C5.79482 10.404 5.0105 11.1012 5.0105 11.9993C5.0105 12.8975 5.79481 13.5946 7.36344 14.989L11.3357 18.5199C12.0517 19.1563 12.4098 19.4746 12.7049 19.342C13.0001 19.2095 13.0001 18.7305 13.0001 17.7725V15.4279C16.6001 15.4279 20.5001 17.1422 22.0001 19.9993C22.0001 10.8565 16.6668 8.57075 13.0001 8.57075V6.22616C13.0001 5.26817 13.0001 4.78917 12.7049 4.65662C12.4098 4.52407 12.0517 4.8423 11.3357 5.47875Z",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),be(),m("path",{opacity:"0.5",d:"M8.46129 4.5L3.24509 9.34362C2.45098 10.081 1.99976 11.1158 1.99976 12.1994C1.99976 13.3418 2.50097 14.4266 3.37087 15.1671L8.46129 19.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.about"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[3]||(i[3]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M22 22L2 22",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M21 22V6C21 4.11438 21 3.17157 20.4143 2.58579C19.8285 2 18.8857 2 17 2H15C13.1144 2 12.1716 2 11.5858 2.58579C11.1143 3.05733 11.0223 3.76022 11.0044 5",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M15 22V9C15 7.11438 15 6.17157 14.4142 5.58579C13.8284 5 12.8856 5 11 5H7C5.11438 5 4.17157 5 3.58579 5.58579C3 6.17157 3 7.11438 3 9V22",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M9 22V19",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M6 8H12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M6 11H12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M6 14H12",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.features"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[4]||(i[4]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",fill:"none",class:"size-6",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M11.8114 6.7267C12.8247 4.9089 13.3314 4 14.0889 4C14.8464 4 15.353 4.9089 16.3663 6.7267L16.6285 7.19699C16.9164 7.71355 17.0604 7.97183 17.2849 8.14225C17.5094 8.31266 17.789 8.37592 18.3482 8.50244L18.8572 8.61762C20.825 9.06284 21.8089 9.28545 22.0429 10.0382C22.277 10.7909 21.6063 11.5753 20.2648 13.1439L19.9177 13.5498C19.5365 13.9955 19.3459 14.2184 19.2602 14.4942C19.1744 14.7699 19.2032 15.0673 19.2609 15.662L19.3134 16.2035C19.5162 18.2965 19.6176 19.343 19.0047 19.8082C18.3919 20.2734 17.4707 19.8492 15.6283 19.0009L15.1517 18.7815C14.6281 18.5404 14.3664 18.4199 14.0889 18.4199C13.8114 18.4199 13.5496 18.5404 13.0261 18.7815L12.5494 19.0009C10.707 19.8492 9.78581 20.2734 9.17299 19.8082C8.56016 19.343 8.66157 18.2965 8.86438 16.2035L8.91685 15.662C8.97449 15.0673 9.0033 14.7699 8.91756 14.4942C8.83181 14.2184 8.64121 13.9955 8.26 13.5498L7.91295 13.1439C6.57147 11.5753 5.90073 10.7909 6.1348 10.0382C6.36888 9.28545 7.35275 9.06284 9.3205 8.61762L9.82958 8.50244C10.3887 8.37592 10.6683 8.31266 10.8928 8.14225C11.1173 7.97183 11.2613 7.71355 11.5492 7.19699L11.8114 6.7267Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M2.08887 16C3.20445 15.121 4.68639 14.7971 6.08887 15.1257",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M2.08887 10.5C3.08887 10 3.37862 10.0605 4.08887 10",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M2 5.60867L2.20816 5.48676C4.41383 4.19506 6.75032 3.84687 8.95304 4.48161L9.16092 4.54152",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.faq"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[5]||(i[5]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5",d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M10.125 8.875C10.125 7.83947 10.9645 7 12 7C13.0355 7 13.875 7.83947 13.875 8.875C13.875 9.56245 13.505 10.1635 12.9534 10.4899C12.478 10.7711 12 11.1977 12 11.75V13",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("circle",{cx:"12",cy:"16",r:"1",fill:"#1C274C"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.reviews"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[6]||(i[6]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",fill:"none",class:"size-5",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5",d:"M9.99088 16.5L9.01504 16.9741C7.0341 17.5217 6.04363 17.7955 5.50972 17.2192C4.97582 16.6429 5.25206 15.5982 5.80455 13.5087L5.94749 12.9682C6.10449 12.3744 6.18299 12.0775 6.14352 11.7831C6.10404 11.4887 5.95106 11.2301 5.6451 10.713L5.36655 10.2421C4.28985 8.4221 3.75151 7.51211 4.11106 6.78804C4.4706 6.06397 5.48992 6.00535 7.52857 5.88812L8.05599 5.85779C8.63531 5.82448 8.92497 5.80782 9.17756 5.67305C9.43014 5.53828 9.61705 5.30066 9.99088 4.82542L10.3312 4.39274C11.6467 2.72034 12.3045 1.88413 13.0606 2.01293C13.8167 2.14173 14.1705 3.15023 14.8779 5.16723L15.0609 5.68905C15.262 6.26222 15.3625 6.5488 15.5581 6.75991C15.7537 6.97102 16.0222 7.08275 16.5592 7.30622L17.048 7.50967C18.9378 8.29605 19.8826 8.68925 19.9904 9.49292C20.0823 10.1786 19.513 10.7756 18.3493 11.7831",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M15.2516 10.689C14.265 9.50847 13.7716 8.91821 13.2045 9.00913C12.6375 9.10004 12.3722 9.81193 11.8416 11.2357L11.7043 11.604C11.5535 12.0086 11.4781 12.2109 11.3314 12.3599C11.1848 12.509 10.9834 12.5878 10.5806 12.7456L10.214 12.8892C8.79667 13.4443 8.08803 13.7218 8.00721 14.2891C7.92639 14.8564 8.52692 15.3378 9.72797 16.3004L10.0387 16.5495C10.38 16.8231 10.5507 16.9599 10.6494 17.1471C10.7482 17.3343 10.7639 17.5508 10.7954 17.9837L10.824 18.3779C10.9347 19.9015 10.9901 20.6633 11.5072 20.923C12.0244 21.1827 12.6608 20.7683 13.9337 19.9395L14.263 19.7251C14.6247 19.4896 14.8056 19.3718 15.0133 19.3385C15.2211 19.3052 15.4322 19.3601 15.8543 19.47L16.2387 19.57C17.7244 19.9565 18.4673 20.1498 18.8677 19.743C19.2681 19.3362 19.061 18.5987 18.6466 17.1238L18.5394 16.7422C18.4216 16.3231 18.3628 16.1135 18.3924 15.9057C18.422 15.6979 18.5367 15.5154 18.7662 15.1503L18.9751 14.818C19.7826 13.5332 20.1864 12.8909 19.9167 12.3798C19.647 11.8687 18.8826 11.8273 17.3536 11.7446L16.958 11.7231C16.5235 11.6996 16.3063 11.6879 16.1168 11.5927C15.9274 11.4976 15.7872 11.3299 15.5068 10.9944L15.2516 10.689Z",stroke:"#1C274C","stroke-width":"1.5"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.team"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[7]||(i[7]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M20 21.5L19.3505 15.9795C19.1506 14.2804 17.7107 13 16 13H8C6.28928 13 4.84936 14.2804 4.64948 15.9795L4 21.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"}),be(),m("path",{opacity:"0.5",d:"M8 13V18C8 19.8856 8 20.8284 8.58579 21.4142C9.17157 22 10.1144 22 12 22C13.8856 22 14.8284 22 15.4142 21.4142C16 20.8284 16 19.8856 16 18V13",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("circle",{cx:"12",cy:"6",r:"4",stroke:"#1C274C","stroke-width":"1.5"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.services"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[8]||(i[8]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M2 14C2 10.2288 2 8.34315 3.17157 7.17157C4.34315 6 6.22876 6 10 6H14C17.7712 6 19.6569 6 20.8284 7.17157C22 8.34315 22 10.2288 22 14C22 17.7712 22 19.6569 20.8284 20.8284C19.6569 22 17.7712 22 14 22H10C6.22876 22 4.34315 22 3.17157 20.8284C2 19.6569 2 17.7712 2 14Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M16 6C16 4.11438 16 3.17157 15.4142 2.58579C14.8284 2 13.8856 2 12 2C10.1144 2 9.17157 2 8.58579 2.58579C8 3.17157 8 4.11438 8 6",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M12 17.3333C13.1046 17.3333 14 16.5871 14 15.6667C14 14.7462 13.1046 14 12 14C10.8954 14 10 13.2538 10 12.3333C10 11.4129 10.8954 10.6667 12 10.6667M12 17.3333C10.8954 17.3333 10 16.5871 10 15.6667M12 17.3333V18M12 10V10.6667M12 10.6667C13.1046 10.6667 14 11.4129 14 12.3333",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"  ",-1)])]),_:1}),V(s,{to:{name:"blocks.agreement"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[9]||(i[9]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",fill:"none",class:"size-5",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{opacity:"0.5",d:"M3 10.4167C3 7.21907 3 5.62028 3.37752 5.08241C3.75503 4.54454 5.25832 4.02996 8.26491 3.00079L8.83772 2.80472C10.405 2.26824 11.1886 2 12 2C12.8114 2 13.595 2.26824 15.1623 2.80472L15.7351 3.00079C18.7417 4.02996 20.245 4.54454 20.6225 5.08241C21 5.62028 21 7.21907 21 10.4167C21 10.8996 21 11.4234 21 11.9914C21 17.6294 16.761 20.3655 14.1014 21.5273C13.38 21.8424 13.0193 22 12 22C10.9807 22 10.62 21.8424 9.89856 21.5273C7.23896 20.3655 3 17.6294 3 11.9914C3 11.4234 3 10.8996 3 10.4167Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{d:"M11.5 16H12.5C13.0523 16 13.5 15.5523 13.5 15V13.5987C14.3967 13.0799 15 12.1104 15 11C15 9.34315 13.6569 8 12 8C10.3431 8 9 9.34315 9 11C9 12.1104 9.6033 13.0799 10.5 13.5987V15C10.5 15.5523 10.9477 16 11.5 16Z",stroke:"#1C274C","stroke-width":"1.5","stroke-linejoin":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1}),V(s,{to:{name:"blocks.portfolio"},"active-class":"bg-white hover:bg-white",class:"cursor-pointer lg:w-full w-fit shrink-0 hover:bg-base-100 lg:rounded-s p-2.5 px-3 flex flex-grow items-center gap-x-2 bg-base-100/50"},{default:Le(()=>[...i[10]||(i[10]=[m("span",{class:"text-lg inline-block -mt-1"},[m("svg",{viewBox:"0 0 24 24",class:"size-5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),m("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),m("g",{id:"SVGRepo_iconCarrier"},[m("path",{d:"M2.38351 13.793C1.93748 10.6294 1.71447 9.04765 2.66232 8.02383C3.61017 7 5.29758 7 8.67239 7H15.3276C18.7024 7 20.3898 7 21.3377 8.02383C22.2855 9.04765 22.0625 10.6294 21.6165 13.793L21.1935 16.793C20.8437 19.2739 20.6689 20.5143 19.7717 21.2572C18.8745 22 17.5512 22 14.9046 22H9.09536C6.44881 22 5.12553 22 4.22834 21.2572C3.33115 20.5143 3.15626 19.2739 2.80648 16.793L2.38351 13.793Z",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M19.5617 7C19.7904 5.69523 18.7863 4.5 17.4617 4.5H6.53788C5.21323 4.5 4.20922 5.69523 4.43784 7M17.4999 4.5C17.5283 4.24092 17.5425 4.11135 17.5427 4.00435C17.545 2.98072 16.7739 2.12064 15.7561 2.01142C15.6497 2 15.5194 2 15.2588 2H8.74099C8.48035 2 8.35002 2 8.24362 2.01142C7.22584 2.12064 6.45481 2.98072 6.45704 4.00434C6.45727 4.11135 6.47146 4.2409 6.49983 4.5",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("circle",{opacity:"0.5",cx:"16.5",cy:"11.5",r:"1.5",stroke:"#1C274C","stroke-width":"1.5"}),be(),m("path",{opacity:"0.5",d:"M19.9999 20L17.1157 17.8514C16.1856 17.1586 14.8004 17.0896 13.7766 17.6851L13.5098 17.8403C12.7984 18.2542 11.8304 18.1848 11.2156 17.6758L7.37738 14.4989C6.6113 13.8648 5.38245 13.8309 4.5671 14.4214L3.24316 15.3803",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round"})])])],-1),m("span",{class:"text-sm text-base-500"},"   ",-1)])]),_:1})]),m("div",cae,[(O(),$n(o,{key:t.$route.name}))]),m("div",uae,[m("div",dae,[m("div",hae,[m("iframe",{id:"preview-iframe",src:pe(e)?.tenant?.preview_url,class:"w-full min-h-screen"},null,8,fae)])])])])])}}},mae=new Set(["link","style","script","noscript"]),gae=new Set(["title","titleTemplate","script","style","noscript"]),RC=new Set(["base","meta","link","style","script","noscript"]),bae=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),vae=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),wae=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),_ae=new Set(["templateParams","htmlAttrs","bodyAttrs"]),yae=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),kae=["name","property","http-equiv"],Cae=new Set(["viewport","description","keywords","robots"]);function kP(n){const e=n.split(":");return e.length?yae.has(e[1]):!1}function t1(n){const{props:e,tag:t}=n;if(vae.has(t))return t;if(t==="link"&&e.rel==="canonical")return"canonical";if(e.charset)return"charset";if(n.tag==="meta"){for(const i of kae)if(e[i]!==void 0){const s=e[i],o=s.includes(":"),r=Cae.has(s),l=!(o||r)&&n.key?`:key:${n.key}`:"";return`${t}:${s}${l}`}}if(n.key)return`${t}:key:${n.key}`;if(e.id)return`${t}:id:${e.id}`;if(gae.has(t)){const i=n.textContent||n.innerHTML;if(i)return`${t}:content:${i}`}}function BC(n){const e=n._h||n._d;if(e)return e;const t=n.textContent||n.innerHTML;return t||`${n.tag}:${Object.entries(n.props).map(([i,s])=>`${i}:${String(s)}`).join(",")}`}function Rh(n,e,t){typeof n==="function"&&(!t||t!=="titleTemplate"&&!(t[0]==="o"&&t[1]==="n"))&&(n=n());let s;if(e&&(s=e(t,n)),Array.isArray(s))return s.map(o=>Rh(o,e));if(s?.constructor===Object){const o={};for(const r of Object.keys(s))o[r]=Rh(s[r],e,r);return o}return s}function Eae(n,e){const t=n==="style"?new Map:new Set;function i(s){const o=s.trim();if(o)if(n==="style"){const[r,...a]=o.split(":").map(l=>l.trim());r&&a.length&&t.set(r,a.join(":"))}else o.split(" ").filter(Boolean).forEach(r=>t.add(r))}return typeof e=="string"?n==="style"?e.split(";").forEach(i):i(e):Array.isArray(e)?e.forEach(s=>i(s)):e&&typeof e=="object"&&Object.entries(e).forEach(([s,o])=>{o&&o!=="false"&&(n==="style"?t.set(s.trim(),o):i(s))}),t}function CP(n,e){return n.props=n.props||{},e?n.tag==="templateParams"?(n.props=e,n):(Object.entries(e).forEach(([t,i])=>{if(i===null){n.props[t]=null;return}if(t==="class"||t==="style"){n.props[t]=Eae(t,i);return}if(wae.has(t)){if(["textContent","innerHTML"].includes(t)&&typeof i=="object"){let r=e.type;if(e.type||(r="application/json"),!r?.endsWith("json")&&r!=="speculationrules")return;e.type=r,n.props.type=r,n[t]=JSON.stringify(i)}else n[t]=i;return}const s=String(i),o=t.startsWith("data-");s==="true"||s===""?n.props[t]=o?s:!0:!i&&o&&s==="false"?n.props[t]="false":i!==void 0&&(n.props[t]=i)}),n):n}function xae(n,e){const t=typeof e=="object"&&typeof e!="function"?e:{[n==="script"||n==="noscript"||n==="style"?"innerHTML":"textContent"]:e},i=CP({tag:n,props:{}},t);return i.key&&mae.has(i.tag)&&(i.props["data-hid"]=i._h=i.key),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(s=>({...i,props:{...i.props,content:s}})):i}function Tae(n,e){if(!n)return[];typeof n=="function"&&(n=n());const t=(s,o)=>{for(let r=0;r<e.length;r++)o=e[r](s,o);return o};n=t(void 0,n);const i=[];return n=Rh(n,t),Object.entries(n||{}).forEach(([s,o])=>{if(o!==void 0)for(const r of Array.isArray(o)?o:[o])i.push(xae(s,r))}),i.flat()}const LC=(n,e)=>n._w===e._w?n._p-e._p:n._w-e._w,NC={base:-10,title:10},Sae={critical:-8,high:-1,low:2},VC={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},Iae=/@import/,Bl=n=>n===""||n===!0;function Aae(n,e){if(typeof e.tagPriority=="number")return e.tagPriority;let t=100;const i=Sae[e.tagPriority]||0,s=n.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:VC;if(e.tag in NC)t=NC[e.tag];else if(e.tag==="meta"){const o=e.props["http-equiv"]==="content-security-policy"?"content-security-policy":e.props.charset?"charset":e.props.name==="viewport"?"viewport":null;o&&(t=VC.meta[o])}else e.tag==="link"&&e.props.rel?t=s.link[e.props.rel]:e.tag==="script"?Bl(e.props.async)?t=s.script.async:e.props.src&&!Bl(e.props.defer)&&!Bl(e.props.async)&&e.props.type!=="module"&&!e.props.type?.endsWith("json")?t=s.script.sync:Bl(e.props.defer)&&e.props.src&&!Bl(e.props.async)&&(t=s.script.defer):e.tag==="style"&&(t=e.innerHTML&&Iae.test(e.innerHTML)?s.style.imported:s.style.sync);return(t||100)+i}function DC(n,e){const t=typeof e=="function"?e(n):e,i=t.key||String(n.plugins.size+1);n.plugins.get(i)||(n.plugins.set(i,t),n.hooks.addHooks(t.hooks||{}))}function Pae(n={}){const e=M8();e.addHooks(n.hooks||{});const t=!n.document,i=new Map,s=new Map,o=new Set,r={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:n,hooks:e,ssr:t,entries:i,headEntries(){return[...i.values()]},use:a=>DC(r,a),push(a,l){const c={...l||{}};delete c.head;const u=c._index??r._entryCount++,d={_i:u,input:a,options:c},h={_poll(f=!1){r.dirty=!0,!f&&o.add(u),e.callHook("entries:updated",r)},dispose(){i.delete(u)&&r.invalidate()},patch(f){(!c.mode||c.mode==="server"&&t||c.mode==="client"&&!t)&&(d.input=f,i.set(u,d),h._poll())}};return h.patch(a),h},async resolveTags(){const a={tagMap:new Map,tags:[],entries:[...r.entries.values()]};for(await e.callHook("entries:resolve",a);o.size;){const h=o.values().next().value;o.delete(h);const f=i.get(h);if(f){const p={tags:Tae(f.input,n.propResolvers||[]).map(g=>Object.assign(g,f.options)),entry:f};await e.callHook("entries:normalize",p),f._tags=p.tags.map((g,y)=>(g._w=Aae(r,g),g._p=(f._i<<10)+y,g._d=t1(g),g))}}let l=!1;a.entries.flatMap(h=>(h._tags||[]).map(f=>({...f,props:{...f.props}}))).sort(LC).reduce((h,f)=>{const p=String(f._d||f._p);if(!h.has(p))return h.set(p,f);const g=h.get(p);if((f?.tagDuplicateStrategy||(_ae.has(f.tag)?"merge":null)||(f.key&&f.key===g.key?"merge":null))==="merge"){const k={...g.props};Object.entries(f.props).forEach(([v,b])=>k[v]=v==="style"?new Map([...g.props.style||new Map,...b]):v==="class"?new Set([...g.props.class||new Set,...b]):b),h.set(p,{...f,props:k})}else f._p>>10===g._p>>10&&f.tag==="meta"&&kP(p)?(h.set(p,Object.assign([...Array.isArray(g)?g:[g],f],f)),l=!0):(f._w===g._w?f._p>g._p:f?._w<g?._w)&&h.set(p,f);return h},a.tagMap);const c=a.tagMap.get("title"),u=a.tagMap.get("titleTemplate");if(r._title=c?.textContent,u){const h=u?.textContent;if(r._titleTemplate=h,h){let f=typeof h=="function"?h(c?.textContent):h;typeof f=="string"&&!r.plugins.has("template-params")&&(f=f.replace("%s",c?.textContent||"")),c?f===null?a.tagMap.delete("title"):a.tagMap.set("title",{...c,textContent:f}):(u.tag="title",u.textContent=f)}}a.tags=Array.from(a.tagMap.values()),l&&(a.tags=a.tags.flat().sort(LC)),await e.callHook("tags:beforeResolve",a),await e.callHook("tags:resolve",a),await e.callHook("tags:afterResolve",a);const d=[];for(const h of a.tags){const{innerHTML:f,tag:p,props:g}=h;if(bae.has(p)&&!(Object.keys(g).length===0&&!h.innerHTML&&!h.textContent)&&!(p==="meta"&&!g.content&&!g["http-equiv"]&&!g.charset)){if(p==="script"&&f){if(g.type?.endsWith("json")){const y=typeof f=="string"?f:JSON.stringify(f);h.innerHTML=y.replace(/</g,"\\u003C")}else typeof f=="string"&&(h.innerHTML=f.replace(new RegExp(`</${p}`,"g"),`<\\/${p}`));h._d=t1(h)}d.push(h)}}return d},invalidate(){for(const a of i.values())o.add(a._i);r.dirty=!0,e.callHook("entries:updated",r)}};return(n?.plugins||[]).forEach(a=>DC(r,a)),r.hooks.callHook("init",r),n.init?.forEach(a=>a&&r.push(a)),r}const Oae=(n,e)=>kt(e)?kE(e):e,EP="usehead";function Mae(n){return{install(t){t.config.globalProperties.$unhead=n,t.config.globalProperties.$head=n,t.provide(EP,n)}}.install}function Rae(){if(I1()){const n=Qn(EP);if(!n)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return n}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function ew(n,e={}){const t=e.head||Rae();return t.ssr?t.push(n||{},e):Bae(t,n,e)}function Bae(n,e,t={}){const i=X(!1);let s;return fx(()=>{const r=i.value?{}:Rh(e,Oae);s?s.patch(r):s=n.push(r,t)}),jn()&&(Jc(()=>{s.dispose()}),y1(()=>{i.value=!0}),_1(()=>{i.value=!1})),s}const Lae={class:"max-w-7xl mx-auto p-6"},Nae={class:"flex items-center justify-between mb-6"},Vae={class:"flex items-center gap-4"},Dae={class:"text-sm text-gray-500"},Fae={key:0,class:"flex justify-center items-center py-12"},$ae={key:1,class:"bg-white rounded-xl border border-gray-200 overflow-hidden"},Uae={class:"overflow-x-auto"},Hae={class:"table w-full"},jae={class:"font-medium text-gray-900"},zae={class:"text-sm text-gray-500"},Wae={key:0,class:"font-medium text-gray-900"},qae={key:1,class:"text-gray-500 text-sm"},Gae={class:"font-medium text-gray-900"},Kae={key:0,class:"text-sm text-gray-500"},Xae={class:"text-sm text-gray-900"},Zae={class:"text-xs text-gray-500"},Jae={class:"flex gap-2"},Yae=["onClick"],Qae=["onClick"],ele={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-gray-200"},tle={class:"text-sm text-gray-700"},nle={class:"flex gap-2"},ile=["disabled"],sle=["disabled"],ole={key:2,class:"text-center py-12"},rle={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ale={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},lle={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cle={class:"space-y-3"},ule={class:"flex-1"},dle=["onUpdate:modelValue"],hle={class:"w-24"},fle=["onUpdate:modelValue"],ple={class:"w-32"},mle=["onUpdate:modelValue"],gle=["onClick"],ble={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vle={class:"flex gap-3 pt-4"},wle=["disabled"],_le={key:0},yle={key:1,class:"flex items-center gap-2"},kle=["disabled"],Cle={__name:"Orders",setup(n){ew({title:" ",meta:[{name:"description",content:"   "}]});const e=X([]),t=X(!1),i=X(!1),s=X(!1),o=X({current_page:1,last_page:1,per_page:15,total:0,has_more:!1}),r=X({client_name:"",client_phone:"",client_email:"",items:[{name:"",quantity:1,price:0}],total:0,status:"pending",notes:""}),a=async(C=1)=>{t.value=!0;try{const E=await He.get(`/api/orders?page=${C}`);e.value=E.data.data,o.value=E.data.pagination}catch(E){console.error("Error loading orders:",E)}finally{t.value=!1}},l=_P(),c=C=>{l.push({name:"orders.detail",params:{id:C.id}})},u=async(C,E)=>{try{console.log("Update order status:",C.id,E),await a(o.value.current_page)}catch(I){console.error("Error updating order status:",I)}},d=()=>{r.value.items.push({name:"",quantity:1,price:0})},h=C=>{r.value.items.length>1&&r.value.items.splice(C,1)},f=()=>{r.value.total=r.value.items.reduce((C,E)=>C+E.quantity*E.price,0)},p=()=>{i.value=!1,g()},g=()=>{r.value={client_name:"",client_phone:"",client_email:"",items:[{name:"",quantity:1,price:0}],total:0,status:"pending",notes:""}},y=async()=>{s.value=!0;try{f();const C=await He.post("/api/orders",{client_name:r.value.client_name,client_phone:r.value.client_phone,client_email:r.value.client_email,items:r.value.items,total:r.value.total,status:r.value.status,notes:r.value.notes});p(),await a(1),console.log("Order created successfully:",C.data)}catch(C){console.error("Error creating order:",C)}finally{s.value=!1}},k=C=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-red-100 text-red-800",canceled:"bg-red-100 text-red-800",expired:"bg-red-100 text-red-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",progress:"bg-yellow-100 text-yellow-800",waiting:"bg-purple-100 text-purple-800",awaiting_payment:"bg-pink-100 text-pink-800",awaiting_fulfillment:"bg-orange-100 text-orange-800",awaiting_shipment:"bg-orange-100 text-orange-800",shipped:"bg-green-100 text-green-800",partially_shipped:"bg-yellow-100 text-yellow-800",awaiting_pickup:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"})[C]||"bg-gray-100 text-gray-800",v=C=>({pending:" ",paid:"",failed:"",refunded:"",canceled:"",expired:" ",processing:" ",completed:"",progress:" ",waiting:" ",awaiting_payment:"  ",awaiting_fulfillment:"  ",awaiting_shipment:"  ",shipped:" ",partially_shipped:" ",awaiting_pickup:"  ",cancelled:""})[C]||C,b=C=>C?new Date(C).toLocaleDateString("ar-SA"):" ",w=C=>C?new Date(C).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"";return In(()=>r.value.items,()=>{f()},{deep:!0}),Ct(()=>{a()}),(C,E)=>(O(),M("div",Lae,[m("div",Nae,[E[10]||(E[10]=m("h1",{class:"text-3xl font-bold text-gray-800"},"",-1)),m("div",Vae,[m("div",Dae,"  : "+te(o.value.total),1),m("button",{onClick:E[0]||(E[0]=I=>i.value=!0),class:"btn btn-primary"},[...E[9]||(E[9]=[m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("    ",-1)])])])]),t.value?(O(),M("div",Fae,[...E[11]||(E[11]=[m("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):e.value.length>0?(O(),M("div",$ae,[m("div",Uae,[m("table",Hae,[E[12]||(E[12]=m("thead",null,[m("tr",{class:"bg-gray-50"},[m("th",{class:"text-right"}," "),m("th",{class:"text-right"},""),m("th",{class:"text-right"},""),m("th",{class:"text-right"},""),m("th",{class:"text-right"}," "),m("th",{class:"text-right"},"")])],-1)),m("tbody",null,[(O(!0),M(Me,null,jt(e.value,I=>(O(),M("tr",{key:I.id,class:"hover:bg-gray-50"},[m("td",null,[m("div",jae," #"+te(I.number),1),m("div",zae,te(I.hashed_number),1)]),m("td",null,[I.client?(O(),M("div",Wae,te(I.client.name),1)):(O(),M("div",qae,"    "))]),m("td",null,[m("div",Gae," $"+te(I.total||"0.00"),1),I.items&&I.items.length>0?(O(),M("div",Kae,te(I.items.length)+"  ",1)):ae("",!0)]),m("td",null,[m("span",{class:rt(["inline-flex px-2 py-1 text-xs font-medium rounded-full",k(I.status)])},te(v(I.status)),3)]),m("td",null,[m("div",Xae,te(b(I.created_at)),1),m("div",Zae,te(w(I.created_at)),1)]),m("td",null,[m("div",Jae,[m("button",{onClick:x=>c(I),class:"btn btn-sm btn-outline"},"  ",8,Yae),I.status==="pending"?(O(),M("button",{key:0,onClick:x=>u(I,"processing"),class:"btn btn-sm btn-primary"},"  ",8,Qae)):ae("",!0)])])]))),128))])])]),o.value.last_page>1?(O(),M("div",ele,[m("div",tle,"  "+te((o.value.current_page-1)*o.value.per_page+1)+"  "+te(Math.min(o.value.current_page*o.value.per_page,o.value.total))+"  "+te(o.value.total)+"  ",1),m("div",nle,[m("button",{onClick:E[1]||(E[1]=I=>a(o.value.current_page-1)),disabled:o.value.current_page<=1,class:"btn btn-sm btn-outline"},"  ",8,ile),m("button",{onClick:E[2]||(E[2]=I=>a(o.value.current_page+1)),disabled:!o.value.has_more,class:"btn btn-sm btn-outline"},"  ",8,sle)])])):ae("",!0)])):(O(),M("div",ole,[...E[13]||(E[13]=[m("div",{class:"text-gray-400 text-6xl mb-4"},"",-1),m("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"  ",-1),m("p",{class:"text-gray-500"},"     ",-1)])])),i.value?(O(),M("div",rle,[m("div",ale,[m("div",{class:"flex items-center justify-between mb-6"},[E[15]||(E[15]=m("h2",{class:"text-2xl font-bold text-gray-800"},"  ",-1)),m("button",{onClick:p,class:"text-gray-400 hover:text-gray-600"},[...E[14]||(E[14]=[m("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),m("form",{onSubmit:Gt(y,["prevent"]),class:"space-y-4"},[m("div",lle,[m("div",null,[E[16]||(E[16]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),vt(m("input",{"onUpdate:modelValue":E[3]||(E[3]=I=>r.value.client_name=I),type:"text",class:"input w-full",placeholder:" ",required:""},null,512),[[Vt,r.value.client_name]])]),m("div",null,[E[17]||(E[17]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),vt(m("input",{"onUpdate:modelValue":E[4]||(E[4]=I=>r.value.client_phone=I),type:"tel",class:"input w-full",placeholder:" "},null,512),[[Vt,r.value.client_phone]])])]),m("div",null,[E[18]||(E[18]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),vt(m("input",{"onUpdate:modelValue":E[5]||(E[5]=I=>r.value.client_email=I),type:"email",class:"input w-full",placeholder:" "},null,512),[[Vt,r.value.client_email]])]),m("div",null,[E[19]||(E[19]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),m("div",cle,[(O(!0),M(Me,null,jt(r.value.items,(I,x)=>(O(),M("div",{key:x,class:"flex gap-3 items-end"},[m("div",ule,[vt(m("input",{"onUpdate:modelValue":_=>I.name=_,type:"text",class:"input w-full",placeholder:" ",required:""},null,8,dle),[[Vt,I.name]])]),m("div",hle,[vt(m("input",{"onUpdate:modelValue":_=>I.quantity=_,type:"number",class:"input w-full",placeholder:"",min:"1",required:""},null,8,fle),[[Vt,I.quantity,void 0,{number:!0}]])]),m("div",ple,[vt(m("input",{"onUpdate:modelValue":_=>I.price=_,type:"number",step:"0.01",class:"input w-full",placeholder:"",min:"0",required:""},null,8,mle),[[Vt,I.price,void 0,{number:!0}]])]),m("button",{type:"button",onClick:_=>h(x),class:"btn btn-sm btn-outline text-red-600 hover:bg-red-50"},"  ",8,gle)]))),128))]),m("button",{type:"button",onClick:d,class:"btn btn-sm btn-outline mt-3"},"   ")]),m("div",ble,[m("div",null,[E[20]||(E[20]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),vt(m("input",{"onUpdate:modelValue":E[6]||(E[6]=I=>r.value.total=I),type:"number",step:"0.01",class:"input w-full",placeholder:"0.00",readonly:""},null,512),[[Vt,r.value.total,void 0,{number:!0}]])]),m("div",null,[E[22]||(E[22]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"   ",-1)),vt(m("select",{"onUpdate:modelValue":E[7]||(E[7]=I=>r.value.status=I),class:"select w-full"},[...E[21]||(E[21]=[m("option",{value:"pending"}," ",-1),m("option",{value:"processing"}," ",-1),m("option",{value:"completed"},"",-1),m("option",{value:"cancelled"},"",-1)])],512),[[tu,r.value.status]])])]),m("div",null,[E[23]||(E[23]=m("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),vt(m("textarea",{"onUpdate:modelValue":E[8]||(E[8]=I=>r.value.notes=I),class:"textarea w-full",rows:"3",placeholder:" ..."},null,512),[[Vt,r.value.notes]])]),m("div",vle,[m("button",{type:"submit",disabled:s.value,class:"btn btn-primary flex-1"},[s.value?ae("",!0):(O(),M("span",_le," ")),s.value?(O(),M("span",yle,[...E[24]||(E[24]=[m("span",{class:"loading loading-spinner loading-xs"},null,-1),be("  ... ",-1)])])):ae("",!0)],8,wle),m("button",{type:"button",onClick:p,disabled:s.value,class:"btn btn-outline"},"  ",8,kle)])],32)])])):ae("",!0)]))}},Ele={class:"max-w-7xl mx-auto p-6"},xle={class:"flex items-center justify-between mb-6"},Tle={class:"text-2xl font-bold text-gray-800"},Sle={class:"flex gap-2"},Ile={key:0,class:"flex justify-center items-center py-12"},Ale={key:1,class:"space-y-6"},Ple={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ole={class:"bg-white rounded-xl border border-gray-200 p-4"},Mle={class:"text-lg font-semibold"},Rle={class:"bg-white rounded-xl border border-gray-200 p-4"},Ble={class:"text-lg font-semibold"},Lle={class:"bg-white rounded-xl border border-gray-200 p-4"},Nle={class:"text-lg font-semibold"},Vle={class:"bg-white rounded-xl border border-gray-200 p-6"},Dle={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},Fle={class:"font-medium"},$le={class:"font-medium",dir:"ltr"},Ule={class:"font-medium",dir:"ltr"},Hle={class:"bg-white rounded-xl border border-gray-200 overflow-hidden"},jle={class:"overflow-x-auto"},zle={class:"table w-full"},Wle={class:"font-medium text-gray-800"},qle={key:0,class:"bg-white rounded-xl border border-gray-200 p-6"},Gle={class:"text-gray-700 whitespace-pre-wrap"},Kle={__name:"OrderDetail",setup(n){const e=yP(),t=X(!1),i=X(null),s=async()=>{t.value=!0;try{const c=await He.get(`/api/orders/${e.params.id}`);i.value=c.data.data}catch(c){console.error("Failed to load order",c)}finally{t.value=!1}},o=it(()=>{const c=i.value?.meta?.status;return{pending:" ",paid:"",failed:"",refunded:"",canceled:"",expired:" ",processing:" ",completed:"",cancelled:""}[c]||c||"-"}),r=it(()=>{const c=i.value?.meta?.status;return{pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-red-100 text-red-800",canceled:"bg-red-100 text-red-800",expired:"bg-red-100 text-red-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[c]||"bg-gray-100 text-gray-800"}),a=c=>c?new Date(c).toLocaleDateString("ar-SA"):" ",l=c=>c?new Date(c).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"";return Ct(()=>{s()}),(c,u)=>(O(),M("div",Ele,[m("div",xle,[m("h1",Tle,"  #"+te(i.value?.number||i.value?.id),1),m("div",Sle,[V(pe(wP),{to:{name:"orders"},class:"btn btn-outline"},{default:Le(()=>[...u[0]||(u[0]=[be(" ",-1)])]),_:1})])]),t.value?(O(),M("div",Ile,[...u[1]||(u[1]=[m("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):i.value?(O(),M("div",Ale,[m("div",Ple,[m("div",Ole,[u[2]||(u[2]=m("div",{class:"text-sm text-gray-500 mb-1"},"",-1)),m("div",Mle,[m("span",{class:rt(["inline-flex px-2 py-1 text-xs font-medium rounded-full",r.value])},te(o.value),3)])]),m("div",Rle,[u[3]||(u[3]=m("div",{class:"text-sm text-gray-500 mb-1"}," ",-1)),m("div",Ble,"$"+te(i.value.total||"0.00"),1)]),m("div",Lle,[u[4]||(u[4]=m("div",{class:"text-sm text-gray-500 mb-1"}," ",-1)),m("div",Nle,te(a(i.value.created_at))+" - "+te(l(i.value.created_at)),1)])]),m("div",Vle,[u[8]||(u[8]=m("h2",{class:"text-lg font-semibold text-gray-800 mb-4"}," ",-1)),m("div",Dle,[m("div",null,[u[5]||(u[5]=m("div",{class:"text-gray-500"},"",-1)),m("div",Fle,te(i.value.meta?.client_name||"-"),1)]),m("div",null,[u[6]||(u[6]=m("div",{class:"text-gray-500"},"",-1)),m("div",$le,te(i.value.meta?.client_phone||"-"),1)]),m("div",null,[u[7]||(u[7]=m("div",{class:"text-gray-500"}," ",-1)),m("div",Ule,te(i.value.meta?.client_email||"-"),1)])])]),m("div",Hle,[m("div",jle,[m("table",zle,[u[9]||(u[9]=m("thead",null,[m("tr",{class:"bg-gray-50"},[m("th",{class:"text-right"},""),m("th",{class:"text-right"},""),m("th",{class:"text-right"},""),m("th",{class:"text-right"},"")])],-1)),m("tbody",null,[(O(!0),M(Me,null,jt(i.value.items,d=>(O(),M("tr",{key:d.id},[m("td",Wle,te(d.data?.name||"-"),1),m("td",null,te(d.quantity),1),m("td",null,"$"+te(d.amount?.toFixed?d.amount.toFixed(2):d.amount),1),m("td",null,"$"+te(d.total_pre_tax?.toFixed?d.total_pre_tax.toFixed(2):d.total_pre_tax),1)]))),128))])])])]),i.value.meta?.notes?(O(),M("div",qle,[u[10]||(u[10]=m("h2",{class:"text-lg font-semibold text-gray-800 mb-2"},"",-1)),m("p",Gle,te(i.value.meta.notes),1)])):ae("",!0)])):ae("",!0)]))}},Xle={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6 flex flex-col gap-1"},Zle={class:"flex justify-end w-full mt-4"},Jle=["disabled"],Yle={key:0},Qle={key:1,class:"loading loading-spinner loading-xs"},ece={__name:"Account",setup(n){const e=Si(),t=X(!1),i=cn(),{user:s}=nf(Si()),o=X({name:"",email:"",newImage:null});Ct(()=>{o.value.name=s.value?.name||"",o.value.email=s.value?.email||""});const r=()=>{t.value=!0,i.setErrors([]);const a=new FormData;a.append("name",o.value.name),a.append("email",o.value.email),o.value.newImage&&a.append("image",o.value.newImage),He.post("/api/account",a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{t.value=!1,e.updateUser(l.data.user),o.value.newImage=null}).catch(l=>{l.response?.data?.errors?i.setErrors(l.response.data.errors):console.error(l),t.value=!1,console.error(l)})};return(a,l)=>{const c=we("UiField"),u=we("Container");return O(),$n(u,{title:"",subtitle:"   "},{default:Le(()=>[m("div",Xle,[V(c,{name:"image",label:" "},{default:Le(()=>[V(rP,{modelValue:o.value.newImage,"onUpdate:modelValue":l[0]||(l[0]=d=>o.value.newImage=d),preview:pe(s)?.image,name:"newImage"},null,8,["modelValue","preview"])]),_:1}),V(c,{name:"name",label:""},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":l[1]||(l[1]=d=>o.value.name=d),type:"text",class:"input w-full",placeholder:""},null,512),[[Vt,o.value.name]])]),_:1}),V(c,{name:"email",label:" "},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":l[2]||(l[2]=d=>o.value.email=d),type:"text",class:"input w-full",placeholder:"your@email.com",dir:"ltr"},null,512),[[Vt,o.value.email]])]),_:1}),m("div",Zle,[m("button",{onClick:r,class:"btn btn-primary",disabled:t.value},[t.value?ae("",!0):(O(),M("span",Yle,"  ")),t.value?(O(),M("span",Qle)):ae("",!0)],8,Jle)])])]),_:1})}}},tce={class:"max-w-7xl mx-auto mt-4"},nce={class:"mb-4"},ice={key:0,class:"flex justify-center items-center py-12"},sce={key:1,class:"flex gap-3 md:gap-4 overflow-x-auto py-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100"},oce=["onClick"],rce={key:0,class:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium z-10"},ace={class:"w-full h-42 bg-gray-50 rounded-lg overflow-hidden mb-3"},lce=["src","alt"],cce={class:"text-center flex items-center justify-between p-1"},uce={class:"text-xs font-semibold text-gray-800 truncate"},dce={class:"text-[10px] badge badge-sm badge-soft badge-success"},hce={class:""},fce={key:0,class:"bg-white rounded-2xl border border-gray-200 overflow-hidden"},pce={class:"p-8"},mce={class:"flex flex-col lg:flex-row gap-8 items-start"},gce={class:"flex-1"},bce={class:"flex items-center justify-between mb-2"},vce={class:"flex items-center gap-3"},wce={class:"text-2xl font-bold text-gray-800"},_ce={key:0,class:"bg-green-500 text-white text-sm px-3 py-1 rounded-full font-medium"},yce={class:"flex items-center gap-3"},kce={class:"text-lg font-bold text-green-600"},Cce=["disabled"],Ece={key:0},xce={key:1,class:"flex items-center gap-2"},Tce={class:"inline-block bg-primary-500 text-white px-3 py-1 rounded-full text-xs font-medium mb-4"},Sce={class:"text-gray-600 leading-relaxed mb-6"},Ice={class:"mb-8"},Ace={class:"space-y-2"},Pce={class:"lg:px-5"},Oce={class:"relative mx-auto border-gray-800 dark:border-gray-800 bg-gray-800 border-[10px] rounded-[2.5rem] h-[700px] w-[420px] [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",dir:"ltr"},Mce={class:"h-[672px] overflow-hidden w-[398px] bg-white overflow-y-scroll rounded-[2rem] dark:bg-gray-800"},Rce=["src"],Bce={__name:"Design",setup(n){const e=_P(),t=yP(),i=Si(),{tenant:s}=nf(i);ew({title:" ",meta:[{name:"description",content:"  "}]});const o=X([]),r=X({}),a=X(null),l=X(!1),c=X(!1),u=it(()=>s.value?.theme_id??null),d=()=>{u.value=s.value?.theme_id||null;const p=t.query.theme?parseInt(t.query.theme):null,g=p?o.value.find(y=>y.id===p):o.value[0];a.value=g,r.value=g.tenantOptions||{},t.query.theme||e.replace({query:{theme:g.id}})},h=p=>{a.value=p,e.push({query:{theme:p.id}})},f=async()=>{if(a.value){console.log(a),l.value=!0;try{const p=await He.post("/api/tenant/theme",{theme_id:a.value.id});i.updateTenant({theme_id:a.value.id}),u.value=a.value.id,console.log("Theme updated successfully:",p.data),document.getElementById("preview-iframe").contentWindow.location.reload()}catch(p){console.error("Error updating theme:",p)}finally{l.value=!1}}};return In(()=>t.query.theme,p=>{if(p){const g=o.value.find(y=>y.id===parseInt(p));g&&(a.value=g)}}),Ct(()=>{c.value=!0,He.get("/api/themes").then(p=>{o.value=p.data.data.map(g=>({id:g.id,name:g.name,category:g.category||"",price:g.price??0,description:g.description||"",preview:g.image,optionFields:g.optionFields,features:Array.isArray(g.features)?g.features:[],tenantOptions:g.tenantOptions})),d()}).catch(()=>{o.value=[],d()}).finally(()=>{c.value=!1})}),(p,g)=>{const y=we("ThemeOptionsForm");return O(),M("div",tce,[m("div",nce,[c.value?(O(),M("div",ice,[...g[1]||(g[1]=[m("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):(O(),M("div",sce,[(O(!0),M(Me,null,jt(o.value,k=>(O(),M("div",{key:k.id,onClick:v=>h(k),class:rt(["flex-none w-40 md:w-48 bg-white border-2 rounded-xl p-1 cursor-pointer transition-all duration-300 hover:border-primary-500 xhover:-translate-y-1 relative",a.value?.id===k.id?"border-primary-500 bg-primary-50":"border-gray-200"])},[u.value===k.id?(O(),M("div",rce,"   ")):ae("",!0),m("div",ace,[m("img",{src:k.preview,alt:k.name,class:"w-full h-full object-cover object-top"},null,8,lce)]),m("div",cce,[m("h3",uce,te(k.name),1),m("p",dce,[m("span",hce,te(k.price==0?"":"$"+k.price),1)])])],10,oce))),128))]))]),a.value?(O(),M("div",fce,[m("div",pce,[m("div",mce,[m("div",gce,[m("div",bce,[m("div",vce,[m("h3",wce,te(a.value.name),1),u.value===a.value.id?(O(),M("span",_ce,"   ")):ae("",!0)]),m("div",yce,[m("span",kce,te(a.value.price==0?"":"$"+a.value.price),1),m("button",{onClick:f,disabled:l.value||u.value===a.value.id,class:"btn btn-primary"},[l.value?ae("",!0):(O(),M("span",Ece,te(u.value===a.value.id?" ":"  "),1)),l.value?(O(),M("span",xce,[...g[2]||(g[2]=[m("span",{class:"loading loading-spinner loading-xs"},null,-1),be("  ... ",-1)])])):ae("",!0)],8,Cce)])]),m("span",Tce,te(a.value.category),1),m("p",Sce,te(a.value.description),1),m("div",Ice,[m("ul",Ace,[(O(!0),M(Me,null,jt(a.value.features,k=>(O(),M("li",{key:k,class:"text-gray-600 pr-6 relative"},[g[3]||(g[3]=m("span",{class:"absolute right-0 text-green-500 font-bold"},"",-1)),be(" "+te(k),1)]))),128))])]),V(y,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=k=>r.value=k),options:r.value,themeOptions:a.value.optionFields,themeId:a.value.id},null,8,["modelValue","options","themeOptions","themeId"])]),m("div",Pce,[m("div",Oce,[m("div",Mce,[m("iframe",{id:"preview-iframe",src:pe(i).tenant?.preview_url,class:"w-full min-h-screen"},null,8,Rce)])])])])])])):ae("",!0)])}}},Lce={class:"max-w-7xl mx-auto py-6 flex flex-col gap-y-4"},Nce={class:"flex items-center gap-2 bg-gray-300/50 p-1 rounded-lg"},Vce={class:"text-gray-400 text-sm w-full bg-white p-2 px-3 rounded-lg border border-gray-200",dir:"ltr"},Dce=["href"],Fce={class:"!block px-1 lg:!hidden"},$ce=["href"],Uce={class:"md:flex items-center bg-gray-50 p-2 rounded-lg","data-sentry-component":"ShareCv","data-sentry-source-file":"share-cv.tsx"},Hce={class:"grow"},jce={class:"flex flex-col md:flex-row items-center gap-2 p-2 mt-4"},zce=["href"],Wce=["href"],qce=["href"],Gce=["href"],Kce=["href"],Xce=["href"],Zce={__name:"Share",setup(n){const e=Si(),t=i=>{navigator.clipboard.writeText(i)};return(i,s)=>(O(),M("div",Lce,[s[12]||(s[12]=Jt('<div class="rounded-lg bg-blue-50 p-2 [*+&amp;]:mt-4 border border-gray-200 border-blue-300"><div class="flex items-center"><div class="flex-shrink-0 ms-2"><span><svg class="text-blue-600/50 inline-block size-6 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path><path d="M12 9h.01"></path><path d="M11 12h1v4h1"></path></svg></span></div><div class="flex w-full px-2 items-center justify-between pt-1"><div><p size="1" class="text-sm !text-blue-700">      .</p></div><div></div></div></div></div>',1)),m("div",Nce,[s[3]||(s[3]=Jt('<span><svg class="text-gray-500 inline-block size-5 ms-2 dark:text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 15l6 -6"></path><path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"></path><path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"></path></svg></span>',1)),m("div",Vce,te(pe(e)?.tenant?.site_url),1),m("button",{role:"button",class:"btn btn-soft",onClick:s[0]||(s[0]=o=>t(pe(e)?.tenant?.site_url))},[...s[1]||(s[1]=[m("span",null,[m("svg",{class:"size-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[m("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),m("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})])],-1)])]),m("a",{href:pe(e)?.tenant?.site_url,class:"btn btn-primary hidden lg:flex",target:"_blank"},[...s[2]||(s[2]=[Jt('<span><svg class="!h-5 !w-5 inline-block size-5 ltr:-ml-1 rtl:-mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"></path></svg></span>   <span><svg class="!h-5 !w-5 inline-block size-5 rtl:-ml-1 ltr:-mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7l10 10"></path><path d="M16 7l-9 0l0 9"></path></svg></span>',3)])],8,Dce)]),m("div",Fce,[m("a",{href:pe(e)?.tenant?.site_url,class:"focus-visible:ring-ring focus-visible:ring-1 text-white cursor-pointer gap-2 h-9 inline-flex w-full bg-green-500 bg-primary-600 px-4 py-2 text-sm transition-all transition-colors duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-green-600 hover:bg-primary-700 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none","icon:trailing":"arrow-up-left",target:"_blank"},[...s[4]||(s[4]=[Jt('<span><svg class="!h-5 !w-5 inline-block size-5 ltr:-ml-1 rtl:-mr-1 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"></path></svg></span>   <span><svg class="!h-5 !w-5 inline-block size-5 rtl:-ml-1 ltr:-mr-1 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7l10 10"></path><path d="M16 7l-9 0l0 9"></path></svg></span>',3)])],8,$ce)]),m("div",Uce,[m("div",Hce,[s[11]||(s[11]=m("div",{class:"me-3 font-bold ms-1 mb-6 mt-2 md:mb-0 shrink-0 text-gray-500 flex items-center text-sm grow"},[m("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 me-2","data-sentry-element":"svg","data-sentry-source-file":"share-cv.tsx"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z","data-sentry-element":"path","data-sentry-source-file":"share-cv.tsx"})]),be("   ")],-1)),m("div",jce,[m("a",{href:`https://api.whatsapp.com/send?text=${pe(e)?.tenant?.site_url}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[5]||(s[5]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-whatsapp.svg",alt:"whatsapp",class:"size-5 !text-white"},null,-1),be("  ",-1)])],8,zce),m("a",{href:`https://t.me/share/url?text=${pe(e)?.tenant?.site_url}&url=${pe(e)?.tenant?.site_url}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[6]||(s[6]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-telegram.svg",alt:"telegram",class:"size-5"},null,-1),be("  ",-1)])],8,Wce),m("a",{href:`https://x.com/intent/tweet?url=${pe(e)?.tenant?.site_url}&text=${pe(e)?.tenant?.name}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[7]||(s[7]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-x.svg",alt:"x",class:"size-5"},null,-1),be("  ",-1)])],8,qce),m("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${pe(e)?.tenant?.site_url}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[8]||(s[8]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-facebook.svg",alt:"facebook",class:"size-5"},null,-1),be("  ",-1)])],8,Gce),m("a",{href:`https://www.linkedin.com/shareArticle?mini=true&url=${pe(e)?.tenant?.site_url}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[9]||(s[9]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-linkedin.svg",alt:"linkedin",class:"size-5"},null,-1),be("   ",-1)])],8,Kce),m("a",{href:`mailto:${pe(e)?.tenant?.email}?&subject=&cc=&bcc=&body=${pe(e)?.tenant?.site_url}`,class:"focus-visible:ring-ring shadow-none focus-visible:ring-1 text-black/70 cursor-pointer gap-2 h-9 inline-flex w-full border-black/10 bg-white px-4 py-2 text-sm transition-all transition-colors border duration-300 items-center justify-center whitespace-nowrap rounded-md hover:bg-black/5 focus-visible:outline-none disabled:opacity-50 disabled:pointer-events-none lg:w-auto",target:"_blank"},[...s[10]||(s[10]=[m("img",{src:"https://broshur.test/assets/icons/social/brand-email.svg",alt:"email",class:"size-5"},null,-1),be("   ",-1)])],8,Xce)])])])]))}},Jce={class:"max-w-7xl mx-auto p-6"},Yce={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},Qce={class:"flex items-end gap-4"},eue={class:"flex-1"},tue={class:"input w-full",dir:"ltr"},nue={class:"text-gray-500 text-xs mt-1"},iue={class:"font-mono text-blue-600"},sue={class:"flex justify-end gap-3"},oue=["disabled"],rue={key:0},aue={key:1,class:"flex items-center gap-2"},lue={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},cue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uue=["disabled"],due=["disabled"],hue={class:"flex justify-end gap-3"},fue=["disabled"],pue={key:0},mue={key:1,class:"flex items-center gap-2"},gue={class:"bg-white rounded-xl border border-gray-200 p-6 mb-6"},bue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vue=["disabled"],wue=["value"],_ue={class:"flex justify-end gap-3"},yue=["disabled"],kue={key:0},Cue={key:1,class:"flex items-center gap-2"},Eue={class:"bg-gray-400/10 rounded-xl p-6"},xue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tue={class:"text-gray-900 font-medium"},Sue=["href"],Iue={class:"text-gray-900"},Aue={key:0},Pue={class:"text-gray-900"},Oue={key:1},Mue={class:"text-gray-900"},Rue={key:2},Bue={class:"text-gray-900"},Lue={key:3},Nue={class:"text-gray-900"},FC="broshur.com",Vue={__name:"Settings",setup(n){const{tenant:e}=nf(Si()),t=cn();ew({title:"",meta:[{name:"description",content:"  "}]});const i=Si(),s=X(!1),o=X(!1),r=X(!1),a=X(null),l=it(()=>({handle:e.value?.handle,country:e.value?.country||"",city:e.value?.city||"",email:e.value?.email||"",phone:e.value?.phone||""})),c=it(()=>l.value?.handle?`https://${FC}/${l.value?.handle}`:"");Ct(async()=>{try{const p=await He.get("/api/countries");a.value=p.data.data}catch(p){console.error("Error loading countries:",p)}});const u=async()=>{if(l.value.handle){s.value=!0,t.setErrors([]);try{const p=await He.post("/api/tenant/handle",{handle:l.value.handle});i.updateTenant(p.data.tenant),console.log("Handle updated successfully:",p.data)}catch(p){p.response?.data?.errors?t.setErrors(p.response.data.errors):console.error("Error updating handle:",p)}finally{s.value=!1}}},d=async()=>{o.value=!0,t.setErrors([]);try{const p=await He.post("/api/tenant/location",{country:l.value.country||null,city:l.value.city||null});i.updateTenant(p.data.tenant),console.log("Location updated successfully:",p.data)}catch(p){p.response?.data?.errors?t.setErrors(p.response.data.errors):console.error("Error updating location:",p)}finally{o.value=!1}},h=async()=>{r.value=!0,t.setErrors([]);try{const p=await He.post("/api/tenant/contact",{email:l.value.email||null,phone:l.value.phone||null});i.updateTenant(p.data.tenant),console.log("Contact information updated successfully:",p.data)}catch(p){p.response?.data?.errors?t.setErrors(p.response.data.errors):console.error("Error updating contact information:",p)}finally{r.value=!1}},f=p=>!p||!a.value?p:a.value[p]||p;return(p,g)=>{const y=we("UiField");return O(),M("div",Jce,[m("div",Yce,[g[7]||(g[7]=m("h2",{class:"text-base-content font-semibold mb-2"}," ",-1)),g[8]||(g[8]=m("p",{class:"text-gray-400 font-light mb-6 text-sm"},"    ",-1)),m("form",{onSubmit:Gt(u,["prevent"]),class:"space-y-4"},[m("div",Qce,[m("div",eue,[V(y,{name:"handle",label:" "},{default:Le(()=>[m("label",tue,[m("span",{class:"label"},"https://"+te(FC)+"/"),vt(m("input",{"onUpdate:modelValue":g[0]||(g[0]=k=>l.value.handle=k),type:"text",placeholder:"URL"},null,512),[[Vt,l.value.handle]])])]),_:1}),m("p",nue,[g[5]||(g[5]=be("  : ",-1)),m("span",iue,te(c.value),1)])])]),m("div",sue,[m("button",{type:"submit",disabled:s.value||!l.value.handle,class:"btn btn-primary"},[s.value?ae("",!0):(O(),M("span",rue,"  ")),s.value?(O(),M("span",aue,[...g[6]||(g[6]=[m("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):ae("",!0)],8,oue)])],32)]),m("div",lue,[g[10]||(g[10]=m("h2",{class:"text-base-content font-semibold mb-2"}," ",-1)),g[11]||(g[11]=m("p",{class:"text-gray-400 font-light mb-6 text-sm"},"     ",-1)),m("form",{onSubmit:Gt(h,["prevent"]),class:"space-y-4"},[m("div",cue,[V(y,{name:"email",label:" "},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":g[1]||(g[1]=k=>l.value.email=k),class:rt(["input input-bordered w-full",pe(t).errors?.email?"border-red-500":""]),placeholder:"example@email.com",disabled:r.value,dir:"ltr"},null,10,uue),[[Vt,l.value.email]])]),_:1}),V(y,{name:"phone",label:" "},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":g[2]||(g[2]=k=>l.value.phone=k),type:"text",dir:"ltr",class:rt(["input input-bordered w-full",pe(t).errors?.phone?"border-red-500":""]),placeholder:"+966xxxxxxxxx",disabled:r.value},null,10,due),[[Vt,l.value.phone]])]),_:1})]),m("div",hue,[m("button",{type:"submit",disabled:r.value,class:"btn btn-primary"},[r.value?ae("",!0):(O(),M("span",pue,"  ")),r.value?(O(),M("span",mue,[...g[9]||(g[9]=[m("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):ae("",!0)],8,fue)])],32)]),m("div",gue,[g[14]||(g[14]=m("h2",{class:"text-base-content font-semibold mb-2"}," ",-1)),g[15]||(g[15]=m("p",{class:"text-gray-400 font-light mb-6 text-sm"},"   ",-1)),m("form",{onSubmit:Gt(d,["prevent"]),class:"space-y-4"},[m("div",bue,[V(y,{name:"country",label:""},{default:Le(()=>[vt(m("select",{"onUpdate:modelValue":g[3]||(g[3]=k=>l.value.country=k),disabled:!a.value,class:"select select-bordered w-full"},[g[12]||(g[12]=m("option",{value:""}," ",-1)),(O(!0),M(Me,null,jt(a.value,(k,v)=>(O(),M("option",{key:v,value:v},te(k),9,wue))),128))],8,vue),[[tu,l.value.country]])]),_:1}),V(y,{name:"city",label:""},{default:Le(()=>[vt(m("input",{"onUpdate:modelValue":g[4]||(g[4]=k=>l.value.city=k),type:"text",class:rt(["input input-bordered w-full",pe(t).errors?.city?"border-red-500":""]),placeholder:" "},null,2),[[Vt,l.value.city]])]),_:1})]),m("div",_ue,[m("button",{type:"submit",disabled:o.value,class:"btn btn-primary"},[o.value?ae("",!0):(O(),M("span",kue,"  ")),o.value?(O(),M("span",Cue,[...g[13]||(g[13]=[m("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):ae("",!0)],8,yue)])],32)]),m("div",Eue,[g[24]||(g[24]=m("h3",{class:"text-base-content font-semibold mb-4"},"  ",-1)),m("div",xue,[m("div",null,[g[16]||(g[16]=m("label",{class:"block text-sm font-medium text-gray-700"}," ",-1)),m("p",Tue,te(pe(e)?.name),1)]),m("div",null,[g[17]||(g[17]=m("label",{class:"block text-sm font-medium text-gray-700"}," ",-1)),m("a",{href:pe(e)?.url,target:"_blank",class:"text-blue-600 hover:text-blue-800 font-mono text-sm"},te(pe(e)?.handle),9,Sue)]),m("div",null,[g[18]||(g[18]=m("label",{class:"block text-sm font-medium text-gray-700"}," ",-1)),m("p",Iue,te(pe(e)?.created_at),1)]),m("div",null,[g[19]||(g[19]=m("label",{class:"block text-sm font-medium text-gray-700"},"",-1)),m("span",{class:rt(["inline-flex px-2 py-1 text-xs font-medium rounded-full",pe(e)?.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},te(pe(e)?.active?"":" "),3)]),pe(e)?.country?(O(),M("div",Aue,[g[20]||(g[20]=m("label",{class:"block text-sm font-medium text-gray-700"},"",-1)),m("p",Pue,te(f(pe(e).country)),1)])):ae("",!0),pe(e)?.city?(O(),M("div",Oue,[g[21]||(g[21]=m("label",{class:"block text-sm font-medium text-gray-700"},"",-1)),m("p",Mue,te(pe(e).city),1)])):ae("",!0),pe(e)?.email?(O(),M("div",Rue,[g[22]||(g[22]=m("label",{class:"block text-sm font-medium text-gray-700"}," ",-1)),m("p",Bue,te(pe(e).email),1)])):ae("",!0),pe(e)?.phone?(O(),M("div",Lue,[g[23]||(g[23]=m("label",{class:"block text-sm font-medium text-gray-700"}," ",-1)),m("p",Nue,te(pe(e).phone),1)])):ae("",!0)])])])}}};(function(){var n;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(n=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:n.content,e.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:#fff;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44a4fc;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#e54d42;border-left-color:#b82e24}.vue-notification.success{background:#68cd86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const xP=new Map;function Due(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(s){s(t)}),(i=n.get("*"))&&i.slice().map(function(s){s(e,t)})}}}const wa=Due(),Tm="[-+]?[0-9]*.?[0-9]+",$C=[{name:"px",regexp:new RegExp(`^${Tm}px$`)},{name:"%",regexp:new RegExp(`^${Tm}%$`)},{name:"px",regexp:new RegExp(`^${Tm}$`)}],Fue=n=>{if(n==="auto")return{type:n,value:0};for(let e=0;e<$C.length;e++){const t=$C[e];if(t.regexp.test(n))return{type:t.name,value:parseFloat(n)}}return{type:"",value:n}},$ue=n=>{switch(typeof n){case"number":return{type:"px",value:n};case"string":return Fue(n);default:return{type:"",value:n}}},UC={x:new Set(["left","center","right"]),y:new Set(["top","bottom"])},Uue=(n=>()=>n++)(0),Hue=n=>typeof n!="string"?[]:n.split(/\s+/gi).filter(Boolean),jue=n=>{typeof n=="string"&&(n=Hue(n));let e=null,t=null;return n.forEach(i=>{UC.y.has(i)&&(t=i),UC.x.has(i)&&(e=i)}),{x:e,y:t}},Sm={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:n=>({height:[n.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},zue=(n,e)=>{let t,i,s=e;const o=()=>{i=Date.now(),t=setTimeout(n,s)},r=()=>{clearTimeout(t),s-=Date.now()-i};return o(),{start:o,stop:r}};function Wue(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ms(n)}const ad={IDLE:0,DESTROYED:2},que=Qa({name:"notifications",props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:()=>Sm.position},classes:{type:[String,Array],default:"vue-notification"},animationType:{type:String,default:"css",validator(n){return n==="css"||n==="velocity"}},animation:{type:Object,default(){return Sm.velocityAnimation}},animationName:{type:String,default:Sm.cssAnimation},speed:{type:Number,default:300},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1},dangerouslySetInnerHtml:{type:Boolean,default:!1}},emits:{click:n=>!0,destroy:n=>!0,start:n=>!0},slots:Object,setup:(n,{emit:e,slots:t,expose:i})=>{const s=X([]),o=xP.get("velocity"),r=it(()=>n.animationType==="velocity"),a=it(()=>s.value.filter(_=>_.state!==ad.DESTROYED)),l=it(()=>$ue(n.width)),c=it(()=>{const{x:_,y:S}=jue(n.position),R=l.value.value,B=l.value.type,F={width:R+B};return S&&(F[S]="0px"),_&&(_==="center"?F.left=`calc(50% - ${+R/2}${B})`:F[_]="0px"),F}),u=it(()=>r.value?{onEnter:E,onLeave:I,onAfterLeave:x}:{}),d=_=>{e("click",_),n.closeOnClick&&v(_)},h=_=>{var S;n.pauseOnHover&&((S=_.timer)==null||S.stop())},f=_=>{var S;n.pauseOnHover&&((S=_.timer)==null||S.start())},p=(_={})=>{if(_.group||(_.group=""),_.data||(_.data={}),n.group!==_.group)return;if(_.clean||_.clear){w();return}const S=typeof _.duration=="number"?_.duration:n.duration,R=typeof _.speed=="number"?_.speed:n.speed,B=typeof _.ignoreDuplicates=="boolean"?_.ignoreDuplicates:n.ignoreDuplicates,{title:F,text:ee,type:K,data:G,id:oe}=_,Y={id:oe||Uue(),title:F,text:ee,type:K,state:ad.IDLE,speed:R,length:S+2*R,data:G,duplicates:0};S>=0&&(Y.timer=zue(()=>v(Y),Y.length));const je="bottom"in c.value,zt=n.reverse?!je:je;let Et=-1;const Ot=a.value.find(Z=>Z.title===_.title&&Z.text===_.text);if(B&&Ot){Ot.duplicates++;return}zt?(s.value.push(Y),e("start",Y),a.value.length>n.max&&(Et=0)):(s.value.unshift(Y),e("start",Y),a.value.length>n.max&&(Et=a.value.length-1)),Et!==-1&&v(a.value[Et])},g=_=>{b(_)},y=_=>["vue-notification-template",n.classes,_.type||""],k=_=>r.value?void 0:{transition:`all ${_.speed}ms`},v=_=>{var S;(S=_.timer)==null||S.stop(),_.state=ad.DESTROYED,x(),e("destroy",_)},b=_=>{const S=s.value.find(R=>R.id===_);S&&v(S)},w=()=>{a.value.forEach(v)},C=(_,S)=>{var R;const B=(R=n.animation)==null?void 0:R[_];return typeof B=="function"?B(S):B},E=(_,S)=>{const R=C("enter",_);o(_,R,{duration:n.speed,complete:S})},I=(_,S)=>{const R=C("leave",_);o(_,R,{duration:n.speed,complete:S})};function x(){s.value=s.value.filter(_=>_.state!==ad.DESTROYED)}return Ct(()=>{wa.on("add",p),wa.on("close",g)}),Rr(()=>{wa.off("add",p),wa.off("close",g)}),()=>{let _;return V("div",{class:"vue-notification-group",style:c.value},[V(Hx,Jh(u.value,{tag:"div",css:!r.value,name:n.animationName}),Wue(_=a.value.map(S=>V("div",{key:S.id,class:"vue-notification-wrapper",style:k(S),"data-id":S.id,onMouseenter:()=>h(S),onMouseleave:()=>f(S)},[t.body?t.body({item:S,class:[n.classes,S.type],close:()=>v(S)}):V("div",{class:y(S),onClick:()=>d(S)},[n.dangerouslySetInnerHtml?V(Me,null,[S.title?V("div",{class:"notification-title",innerHTML:S.title},null):null,V("div",{class:"notification-content",innerHTML:S.text},null)]):V(Me,null,[S.title?V("div",{class:"notification-title"},[S.title]):null,V("div",{class:"notification-content"},[S.text])])])])))?_:{default:()=>[_]})])}}}),tw=n=>{typeof n=="string"&&(n={title:"",text:n}),typeof n=="object"&&wa.emit("add",n)};tw.close=n=>{wa.emit("close",n)};const pl=()=>({notify:tw}),Gue="Notifications";function Kue(n,e={}){Object.entries(e).forEach(i=>xP.set(...i));const t=e.name||"notify";n.config.globalProperties["$"+t]=tw,n.component(e.componentName||Gue,que)}const Xue={install:Kue},Zue={class:""},Jue={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},Yue={key:1},Que={class:"flex flex-col gap-1"},ede={class:"flex justify-end w-full"},tde=["disabled"],nde={key:0},ide={key:1,class:"loading loading-spinner loading-xs"},sde={__name:"Header",setup(n){const{notify:e}=pl(),t=Si(),i=cn(),s=X({name:"",slogan:"",logo:null,newLogo:null,cover:null,newCover:null,coverRemoved:!1}),o=X(!1),r=X(!1);Ct(()=>{o.value=!0,He.get("/api/blocks/header").then(l=>{s.value=l.data.data,o.value=!1}).catch(l=>{console.error(l),o.value=!1})});const a=()=>{r.value=!0,He.post("/api/blocks/header",s.value,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>{r.value=!1,i.setErrors([]),t.updateTenant({name:l.data.data.name,slogan:l.data.data.slogan,logo:l.data.data.logo}),e({type:"success",text:"   "}),document.getElementById("preview-iframe").contentWindow.location.reload()}).catch(l=>{r.value=!1,l.response&&(console.error(l.response.data.errors),i.setErrors(l.response.data.errors),e({type:"error",text:"         "}))})};return(l,c)=>{const u=we("UiInput"),d=we("UiUploadAvatar");return O(),M("div",Zue,[o.value?(O(),M("div",Jue,[...c[3]||(c[3]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",Yue,[m("div",Que,[c[4]||(c[4]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" fill="none" class="size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M21 16.0909V11.0975C21 6.80891 21 4.6646 19.682 3.3323C18.364 2 16.2426 2 12 2C7.75736 2 5.63604 2 4.31802 3.3323C3 4.6646 3 6.80891 3 11.0975V16.0909C3 19.1875 3 20.7358 3.73411 21.4123C4.08421 21.735 4.52615 21.9377 4.99692 21.9915C5.98402 22.1045 7.13673 21.0849 9.44216 19.0458C10.4612 18.1445 10.9708 17.6938 11.5603 17.5751C11.8506 17.5166 12.1494 17.5166 12.4397 17.5751C13.0292 17.6938 13.5388 18.1445 14.5578 19.0458C16.8633 21.0849 18.016 22.1045 19.0031 21.9915C19.4739 21.9377 19.9158 21.735 20.2659 21.4123C21 20.7358 21 19.1875 21 16.0909Z" stroke="#1C274D" stroke-width="1.5"></path> <path opacity="0.5" d="M15 6H9" stroke="#1C274D" stroke-width="1.5" stroke-linecap="round"></path></g></svg>   </h2></div>',1)),V(u,{name:"name",label:" ",modelValue:s.value.name,"onUpdate:modelValue":c[0]||(c[0]=h=>s.value.name=h),placeholder:" "},null,8,["modelValue"]),V(u,{name:"slogan",label:" ",modelValue:s.value.slogan,"onUpdate:modelValue":c[1]||(c[1]=h=>s.value.slogan=h),placeholder:" "},null,8,["modelValue"]),V(d,{modelValue:s.value.newLogo,"onUpdate:modelValue":c[2]||(c[2]=h=>s.value.newLogo=h),preview:s.value.logo,name:"newLogo",label:""},null,8,["modelValue","preview"]),m("div",ede,[m("button",{onClick:a,class:"btn btn-primary",disabled:r.value},[r.value?ae("",!0):(O(),M("span",nde,"  ")),r.value?(O(),M("span",ide)):ae("",!0)],8,tde)])])]))])}}},ode={class:""},rde={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},ade={key:1},lde={class:"flex flex-col gap-1"},cde={key:0,class:"flex flex-col gap-1"},ude={class:"space-y-3 mt-5"},dde=["onDragstart","onDrop"],hde={hidden:"",class:"flex items-center justify-between mb-4"},fde={class:"flex items-center gap-1"},pde={class:"text-xs text-gray-400"},mde={key:0,class:"space-y-1 mt-1"},gde={key:1,class:"space-y-1 mt-1"},bde={key:0,class:"text-center py-8 text-gray-500"},vde={key:1,class:"space-y-3 mt-5"},wde=["onDragstart","onDragover","onDragenter","onDragleave","onDrop"],_de={class:"flex items-center justify-between mb-3"},yde={class:"flex items-center gap-3"},kde={class:"text-sm font-medium text-gray-600"},Cde={class:"flex items-center gap-2"},Ede={class:"text-xs badge badge-ghost"},xde=["onClick"],Tde={key:0,class:"mt-1 flex flex-col gap-1"},Sde={class:"flex justify-end w-full pt-6"},Ide=["disabled"],Ade={key:0},Pde={key:1,class:"loading loading-spinner loading-xs"},Ode={__name:"Cta",setup(n){const e=cn(),t=X({active:!0,whatsapp_enabled:!1,whatsapp_number:"",whatsapp_sort:1,contact_enabled:!1,contact_sort:2,subscription_enabled:!1,subscription_message:"",subscription_sort:3,custom_links:[]}),i=X(!1),s=X(!1),o=X(null),r=X(null),a=it(()=>[{type:"whatsapp",label:"  ",enabled:t.value.whatsapp_enabled,number:t.value.whatsapp_number,sort:t.value.whatsapp_sort||1},{type:"contact",label:" ",enabled:t.value.contact_enabled,sort:t.value.contact_sort||2},{type:"subscription",label:" ",enabled:t.value.subscription_enabled,message:t.value.subscription_message,sort:t.value.subscription_sort||3}].sort((C,E)=>C.sort-E.sort));Ct(()=>{i.value=!0,He.get("/api/blocks/cta").then(w=>{t.value=w.data.data,(!t.value.custom_links||!Array.isArray(t.value.custom_links))&&(t.value.custom_links=[]),typeof t.value.subscription_message!="string"&&(t.value.subscription_message=""),i.value=!1}).catch(w=>{console.error(w),i.value=!1})});const l=(w,C)=>{w==="whatsapp"?t.value.whatsapp_enabled=C:w==="contact"?t.value.contact_enabled=C:w==="subscription"&&(t.value.subscription_enabled=C)},c=(w,C)=>{o.value=w,C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/html",C.target.outerHTML)},u=(w,C)=>{if(C.preventDefault(),o.value===null||o.value===w){o.value=null;return}const E=[...a.value],I=E[o.value],x=E[w],_=I.sort,S=x.sort,R=_;I.type==="whatsapp"?t.value.whatsapp_sort=S:I.type==="contact"?t.value.contact_sort=S:I.type==="subscription"&&(t.value.subscription_sort=S),x.type==="whatsapp"?t.value.whatsapp_sort=R:x.type==="contact"?t.value.contact_sort=R:x.type==="subscription"&&(t.value.subscription_sort=R),o.value=null},d=()=>{t.value.custom_links.push({id:null,url:"",label:"",active:!0,sort:t.value.custom_links.length})},h=w=>{t.value.custom_links.splice(w,1)},f=(w,C)=>{o.value=C,w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/html",C)},p=(w,C)=>{o.value!==null&&o.value!==C&&(r.value=C)},g=(w,C)=>{o.value!==null&&o.value!==C&&(r.value=C)},y=(w,C)=>{w.currentTarget.contains(w.relatedTarget)||r.value===C&&(r.value=null)},k=(w,C)=>{if(w.preventDefault(),o.value===null||o.value===C){r.value=null;return}const E=o.value,I=t.value.custom_links[E];t.value.custom_links.splice(E,1),t.value.custom_links.splice(C,0,I),t.value.custom_links.forEach((x,_)=>{x.sort=_}),r.value=null,o.value=null},v=w=>{o.value=null,r.value=null},b=()=>{a.value.forEach(w=>{w.type==="whatsapp"?(t.value.whatsapp_enabled=w.enabled,t.value.whatsapp_number=w.number):w.type==="contact"?t.value.contact_enabled=w.enabled:w.type==="subscription"&&(t.value.subscription_enabled=w.enabled,t.value.subscription_message=w.message)}),t.value.custom_links||(t.value.custom_links=[]),s.value=!0,He.post("/api/blocks/cta",t.value).then(w=>{s.value=!1,e.setErrors([]),t.value=w.data.data,(!t.value.custom_links||!Array.isArray(t.value.custom_links))&&(t.value.custom_links=[]);const C=document.getElementById("preview-iframe");C&&C.contentWindow.location.reload()}).catch(w=>{console.error(w.response.data.errors),s.value=!1,w.response&&e.setErrors(w.response.data.errors)})};return(w,C)=>{const E=we("UiToggle"),I=we("UiInput"),x=we("UiTextarea");return O(),M("div",ode,[i.value?(O(),M("div",rde,[...C[6]||(C[6]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",ade,[m("div",lde,[C[13]||(C[13]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" fill="none" class="size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M6.70399 3.5H17.5C18.9045 3.5 19.6067 3.5 20.1111 3.83706C20.3295 3.98298 20.517 4.17048 20.6629 4.38886C21 4.89331 21 5.59554 21 7C21 8.40446 21 9.10669 20.6629 9.61114C20.517 9.82952 20.3295 10.017 20.1111 10.1629C19.6067 10.5 18.9045 10.5 17.5 10.5H6.70399C6.04642 10.5 5.71764 10.5 5.41593 10.4018C5.28282 10.3585 5.15463 10.3013 5.03346 10.2312C4.75882 10.0723 4.53915 9.8277 4.09981 9.33844C3.24911 8.39107 2.82376 7.91738 2.72136 7.36381C2.67687 7.12331 2.67687 6.87669 2.72136 6.63619C2.82376 6.08262 3.24911 5.60894 4.09981 4.66156C4.53915 4.1723 4.75882 3.92767 5.03346 3.76879C5.15463 3.6987 5.28282 3.64152 5.41593 3.5982C5.71764 3.5 6.04642 3.5 6.70399 3.5Z" stroke="#1C274C" stroke-width="1.5"></path> <path d="M17.296 12.5H6.5C5.09554 12.5 4.39331 12.5 3.88886 12.8371C3.67048 12.983 3.48298 13.1705 3.33706 13.3889C3 13.8933 3 14.5955 3 16C3 17.4045 3 18.1067 3.33706 18.6111C3.48298 18.8295 3.67048 19.017 3.88886 19.1629C4.39331 19.5 5.09554 19.5 6.5 19.5H17.296C17.9536 19.5 18.2824 19.5 18.5841 19.4018C18.7172 19.3585 18.8454 19.3013 18.9665 19.2312C19.2412 19.0723 19.4608 18.8277 19.9002 18.3384C20.7509 17.3911 21.1762 16.9174 21.2786 16.3638C21.3231 16.1233 21.3231 15.8767 21.2786 15.6362C21.1762 15.0826 20.7509 14.6089 19.9002 13.6616C19.4608 13.1723 19.2412 12.9277 18.9665 12.7688C18.8454 12.6987 18.7172 12.6415 18.5841 12.5982C18.2824 12.5 17.9536 12.5 17.296 12.5Z" stroke="#1C274C" stroke-width="1.5"></path> <path opacity="0.5" d="M12.75 2C12.75 1.58579 12.4142 1.25 12 1.25C11.5858 1.25 11.25 1.58579 11.25 2H12.75ZM12.75 11C12.75 10.5858 12.4142 10.25 12 10.25C11.5858 10.25 11.25 10.5858 11.25 11H12.75ZM12.75 20C12.75 19.5858 12.4142 19.25 12 19.25C11.5858 19.25 11.25 19.5858 11.25 20H12.75ZM14 22.75C14.4142 22.75 14.75 22.4142 14.75 22C14.75 21.5858 14.4142 21.25 14 21.25V22.75ZM10 21.25C9.58579 21.25 9.25 21.5858 9.25 22C9.25 22.4142 9.58579 22.75 10 22.75V21.25ZM11.25 2V3H12.75V2H11.25ZM11.25 11V12H12.75V11H11.25ZM11.25 20V22H12.75V20H11.25ZM14 21.25H10V22.75H14V21.25Z" fill="#1C274C"></path></g></svg>   </h2></div>',1)),V(E,{name:"active",label:" ",modelValue:t.value.active,"onUpdate:modelValue":C[0]||(C[0]=_=>t.value.active=_)},null,8,["modelValue"]),t.value.active?(O(),M("section",cde,[C[11]||(C[11]=m("div",{class:"divider text-xs"},"  ",-1)),m("div",ude,[(O(!0),M(Me,null,jt(a.value,(_,S)=>(O(),M("div",{key:_.type,draggable:!0,onDragstart:R=>c(S,R),onDragover:C[3]||(C[3]=Gt(()=>{},["prevent"])),onDragenter:C[4]||(C[4]=Gt(()=>{},["prevent"])),onDrop:R=>u(S,R),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-colors",{"opacity-50":o.value===S}])},[m("div",hde,[m("div",fde,[C[7]||(C[7]=m("svg",{class:"w-5 h-5 text-gray-400 cursor-grab active:cursor-grabbing",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),m("span",pde,"#"+te(S+1),1)])]),V(E,{name:"enabled",label:_.label,modelValue:_.enabled,"onUpdate:modelValue":R=>_.enabled=R,onChange:R=>l(_.type,_.enabled)},null,8,["label","modelValue","onUpdate:modelValue","onChange"]),_.type==="whatsapp"&&t.value.whatsapp_enabled?(O(),M("div",mde,[V(I,{name:"whatsapp_number",label:" ",modelValue:t.value.whatsapp_number,"onUpdate:modelValue":C[1]||(C[1]=R=>t.value.whatsapp_number=R),placeholder:"+966501234567"},null,8,["modelValue"])])):ae("",!0),_.type==="subscription"&&t.value.subscription_enabled?(O(),M("div",gde,[V(x,{name:"subscription_message",label:" ",modelValue:t.value.subscription_message,"onUpdate:modelValue":C[2]||(C[2]=R=>t.value.subscription_message=R),placeholder:"    "},null,8,["modelValue"])])):ae("",!0)],42,dde))),128))]),C[12]||(C[12]=m("div",{class:"divider text-xs"}," ",-1)),t.value.custom_links.length===0?(O(),M("div",bde,[...C[8]||(C[8]=[m("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),m("p",null,"    ",-1),m("p",{class:"text-sm"},'  " "   ',-1)])])):(O(),M("div",vde,[(O(!0),M(Me,null,jt(t.value.custom_links,(_,S)=>(O(),M("div",{key:`link-${_.id||S}`,draggable:!0,onDragstart:R=>f(R,S),onDragover:Gt(R=>p(R,S),["prevent"]),onDragenter:Gt(R=>g(R,S),["prevent"]),onDragleave:R=>y(R,S),onDrop:R=>k(R,S),onDragend:C[5]||(C[5]=R=>v()),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-all",r.value===S?"border-blue-500 bg-blue-50":"",o.value===S?"opacity-50":""])},[m("div",_de,[m("div",yde,[m("span",kde,te(_.label||" "),1)]),m("div",Cde,[m("span",Ede,"#"+te(S+1),1),m("button",{onClick:R=>h(S),class:"btn btn-xs btn-soft btn-error"},[...C[9]||(C[9]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,xde)])]),V(E,{name:`custom_links.${S}.active`,label:" ",modelValue:_.active,"onUpdate:modelValue":R=>_.active=R},null,8,["name","modelValue","onUpdate:modelValue"]),_.active?(O(),M("div",Tde,[V(I,{name:`custom_links.${S}.url`,label:"",modelValue:_.url,"onUpdate:modelValue":R=>_.url=R,placeholder:"https://example.com"},null,8,["name","modelValue","onUpdate:modelValue"]),V(I,{name:`custom_links.${S}.label`,label:" ",modelValue:_.label,"onUpdate:modelValue":R=>_.label=R,placeholder:"  ()"},null,8,["name","modelValue","onUpdate:modelValue"])])):ae("",!0)],42,wde))),128))])),m("button",{onClick:d,class:"btn btn-primary btn-outline w-full mt-2"},[...C[10]||(C[10]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",Sde,[m("button",{onClick:b,class:"btn btn-primary",disabled:s.value},[s.value?ae("",!0):(O(),M("span",Ade," ")),s.value?(O(),M("span",Pde)):ae("",!0)],8,Ide)])])]))])}}},Mde={class:""},Rde={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},Bde={key:1},Lde={class:"flex flex-col gap-1"},Nde={key:0,class:"flex flex-col gap-1"},Vde={key:0,class:"text-center py-8 text-gray-500"},Dde={key:1,class:"space-y-3 mt-5"},Fde=["onDragstart","onDragover","onDragenter","onDragleave","onDrop"],$de={class:"flex items-center justify-between mb-3"},Ude={class:"flex items-center gap-3"},Hde={hidden:"",class:"flex flex-col items-center gap-1"},jde={class:"text-xs text-gray-400 hidden"},zde=["onClick","aria-expanded","aria-controls"],Wde={key:0,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},qde={key:1,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Gde={class:"text-sm font-medium text-gray-600"},Kde={class:"flex items-center gap-2"},Xde={class:"text-xs badge badge-ghost"},Zde=["onClick"],Jde=["id"],Yde=["onUpdate:modelValue"],Qde={key:0,class:"text-red-500 text-xs"},ehe={class:"flex justify-end w-full pt-6"},the=["disabled"],nhe={key:0},ihe={key:1,class:"loading loading-spinner loading-xs"},sa="dashboard.links_block.collapsed",she={__name:"Links",setup(n){const e=cn(),t=X({id:null,active:!0,links:[]}),i=X(!1),s=X(!1),o=X([]),r=X(null),a=X(null);Ct(()=>{i.value=!0,He.get("/api/blocks/links").then(v=>{t.value=v.data.data;try{const b=JSON.parse(localStorage.getItem(sa)||"[]"),w=v.data.data.links.length;o.value=Array.from({length:w},(C,E)=>!!(b[E]??!1))}catch{o.value=v.data.data.links.map(()=>!1)}i.value=!1}).catch(v=>{console.error(v),i.value=!1})});const l=()=>{t.value.links.push({id:null,url:"",network:"",label:"",active:!0,sort:t.value.links.length}),o.value.push(!1),localStorage.setItem(sa,JSON.stringify(o.value))},c=v=>{t.value.links.splice(v,1),o.value.splice(v,1),localStorage.setItem(sa,JSON.stringify(o.value))},u=()=>{s.value=!0,console.log("Saving links with data:",t.value),He.post("/api/blocks/links",t.value).then(v=>{s.value=!1,e.setErrors([]),console.log("Links saved successfully:",v.data),t.value=v.data.data;const b=document.getElementById("preview-iframe");b&&b.contentWindow.location.reload()}).catch(v=>{console.error("Error saving links:",v.response?.data?.errors||v.message),s.value=!1,v.response&&e.setErrors(v.response.data.errors)})},d=v=>{o.value[v]=!o.value[v],localStorage.setItem(sa,JSON.stringify(o.value))},h=(v,b)=>{r.value=b,v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/html",b)},f=(v,b)=>{r.value!==null&&r.value!==b&&(a.value=b)},p=(v,b)=>{r.value!==null&&r.value!==b&&(a.value=b)},g=(v,b)=>{v.currentTarget.contains(v.relatedTarget)||a.value===b&&(a.value=null)},y=(v,b)=>{if(v.preventDefault(),r.value===null||r.value===b){a.value=null;return}const w=r.value,C=t.value.links[w],E=o.value[w];t.value.links.splice(w,1),o.value.splice(w,1),t.value.links.splice(b,0,C),o.value.splice(b,0,E),t.value.links.forEach((I,x)=>{I.sort=x}),a.value=null,r.value=null,localStorage.setItem(sa,JSON.stringify(o.value))},k=v=>{r.value=null,a.value=null};return In(o,v=>{try{localStorage.setItem(sa,JSON.stringify(v))}catch{}},{deep:!0}),(v,b)=>{const w=we("UiToggle"),C=we("UiField"),E=we("UiInput");return O(),M("div",Mde,[i.value?(O(),M("div",Rde,[...b[2]||(b[2]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",Bde,[m("div",Lde,[b[12]||(b[12]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M11.3357 5.47875L7.36344 9.00968C5.79482 10.404 5.0105 11.1012 5.0105 11.9993C5.0105 12.8975 5.79481 13.5946 7.36344 14.989L11.3357 18.5199C12.0517 19.1563 12.4098 19.4746 12.7049 19.342C13.0001 19.2095 13.0001 18.7305 13.0001 17.7725V15.4279C16.6001 15.4279 20.5001 17.1422 22.0001 19.9993C22.0001 10.8565 16.6668 8.57075 13.0001 8.57075V6.22616C13.0001 5.26817 13.0001 4.78917 12.7049 4.65662C12.4098 4.52407 12.0517 4.8423 11.3357 5.47875Z" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="0.5" d="M8.46129 4.5L3.24509 9.34362C2.45098 10.081 1.99976 11.1158 1.99976 12.1994C1.99976 13.3418 2.50097 14.4266 3.37087 15.1671L8.46129 19.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></g></svg>   </h2></div>',1)),V(w,{name:"active",label:" ",modelValue:t.value.active,"onUpdate:modelValue":b[0]||(b[0]=I=>t.value.active=I)},null,8,["modelValue"]),t.value.active?(O(),M("section",Nde,[b[11]||(b[11]=m("div",{class:"divider text-xs"}," ",-1)),t.value.links.length===0?(O(),M("div",Vde,[...b[3]||(b[3]=[m("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),m("p",null,"    ",-1),m("p",{class:"text-sm"},'  " "   ',-1)])])):(O(),M("div",Dde,[(O(!0),M(Me,null,jt(t.value.links,(I,x)=>(O(),M("div",{key:`link-${I.id||x}`,draggable:!0,onDragstart:_=>h(_,x),onDragover:Gt(_=>f(_,x),["prevent"]),onDragenter:Gt(_=>p(_,x),["prevent"]),onDragleave:_=>g(_,x),onDrop:_=>y(_,x),onDragend:b[1]||(b[1]=_=>k()),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-colors transition-all",a.value===x?"border-blue-500 bg-blue-50":"",r.value===x?"opacity-50":""])},[m("div",$de,[m("div",Ude,[m("div",Hde,[b[4]||(b[4]=m("svg",{class:"w-5 h-5 text-gray-400 cursor-grab active:cursor-grabbing",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),m("span",jde,te(x+1),1)]),m("button",{hidden:"",class:"btn btn-xs btn-ghost",onClick:_=>d(x),"aria-expanded":!o.value[x],"aria-controls":`link-panel-${x}`},[o.value[x]?(O(),M("svg",Wde,[...b[5]||(b[5]=[m("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"},null,-1)])])):(O(),M("svg",qde,[...b[6]||(b[6]=[m("path",{"fill-rule":"evenodd",d:"M14.77 12.79a.75.75 0 01-1.06-.02L10 8.832l-3.71 3.938a.75.75 0 11-1.08-1.04l4.24-4.5a.75.75 0 011.08 0l4.24 4.5c.28.297.27.765-.02 1.06z","clip-rule":"evenodd"},null,-1)])]))],8,zde),m("span",Gde,te(I.network||" "),1),b[7]||(b[7]=m("div",{class:"flex items-center gap-2"},null,-1))]),m("div",Kde,[m("span",Xde,"#"+te(x+1),1),m("button",{onClick:_=>c(x),class:"btn btn-xs btn-soft btn-error"},[...b[8]||(b[8]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Zde)])]),V(w,{name:`links.${x}.active`,label:" ",modelValue:I.active,"onUpdate:modelValue":_=>I.active=_},null,8,["name","modelValue","onUpdate:modelValue"]),I.active?(O(),M("div",{key:0,id:`link-panel-${x}`,"XXv-show":"!collapsed[index]",class:"mt-1 flex flex-col gap-1"},[V(C,{label:"",name:`links.${x}.network`},{default:Le(()=>[vt(m("select",{"onUpdate:modelValue":_=>I.network=_,class:rt(["select w-full",{"border-red-500":pe(e).errors&&pe(e).errors[`links.${x}.network`]}])},[...b[9]||(b[9]=[m("option",{value:""}," ",-1),m("option",{value:"facebook"},"",-1),m("option",{value:"x"},"X ()",-1),m("option",{value:"instagram"},"",-1),m("option",{value:"linkedin"}," ",-1),m("option",{value:"youtube"},"",-1),m("option",{value:"tiktok"}," ",-1),m("option",{value:"snapchat"}," ",-1),m("option",{value:"whatsapp"},"",-1),m("option",{value:"telegram"},"",-1),m("option",{value:"discord"},"",-1),m("option",{value:"github"}," ",-1),m("option",{value:"website"}," ",-1),m("option",{value:"other"},"",-1)])],10,Yde),[[tu,I.network]]),pe(e).errors&&pe(e).errors[`links.${x}.network`]?(O(),M("span",Qde,te(pe(e).errors[`links.${x}.network`][0]),1)):ae("",!0)]),_:2},1032,["name"]),V(E,{name:`links.${x}.url`,label:"",modelValue:I.url,"onUpdate:modelValue":_=>I.url=_,placeholder:"https://example.com"},null,8,["name","modelValue","onUpdate:modelValue"]),V(E,{name:`links.${x}.label`,label:" ",modelValue:I.label,"onUpdate:modelValue":_=>I.label=_,placeholder:"  ()"},null,8,["name","modelValue","onUpdate:modelValue"])],8,Jde)):ae("",!0)],42,Fde))),128))])),m("button",{onClick:l,class:"btn btn-primary btn-outline w-full mt-2"},[...b[10]||(b[10]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",ehe,[m("button",{onClick:u,class:"btn btn-primary",disabled:s.value},[s.value?ae("",!0):(O(),M("span",nhe," ")),s.value?(O(),M("span",ihe)):ae("",!0)],8,the)])])]))])}}},ohe={class:""},rhe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},ahe={key:1},lhe={class:"flex flex-col gap-1"},che={key:0,class:"flex flex-col gap-1"},uhe={class:"flex justify-end w-full"},dhe=["disabled"],hhe={key:0},fhe={key:1,class:"loading loading-spinner loading-xs"},phe={__name:"About",setup(n){const{notify:e}=pl(),t=cn(),i=X({id:null,title:"",text:"",active:!0}),s=X(!1),o=X(!1);Ct(()=>{s.value=!0,He.get("/api/blocks/about").then(a=>{i.value=a.data.data,s.value=!1}).catch(a=>{console.error(a),s.value=!1})});const r=()=>{o.value=!0,He.post("/api/blocks/about",i.value).then(a=>{o.value=!1,t.setErrors([]);const l=document.getElementById("preview-iframe");l&&l.contentWindow.location.reload(),e({type:"success",text:"   "})}).catch(a=>{console.error(a.response.data.errors),o.value=!1,a.response&&(t.setErrors(a.response.data.errors),e({type:"error",text:"         "}))})};return(a,l)=>{const c=we("UiToggle"),u=we("UiInput"),d=we("UiEditor");return O(),M("div",ohe,[s.value?(O(),M("div",rhe,[...l[3]||(l[3]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",ahe,[m("div",lhe,[l[4]||(l[4]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M22 22L2 22" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M21 22V6C21 4.11438 21 3.17157 20.4143 2.58579C19.8285 2 18.8857 2 17 2H15C13.1144 2 12.1716 2 11.5858 2.58579C11.1143 3.05733 11.0223 3.76022 11.0044 5" stroke="#1C274C" stroke-width="1.5"></path> <path d="M15 22V9C15 7.11438 15 6.17157 14.4142 5.58579C13.8284 5 12.8856 5 11 5H7C5.11438 5 4.17157 5 3.58579 5.58579C3 6.17157 3 7.11438 3 9V22" stroke="#1C274C" stroke-width="1.5"></path> <path d="M9 22V19" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M6 8H12" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M6 11H12" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M6 14H12" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></g></svg>   </h2></div>',1)),V(c,{name:"active",label:" ",modelValue:i.value.active,"onUpdate:modelValue":l[0]||(l[0]=h=>i.value.active=h)},null,8,["modelValue"]),i.value.active?(O(),M("section",che,[V(u,{name:"title",label:"",modelValue:i.value.title,"onUpdate:modelValue":l[1]||(l[1]=h=>i.value.title=h),placeholder:" :   "},null,8,["modelValue"]),V(d,{name:"text",modelValue:i.value.text,"onUpdate:modelValue":l[2]||(l[2]=h=>i.value.text=h),placeholder:"    ...","media-collection":"block-editor-images","model-type":"block","model-id":i.value.id,toolbar:["heading","|","bold","italic","underline","|","fontColor","fontBackgroundColor","alignment","link","|","mediaEmbed","insertImage","|","bulletedList","numberedList","blockQuote","|","codeBlock","|","horizontalLine"]},null,8,["modelValue","model-id"])])):ae("",!0),m("div",uhe,[m("button",{onClick:r,class:"btn btn-primary",disabled:o.value},[o.value?ae("",!0):(O(),M("span",hhe,"")),o.value?(O(),M("span",fhe)):ae("",!0)],8,dhe)])])]))])}}},mhe={class:""},ghe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},bhe={key:1},vhe={class:"flex flex-col gap-1"},whe={key:0,class:"flex flex-col gap-1"},_he={key:0,class:"text-center py-8 text-gray-500"},yhe={key:1,class:"space-y-3 mt-5"},khe=["onDragstart","onDrop"],Che={class:"flex items-center justify-between mb-3"},Ehe={class:"flex items-center gap-3"},xhe=["onClick","aria-expanded","aria-controls"],The={key:0,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},She={key:1,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Ihe={class:"flex items-center gap-2"},Ahe={class:"text-xs badge badge-ghost"},Phe=["onClick"],Ohe=["id"],Mhe={class:"grid grid-cols-1 gap-1"},Rhe={class:"flex items-center justify-end w-full pt-6"},Bhe=["disabled"],Lhe={key:0},Nhe={key:1,class:"loading loading-spinner loading-xs"},oa="dashboard.features_block.collapsed",Vhe={__name:"Features",setup(n){const e=cn(),t=X({id:null,active:!0,title:"",subtitle:"",features:[]}),i=X(!1),s=X(!1),o=X([]),r=X(null);Ct(()=>{i.value=!0,He.get("/api/blocks/features").then(f=>{t.value=f.data.data,t.value.features=t.value.features.map((p,g)=>({...p,id:p.id||Date.now()+g}));try{const p=JSON.parse(localStorage.getItem(oa)||"[]"),g=t.value.features.length;o.value=Array.from({length:g},(y,k)=>!!(p[k]??!1))}catch{o.value=t.value.features.map(()=>!1)}i.value=!1}).catch(f=>{console.error(f),i.value=!1})});const a=()=>{t.value.features.push({id:Date.now(),icon:"",title:"",description:"",active:!0}),o.value.push(!1),localStorage.setItem(oa,JSON.stringify(o.value))},l=f=>{t.value.features.splice(f,1),o.value.splice(f,1),localStorage.setItem(oa,JSON.stringify(o.value))},c=f=>{o.value[f]=!o.value[f],localStorage.setItem(oa,JSON.stringify(o.value))},u=(f,p)=>{r.value=f,p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML)},d=(f,p)=>{if(p.preventDefault(),r.value===null||r.value===f){r.value=null;return}const g=t.value.features[r.value],y=o.value[r.value];t.value.features.splice(r.value,1),o.value.splice(r.value,1),t.value.features.splice(f,0,g),o.value.splice(f,0,y),localStorage.setItem(oa,JSON.stringify(o.value)),r.value=null},h=()=>{s.value=!0,He.post("/api/blocks/features",t.value).then(f=>{s.value=!1,e.setErrors([]),t.value=f.data.data;const p=document.getElementById("preview-iframe");p&&p.contentWindow.location.reload()}).catch(f=>{console.error(f.response.data.errors),s.value=!1,f.response&&e.setErrors(f.response.data.errors)})};return In(o,f=>{try{localStorage.setItem(oa,JSON.stringify(f))}catch{}},{deep:!0}),(f,p)=>{const g=we("UiToggle"),y=we("UiInput");return O(),M("div",mhe,[i.value?(O(),M("div",ghe,[...p[5]||(p[5]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",bhe,[m("div",vhe,[p[13]||(p[13]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" fill="none" class="size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M11.8114 6.7267C12.8247 4.9089 13.3314 4 14.0889 4C14.8464 4 15.353 4.9089 16.3663 6.7267L16.6285 7.19699C16.9164 7.71355 17.0604 7.97183 17.2849 8.14225C17.5094 8.31266 17.789 8.37592 18.3482 8.50244L18.8572 8.61762C20.825 9.06284 21.8089 9.28545 22.0429 10.0382C22.277 10.7909 21.6063 11.5753 20.2648 13.1439L19.9177 13.5498C19.5365 13.9955 19.3459 14.2184 19.2602 14.4942C19.1744 14.7699 19.2032 15.0673 19.2609 15.662L19.3134 16.2035C19.5162 18.2965 19.6176 19.343 19.0047 19.8082C18.3919 20.2734 17.4707 19.8492 15.6283 19.0009L15.1517 18.7815C14.6281 18.5404 14.3664 18.4199 14.0889 18.4199C13.8114 18.4199 13.5496 18.5404 13.0261 18.7815L12.5494 19.0009C10.707 19.8492 9.78581 20.2734 9.17299 19.8082C8.56016 19.343 8.66157 18.2965 8.86438 16.2035L8.91685 15.662C8.97449 15.0673 9.0033 14.7699 8.91756 14.4942C8.83181 14.2184 8.64121 13.9955 8.26 13.5498L7.91295 13.1439C6.57147 11.5753 5.90073 10.7909 6.1348 10.0382C6.36888 9.28545 7.35275 9.06284 9.3205 8.61762L9.82958 8.50244C10.3887 8.37592 10.6683 8.31266 10.8928 8.14225C11.1173 7.97183 11.2613 7.71355 11.5492 7.19699L11.8114 6.7267Z" stroke="#1C274C" stroke-width="1.5"></path> <path opacity="0.5" d="M2.08887 16C3.20445 15.121 4.68639 14.7971 6.08887 15.1257" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M2.08887 10.5C3.08887 10 3.37862 10.0605 4.08887 10" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M2 5.60867L2.20816 5.48676C4.41383 4.19506 6.75032 3.84687 8.95304 4.48161L9.16092 4.54152" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></g></svg>  </h2></div>',1)),V(g,{name:"active",label:" ",modelValue:t.value.active,"onUpdate:modelValue":p[0]||(p[0]=k=>t.value.active=k)},null,8,["modelValue"]),t.value.active?(O(),M("section",whe,[V(y,{name:"title",label:" ",modelValue:t.value.title,"onUpdate:modelValue":p[1]||(p[1]=k=>t.value.title=k),placeholder:": "},null,8,["modelValue"]),V(y,{name:"subtitle",label:" ",modelValue:t.value.subtitle,"onUpdate:modelValue":p[2]||(p[2]=k=>t.value.subtitle=k),placeholder:":     "},null,8,["modelValue"]),p[12]||(p[12]=m("div",{class:"divider text-xs"}," ",-1)),t.value.features.length===0?(O(),M("div",_he,[...p[6]||(p[6]=[m("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),m("p",null,"    ",-1),m("p",{class:"text-sm"},'  " "   ',-1)])])):(O(),M("div",yhe,[(O(!0),M(Me,null,jt(t.value.features,(k,v)=>(O(),M("div",{key:k.id||v,draggable:!0,onDragstart:b=>u(v,b),onDragover:p[3]||(p[3]=Gt(()=>{},["prevent"])),onDragenter:p[4]||(p[4]=Gt(()=>{},["prevent"])),onDrop:b=>d(v,b),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-colors transition-all",{"opacity-50":r.value===v}])},[m("div",Che,[m("div",Ehe,[p[9]||(p[9]=m("div",{hidden:"",class:"cursor-move text-gray-400 hover:text-gray-600"},[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})])],-1)),m("button",{hidden:"",class:"btn btn-xs btn-ghost",onClick:b=>c(v),"aria-expanded":!o.value[v],"aria-controls":`feature-panel-${v}`},[o.value[v]?(O(),M("svg",The,[...p[7]||(p[7]=[m("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"},null,-1)])])):(O(),M("svg",She,[...p[8]||(p[8]=[m("path",{"fill-rule":"evenodd",d:"M14.77 12.79a.75.75 0 01-1.06-.02L10 8.832l-3.71 3.938a.75.75 0 11-1.08-1.04l4.24-4.5a.75.75 0 011.08 0l4.24 4.5c.28.297.27.765-.02 1.06z","clip-rule":"evenodd"},null,-1)])]))],8,xhe)]),m("div",Ihe,[m("span",Ahe,"#"+te(v+1),1),m("button",{onClick:b=>l(v),class:"btn btn-xs btn-soft btn-error"},[...p[10]||(p[10]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Phe)])]),V(g,{name:`features.${v}.active`,label:" ",modelValue:k.active,"onUpdate:modelValue":b=>k.active=b},null,8,["name","modelValue","onUpdate:modelValue"]),k.active?(O(),M("div",{key:0,id:`feature-panel-${v}`,"XXv-show":"!collapsed[index]",class:"space-y-1 mt-1 flex flex-col gap-1"},[m("div",Mhe,[V(y,{name:`features.${v}.icon`,label:"",modelValue:k.icon,"onUpdate:modelValue":b=>k.icon=b,placeholder:":     "},null,8,["name","modelValue","onUpdate:modelValue"]),V(y,{name:`features.${v}.title`,label:"",modelValue:k.title,"onUpdate:modelValue":b=>k.title=b,placeholder:"   ..."},null,8,["name","modelValue","onUpdate:modelValue"]),V(y,{name:`features.${v}.description`,label:"",modelValue:k.description,"onUpdate:modelValue":b=>k.description=b,placeholder:"   ..."},null,8,["name","modelValue","onUpdate:modelValue"])])],8,Ohe)):ae("",!0)],42,khe))),128))])),m("button",{onClick:a,class:"btn btn-primary btn-outline w-full mt-2"},[...p[11]||(p[11]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",Rhe,[m("button",{onClick:h,class:"btn btn-primary",disabled:s.value},[s.value?ae("",!0):(O(),M("span",Lhe," ")),s.value?(O(),M("span",Nhe)):ae("",!0)],8,Bhe)])])]))])}}},Dhe={class:""},Fhe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},$he={key:1},Uhe={class:"flex flex-col gap-1"},Hhe={key:0,class:"flex flex-col gap-1"},jhe={key:0,class:"text-center py-8 text-gray-500"},zhe={key:1,class:"space-y-3 mt-5"},Whe=["onDragstart","onDrop"],qhe={class:"flex items-center justify-between mb-3"},Ghe={class:"flex items-center gap-3"},Khe=["onClick","aria-expanded","aria-controls"],Xhe={key:0,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Zhe={key:1,class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Jhe={class:"flex items-center gap-2 justify-between w-full"},Yhe={class:"text-xs badge badge-ghost"},Qhe=["onClick"],efe=["id"],tfe={class:"flex justify-end w-full pt-6"},nfe=["disabled"],ife={key:0},sfe={key:1,class:"loading loading-spinner loading-xs"},ra="dashboard.faq_block.collapsed",ofe={__name:"Faq",setup(n){const e=cn(),t=X({id:null,active:!0,faqs:[]}),i=X(!1),s=X(!1),o=X([]),r=X(null);Ct(()=>{i.value=!0,He.get("/api/blocks/faq").then(f=>{t.value=f.data.data,t.value.faqs=t.value.faqs.map((p,g)=>({...p,id:p.id||Date.now()+g}));try{const p=JSON.parse(localStorage.getItem(ra)||"[]"),g=t.value.faqs.length;o.value=Array.from({length:g},(y,k)=>!!(p[k]??!1))}catch{o.value=t.value.faqs.map(()=>!1)}i.value=!1}).catch(f=>{console.error(f),i.value=!1})});const a=()=>{t.value.faqs.push({id:Date.now(),question:"",answer:"",active:!0}),o.value.push(!1),localStorage.setItem(ra,JSON.stringify(o.value))},l=f=>{t.value.faqs.splice(f,1),o.value.splice(f,1),localStorage.setItem(ra,JSON.stringify(o.value))},c=f=>{o.value[f]=!o.value[f],localStorage.setItem(ra,JSON.stringify(o.value))},u=(f,p)=>{r.value=f,p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML)},d=(f,p)=>{if(p.preventDefault(),r.value===null||r.value===f){r.value=null;return}const g=t.value.faqs[r.value],y=o.value[r.value];t.value.faqs.splice(r.value,1),o.value.splice(r.value,1),t.value.faqs.splice(f,0,g),o.value.splice(f,0,y),localStorage.setItem(ra,JSON.stringify(o.value)),r.value=null},h=()=>{s.value=!0,He.post("/api/blocks/faq",t.value).then(f=>{s.value=!1,e.setErrors([]),t.value=f.data.data;const p=document.getElementById("preview-iframe");p&&p.contentWindow.location.reload()}).catch(f=>{console.error(f.response.data.errors),s.value=!1,f.response&&e.setErrors(f.response.data.errors)})};return In(o,f=>{try{localStorage.setItem(ra,JSON.stringify(f))}catch{}},{deep:!0}),(f,p)=>{const g=we("UiToggle"),y=we("UiInput"),k=we("UiTextarea");return O(),M("div",Dhe,[i.value?(O(),M("div",Fhe,[...p[3]||(p[3]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",$he,[m("div",Uhe,[p[11]||(p[11]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path opacity="0.5" d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z" stroke="#1C274C" stroke-width="1.5"></path> <path d="M10.125 8.875C10.125 7.83947 10.9645 7 12 7C13.0355 7 13.875 7.83947 13.875 8.875C13.875 9.56245 13.505 10.1635 12.9534 10.4899C12.478 10.7711 12 11.1977 12 11.75V13" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <circle cx="12" cy="16" r="1" fill="#1C274C"></circle></g></svg>   </h2></div>',1)),V(g,{name:"active",label:" ",modelValue:t.value.active,"onUpdate:modelValue":p[0]||(p[0]=v=>t.value.active=v)},null,8,["modelValue"]),t.value.active?(O(),M("section",Hhe,[p[10]||(p[10]=m("div",{class:"divider text-xs"},"  ",-1)),t.value.faqs.length===0?(O(),M("div",jhe,[...p[4]||(p[4]=[m("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),m("p",null,"    ",-1),m("p",{class:"text-sm"},'  " "    ',-1)])])):(O(),M("div",zhe,[(O(!0),M(Me,null,jt(t.value.faqs,(v,b)=>(O(),M("div",{key:v.id||b,draggable:!0,onDragstart:w=>u(b,w),onDragover:p[1]||(p[1]=Gt(()=>{},["prevent"])),onDragenter:p[2]||(p[2]=Gt(()=>{},["prevent"])),onDrop:w=>d(b,w),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-colors transition-all",{"opacity-50":r.value===b}])},[m("div",qhe,[m("div",Ghe,[p[7]||(p[7]=m("div",{hidden:"",class:"cursor-move text-gray-400 hover:text-gray-600"},[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})])],-1)),m("button",{hidden:"",class:"btn btn-xs btn-ghost",onClick:w=>c(b),"aria-expanded":!o.value[b],"aria-controls":`faq-panel-${b}`},[o.value[b]?(O(),M("svg",Xhe,[...p[5]||(p[5]=[m("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"},null,-1)])])):(O(),M("svg",Zhe,[...p[6]||(p[6]=[m("path",{"fill-rule":"evenodd",d:"M14.77 12.79a.75.75 0 01-1.06-.02L10 8.832l-3.71 3.938a.75.75 0 11-1.08-1.04l4.24-4.5a.75.75 0 011.08 0l4.24 4.5c.28.297.27.765-.02 1.06z","clip-rule":"evenodd"},null,-1)])]))],8,Khe)]),m("div",Jhe,[m("span",Yhe,"#"+te(b+1),1),m("button",{onClick:w=>l(b),class:"btn btn-xs btn-soft btn-error"},[...p[8]||(p[8]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Qhe)])]),V(g,{name:`faqs.${b}.active`,label:" ",modelValue:v.active,"onUpdate:modelValue":w=>v.active=w},null,8,["name","modelValue","onUpdate:modelValue"]),v.active?(O(),M("div",{key:0,id:`faq-panel-${b}`,"XXv-show":"!collapsed[index]",class:"mt-1 flex flex-col gap-1"},[V(y,{name:`faqs.${b}.question`,modelValue:v.question,"onUpdate:modelValue":w=>v.question=w,placeholder:"  .."},null,8,["name","modelValue","onUpdate:modelValue"]),V(k,{name:`faqs.${b}.answer`,modelValue:v.answer,"onUpdate:modelValue":w=>v.answer=w,placeholder:"  .."},null,8,["name","modelValue","onUpdate:modelValue"])],8,efe)):ae("",!0)],42,Whe))),128))])),m("button",{onClick:a,class:"btn btn-primary btn-outline w-full mt-2"},[...p[9]||(p[9]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",tfe,[m("button",{onClick:h,class:"btn btn-primary",disabled:s.value},[s.value?ae("",!0):(O(),M("span",ife," ")),s.value?(O(),M("span",sfe)):ae("",!0)],8,nfe)])])]))])}}},rfe={};function afe(n,e){return O(),M("div",null,[...e[0]||(e[0]=[m("h1",null,"Gallery block",-1)])])}const lfe=oT(rfe,[["render",afe]]),cfe={class:""},ufe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},dfe={key:1},hfe={class:"flex flex-col gap-1"},ffe={key:0,class:"flex flex-col gap-1"},pfe={key:0,class:"text-center py-8 text-gray-500"},mfe={key:1,class:"space-y-4 mt-5"},gfe=["onDragstart","onDrop"],bfe={class:"flex items-center justify-between mb-3"},vfe={class:"text-sm font-medium text-gray-600"},wfe={class:"flex items-center gap-2"},_fe={class:"text-xs badge badge-ghost"},yfe=["onClick"],kfe=["id"],Cfe={class:"flex items-center gap-2"},Efe=["onClick"],xfe={class:"text-sm text-gray-600 mr-2"},Tfe={class:"flex justify-end w-full pt-6"},Sfe=["disabled"],Ife={key:0},Afe={key:1,class:"loading loading-spinner loading-sm"},Pfe={__name:"Reviews",setup(n){const{notify:e}=pl(),t=cn(),i=X(!1),s=X(!1),o=X(null),r=X({id:null,active:!1,reviews:[]});Ct(()=>{s.value=!0,He.get("/api/blocks/reviews").then(h=>{r.value=h.data.data,s.value=!1}).catch(h=>{console.error(h),s.value=!1})});const a=()=>{r.value.reviews.push({id:null,client_name:"",client_email:"",client_phone:"",score:5,review_text:"",active:!0,sort:r.value.reviews.length})},l=h=>{r.value.reviews.splice(h,1)},c=(h,f)=>{o.value=h,f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/html",f.target.outerHTML)},u=(h,f)=>{if(f.preventDefault(),o.value===null||o.value===h){o.value=null;return}const p=r.value.reviews[o.value];r.value.reviews.splice(o.value,1),r.value.reviews.splice(h,0,p),r.value.reviews.forEach((g,y)=>{g.sort=y}),o.value=null},d=()=>{i.value=!0,He.post("/api/blocks/reviews",r.value).then(h=>{i.value=!1,t.setErrors([]),e({title:"   ",type:"success"}),r.value=h.data.data;const f=document.getElementById("preview-iframe");f&&f.contentWindow.location.reload()}).catch(h=>{console.error("Error saving reviews:",h.response?.data?.errors||h.message),i.value=!1,h.response&&t.setErrors(h.response.data.errors),e({title:"  ",type:"error"})})};return(h,f)=>{const p=we("UiToggle"),g=we("UiInput"),y=we("UiField"),k=we("UiTextarea");return O(),M("div",cfe,[s.value?(O(),M("div",ufe,[...f[2]||(f[2]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",dfe,[m("div",hfe,[f[7]||(f[7]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" fill="none" class="size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path opacity="0.5" d="M9.99088 16.5L9.01504 16.9741C7.0341 17.5217 6.04363 17.7955 5.50972 17.2192C4.97582 16.6429 5.25206 15.5982 5.80455 13.5087L5.94749 12.9682C6.10449 12.3744 6.18299 12.0775 6.14352 11.7831C6.10404 11.4887 5.95106 11.2301 5.6451 10.713L5.36655 10.2421C4.28985 8.4221 3.75151 7.51211 4.11106 6.78804C4.4706 6.06397 5.48992 6.00535 7.52857 5.88812L8.05599 5.85779C8.63531 5.82448 8.92497 5.80782 9.17756 5.67305C9.43014 5.53828 9.61705 5.30066 9.99088 4.82542L10.3312 4.39274C11.6467 2.72034 12.3045 1.88413 13.0606 2.01293C13.8167 2.14173 14.1705 3.15023 14.8779 5.16723L15.0609 5.68905C15.262 6.26222 15.3625 6.5488 15.5581 6.75991C15.7537 6.97102 16.0222 7.08275 16.5592 7.30622L17.048 7.50967C18.9378 8.29605 19.8826 8.68925 19.9904 9.49292C20.0823 10.1786 19.513 10.7756 18.3493 11.7831" stroke="#1C274C" stroke-width="1.5"></path> <path d="M15.2516 10.689C14.265 9.50847 13.7716 8.91821 13.2045 9.00913C12.6375 9.10004 12.3722 9.81193 11.8416 11.2357L11.7043 11.604C11.5535 12.0086 11.4781 12.2109 11.3314 12.3599C11.1848 12.509 10.9834 12.5878 10.5806 12.7456L10.214 12.8892C8.79667 13.4443 8.08803 13.7218 8.00721 14.2891C7.92639 14.8564 8.52692 15.3378 9.72797 16.3004L10.0387 16.5495C10.38 16.8231 10.5507 16.9599 10.6494 17.1471C10.7482 17.3343 10.7639 17.5508 10.7954 17.9837L10.824 18.3779C10.9347 19.9015 10.9901 20.6633 11.5072 20.923C12.0244 21.1827 12.6608 20.7683 13.9337 19.9395L14.263 19.7251C14.6247 19.4896 14.8056 19.3718 15.0133 19.3385C15.2211 19.3052 15.4322 19.3601 15.8543 19.47L16.2387 19.57C17.7244 19.9565 18.4673 20.1498 18.8677 19.743C19.2681 19.3362 19.061 18.5987 18.6466 17.1238L18.5394 16.7422C18.4216 16.3231 18.3628 16.1135 18.3924 15.9057C18.422 15.6979 18.5367 15.5154 18.7662 15.1503L18.9751 14.818C19.7826 13.5332 20.1864 12.8909 19.9167 12.3798C19.647 11.8687 18.8826 11.8273 17.3536 11.7446L16.958 11.7231C16.5235 11.6996 16.3063 11.6879 16.1168 11.5927C15.9274 11.4976 15.7872 11.3299 15.5068 10.9944L15.2516 10.689Z" stroke="#1C274C" stroke-width="1.5"></path></g></svg>  </h2></div>',1)),V(p,{name:"active",label:" ",modelValue:r.value.active,"onUpdate:modelValue":f[0]||(f[0]=v=>r.value.active=v)},null,8,["modelValue"]),r.value.active?(O(),M("section",ffe,[f[6]||(f[6]=m("div",{class:"divider text-xs"}," ",-1)),r.value.reviews.length===0?(O(),M("div",pfe,[...f[3]||(f[3]=[m("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1),m("p",{class:"text-lg font-medium mb-2"},"   ",-1),m("p",{class:"text-sm text-gray-400"},"     ",-1)])])):(O(),M("div",mfe,[(O(!0),M(Me,null,jt(r.value.reviews,(v,b)=>(O(),M("div",{key:v.id||b,class:"bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-colors transition-all",draggable:"true",onDragstart:w=>c(b,w),onDragover:f[1]||(f[1]=Gt(()=>{},["prevent"])),onDrop:w=>u(b,w)},[m("div",bfe,[m("span",vfe," #"+te(b+1),1),m("div",wfe,[m("span",_fe,"#"+te(b+1),1),m("button",{onClick:w=>l(b),class:"btn btn-xs btn-soft btn-error"},[...f[4]||(f[4]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,yfe)])]),V(p,{name:`reviews.${b}.active`,label:" ",modelValue:v.active,"onUpdate:modelValue":w=>v.active=w},null,8,["name","modelValue","onUpdate:modelValue"]),v.active?(O(),M("div",{key:0,id:`review-panel-${b}`,"XXv-show":"!collapsed[index]",class:"mt-1 grid grid-cols-1 gap-1"},[V(g,{name:`reviews.${b}.client_name`,label:" ",modelValue:v.client_name,"onUpdate:modelValue":w=>v.client_name=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(g,{name:`reviews.${b}.client_email`,label:" ",modelValue:v.client_email,"onUpdate:modelValue":w=>v.client_email=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(g,{name:`reviews.${b}.client_phone`,label:" ",modelValue:v.client_phone,"onUpdate:modelValue":w=>v.client_phone=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(y,{label:"",name:`reviews.${b}.score`},{default:Le(()=>[m("div",Cfe,[(O(),M(Me,null,jt(5,w=>m("button",{key:w,onClick:C=>v.score=w,class:rt(["text-2xl transition-colors",w<=v.score?"text-yellow-400":"text-gray-300"])},"  ",10,Efe)),64)),m("span",xfe,te(v.score)+"/5",1)])]),_:2},1032,["name"]),V(k,{name:`reviews.${b}.review_text`,label:" ",modelValue:v.review_text,"onUpdate:modelValue":w=>v.review_text=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"])],8,kfe)):ae("",!0)],40,gfe))),128))])),m("button",{onClick:a,class:"btn btn-primary btn-outline w-full mt-2"},[...f[5]||(f[5]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",Tfe,[m("button",{onClick:d,class:"btn btn-primary",disabled:i.value},[i.value?(O(),M("span",Afe)):(O(),M("span",Ife," "))],8,Sfe)])])]))])}}},Ofe={class:""},Mfe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},Rfe={key:1},Bfe={class:"flex flex-col gap-1"},Lfe={key:0,class:"flex flex-col gap-1"},Nfe={class:"grid grid-cols-1 gap-1"},Vfe={key:0,class:"text-center py-8 text-gray-500"},Dfe={key:1,class:"space-y-3 mt-5"},Ffe=["onDragstart","onDrop"],$fe={class:"flex items-center justify-between mb-3"},Ufe={class:"flex items-center gap-3"},Hfe={class:"text-sm font-medium text-gray-600"},jfe={hidden:"",class:"flex items-center gap-2"},zfe=["onUpdate:modelValue"],Wfe=["onClick"],qfe={class:"grid grid-cols-1 gap-1"},Gfe={class:"flex items-center justify-end w-full pt-2"},Kfe=["disabled"],Xfe={key:0},Zfe={key:1,class:"loading loading-spinner loading-xs"},Jfe={__name:"Portfolio",setup(n){const e=cn(),t=X({id:null,active:!0,title:"",subtitle:"",items:[]}),i=X(!1),s=X(!1),o=X(null),r=X(0);Ct(()=>{i.value=!0,He.get("/api/blocks/portfolio").then(h=>{t.value=h.data.data,i.value=!1}).catch(h=>{console.error(h),i.value=!1})});const a=()=>{t.value.items.push({id:null,name:"",image:"",image_url:"",caption:"",active:!0,sort:t.value.items.length})},l=h=>{t.value.items.splice(h,1)},c=(h,f)=>{o.value=h,f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/html",f.target.outerHTML)},u=(h,f)=>{if(f.preventDefault(),o.value===null||o.value===h){o.value=null;return}const p=t.value.items[o.value];t.value.items.splice(o.value,1),t.value.items.splice(h,0,p),t.value.items.forEach((g,y)=>{g.sort=y}),o.value=null},d=()=>{s.value=!0,He.post("/api/blocks/portfolio",t.value).then(h=>{s.value=!1,e.setErrors([]),t.value=h.data.data;const f=document.getElementById("preview-iframe");f&&f.contentWindow.location.reload()}).catch(h=>{console.error(h.response.data.errors),s.value=!1,h.response&&e.setErrors(h.response.data.errors)})};return(h,f)=>{const p=we("UiToggle"),g=we("UiInput");return O(),M("div",Ofe,[i.value?(O(),M("div",Mfe,[...f[7]||(f[7]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",Rfe,[m("div",Bfe,[f[14]||(f[14]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-5" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2.38351 13.793C1.93748 10.6294 1.71447 9.04765 2.66232 8.02383C3.61017 7 5.29758 7 8.67239 7H15.3276C18.7024 7 20.3898 7 21.3377 8.02383C22.2855 9.04765 22.0625 10.6294 21.6165 13.793L21.1935 16.793C20.8437 19.2739 20.6689 20.5143 19.7717 21.2572C18.8745 22 17.5512 22 14.9046 22H9.09536C6.44881 22 5.12553 22 4.22834 21.2572C3.33115 20.5143 3.15626 19.2739 2.80648 16.793L2.38351 13.793Z" stroke="#1C274C" stroke-width="1.5"></path> <path opacity="0.5" d="M19.5617 7C19.7904 5.69523 18.7863 4.5 17.4617 4.5H6.53788C5.21323 4.5 4.20922 5.69523 4.43784 7M17.4999 4.5C17.5283 4.24092 17.5425 4.11135 17.5427 4.00435C17.545 2.98072 16.7739 2.12064 15.7561 2.01142C15.6497 2 15.5194 2 15.2588 2H8.74099C8.48035 2 8.35002 2 8.24362 2.01142C7.22584 2.12064 6.45481 2.98072 6.45704 4.00434C6.45727 4.11135 6.47146 4.2409 6.49983 4.5" stroke="#1C274C" stroke-width="1.5"></path> <circle opacity="0.5" cx="16.5" cy="11.5" r="1.5" stroke="#1C274C" stroke-width="1.5"></circle> <path opacity="0.5" d="M19.9999 20L17.1157 17.8514C16.1856 17.1586 14.8004 17.0896 13.7766 17.6851L13.5098 17.8403C12.7984 18.2542 11.8304 18.1848 11.2156 17.6758L7.37738 14.4989C6.6113 13.8648 5.38245 13.8309 4.5671 14.4214L3.24316 15.3803" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></g></svg>  </h2></div>',1)),V(p,{name:"active",label:" ",modelValue:t.value.active,"onUpdate:modelValue":f[0]||(f[0]=y=>t.value.active=y)},null,8,["modelValue"]),t.value.active?(O(),M("section",Lfe,[m("div",Nfe,[V(g,{name:"title",label:" ",modelValue:t.value.title,"onUpdate:modelValue":f[1]||(f[1]=y=>t.value.title=y),placeholder:":  "},null,8,["modelValue"]),V(g,{name:"subtitle",label:" ",modelValue:t.value.subtitle,"onUpdate:modelValue":f[2]||(f[2]=y=>t.value.subtitle=y),placeholder:":     "},null,8,["modelValue"])]),f[13]||(f[13]=m("div",{class:"divider text-xs"},"  ",-1)),t.value.items.length===0?(O(),M("div",Vfe,[...f[8]||(f[8]=[m("svg",{class:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7h18M3 12h18M3 17h18"})],-1),m("p",null,"    ",-1),m("p",{class:"text-sm"},'  " "   ',-1)])])):(O(),M("div",Dfe,[(O(!0),M(Me,null,jt(t.value.items,(y,k)=>(O(),M("div",{key:y.id||k,draggable:!0,onDragstart:v=>c(k,v),onDragover:f[5]||(f[5]=Gt(()=>{},["prevent"])),onDragenter:f[6]||(f[6]=Gt(()=>{},["prevent"])),onDrop:v=>u(k,v),class:rt(["bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-all",{"opacity-50":o.value===k}])},[m("div",$fe,[m("div",Ufe,[f[10]||(f[10]=m("div",{hidden:"",class:"cursor-move text-gray-400 hover:text-gray-600"},[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})])],-1)),m("span",Hfe," #"+te(k+1),1),m("div",jfe,[m("label",{class:rt(["toggle toggle-lg",{"toggle-primary":y.active,"toggle-secondary":!y.active}])},[vt(m("input",{type:"checkbox","onUpdate:modelValue":v=>y.active=v},null,8,zfe),[[eu,y.active]]),f[9]||(f[9]=Jt('<svg aria-label="enabled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg><svg aria-label="disabled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g stroke-linejoin="round" stroke-linecap="round" stroke-width="4" fill="none" stroke="currentColor"><path d="M20 6 9 17l-5-5"></path></g></svg>',2))],2)])]),m("button",{onClick:v=>l(k),class:"btn btn-sm btn-outline text-red-600 hover:bg-red-50"},[...f[11]||(f[11]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Wfe)]),m("div",qfe,[V(g,{name:`items.${k}.name`,label:"",modelValue:y.name,"onUpdate:modelValue":v=>y.name=v,placeholder:"   "},null,8,["name","modelValue","onUpdate:modelValue"]),V(g,{name:`items.${k}.caption`,label:" ()",modelValue:y.caption,"onUpdate:modelValue":v=>y.caption=v,placeholder:"   ()"},null,8,["name","modelValue","onUpdate:modelValue"]),V(sp,{modelValue:y.image,"onUpdate:modelValue":v=>y.image=v,name:`items.${k}.image`,modelId:t.value.id,mediaCollection:"portfolio",preview:y.image_url||"",onUploadStart:f[3]||(f[3]=v=>r.value++),onUploadEnd:f[4]||(f[4]=v=>r.value--)},null,8,["modelValue","onUpdate:modelValue","name","modelId","preview"])])],42,Ffe))),128))])),m("button",{onClick:a,class:"btn btn-primary btn-outline w-full mt-2"},[...f[12]||(f[12]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",Gfe,[m("button",{onClick:d,class:"btn btn-primary",disabled:s.value||r.value>0},[!s.value&&r.value===0?(O(),M("span",Xfe,"")):(O(),M("span",Zfe))],8,Kfe)])])]))])}}},Yfe={class:""},Qfe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},epe={key:1},tpe={class:"flex flex-col gap-1"},npe={key:0,class:"flex flex-col gap-1"},ipe={class:"grid grid-cols-1 gap-1"},spe={key:0,class:"text-center py-8 text-gray-500"},ope={key:1,class:"space-y-4 mt-5"},rpe=["onDragstart","onDrop"],ape={class:"flex items-center justify-between mb-3"},lpe={class:"text-sm font-medium text-gray-600"},cpe={class:"flex items-center gap-2"},upe={class:"text-xs badge badge-ghost"},dpe=["onClick"],hpe=["id"],fpe={class:"flex justify-end w-full pt-6"},ppe=["disabled"],mpe={key:0},gpe={key:1,class:"loading loading-spinner loading-sm"},bpe={__name:"Team",setup(n){const{notify:e}=pl(),t=cn(),i=X(!1),s=X(!1),o=X(null),r=X(0),a=X({id:null,active:!1,title:"",subtitle:"",members:[]});Ct(()=>{s.value=!0,He.get("/api/blocks/team").then(f=>{a.value=f.data.data,s.value=!1}).catch(f=>{console.error(f),s.value=!1})});const l=()=>{a.value.members.push({id:null,name:"",job_title:"",bio:"",image:"",image_url:"",active:!0,sort:a.value.members.length})},c=f=>{a.value.members.splice(f,1)},u=(f,p)=>{o.value=f,p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("text/html",p.target.outerHTML)},d=(f,p)=>{if(p.preventDefault(),o.value===null||o.value===f){o.value=null;return}const g=a.value.members[o.value];a.value.members.splice(o.value,1),a.value.members.splice(f,0,g),a.value.members.forEach((y,k)=>{y.sort=k}),o.value=null},h=()=>{i.value=!0,He.post("/api/blocks/team",a.value).then(f=>{i.value=!1,t.setErrors([]),e({title:"   ",type:"success"}),a.value=f.data.data;const p=document.getElementById("preview-iframe");p&&p.contentWindow.location.reload()}).catch(f=>{console.error("Error saving team:",f.response?.data?.errors||f.message),i.value=!1,f.response&&t.setErrors(f.response.data.errors),e({title:"  ",type:"error"})})};return(f,p)=>{const g=we("UiToggle"),y=we("UiInput"),k=we("UiTextarea");return O(),M("div",Yfe,[s.value?(O(),M("div",Qfe,[...p[6]||(p[6]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",epe,[m("div",tpe,[p[11]||(p[11]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M20 21.5L19.3505 15.9795C19.1506 14.2804 17.7107 13 16 13H8C6.28928 13 4.84936 14.2804 4.64948 15.9795L4 21.5" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path> <path opacity="0.5" d="M8 13V18C8 19.8856 8 20.8284 8.58579 21.4142C9.17157 22 10.1144 22 12 22C13.8856 22 14.8284 22 15.4142 21.4142C16 20.8284 16 19.8856 16 18V13" stroke="#1C274C" stroke-width="1.5"></path> <circle cx="12" cy="6" r="4" stroke="#1C274C" stroke-width="1.5"></circle></g></svg>  </h2></div>',1)),V(g,{name:"active",label:" ",modelValue:a.value.active,"onUpdate:modelValue":p[0]||(p[0]=v=>a.value.active=v)},null,8,["modelValue"]),a.value.active?(O(),M("section",npe,[m("div",ipe,[V(y,{name:"title",label:" ",modelValue:a.value.title,"onUpdate:modelValue":p[1]||(p[1]=v=>a.value.title=v),placeholder:": "},null,8,["modelValue"]),V(y,{name:"subtitle",label:" ",modelValue:a.value.subtitle,"onUpdate:modelValue":p[2]||(p[2]=v=>a.value.subtitle=v),placeholder:":     "},null,8,["modelValue"])]),p[10]||(p[10]=m("div",{class:"divider text-xs"},"  ",-1)),a.value.members.length===0?(O(),M("div",spe,[...p[7]||(p[7]=[m("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),m("p",{class:"text-lg font-medium mb-2"},"    ",-1),m("p",{class:"text-sm text-gray-400"},"     ",-1)])])):(O(),M("div",ope,[(O(!0),M(Me,null,jt(a.value.members,(v,b)=>(O(),M("div",{key:v.id||b,class:"bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-all",draggable:"true",onDragstart:w=>u(b,w),onDragover:p[5]||(p[5]=Gt(()=>{},["prevent"])),onDrop:w=>d(b,w)},[m("div",ape,[m("span",lpe," #"+te(b+1),1),m("div",cpe,[m("span",upe,"#"+te(b+1),1),m("button",{onClick:w=>c(b),class:"btn btn-xs btn-soft btn-error"},[...p[8]||(p[8]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,dpe)])]),V(g,{name:`members.${b}.active`,label:" ",modelValue:v.active,"onUpdate:modelValue":w=>v.active=w},null,8,["name","modelValue","onUpdate:modelValue"]),v.active?(O(),M("div",{key:0,id:`member-panel-${b}`,class:"mt-1 grid grid-cols-1 gap-1"},[V(y,{name:`members.${b}.name`,label:"",modelValue:v.name,"onUpdate:modelValue":w=>v.name=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(y,{name:`members.${b}.job_title`,label:" ",modelValue:v.job_title,"onUpdate:modelValue":w=>v.job_title=w,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(k,{name:`members.${b}.bio`,label:" ",modelValue:v.bio,"onUpdate:modelValue":w=>v.bio=w,placeholder:"   "},null,8,["name","modelValue","onUpdate:modelValue"]),V(sp,{modelValue:v.image,"onUpdate:modelValue":w=>v.image=w,name:`members.${b}.image`,modelId:a.value.id,mediaCollection:"team",preview:v.image_url||"",onUploadStart:p[3]||(p[3]=w=>r.value++),onUploadEnd:p[4]||(p[4]=w=>r.value--)},null,8,["modelValue","onUpdate:modelValue","name","modelId","preview"])],8,hpe)):ae("",!0)],40,rpe))),128))])),m("button",{onClick:l,class:"btn btn-primary btn-outline w-full mt-2"},[...p[9]||(p[9]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",fpe,[m("button",{onClick:h,class:"btn btn-primary",disabled:i.value||r.value>0},[!i.value&&r.value===0?(O(),M("span",mpe," ")):(O(),M("span",gpe))],8,ppe)])])]))])}}},vpe={class:""},wpe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},_pe={key:1},ype={class:"flex flex-col gap-1"},kpe={key:0,class:"flex flex-col gap-1"},Cpe={class:"grid grid-cols-1 gap-1"},Epe={key:0,class:"text-center py-8 text-gray-500"},xpe={key:1,class:"space-y-4 mt-5"},Tpe=["onDragstart","onDrop"],Spe={class:"flex items-center justify-between mb-3"},Ipe={class:"text-sm font-medium text-gray-600"},Ape={class:"flex items-center gap-2"},Ppe={class:"text-xs badge badge-ghost"},Ope=["onClick"],Mpe=["id"],Rpe={class:"mt-3 border-t pt-3"},Bpe={class:"flex items-center justify-between mb-2"},Lpe=["onClick"],Npe={key:0,class:"space-y-2 mt-2"},Vpe={class:"flex-1 grid grid-cols-2 gap-2"},Dpe=["onClick"],Fpe={key:1,class:"text-sm text-gray-400 text-center py-2"},$pe={class:"flex justify-end w-full pt-6"},Upe=["disabled"],Hpe={key:0},jpe={key:1,class:"loading loading-spinner loading-sm"},zpe={__name:"Services",setup(n){const{notify:e}=pl(),t=cn(),i=X(!1),s=X(!1),o=X(null),r=X(0),a=X({id:null,active:!1,title:"",subtitle:"",services:[]});Ct(()=>{s.value=!0,He.get("/api/blocks/services").then(g=>{a.value=g.data.data,a.value.services&&a.value.services.forEach(y=>{(!y.addons||!Array.isArray(y.addons))&&(y.addons=[]),y.icon===void 0&&(y.icon=null)}),s.value=!1}).catch(g=>{console.error(g),s.value=!1})});const l=()=>{a.value.services.push({id:null,name:"",subtitle:"",detail:"",price:null,icon:null,image:null,image_url:"",active:!0,sort:a.value.services.length,addons:[]})},c=g=>{a.value.services.splice(g,1)},u=g=>{a.value.services[g].addons||(a.value.services[g].addons=[]),a.value.services[g].addons.push({id:null,name:"",price:0,active:!0,sort:a.value.services[g].addons.length})},d=(g,y)=>{a.value.services[g].addons.splice(y,1)},h=(g,y)=>{o.value=g,y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/html",y.target.outerHTML)},f=(g,y)=>{if(y.preventDefault(),o.value===null||o.value===g){o.value=null;return}const k=a.value.services[o.value];a.value.services.splice(o.value,1),a.value.services.splice(g,0,k),a.value.services.forEach((v,b)=>{v.sort=b}),o.value=null},p=()=>{i.value=!0,He.post("/api/blocks/services",a.value).then(g=>{i.value=!1,t.setErrors([]),e({title:"   ",type:"success"}),a.value=g.data.data,a.value.services&&a.value.services.forEach(k=>{(!k.addons||!Array.isArray(k.addons))&&(k.addons=[]),k.icon===void 0&&(k.icon=null)});const y=document.getElementById("preview-iframe");y&&y.contentWindow.location.reload()}).catch(g=>{console.error("Error saving services:",g.response?.data?.errors||g.message),i.value=!1,g.response&&t.setErrors(g.response.data.errors),e({title:"  ",type:"error"})})};return(g,y)=>{const k=we("UiToggle"),v=we("UiInput"),b=we("UiTextarea");return O(),M("div",vpe,[s.value?(O(),M("div",wpe,[...y[6]||(y[6]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",_pe,[m("div",ype,[y[14]||(y[14]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" class="size-6" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M2 14C2 10.2288 2 8.34315 3.17157 7.17157C4.34315 6 6.22876 6 10 6H14C17.7712 6 19.6569 6 20.8284 7.17157C22 8.34315 22 10.2288 22 14C22 17.7712 22 19.6569 20.8284 20.8284C19.6569 22 17.7712 22 14 22H10C6.22876 22 4.34315 22 3.17157 20.8284C2 19.6569 2 17.7712 2 14Z" stroke="#1C274C" stroke-width="1.5"></path> <path opacity="0.5" d="M16 6C16 4.11438 16 3.17157 15.4142 2.58579C14.8284 2 13.8856 2 12 2C10.1144 2 9.17157 2 8.58579 2.58579C8 3.17157 8 4.11438 8 6" stroke="#1C274C" stroke-width="1.5"></path> <path opacity="0.5" d="M12 17.3333C13.1046 17.3333 14 16.5871 14 15.6667C14 14.7462 13.1046 14 12 14C10.8954 14 10 13.2538 10 12.3333C10 11.4129 10.8954 10.6667 12 10.6667M12 17.3333C10.8954 17.3333 10 16.5871 10 15.6667M12 17.3333V18M12 10V10.6667M12 10.6667C13.1046 10.6667 14 11.4129 14 12.3333" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path></g></svg>  </h2></div>',1)),V(k,{name:"active",label:" ",modelValue:a.value.active,"onUpdate:modelValue":y[0]||(y[0]=w=>a.value.active=w)},null,8,["modelValue"]),a.value.active?(O(),M("section",kpe,[m("div",Cpe,[V(v,{name:"title",label:" ",modelValue:a.value.title,"onUpdate:modelValue":y[1]||(y[1]=w=>a.value.title=w),placeholder:": "},null,8,["modelValue"]),V(v,{name:"subtitle",label:" ",modelValue:a.value.subtitle,"onUpdate:modelValue":y[2]||(y[2]=w=>a.value.subtitle=w),placeholder:":    "},null,8,["modelValue"])]),y[13]||(y[13]=m("div",{class:"divider text-xs"}," ",-1)),a.value.services.length===0?(O(),M("div",Epe,[...y[7]||(y[7]=[m("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1),m("p",{class:"text-lg font-medium mb-2"},"   ",-1),m("p",{class:"text-sm text-gray-400"},"    ",-1)])])):(O(),M("div",xpe,[(O(!0),M(Me,null,jt(a.value.services,(w,C)=>(O(),M("div",{key:w.id||C,class:"bg-base-50 rounded-lg p-2 border-2 border-base-200 cursor-move hover:bg-base-100 transition-all",draggable:"true",onDragstart:E=>h(C,E),onDragover:y[5]||(y[5]=Gt(()=>{},["prevent"])),onDrop:E=>f(C,E)},[m("div",Spe,[m("span",Ipe," #"+te(C+1),1),m("div",Ape,[m("span",Ppe,"#"+te(C+1),1),m("button",{onClick:E=>c(C),class:"btn btn-xs btn-soft btn-error"},[...y[8]||(y[8]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ope)])]),V(k,{name:`services.${C}.active`,label:" ",modelValue:w.active,"onUpdate:modelValue":E=>w.active=E},null,8,["name","modelValue","onUpdate:modelValue"]),w.active?(O(),M("div",{key:0,id:`service-panel-${C}`,class:"mt-1 grid grid-cols-1 gap-1"},[V(v,{name:`services.${C}.name`,label:" ",modelValue:w.name,"onUpdate:modelValue":E=>w.name=E,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(v,{name:`services.${C}.subtitle`,label:" ",modelValue:w.subtitle,"onUpdate:modelValue":E=>w.subtitle=E,placeholder:"  "},null,8,["name","modelValue","onUpdate:modelValue"]),V(b,{name:`services.${C}.detail`,label:" ",modelValue:w.detail,"onUpdate:modelValue":E=>w.detail=E,placeholder:" "},null,8,["name","modelValue","onUpdate:modelValue"]),V(v,{name:`services.${C}.price`,label:"",modelValue:w.price,"onUpdate:modelValue":E=>w.price=E,type:"number",step:"0.01",min:"0",placeholder:"0.00"},null,8,["name","modelValue","onUpdate:modelValue"]),V(v,{name:`services.${C}.icon`,label:"",modelValue:w.icon,"onUpdate:modelValue":E=>w.icon=E,placeholder:":     "},null,8,["name","modelValue","onUpdate:modelValue"]),V(sp,{modelValue:w.image,"onUpdate:modelValue":E=>w.image=E,name:`services.${C}.image`,modelId:a.value.id,mediaCollection:"services",preview:w.image_url||"",onUploadStart:y[3]||(y[3]=E=>r.value++),onUploadEnd:y[4]||(y[4]=E=>r.value--)},null,8,["modelValue","onUpdate:modelValue","name","modelId","preview"]),m("div",Rpe,[m("div",Bpe,[y[10]||(y[10]=m("label",{class:"text-sm font-medium text-gray-700"},"",-1)),m("button",{onClick:E=>u(C),type:"button",class:"btn btn-xs btn-primary btn-outline"},[...y[9]||(y[9]=[m("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("  ",-1)])],8,Lpe)]),w.addons&&w.addons.length>0?(O(),M("div",Npe,[(O(!0),M(Me,null,jt(w.addons,(E,I)=>(O(),M("div",{key:E.id||I,class:"bg-base-100 rounded p-2 border border-base-200 flex items-center gap-2"},[m("div",Vpe,[V(v,{name:`services.${C}.addons.${I}.name`,label:"",modelValue:E.name,"onUpdate:modelValue":x=>E.name=x,placeholder:" ",class:"text-sm"},null,8,["name","modelValue","onUpdate:modelValue"]),V(v,{name:`services.${C}.addons.${I}.price`,label:"",modelValue:E.price,"onUpdate:modelValue":x=>E.price=x,type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"text-sm"},null,8,["name","modelValue","onUpdate:modelValue"])]),m("button",{onClick:x=>d(C,I),type:"button",class:"btn btn-xs btn-soft btn-error"},[...y[11]||(y[11]=[m("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Dpe)]))),128))])):(O(),M("div",Fpe,"    "))])],8,Mpe)):ae("",!0)],40,Tpe))),128))])),m("button",{onClick:l,class:"btn btn-primary btn-outline w-full mt-2"},[...y[12]||(y[12]=[m("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),be("   ",-1)])])])):ae("",!0),m("div",$pe,[m("button",{onClick:p,class:"btn btn-primary",disabled:i.value||r.value>0},[!i.value&&r.value===0?(O(),M("span",Hpe," ")):(O(),M("span",jpe))],8,Upe)])])]))])}}},Wpe={class:""},qpe={key:0,class:"text-center flex justify-center items-center w-full h-full absolute top-0 left-0"},Gpe={key:1},Kpe={class:"flex flex-col gap-1"},Xpe={key:0,class:"flex flex-col gap-1"},Zpe={class:"flex justify-end w-full"},Jpe=["disabled"],Ype={key:0},Qpe={key:1,class:"loading loading-spinner loading-xs"},eme={__name:"Agreement",setup(n){const{notify:e}=pl(),t=cn(),i=X({agreement_title:"",agreement_content:"",active:!0}),s=X(!1),o=X(!1);Ct(()=>{s.value=!0,He.get("/api/blocks/agreement").then(a=>{i.value=a.data.data,s.value=!1}).catch(a=>{console.error(a),s.value=!1})});const r=()=>{o.value=!0,He.post("/api/blocks/agreement",i.value).then(a=>{o.value=!1,t.setErrors([]);const l=document.getElementById("preview-iframe");l&&l.contentWindow.location.reload(),e({type:"success",text:"   "})}).catch(a=>{console.error(a.response.data.errors),o.value=!1,a.response&&(t.setErrors(a.response.data.errors),e({type:"error",text:"         "}))})};return(a,l)=>{const c=we("UiToggle"),u=we("UiInput"),d=we("UiTextarea");return O(),M("div",Wpe,[s.value?(O(),M("div",qpe,[...l[3]||(l[3]=[m("span",{class:"loading loading-spinner loading-lg opacity-75"},null,-1)])])):(O(),M("div",Gpe,[m("div",Kpe,[l[4]||(l[4]=Jt('<div class="flex items-center justify-between border-b-2 border-gray-200 pb-3 border-dotted"><h2 class="text-sm font-semibold text-gray-800 flex items-center gap-x-2"><svg viewBox="0 0 24 24" fill="none" class="size-6" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path opacity="0.5" d="M3 10.4167C3 7.21907 3 5.62028 3.37752 5.08241C3.75503 4.54454 5.25832 4.02996 8.26491 3.00079L8.83772 2.80472C10.405 2.26824 11.1886 2 12 2C12.8114 2 13.595 2.26824 15.1623 2.80472L15.7351 3.00079C18.7417 4.02996 20.245 4.54454 20.6225 5.08241C21 5.62028 21 7.21907 21 10.4167C21 10.8996 21 11.4234 21 11.9914C21 17.6294 16.761 20.3655 14.1014 21.5273C13.38 21.8424 13.0193 22 12 22C10.9807 22 10.62 21.8424 9.89856 21.5273C7.23896 20.3655 3 17.6294 3 11.9914C3 11.4234 3 10.8996 3 10.4167Z" stroke="#1C274C" stroke-width="1.5"></path> <path d="M11.5 16H12.5C13.0523 16 13.5 15.5523 13.5 15V13.5987C14.3967 13.0799 15 12.1104 15 11C15 9.34315 13.6569 8 12 8C10.3431 8 9 9.34315 9 11C9 12.1104 9.6033 13.0799 10.5 13.5987V15C10.5 15.5523 10.9477 16 11.5 16Z" stroke="#1C274C" stroke-width="1.5" stroke-linejoin="round"></path></g></svg>    </h2></div>',1)),V(c,{name:"active",label:" ",modelValue:i.value.active,"onUpdate:modelValue":l[0]||(l[0]=h=>i.value.active=h)},null,8,["modelValue"]),i.value.active?(O(),M("section",Xpe,[V(u,{name:"agreement_title",label:" ",modelValue:i.value.agreement_title,"onUpdate:modelValue":l[1]||(l[1]=h=>i.value.agreement_title=h),placeholder:":  "},null,8,["modelValue"]),V(d,{name:"agreement_content",label:" ",modelValue:i.value.agreement_content,"onUpdate:modelValue":l[2]||(l[2]=h=>i.value.agreement_content=h),placeholder:"    ..."},null,8,["modelValue"])])):ae("",!0),m("div",Zpe,[m("button",{onClick:r,class:"btn btn-primary",disabled:o.value},[o.value?ae("",!0):(O(),M("span",Ype,"")),o.value?(O(),M("span",Qpe)):ae("",!0)],8,Jpe)])])]))])}}},TP=tae({history:Bre("/dashboard"),routes:[{path:"/",component:pae,children:[{path:"",name:"home",component:sde},{path:"cta",name:"blocks.cta",component:Ode},{path:"links",name:"blocks.links",component:she},{path:"about",name:"blocks.about",component:phe},{path:"features",name:"blocks.features",component:Vhe},{path:"faq",name:"blocks.faq",component:ofe},{path:"reviews",name:"blocks.reviews",component:Pfe},{path:"gallery",name:"blocks.gallery",component:lfe},{path:"portfolio",name:"blocks.portfolio",component:Jfe},{path:"team",name:"blocks.team",component:bpe},{path:"services",name:"blocks.services",component:zpe},{path:"agreement",name:"blocks.agreement",component:eme}]},{path:"/orders",component:Cle,name:"orders"},{path:"/orders/:id",component:Kle,name:"orders.detail"},{path:"/account",component:ece,name:"account"},{path:"/design",component:Bce,name:"design"},{path:"/share",component:Zce,name:"share"},{path:"/settings",component:Vue,name:"settings"}]});TP.beforeEach((n,e,t)=>{const i=Si();document.title=n.meta.title||" ",i.user?t():window.location.reload()});const tme={class:"bg-base-200 min-h-screen relative pb-20"},nme={__name:"Dashboard",setup(n){return(e,t)=>{const i=we("Header"),s=we("Navbar"),o=we("RouterView"),r=we("notifications");return O(),M("div",tme,[V(i),V(s),V(o),V(r,{position:"top right",duration:1e3})])}}};async function SP(n,e={}){const t=e.document||n.resolvedOptions.document;if(!t||!n.dirty)return;const i={shouldRender:!0,tags:[]};if(await n.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return n._domUpdatePromise||(n._domUpdatePromise=new Promise(async s=>{const o=new Map,r=new Promise(f=>{n.resolveTags().then(p=>{f(p.map(g=>{const y=o.get(g._d)||0,k={tag:g,id:(y?`${g._d}:${y}`:g._d)||BC(g),shouldRender:!0};return g._d&&kP(g._d)&&o.set(g._d,y+1),k}))})});let a=n._dom;if(!a){a={title:t.title,elMap:new Map().set("htmlAttrs",t.documentElement).set("bodyAttrs",t.body)};for(const f of["body","head"]){const p=t[f]?.children;for(const g of p){const y=g.tagName.toLowerCase();if(!RC.has(y))continue;const k=CP({tag:y,props:{}},{innerHTML:g.innerHTML,...g.getAttributeNames().reduce((v,b)=>(v[b]=g.getAttribute(b),v),{})||{}});if(k.key=g.getAttribute("data-hid")||void 0,k._d=t1(k)||BC(k),a.elMap.has(k._d)){let v=1,b=k._d;for(;a.elMap.has(b);)b=`${k._d}:${v++}`;a.elMap.set(b,g)}else a.elMap.set(k._d,g)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(f,p,g){const y=`${f}:${p}`;a.sideEffects[y]=g,delete a.pendingSideEffects[y]}function c({id:f,$el:p,tag:g}){const y=g.tag.endsWith("Attrs");a.elMap.set(f,p),y||(g.textContent&&g.textContent!==p.textContent&&(p.textContent=g.textContent),g.innerHTML&&g.innerHTML!==p.innerHTML&&(p.innerHTML=g.innerHTML),l(f,"el",()=>{p?.remove(),a.elMap.delete(f)}));for(const k in g.props){if(!Object.prototype.hasOwnProperty.call(g.props,k))continue;const v=g.props[k];if(k.startsWith("on")&&typeof v=="function"){const w=p?.dataset;if(w&&w[`${k}fired`]){const C=k.slice(0,-5);v.call(p,new Event(C.substring(2)))}p.getAttribute(`data-${k}`)!==""&&((g.tag==="bodyAttrs"?t.defaultView:p).addEventListener(k.substring(2),v.bind(p)),p.setAttribute(`data-${k}`,""));continue}const b=`attr:${k}`;if(k==="class"){if(!v)continue;for(const w of v)y&&l(f,`${b}:${w}`,()=>p.classList.remove(w)),!p.classList.contains(w)&&p.classList.add(w)}else if(k==="style"){if(!v)continue;for(const[w,C]of v)l(f,`${b}:${w}`,()=>{p.style.removeProperty(w)}),p.style.setProperty(w,C)}else v!==!1&&v!==null&&(p.getAttribute(k)!==v&&p.setAttribute(k,v===!0?"":String(v)),y&&l(f,b,()=>p.removeAttribute(k)))}}const u=[],d={bodyClose:void 0,bodyOpen:void 0,head:void 0},h=await r;for(const f of h){const{tag:p,shouldRender:g,id:y}=f;if(g){if(p.tag==="title"){t.title=p.textContent,l("title","",()=>t.title=a.title);continue}f.$el=f.$el||a.elMap.get(y),f.$el?c(f):RC.has(p.tag)&&u.push(f)}}for(const f of u){const p=f.tag.tagPosition||"head";f.$el=t.createElement(f.tag.tag),c(f),d[p]=d[p]||t.createDocumentFragment(),d[p].appendChild(f.$el)}for(const f of h)await n.hooks.callHook("dom:renderTag",f,t,l);d.head&&t.head.appendChild(d.head),d.bodyOpen&&t.body.insertBefore(d.bodyOpen,t.body.firstChild),d.bodyClose&&t.body.appendChild(d.bodyClose);for(const f in a.pendingSideEffects)a.pendingSideEffects[f]();n._dom=a,await n.hooks.callHook("dom:rendered",{renders:h}),s()}).finally(()=>{n._domUpdatePromise=void 0,n.dirty=!1})),n._domUpdatePromise}function ime(n={}){const e=n.domOptions?.render||SP;n.document=n.document||(typeof window<"u"?document:void 0);const t=n.document?.head.querySelector('script[id="unhead:payload"]')?.innerHTML||!1;return Pae({...n,plugins:[...n.plugins||[],{key:"client",hooks:{"entries:updated":e}}],init:[t?JSON.parse(t):!1,...n.init||[]]})}function sme(n,e){let t=0;return()=>{const i=++t;e(()=>{t===i&&n()})}}function ome(n={}){const e=ime({domOptions:{render:sme(()=>SP(e),t=>setTimeout(t,0))},...n});return e.install=Mae(e),e}const Ia=Zd(nme);Ia.use(R8());const rme=ome({titleTemplate:"%s | MySite"}),HC=Object.assign({"./components/Container.vue":T8,"./components/Header.vue":J8,"./components/Navbar.vue":iM,"./components/ThemeOptionsForm.vue":uM});for(const n in HC){const e=n.split("/").pop().split(".")[0];Ia.component(`${e}`,HC[n].default)}const jC=Object.assign({"./components/Ui/Editor-no.vue":yQ,"./components/Ui/Editor.vue":EQ,"./components/Ui/Editorjs.vue":aoe,"./components/Ui/Field.vue":poe,"./components/Ui/Input.vue":boe,"./components/Ui/PickColor.vue":Coe,"./components/Ui/RadioField.vue":Ooe,"./components/Ui/Textarea.vue":Boe,"./components/Ui/Toggle.vue":Noe,"./components/Ui/UploadAvatar.vue":$oe,"./components/Ui/UploadImage.vue":Zoe});for(const n in jC){const e="Ui"+n.split("/").pop().split(".")[0];Ia.component(`${e}`,jC[n].default)}const{setAuth:ame}=Si();ame().then(()=>{Ia.use(rme),Ia.use(Xue),Ia.use(TP).mount("#app")})});export default lme();
//# sourceMappingURL=index-BWLEB7qP.js.map
